//>>built
(function(g,j){var f,a,b=function(){},e=function(a){for(var h in a)return 0;return 1},h={}.toString,k=function(a){return"[object Function]"==h.call(a)},l=function(a){return"[object String]"==h.call(a)},n=function(a){return"[object Array]"==h.call(a)},m=function(a,h){if(a)for(var b=0;b<a.length;)h(a[b++])},q=function(a,h){for(var b in h)a[b]=h[b];return a},s=function(a,h){return q(Error(a),{src:"dojoLoader",info:h})},o=1,u=function(){return"_"+o++},p=function(a,h,b){return Na(a,h,b,0,p)},v=this,w=
v.document,z=w&&w.createElement("DiV"),x=p.has=function(a){return k(A[a])?A[a]=A[a](v,w,z):A[a]},A=x.cache=j.hasCache;x.add=function(a,h,b,e){(void 0===A[a]||e)&&(A[a]=h);return b&&x(a)};for(var B in g.has)x.add(B,g.has[B],0,1);var C=0,I=[],J=0,L=b,U=b,O;p.isXdUrl=b;p.initSyncLoader=function(a,h,b){J||(J=a,L=h,U=b);return{sync:"sync",requested:1,arrived:2,nonmodule:3,executing:4,executed:5,syncExecStack:I,modules:Q,execQ:Y,getModule:aa,injectModule:ra,setArrived:ea,signal:M,finishExec:ha,execModule:ia,
dojoRequirePlugin:J,getLegacyMode:function(){return C},guardCheckComplete:ja}};var V=location.protocol,$=location.host;p.isXdUrl=function(a){if(/^\./.test(a))return!1;return/^\/\//.test(a)?!0:(a=a.match(/^([^\/\:]+\:)\/+([^\/]+)/))&&(a[1]!=V||$&&a[2]!=$)};x.add("dojo-force-activex-xhr",!w.addEventListener&&"file:"==window.location.protocol);x.add("native-xhr","undefined"!=typeof XMLHttpRequest);if(x("native-xhr")&&!x("dojo-force-activex-xhr"))O=function(){return new XMLHttpRequest};else{var G=["Msxml2.XMLHTTP",
"Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],F;for(f=0;3>f;)try{if(F=G[f++],new ActiveXObject(F))break}catch(D){}O=function(){return new ActiveXObject(F)}}p.getXhr=O;x.add("dojo-gettext-api",1);p.getText=function(a,h,b){var e=O();e.open("GET",sa(a),!1);e.send(null);if(200==e.status||!location.host&&!e.status)b&&b(e.responseText,h);else throw s("xhrFailed",e.status);return e.responseText};var H=new Function("return eval(arguments[0]);");p.eval=function(a,h){return H(a+"\r\n////@ sourceURL="+h)};var N=
{},M=p.signal=function(a,h){var b=N[a];m(b&&b.slice(0),function(a){a.apply(null,n(h)?h:[h])})},E=p.on=function(a,h){var b=N[a]||(N[a]=[]);b.push(h);return{remove:function(){for(var a=0;a<b.length;a++)if(b[a]===h){b.splice(a,1);break}}}},K=[],S={},P=[],R={},W=p.map={},T=[],Q={},ka="",X={},fa={},ba={},ta=function(a){var h,b,e,k;for(h in fa)b=fa[h],(e=h.match(/^url\:(.+)/))?X["url:"+Oa(e[1],a)]=b:"*now"==h?k=b:"*noref"!=h&&(e=la(h,a),X[e.mid]=X["url:"+e.url]=b);k&&k(Da(a));fa={}},Pa=function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,
function(a){return"\\"+a})},Ea=function(a,h){h.splice(0,h.length);for(var b in a)h.push([b,a[b],RegExp("^"+Pa(b)+"(/|$)"),b.length]);h.sort(function(a,h){return h[3]-a[3]});return h},Qa=function(a){var h=a.name;h||(h=a,a={name:h});a=q({main:"main"},a);a.location=a.location?a.location:h;if(a.packageMap)W[h]=a.packageMap;if(!a.main.indexOf("./"))a.main=a.main.substring(2);R[h]=a},Ra=[],ma=function(h,b,e){for(var k in h){if("waitSeconds"==k)p.waitms=1E3*(h[k]||0);"cacheBust"==k&&(ka=h[k]?l(h[k])?h[k]:
(new Date).getTime()+"":"");if("baseUrl"==k||"combo"==k)p[k]=h[k];if("async"==k){var f=h[k];p.legacyMode=C=l(f)&&/sync|legacyAsync/.test(f)?f:!f?"sync":!1;p.async=!C}h[k]!==A&&(p.rawConfig[k]=h[k],"has"!=k&&x.add("config-"+k,h[k],0,b))}if(!p.baseUrl)p.baseUrl="./";/\/$/.test(p.baseUrl)||(p.baseUrl+="/");for(k in h.has)x.add(k,h.has[k],0,b);m(h.packages,Qa);for(a in h.packagePaths)m(h.packagePaths[a],function(h){var b=a+"/"+h;l(h)&&(h={name:h});h.location=b;Qa(h)});Ea(q(W,h.map),T);m(T,function(a){a[1]=
Ea(a[1],[]);if("*"==a[0])T.star=a});Ea(q(S,h.paths),P);m(h.aliases,function(a){l(a[0])&&(a[0]=RegExp("^"+Pa(a[0])+"$"));K.push(a)});if(b)Ra.push({config:h.config});else for(k in h.config)b=aa(k,e),b.config=q(b.config||{},h.config[k]);if(h.cache)ta(),fa=h.cache,h.cache["*noref"]&&ta();M("config",[h,p.rawConfig])};x("dojo-cdn");var Sa=w.getElementsByTagName("script");f=0;for(var ua,da,va,na;f<Sa.length;)if(ua=Sa[f++],(va=ua.getAttribute("src"))&&(na=va.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))){da=na[3]||
"";j.baseUrl=j.baseUrl||da;(va=ua.getAttribute("data-dojo-config")||ua.getAttribute("djConfig"))&&(ba=p.eval("({ "+va+" })","data-dojo-config"));break}p.rawConfig={};ma(j,1);if(x("dojo-cdn"))(R.dojo.location=da)&&(da+="/"),R.dijit.location=da+"../dijit/",R.dojox.location=da+"../dojox/";ma(g,1);ma(ba,1);var oa=function(a){ja(function(){m(a.deps,ra)})},Na=function(a,h,e,k,f){var m;if(l(a)){if((m=aa(a,k,!0))&&m.executed)return m.result;throw s("undefinedModule",a);}n(a)||(ma(a,0,k),a=h,h=e);if(n(a))if(a.length){for(var e=
"require*"+u(),g,j=[],v=0;v<a.length;)g=a[v++],j.push(aa(g,k));m=q(wa("",e,0,""),{injected:2,deps:j,def:h||b,require:k?k.require:p,gc:1});Q[m.mid]=m;oa(m);var o=pa&&"sync"!=C;ja(function(){ia(m,o)});m.executed||Y.push(m);ga()}else h&&h();return f},Da=function(a){if(!a)return p;var h=a.require;if(!h)h=function(b,e,k){return Na(b,e,k,a,h)},a.require=q(h,p),h.module=a,h.toUrl=function(h){return Oa(h,a)},h.toAbsMid=function(h){return Fa(h,a)},h.syncLoadNls=function(h){var h=la(h,a),b=Q[h.mid];if(!b||
!b.executed)if(ca=X[h.mid]||X["url:"+h.url])xa(ca),b=Q[h.mid];return b&&b.executed&&b.result};return h},Y=[],ya=[],Z={},db=function(a){a.injected=1;Z[a.mid]=1;a.url&&(Z[a.url]=a.pack||1);Ta()},ea=function(a){a.injected=2;delete Z[a.mid];a.url&&delete Z[a.url];e(Z)&&(za(),"xd"==C&&(C="sync"))},eb=p.idle=function(){return!ya.length&&e(Z)&&!Y.length&&!pa},Ga=function(a,h){if(h)for(var b=0;b<h.length;b++)if(h[b][2].test(a))return h[b];return 0},Ua=function(a){for(var h=[],b,e,a=a.replace(/\\/g,"/").split("/");a.length;)b=
a.shift(),".."==b&&h.length&&".."!=e?(h.pop(),e=h[h.length-1]):"."!=b&&h.push(e=b);return h.join("/")},wa=function(a,h,b,e){var k=p.isXdUrl(e);return{pid:a,mid:h,pack:b,url:e,executed:0,def:0,isXd:k,isAmd:!!(k||R[a]&&R[a].isAmd)}},Va=function(a,h,b,e,f,l,n,g){var q,j,v,o;o=/^\./.test(a);if(/(^\/)|(\:)|(\.js$)/.test(a)||o&&!h)return wa(0,a,0,a);a=Ua(o?h.mid+"/../"+a:a);if(/^\./.test(a))throw s("irrationalPath",a);h&&(v=Ga(h.mid,l));(v=(v=v||l.star)&&Ga(a,v[1]))&&(a=v[1]+a.substring(v[3]));h=(na=a.match(/^([^\/]+)(\/(.+))?$/))?
na[1]:"";(q=b[h])?a=h+"/"+(j=na[3]||q.main):h="";var C=0;m(K,function(h){var b=a.match(h[0]);b&&0<b.length&&(C=k(h[1])?a.replace(h[0],h[1]):h[1])});if(C)return Va(C,0,b,e,f,l,n,g);if(b=e[a])return g?wa(b.pid,b.mid,b.pack,b.url):e[a];e=(v=Ga(a,n))?v[1]+a.substring(v[3]):h?q.location+"/"+j:x("config-tlmSiblingOfDojo")?"../"+a:a;/(^\/)|(\:)/.test(e)||(e=f+e);return wa(h,a,q,Ua(e+".js"))},la=function(a,h){return Va(a,h,R,Q,p.baseUrl,T,P)},Wa=function(a,h,b){return a.normalize?a.normalize(h,function(a){return Fa(a,
b)}):Fa(h,b)},Xa=0,aa=function(a,h,b){var e,k;(e=a.match(/^(.+?)\!(.*)$/))?(k=aa(e[1],h,b),"sync"==C&&!k.executed&&(ra(k),2===k.injected&&!k.executed&&ja(function(){ia(k)}),k.executed?Aa(k):Y.unshift(k)),5===k.executed&&!k.load&&Aa(k),k.load?(e=Wa(k,e[2],h),a=k.mid+"!"+(k.dynamic?++Xa+"!":"")+e):(e=e[2],a=k.mid+"!"+ ++Xa+"!waitingForPlugin"),a={plugin:k,mid:a,req:Da(h),prid:e}):a=la(a,h);return Q[a.mid]||!b&&(Q[a.mid]=a)},Fa=p.toAbsMid=function(a,h){return la(a,h).mid},Oa=p.toUrl=function(a,h){var b=
la(a+"/x",h),e=b.url;return sa(0===b.pid?a:e.substring(0,e.length-5))},Ya={injected:2,executed:5,def:3,result:3},Ha=function(a){return Q[a]=q({mid:a},Ya)},fb=Ha("require"),gb=Ha("exports"),hb=Ha("module"),Ba={},Ia=0,Aa=function(a){var h=a.result;a.dynamic=h.dynamic;a.normalize=h.normalize;a.load=h.load;return a},ib=function(a){var h={};m(a.loadQ,function(b){var e=Wa(a,b.prid,b.req.module),k=a.dynamic?b.mid.replace(/waitingForPlugin$/,e):a.mid+"!"+e,e=q(q({},b),{mid:k,prid:e,injected:0});Q[k]||Za(Q[k]=
e);h[b.mid]=Q[k];ea(b);delete Q[b.mid]});a.loadQ=0;var b=function(a){for(var b=a.deps||[],e=0;e<b.length;e++)(a=h[b[e].mid])&&(b[e]=a)},e;for(e in Q)b(Q[e]);m(Y,b)},ha=function(a){p.trace("loader-finish-exec",[a.mid]);a.executed=5;a.defOrder=Ia++;m(a.provides,function(a){a()});a.loadQ&&(Aa(a),ib(a));for(f=0;f<Y.length;)Y[f]===a?Y.splice(f,1):f++;/^require\*/.test(a.mid)&&delete Q[a.mid]},jb=[],ia=function(a,h){if(4===a.executed)return p.trace("loader-circular-dependency",[jb.concat(a.mid).join("->")]),
!a.def||h?Ba:a.cjs&&a.cjs.exports;if(!a.executed){if(!a.def)return Ba;var b=a.mid,e=a.deps||[],f,l=[],n=0;for(a.executed=4;n<e.length;){f=e[n++];f=f===fb?Da(a):f===gb?a.cjs.exports:f===hb?a.cjs:ia(f,h);if(f===Ba)return a.executed=0,p.trace("loader-exec-module",["abort",b]),Ba;l.push(f)}p.trace("loader-run-factory",[a.mid]);var b=a.def,m;I.unshift(a);if(x("config-dojo-loader-catches"))try{m=k(b)?b.apply(null,l):b}catch(g){M("error",a.result=s("factoryThrew",[a,g]))}else m=k(b)?b.apply(null,l):b;a.result=
void 0===m&&a.cjs?a.cjs.exports:m;I.shift(a);ha(a)}return a.result},pa=0,ja=function(a){try{pa++,a()}finally{pa--}eb()&&M("idle",[])},ga=function(){pa||ja(function(){L();for(var a,h,b=0;b<Y.length;)a=Ia,h=Y[b],ia(h),a!=Ia?(L(),b=0):b++})};void 0===x("dojo-loader-eval-hint-url")&&x.add("dojo-loader-eval-hint-url",1);var sa=function(a){a+="";return a+(ka?(/\?/.test(a)?"&":"?")+ka:"")},Za=function(a){var h=a.plugin;5===h.executed&&!h.load&&Aa(h);var b=function(h){a.result=h;ea(a);ha(a);ga()};h.load?
h.load(a.prid,a.req,b):h.loadQ?h.loadQ.push(a):(h.loadQ=[a],Y.unshift(h),ra(h))},ca=0,qa=0,Ja=0,xa=function(a,h){x("config-stripStrict")&&(a=a.replace(/"use strict"/g,""));Ja=1;if(x("config-dojo-loader-catches"))try{a===ca?ca.call(null):p.eval(a,x("dojo-loader-eval-hint-url")?h.url:h.mid)}catch(b){M("error",s("evalModuleThrew",h))}else a===ca?ca.call(null):p.eval(a,x("dojo-loader-eval-hint-url")?h.url:h.mid);Ja=0},ra=function(a){var h=a.mid,b=a.url;if(!a.executed&&!a.injected&&!(Z[h]||a.url&&(a.pack&&
Z[a.url]===a.pack||1==Z[a.url])))if(db(a),a.plugin)Za(a);else{var e=function(){$a(a);2!==a.injected&&(ea(a),q(a,Ya),p.trace("loader-define-nonmodule",[a.url]));C?!I.length&&ga():ga()};if(ca=X[h]||X["url:"+a.url])p.trace("loader-inject",["cache",a.mid,b]),xa(ca,a),e();else{if(C)if(a.isXd)"sync"==C&&(C="xd");else if(!(a.isAmd&&"sync"!=C)){var k=function(k){if("sync"==C){I.unshift(a);xa(k,a);I.shift();$a(a);a.cjs||(ea(a),ha(a));if(a.finish){var k=h+"*finish",f=a.finish;delete a.finish;Ka(k,["dojo",("dojo/require!"+
f.join(",")).replace(/\./g,"/")],function(a){m(f,function(h){a.require(h)})});Y.unshift(aa(k))}e()}else(k=U(a,k))?(xa(k,a),e()):(qa=a,p.injectUrl(sa(b),e,a),qa=0)};p.trace("loader-inject",["xhr",a.mid,b,"sync"!=C]);if(x("config-dojo-loader-catches"))try{p.getText(b,"sync"!=C,k)}catch(f){M("error",s("xhrInjectFailed",[a,f]))}else p.getText(b,"sync"!=C,k);return}p.trace("loader-inject",["script",a.mid,b]);qa=a;p.injectUrl(sa(b),e,a);qa=0}}},La=function(a,h,b){p.trace("loader-define-module",[a.mid,h]);
var e=a.mid;if(2===a.injected)return M("error",s("multipleDefine",a)),a;q(a,{deps:h,def:b,cjs:{id:a.mid,uri:a.url,exports:a.result={},setExports:function(h){a.cjs.exports=h},config:function(){return a.config}}});for(var f=0;f<h.length;f++)h[f]=aa(h[f],a);C&&!Z[e]&&(oa(a),Y.push(a),ga());ea(a);if(!k(b)&&!h.length)a.result=b,ha(a);return a},$a=function(a,h){for(var b=[],e,k;ya.length;)k=ya.shift(),h&&(k[0]=h.shift()),e=k[0]&&aa(k[0])||a,b.push([e,k[1],k[2]]);ta(a);m(b,function(a){oa(La.apply(null,a))})},
Ca=0,za=b,Ta=b;za=function(){Ca&&clearTimeout(Ca);Ca=0};Ta=function(){za();p.waitms&&(Ca=window.setTimeout(function(){za();M("error",s("timeout",Z))},p.waitms))};x.add("ie-event-behavior",!!w.attachEvent&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var Ma=function(a,h,b,e){if(x("ie-event-behavior"))return a.attachEvent(b,e),function(){a.detachEvent(b,e)};a.addEventListener(h,e,!1);return function(){a.removeEventListener(h,e,!1)}},kb=Ma(window,"load","onload",function(){p.pageLoaded=
1;"complete"!=w.readyState&&(w.readyState="complete");kb()}),ab=w.getElementsByTagName("script")[0],lb=ab.parentNode;p.injectUrl=function(a,h,b){var b=b.node=w.createElement("script"),e=Ma(b,"load","onreadystatechange",function(a){var a=a||window.event,b=a.target||a.srcElement;if("load"===a.type||/complete|loaded/.test(b.readyState))e(),k(),h&&h()}),k=Ma(b,"error","onerror",function(h){e();k();M("error",s("scriptError",[a,h]))});b.type="text/javascript";b.charset="utf-8";b.src=a;lb.insertBefore(b,
ab);return b};p.log=b;p.trace=b;var Ka=function(a,h,b){var e=arguments.length,f=["require","exports","module"],n=[0,a,h];1==e?n=[0,k(a)?f:[],a]:2==e&&l(a)?n=[a,k(h)?f:[],h]:3==e&&(n=[a,h,b]);p.trace("loader-define",n.slice(0,2));if((e=n[0]&&aa(n[0]))&&!Z[e.mid])oa(La(e,n[1],n[2]));else if(!x("ie-event-behavior")||Ja)ya.push(n);else{e=e||qa;if(!e)for(a in Z)if((f=Q[a])&&f.node&&"interactive"===f.node.readyState){e=f;break}e?(ta(e),oa(La(e,n[1],n[2]))):M("error",s("ieDefineFailed",n[0]));ga()}};Ka.amd=
{vendor:"dojotoolkit.org"};q(q(p,j.loaderPatch),g.loaderPatch);E("error",function(a){try{if(a instanceof Error)for(var h in a);}catch(b){}});q(p,{uid:u,cache:X,packs:R});if(!v.define){v.define=Ka;v.require=p;m(Ra,function(a){ma(a)});var bb=ba.deps||g.deps||j.deps,cb=ba.callback||g.callback||j.callback;p.boot=bb||cb?[bb||[],cb]:0}})(this.dojoConfig||this.djConfig||this.require||{},{async:0,hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},
packages:[{location:"../dojox",name:"dojox"},{location:"../dijit",name:"dijit"},{location:".",name:"dojo"},{location:"../ws",main:"dojo",name:"ws"}]});
require({cache:{"dojo/request/xhr":function(){define("dojo/request/xhr",["../errors/RequestError","./watch","./handlers","./util","../has"],function(g,j,f,a,b){function e(h,b){var e=h.xhr;h.status=h.xhr.status;h.text=e.responseText;if("xml"===h.options.handleAs)h.data=e.responseXML;if(!b)try{f(h)}catch(k){b=k}b?this.reject(b):a.checkStatus(e.status)?this.resolve(h):(b=new g("Unable to load "+h.url+" status: "+e.status,h),this.reject(b))}function h(a){return this.xhr.getResponseHeader(a)}function k(f,
w,u){var p=a.parseArgs(f,a.deepCreate(o,w),b("native-formdata")&&w&&w.data&&w.data instanceof FormData),f=p.url,w=p.options,A,B=a.deferred(p,q,l,n,e,function(){A&&A()}),C=p.xhr=k._create();if(!C)return B.cancel(new g("XHR was not created")),u?B:B.promise;p.getHeader=h;m&&(A=m(C,B,p));var I=w.data,J=!w.sync,L=w.method;try{C.open(L,f,J,w.user||s,w.password||s);if(w.withCredentials)C.withCredentials=w.withCredentials;var U=w.headers,f="application/x-www-form-urlencoded";if(U)for(var O in U)"content-type"===
O.toLowerCase()?f=U[O]:U[O]&&C.setRequestHeader(O,U[O]);f&&!1!==f&&C.setRequestHeader("Content-Type",f);(!U||!("X-Requested-With"in U))&&C.setRequestHeader("X-Requested-With","XMLHttpRequest");a.notify&&a.notify.emit("send",p,B.promise.cancel);C.send(I)}catch(V){B.reject(V)}j(B);C=null;return u?B:B.promise}b.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});b.add("dojo-force-activex-xhr",function(){return b("activex")&&!document.addEventListener&&"file:"===window.location.protocol});
b.add("native-xhr2",function(){if(b("native-xhr")){var a=new XMLHttpRequest;return"undefined"!==typeof a.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof a.upload)}});b.add("native-formdata",function(){return"function"===typeof FormData});var l,n,m,q;b("native-xhr2")?(l=function(){return!this.isFulfilled()},q=function(a,h){h.xhr.abort()},m=function(a,h,b){function e(){h.handleResponse(b)}function k(a){a=new g("Unable to load "+b.url+" status: "+a.target.status,b);h.handleResponse(b,
a)}function f(a){if(a.lengthComputable)b.loaded=a.loaded,b.total=a.total,h.progress(b)}a.addEventListener("load",e,!1);a.addEventListener("error",k,!1);a.addEventListener("progress",f,!1);return function(){a.removeEventListener("load",e,!1);a.removeEventListener("error",k,!1);a.removeEventListener("progress",f,!1);a=null}}):(l=function(a){return a.xhr.readyState},n=function(a){return 4===a.xhr.readyState},q=function(a,h){var b=h.xhr,e=typeof b.abort;("function"===e||"object"===e||"unknown"===e)&&
b.abort()});var s,o={data:null,query:null,sync:!1,method:"GET"};k._create=function(){throw Error("XMLHTTP not available");};if(b("native-xhr")&&!b("dojo-force-activex-xhr"))k._create=function(){return new XMLHttpRequest};else if(b("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),k._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(u){try{new ActiveXObject("Microsoft.XMLHTTP"),k._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(p){}}a.addCommonMethods(k);return k})},
"url:dojox/grid/_grid/Grid.css":".dojoxGrid {position: relative; background-color: #EBEADB; -moz-outline-style: none; outline: none;}.dojoxGrid table {padding: 0;}.dojoxGrid td {-moz-outline: none;}.dojoxGrid-master-header {position: relative;}.dojoxGrid-master-view {position: relative;}.dojoxGrid-view {position: absolute; overflow: hidden;}.dojoxGrid-header {position: absolute; overflow: hidden;}.dojoxGrid-header {background-color: #E8E1CF;}.dojoxGrid-header table {text-align: center;}.dojoxGrid-header .dojoxGrid-cell-content {text-align: center;}.dojoxGrid-header .dojoxGrid-cell {border: 1px solid; border-color: #F6F4EB #ACA899 #ACA899 #F6F4EB; padding-bottom: 2px;}.dojoxGrid-header .dojoxGrid-cell-over {background-image: none; background-color: white; border-bottom-color: #FEBE47; margin-bottom: 0; padding-bottom: 0; border-bottom-width: 3px;}.dojoxGrid-sort-down {padding-left:16px; margin-left:4px;}.dojoxGrid-sort-up {padding-left:16px; margin-left:4px;}.dojoxGrid-scrollbox {position: relative; overflow: scroll; background-color: white; width: 100%;}.dojoxGrid-content {position: relative; overflow: hidden; -moz-outline-style: none; outline: none;}.dojoxGrid-rowbar {border: 1px solid; border-color: #F6F4EB #ACA899 #ACA899 #F6F4EB; border-top: none;}.dojoxGrid-rowbar-inner {border-top: 1px solid #F6F4EB;}.dojoxGrid-rowbar-over {background-image: none; background-color: white; border-top-color: #FEBE47; border-bottom-color: #FEBE47;}.dojoxGrid-rowbar-selected {background-color: #D9E8F9; background-image: none; background-position: center; background-repeat: no-repeat;}.dojoxGrid-row {position: relative; width: 9000em;}.dojoxGrid-row {border: 1px solid #E8E4D8; border-color: #F8F7F1; border-left: none; border-right: none; background-color: white; border-top: none;}.dojoxGrid-row-over {border-top-color: #FEBE47; border-bottom-color: #FEBE47;}.dojoxGrid-row-odd {background-color: #FFFDF3;}.dojoxGrid-row-selected {background-color: #D9E8F9;}.dojoxGrid-row-table {table-layout: fixed; width: 0;}.dojoxGrid-invisible {visibility: hidden;} .Xdojo-ie .dojoxGrid-invisible {display: none;} .dojoxGrid-invisible td, .dojoxGrid-header .dojoxGrid-invisible td {border-top-width: 0; border-bottom-width: 0; padding-top: 0; padding-bottom: 0; height: 0; overflow: hidden;}.dojoxGrid-cell {border: 1px solid; border-color: #EBEADB; border-right-color: #D5CDB5; padding: 3px 3px 3px 3px; text-align: left; overflow: hidden;}.dojoxGrid-cell-focus {border: 1px dashed blue;}.dojoxGrid-cell-over {border: 1px dotted #FEBE47;}.dojoxGrid-cell-focus.dojoxGrid-cell-over {border: 1px dotted green;}.dojoxGrid-cell-clip {width: 100%; overflow: hidden; white-space:nowrap; text-overflow: ellipsis;}.dojoxGrid-row-editing td {background-color: #F4FFF4;}.dojoxGrid-row-inserting td {background-color: #F4FFF4;}.dojoxGrid-row-inflight td {background-color: #F2F7B7;}.dojoxGrid-row-error td {background-color: #F8B8B6;}.dojoxGrid-input, .dojoxGrid-select, .dojoxGrid-textarea {margin: 0; padding: 0; border-style: none; width: 100%; font-size: 100%; font-family: inherit;}.dojoxGrid-hidden-focus {position: absolute; left: -1000px; top: -1000px; height: 0px; width: 0px;}",
"dojo/sniff":function(){define(["./has"],function(g){var j=navigator,f=j.userAgent,j=j.appVersion,a=parseFloat(j);g.add("air",0<=f.indexOf("AdobeAIR"));g.add("khtml",0<=j.indexOf("Konqueror")?a:void 0);g.add("webkit",parseFloat(f.split("WebKit/")[1])||void 0);g.add("chrome",parseFloat(f.split("Chrome/")[1])||void 0);g.add("safari",0<=j.indexOf("Safari")&&!g("chrome")?parseFloat(j.split("Version/")[1]):void 0);g.add("mac",0<=j.indexOf("Macintosh"));g.add("quirks","BackCompat"==document.compatMode);
g.add("ios",/iPhone|iPod|iPad/.test(f));g.add("android",parseFloat(f.split("Android ")[1])||void 0);if(!g("webkit")){0<=f.indexOf("Opera")&&g.add("opera",9.8<=a?parseFloat(f.split("Version/")[1])||a:a);0<=f.indexOf("Gecko")&&!g("khtml")&&!g("webkit")&&g.add("mozilla",a);g("mozilla")&&g.add("ff",parseFloat(f.split("Firefox/")[1]||f.split("Minefield/")[1])||void 0);if(document.all&&!g("opera"))f=parseFloat(j.split("MSIE ")[1])||void 0,(j=document.documentMode)&&5!=j&&Math.floor(f)!=j&&(f=j),g.add("ie",
f);g.add("wii","undefined"!=typeof opera&&opera.wiiremote)}return g})},"ws/mail/folderName":function(){define("ws/mail/folderName",["dojo/_base/declare","dojo","dijit","ws/widget/Dialogs"],function(g){return g(null,{MaxLength:32,DisallowedCharsList:'\\,:,*,?,",<,>,|,%'.split(","),DisallowedStartCharsList:[" ","%","#"],DisallowedCharsMap:{},DisallowedStartCharsMap:{},DisallowedCharsString:"",DisallowedStartCharsString:"",init:function(){var g,f;this.getDisallowedHierarchyDelimiter()&&this.DisallowedCharsList.push(this.getDisallowedHierarchyDelimiter());
for(g=0;g<this.DisallowedCharsList.length;g++)f=this.DisallowedCharsList[g],this.DisallowedCharsString+=f+" ",this.DisallowedCharsMap[f]=!0;if(0<this.DisallowedCharsString.length)this.DisallowedCharsString=this.DisallowedCharsString.substring(0,this.DisallowedCharsString.length-1);for(g=0;g<this.DisallowedStartCharsList.length;g++)f=this.DisallowedStartCharsList[g],this.DisallowedStartCharsString=" "==f?this.DisallowedStartCharsString+Config.Strings.Space:this.DisallowedStartCharsString+(f+" "),this.DisallowedStartCharsMap[f]=
!0;if(0<this.DisallowedStartCharsString.length)this.DisallowedStartCharsString=this.DisallowedStartCharsString.substring(0,this.DisallowedStartCharsString.length-1)},getDisallowedHierarchyDelimiter:function(){return Config.ImapStoreAllowHierarchicalFolderCreation?"":"/"},validate:function(g,f,a,b,e){var h=null!=a;if(!g||!f)return ws.widget.Dialogs.ok(Config.Strings.FolderWarningEmpty,e),!1;if(g.length>this.MaxLength)return ws.widget.Dialogs.ok(ws.string.substituteParams(Config.Strings.FolderWarningTooLong,
this.MaxLength),e),!1;for(var k=0;k<g.length;k++)if(this.DisallowedCharsMap[g.charAt(k)])return ws.widget.Dialogs.ok(Config.Strings.FolderWarningLetters+"<br>"+this.DisallowedCharsString,e),!1;if(this.DisallowedStartCharsMap[g.charAt(0)])return ws.widget.Dialogs.ok(Config.Strings.FolderWarningStart+"<br>"+this.DisallowedStartCharsString,e),!1;if(h&&g==a)return ws.widget.Dialogs.ok(Config.Strings.FolderWarningUnchanged,e),!1;if(h&&g.toLowerCase()==a.toLowerCase())return!0;longNameLower=f.toLowerCase();
for(k=0;k<b.length;k++)if(null!=b[k]&&b[k].name.toLowerCase()==longNameLower)return g=ws.string.substituteParams(Config.Strings.FolderWarningDuplicate,'"'+g+'"'),ws.widget.Dialogs.ok(g,e),!1;return!0}})})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(g,j,f,a){function b(a,h,b,e,k,f){f=f||"px";a=a.style;if(!isNaN(h))a.left=h+f;if(!isNaN(b))a.top=b+f;if(0<=e)a.width=e+f;if(0<=k)a.height=k+f}function e(a){return"button"==a.tagName.toLowerCase()||"input"==
a.tagName.toLowerCase()&&"button"==(a.getAttribute("type")||"").toLowerCase()}function h(a){return"border-box"==k.boxModel||"table"==a.tagName.toLowerCase()||e(a)}var k={boxModel:"content-box"};if(g("ie"))k.boxModel="BackCompat"==document.compatMode?"border-box":"content-box";k.getPadExtents=function(h,b){var h=f.byId(h),e=b||a.getComputedStyle(h),k=a.toPixelValue,l=k(h,e.paddingLeft),g=k(h,e.paddingTop),j=k(h,e.paddingRight),e=k(h,e.paddingBottom);return{l:l,t:g,r:j,b:e,w:l+j,h:g+e}};k.getBorderExtents=
function(h,b){var h=f.byId(h),e=a.toPixelValue,k=b||a.getComputedStyle(h),l="none"!=k.borderLeftStyle?e(h,k.borderLeftWidth):0,g="none"!=k.borderTopStyle?e(h,k.borderTopWidth):0,j="none"!=k.borderRightStyle?e(h,k.borderRightWidth):0,e="none"!=k.borderBottomStyle?e(h,k.borderBottomWidth):0;return{l:l,t:g,r:j,b:e,w:l+j,h:g+e}};k.getPadBorderExtents=function(h,b){var h=f.byId(h),e=b||a.getComputedStyle(h),l=k.getPadExtents(h,e),e=k.getBorderExtents(h,e);return{l:l.l+e.l,t:l.t+e.t,r:l.r+e.r,b:l.b+e.b,
w:l.w+e.w,h:l.h+e.h}};k.getMarginExtents=function(h,b){var h=f.byId(h),e=b||a.getComputedStyle(h),k=a.toPixelValue,l=k(h,e.marginLeft),g=k(h,e.marginTop),j=k(h,e.marginRight),e=k(h,e.marginBottom);return{l:l,t:g,r:j,b:e,w:l+j,h:g+e}};k.getMarginBox=function(h,b){var h=f.byId(h),e=b||a.getComputedStyle(h),l=k.getMarginExtents(h,e),j=h.offsetLeft-l.l,u=h.offsetTop-l.t,p=h.parentNode,v=a.toPixelValue;if(g("mozilla")){var w=parseFloat(e.left),e=parseFloat(e.top);!isNaN(w)&&!isNaN(e)?(j=w,u=e):p&&p.style&&
(p=a.getComputedStyle(p),"visible"!=p.overflow&&(j+="none"!=p.borderLeftStyle?v(h,p.borderLeftWidth):0,u+="none"!=p.borderTopStyle?v(h,p.borderTopWidth):0))}else if((g("opera")||8==g("ie")&&!g("quirks"))&&p)p=a.getComputedStyle(p),j-="none"!=p.borderLeftStyle?v(h,p.borderLeftWidth):0,u-="none"!=p.borderTopStyle?v(h,p.borderTopWidth):0;return{l:j,t:u,w:h.offsetWidth+l.w,h:h.offsetHeight+l.h}};k.getContentBox=function(h,b){var h=f.byId(h),e=b||a.getComputedStyle(h),l=h.clientWidth,j=k.getPadExtents(h,
e),u=k.getBorderExtents(h,e);l?(e=h.clientHeight,u.w=u.h=0):(l=h.offsetWidth,e=h.offsetHeight);g("opera")&&(j.l+=u.l,j.t+=u.t);return{l:j.l,t:j.t,w:l-j.w-u.w,h:e-j.h-u.h}};k.setContentSize=function(a,e,l){var a=f.byId(a),g=e.w,e=e.h;h(a)&&(l=k.getPadBorderExtents(a,l),0<=g&&(g+=l.w),0<=e&&(e+=l.h));b(a,NaN,NaN,g,e)};var l={l:0,t:0,w:0,h:0};k.setMarginBox=function(n,m,q){var n=f.byId(n),j=q||a.getComputedStyle(n),q=m.w,o=m.h,u=h(n)?l:k.getPadBorderExtents(n,j),j=k.getMarginExtents(n,j);if(g("webkit")&&
e(n)){var p=n.style;if(0<=q&&!p.width)p.width="4px";if(0<=o&&!p.height)p.height="4px"}0<=q&&(q=Math.max(q-u.w-j.w,0));0<=o&&(o=Math.max(o-u.h-j.h,0));b(n,m.l,m.t,q,o)};k.isBodyLtr=function(a){a=a||j.doc;return"ltr"==(j.body(a).dir||a.documentElement.dir||"ltr").toLowerCase()};k.docScroll=function(a){var a=a||j.doc,h=j.doc.parentWindow||j.doc.defaultView;return"pageXOffset"in h?{x:h.pageXOffset,y:h.pageYOffset}:(h=g("quirks")?j.body(a):a.documentElement)&&{x:k.fixIeBiDiScrollLeft(h.scrollLeft||0,a),
y:h.scrollTop||0}};if(g("ie"))k.getIeDocumentElementOffset=function(a){a=a||j.doc;a=a.documentElement;if(8>g("ie")){var h=a.getBoundingClientRect(),b=h.left,h=h.top;7>g("ie")&&(b+=a.clientLeft,h+=a.clientTop);return{x:0>b?0:b,y:0>h?0:h}}return{x:0,y:0}};k.fixIeBiDiScrollLeft=function(a,h){var h=h||j.doc,b=g("ie");if(b&&!k.isBodyLtr(h)){var e=g("quirks"),f=e?j.body(h):h.documentElement,l=j.global;6==b&&!e&&l.frameElement&&f.scrollHeight>f.clientHeight&&(a+=f.clientLeft);return 8>b||e?a+f.clientWidth-
f.scrollWidth:-a}return a};k.position=function(a,h){var a=f.byId(a),b=j.body(a.ownerDocument),e=a.getBoundingClientRect(),e={x:e.left,y:e.top,w:e.right-e.left,h:e.bottom-e.top};if(9>g("ie")){var l=k.getIeDocumentElementOffset(a.ownerDocument);e.x-=l.x+(g("quirks")?b.clientLeft+b.offsetLeft:0);e.y-=l.y+(g("quirks")?b.clientTop+b.offsetTop:0)}h&&(b=k.docScroll(a.ownerDocument),e.x+=b.x,e.y+=b.y);return e};k.getMarginSize=function(h,b){var h=f.byId(h),e=k.getMarginExtents(h,b||a.getComputedStyle(h)),
l=h.getBoundingClientRect();return{w:l.right-l.left+e.w,h:l.bottom-l.top+e.h}};k.normalizeEvent=function(a){if(!("layerX"in a))a.layerX=a.offsetX,a.layerY=a.offsetY;if(!g("dom-addeventlistener")){var h=a.target,h=h&&h.ownerDocument||document,b=g("quirks")?h.body:h.documentElement,e=k.getIeDocumentElementOffset(h);a.pageX=a.clientX+k.fixIeBiDiScrollLeft(b.scrollLeft||0,h)-e.x;a.pageY=a.clientY+(b.scrollTop||0)-e.y}};return k})},"dijit/_base/scroll":function(){define("dijit/_base/scroll",["dojo/window",
"../main"],function(g,j){j.scrollIntoView=function(f,a){g.scrollIntoView(f,a)}})},"dijit/_TemplatedMixin":function(){define("dijit/_TemplatedMixin","dojo/_base/lang,dojo/touch,./_WidgetBase,dojo/string,dojo/cache,dojo/_base/array,dojo/_base/declare,dojo/dom-construct,dojo/sniff,dojo/_base/unload".split(","),function(g,j,f,a,b,e,h,k,l,n){var m=h("dijit._TemplatedMixin",null,{templateString:null,templatePath:null,_skipNodeCache:!1,_earlyTemplatedStartup:!1,constructor:function(){this._attachPoints=
[];this._attachEvents=[]},_stringRepl:function(h){var b=this;return a.substitute(h,Config.Strings,function(a,h){"!"==h.charAt(0)?a=g.getObject(h.substr(1),!1,b):"undefined"==typeof a&&(a=dojo.getObject(h,!1,this));return"undefined"==typeof a?"${"+h+"}":null==a?"":"!"==h.charAt(0)?a:a.toString().replace(/"/g,"&quot;")},this)},buildRendering:function(){if(!this.templateString)this.templateString=b(this.templatePath,{sanitize:!0});var a=m.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),
h;if(g.isString(a)){if(h=k.toDom(this._stringRepl(a),this.ownerDocument),1!=h.nodeType)throw Error("Invalid template: "+a);}else h=a.cloneNode(!0);this.domNode=h;this.inherited(arguments);this._attachTemplateNodes(h,function(a,h){return a.getAttribute(h)});this._beforeFillContent();this._fillContent(this.srcNodeRef)},_beforeFillContent:function(){},_fillContent:function(a){var h=this.containerNode;if(a&&h)for(;a.hasChildNodes();)h.appendChild(a.firstChild)},_attachTemplateNodes:function(a,h){for(var b=
g.isArray(a)?a:a.all||a.getElementsByTagName("*"),e=g.isArray(a)?0:-1;0>e||b[e];e++){var k=-1==e?a:b[e];if(!this.widgetsInTemplate||!h(k,"dojoType")&&!h(k,"data-dojo-type")){var f=h(k,"dojoAttachPoint")||h(k,"data-dojo-attach-point");if(f)for(var l=f.split(/\s*,\s*/);f=l.shift();)g.isArray(this[f])?this[f].push(k):this[f]=k,this._attachPoints.push(f);if(f=h(k,"dojoAttachEvent")||h(k,"data-dojo-attach-event"))for(var l=f.split(/\s*,\s*/),n=g.trim;f=l.shift();)if(f){var m=null;-1!=f.indexOf(":")?(m=
f.split(":"),f=n(m[0]),m=n(m[1])):f=n(f);m||(m=f);this._attachEvents.push(this.connect(k,j[f]||f,m))}}}},destroyRendering:function(){e.forEach(this._attachPoints,function(a){delete this[a]},this);this._attachPoints=[];e.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments)}});m._templateCache={};m.getCachedTemplate=function(h,b,e){var f=m._templateCache,l=h,n=f[l];if(n){try{if(!n.ownerDocument||n.ownerDocument==(e||document))return n}catch(g){}k.destroy(n)}h=
a.trim(h);if(b||h.match(/\$\{([^\}]+)\}/g))return f[l]=h;b=k.toDom(h,e);if(1!=b.nodeType)throw Error("Invalid template: "+h);return f[l]=b};l("ie")&&n.addOnWindowUnload(function(){var a=m._templateCache,h;for(h in a){var b=a[h];"object"==typeof b&&k.destroy(b);delete a[h]}});g.extend(f,{dojoAttachEvent:"",dojoAttachPoint:""});return m})},"dojox/grid/_grid/lib":function(){define("dojox/grid/_grid/lib",["dojo","dojo/_base/lang"],function(g,j){g.isNumber=function(f){return"number"==typeof f||f instanceof
Number};g.mixin(dojox.grid,{na:"...",nop:function(){},getTdIndex:function(f){return 0<=f.cellIndex?f.cellIndex:g.indexOf(f.parentNode.cells,f)},getTrIndex:function(f){return 0<=f.rowIndex?f.rowIndex:g.indexOf(f.parentNode.childNodes,f)},getTr:function(f,a){return f&&((f.rows||0)[a]||f.childNodes[a])},getTd:function(f,a,b){return(dojox.grid.getTr(inTable,a)||0)[b]},findTable:function(f){for(;f&&"TABLE"!=f.tagName;f=f.parentNode);return f},ascendDom:function(f,a){for(var b=f;b&&a(b);b=b.parentNode);
return b},makeNotTagName:function(f){var a=f.toUpperCase();return function(b){return b.tagName!=a}},fire:function(f,a,b){var e=f&&a&&f[a];return e&&(b?e.apply(f,b):f[a]())},setStyleText:function(f,a){void 0==f.style.cssText?f.setAttribute("style",a):f.style.cssText=a},getStyleText:function(f){return void 0==f.style.cssText?f.getAttribute("style"):f.style.cssText},setStyle:function(f,a,b){f&&f.style[a]!=b&&(f.style[a]=b)},setStyleHeightPx:function(f,a){0<=a&&dojox.grid.setStyle(f,"height",a+"px")},
mouseEvents:"mouseover,mouseout,mousedown,mouseup,click,dblclick,contextmenu".split(","),keyEvents:["keyup","keydown","keypress"],funnelEvents:function(f,a,b,e){for(var e=e?e:dojox.grid.mouseEvents.concat(dojox.grid.keyEvents),h=0,k=e.length;h<k;h++)g.connect(f,"on"+e[h],a,b)},removeNode:function(f){(f=g.byId(f))&&f.parentNode&&f.parentNode.removeChild(f);return f},getScrollbarWidth:function(){if(this._scrollBarWidth)return this._scrollBarWidth;this._scrollBarWidth=18;try{var f=document.createElement("div");
f.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";document.body.appendChild(f);this._scrollBarWidth=f.offsetWidth-f.clientWidth;document.body.removeChild(f);delete f}catch(a){}return this._scrollBarWidth},getRef:function(f,a,b){for(var b=b||g.global,f=f.split("."),e=f.pop(),h=0,k;b&&(k=f[h]);h++)b=k in b?b[k]:a?b[k]={}:void 0;return{obj:b,prop:e}},getProp:function(f,a,b){with(dojox.grid.getRef(f,a,b))return obj&&prop&&(prop in obj?obj[prop]:
a?obj[prop]={}:void 0)},indexInParent:function(f){for(var a=0,b,e=f.parentNode;b=e.childNodes[a++];)if(b==f)return a-1;return-1},cleanNode:function(f){if(f){for(var a=dijit.registry.filter(function(a){return a.domNode&&g.isDescendant(a.domNode,f,!0)}),b=0,e;e=a[b];b++)e.destroy();delete a}},getTagName:function(f){return(f=g.byId(f))&&f.tagName?f.tagName.toLowerCase():""},nodeKids:function(f,a){for(var b=[],e=0,h;h=f.childNodes[e++];)dojox.grid.getTagName(h)==a&&b.push(h);return b},divkids:function(f){return dojox.grid.nodeKids(f,
"div")},focusSelectNode:function(f){try{dojox.grid.fire(f,"focus"),dojox.grid.fire(f,"select")}catch(a){}},whenIdle:function(){setTimeout(g.hitch.apply(g,arguments),0)},arrayCompare:function(f,a){for(var b=0,e=f.length;b<e;b++)if(f[b]!=a[b])return!1;return f.length==a.length},arrayInsert:function(f,a,b){f.length<=a?f[a]=b:f.splice(a,0,b)},arrayRemove:function(f,a){f.splice(a,1)},arraySwap:function(f,a,b){var e=f[a];f[a]=f[b];f[b]=e},initTextSizePoll:function(f){var a=document.createElement("div");
with(a.style)left=top="0px",position="absolute",visibility="hidden";a.innerHTML="TheQuickBrownFoxJumpedOverTheLazyDog";document.body.appendChild(a);var b=a.offsetWidth;window.setInterval(function(){if(a.offsetWidth!=b)b=a.offsetWidth,dojox.grid.textSizeChanged()},f||200);dojox.grid.initTextSizePoll=dojox.grid.nop},textSizeChanged:function(){}});j.setObject("dojox.grid.jobs",{cancel:function(f){f&&window.clearTimeout(f)},jobs:[],job:function(f,a,b){dojox.grid.jobs.cancelJob(f);dojox.grid.jobs.jobs[f]=
setTimeout(function(){delete dojox.grid.jobs.jobs[f];b()},a)},cancelJob:function(f){dojox.grid.jobs.cancel(dojox.grid.jobs.jobs[f])}})})},"dijit/_Templated":function(){define("dijit/_Templated","./_WidgetBase,./_TemplatedMixin,./_WidgetsInTemplateMixin,dojo/_base/array,dojo/_base/declare,dojo/_base/lang,dojo/_base/kernel".split(","),function(g,j,f,a,b,e,h){e.extend(g,{waiRole:"",waiState:""});return b("dijit._Templated",[j,f],{widgetsInTemplate:!1,constructor:function(){h.deprecated(this.declaredClass+
": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_attachTemplateNodes:function(h,b){this.inherited(arguments);for(var f=e.isArray(h)?h:h.all||h.getElementsByTagName("*"),m=e.isArray(h)?0:-1;m<f.length;m++){var g=-1==m?h:f[m],j=b(g,"waiRole");j&&g.setAttribute("role",j);(j=b(g,"waiState"))&&a.forEach(j.split(/\s*,\s*/),function(a){-1!=a.indexOf("-")&&(a=a.split("-"),g.setAttribute("aria-"+a[0],a[1]))})}}})})},"dojox/grid/_grid/views":function(){define("dojox/grid/_grid/views",
["dojo/_base/declare","dojo"],function(g){return g("dojox.grid._grid.views",null,{constructor:function(g){this.grid=g},defaultWidth:200,views:[],resize:function(){this.onEach("resize")},render:function(){this.onEach("render");this.normalizeHeaderNodeHeight()},addView:function(g){g.idx=this.views.length;this.views.push(g)},destroyViews:function(){for(var g=0,f;f=this.views[g];g++)f.destroy();this.views=[]},getContentNodes:function(){for(var g=[],f=0,a;a=this.views[f];f++)g.push(a.contentNode);return g},
forEach:function(g){for(var f=0,a;a=this.views[f];f++)g(a,f)},onEach:function(g,f){for(var f=f||[],a=0,b;b=this.views[a];a++)g in b&&b[g].apply(b,f)},normalizeHeaderNodeHeight:function(){for(var g=[],f=0,a;a=this.views[f];f++)a.headerContentNode.firstChild&&g.push(a.headerContentNode);this.normalizeRowNodeHeights(g)},normalizeRowNodeHeights:function(){},renormalizeRow:function(g){for(var f=[],a=0,b,e;(b=this.views[a])&&(e=b.getRowNode(g));a++)e.firstChild.style.height="",f.push(e);this.normalizeRowNodeHeights(f)},
getViewWidth:function(g){return this.views[g].getWidth()||this.defaultWidth},measureHeader:function(){this.forEach(function(f){f.headerContentNode.style.height=""});var g=0;this.forEach(function(f){g=Math.max(f.headerNode.offsetHeight,g)});return g},measureContent:function(){var g=0;this.forEach(function(f){g=Math.max(f.domNode.offsetHeight,g)});return g},findClient:function(){var g=this.grid.elasticView||-1;if(0>g)for(var f=1,a;a=this.views[f];f++)if(a.viewWidth){for(f=1;a=this.views[f];f++)if(!a.viewWidth){g=
f;break}break}0>g&&(g=Math.floor(this.views.length/2));return g},_arrange:function(g,f,a,b){var e,h,k,l=this.views.length,n=0>=a?l:this.findClient(),m=function(a,h,b){with(a.domNode.style)left=h+"px",top=b+"px";with(a.headerNode.style)left=h+"px",top=0};for(e=0;(h=this.views[e])&&e<n;e++)k=this.getViewWidth(e),h.setSize(k,b),m(h,g,f),k=h.domNode.offsetWidth,g+=k;e++;for(var q=l-1;(h=this.views[q])&&e<=q;q--)k=this.getViewWidth(q),h.setSize(k,b),k=h.domNode.offsetWidth,a-=k,m(h,a,f);n<l&&(h=this.views[n],
k=Math.max(1,a-g),h.setSize(k+"px",b),m(h,g,f));return g},arrange:function(g,f,a,b){a=this._arrange(g,f,a,b);this.resize();return a},renderRow:function(g,f){for(var a=[],b=0,e,h;(e=this.views[b])&&(h=f[b]);b++)e=e.renderRow(g),h.appendChild(e),a.push(e);this.normalizeRowNodeHeights(a)},rowRemoved:function(g){this.onEach("rowRemoved",[g])},updateRow:function(g,f){for(var a=0,b;b=this.views[a];a++)b.updateRow(g,f);this.renormalizeRow(g)},updateRowStyles:function(g){this.onEach("updateRowStyles",[g])},
setScrollTop:function(g){for(var f=g,a=0,b;b=this.views[a];a++)f=b.setScrollTop(g);return f},getFirstScrollingView:function(){for(var g=0,f;f=this.views[g];g++)if(f.hasScrollbar())return f}})})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(g,j,f){var a=window,b={addOnWindowUnload:function(b,h){if(!g.windowUnloaded)f(a,"unload",g.windowUnloaded=function(){});f(a,"unload",j.hitch(b,h))},addOnUnload:function(b,h){f(a,"beforeunload",j.hitch(b,h))}};g.addOnWindowUnload=
b.addOnWindowUnload;g.addOnUnload=b.addOnUnload;return b})},"dojox/grid/scroller":function(){define("dojox/grid/scroller",["dojo/_base/declare","dojo","dojox/grid/scroller/base"],function(g,j,f){return g("dojox.grid.scroller",[f],{constructor:function(){this.pageNodes=[]},renderRow:function(){},removeRow:function(){},getDefaultNodes:function(){return this.pageNodes},getDefaultPageNode:function(a){return this.getDefaultNodes()[a]},positionPageNode:function(a,b){a.style.top=b+"px"},getPageNodePosition:function(a){return a.offsetTop},
repositionPageNodes:function(a,b){for(var e=0,h=0;h<this.stack.length;h++)e=Math.max(this.stack[h],e);for(var k=(h=b[a])?this.getPageNodePosition(h)+this.getPageHeight(a):0,f=a+1;f<=e;f++){if(h=b[f]){if(this.getPageNodePosition(h)==k)break;this.positionPage(f,k)}k+=this.getPageHeight(f)}},invalidatePageNode:function(a,b){var e=b[a];if(e)delete b[a],this.removePage(a,e),dojox.grid.cleanNode(e),e.innerHTML="";return e},preparePageNode:function(a,b,e){b=null===b?this.createPageNode():this.invalidatePageNode(b,
e);b.pageIndex=a;b.id="page-"+a;e[a]=b},pageExists:function(a){return Boolean(this.getDefaultPageNode(a))},measurePage:function(a){return this.getDefaultPageNode(a).offsetHeight},positionPage:function(a,b){this.positionPageNode(this.getDefaultPageNode(a),b)},repositionPages:function(a){this.repositionPageNodes(a,this.getDefaultNodes())},preparePage:function(a,b){this.preparePageNode(a,b?this.popPage():null,this.getDefaultNodes())},installPage:function(a){this.contentNode.appendChild(this.getDefaultPageNode(a))},
destroyPage:function(a){a=this.invalidatePageNode(a,this.getDefaultNodes());dojox.grid.removeNode(a)},renderPage:function(a){for(var b=this.pageNodes[a],e=0,a=a*this.rowsPerPage;e<this.rowsPerPage&&a<this.rowCount;e++,a++)this.renderRow(a,b)},removePage:function(a){for(var b=0,a=a*this.rowsPerPage;b<this.rowsPerPage;b++,a++)this.removeRow(a)},getPageRow:function(a){return a*this.rowsPerPage},getLastPageRow:function(a){return Math.min(this.rowCount,this.getPageRow(a+1))-1},getFirstVisibleRowNodes:function(a,
b,e,h){for(var k=this.getPageRow(a),a=dojox.grid.divkids(h[a]),h=0,f=a.length;h<f&&b<e;h++,k++)b+=a[h].offsetHeight;return k?k-1:k},getFirstVisibleRow:function(a,b,e){return!this.pageExists(a)?0:this.getFirstVisibleRowNodes(a,b,e,this.getDefaultNodes())},getLastVisibleRowNodes:function(a,b,e,h){for(var k=this.getLastPageRow(a),a=dojox.grid.divkids(h[a]),h=a.length-1;0<=h&&b>e;h--,k--)b-=a[h].offsetHeight;return k+1},getLastVisibleRow:function(a,b,e){return!this.pageExists(a)?0:this.getLastVisibleRowNodes(a,
b,e,this.getDefaultNodes())},findTopRowForNodes:function(a,b){for(var e=dojox.grid.divkids(b[this.page]),h=0,k=e.length,f=this.pageTop,n;h<k;h++)if(n=e[h].offsetHeight,f+=n,f>=a)return this.offset=n-(f-a),h+this.page*this.rowsPerPage;return-1},findScrollTopForNodes:function(a,b){for(var e=Math.floor(a/this.rowsPerPage),h=0,k=0;k<e;k++)h+=this.getPageHeight(k);this.pageTop=h;this.needPage(e,this.pageTop);for(var f=dojox.grid.divkids(b[e]),e=a-this.rowsPerPage*e,k=0,n=f.length;k<n&&k<e;k++)h+=f[k].offsetHeight;
return h},findTopRow:function(a){return this.findTopRowForNodes(a,this.getDefaultNodes())},findScrollTop:function(a){return this.findScrollTopForNodes(a,this.getDefaultNodes())},dummy:0})})},"url:ws/calendar/TodoApp.html":'<div class="appNode appTodo">\n\t<div data-dojo-type="dijit/layout/BorderContainer" data-dojo-attach-point="layoutWidget" class="layoutWidget">\n\t\t<div class="mainSprite mainSprite appTitleBar" data-dojo-type="ws/widget/Pane" data-dojo-props="region:\'top\'">\n\t\t\t<div class="appTitleLink" data-dojo-attach-point="appTitleLink" data-dojo-attach-event="onclick: appMenu"><span class="appTitle">${Panel_TodoLabel}</span><img src="${spacer}" class="mainSprite appTitleArrow"></div>\n\t\t\t<ul>\n\t\t\t\t<li class="mainSprite appTitleClose" data-dojo-attach-event="onclick: restoreApp" style="display:none;"></li>\n\t\t\t\t<li class="mainSprite appTitleAddTask" data-dojo-attach-point="appTitleAddTask" data-dojo-attach-event="onclick: quickAdd,onmouseout: onMouseOut,onmouseover: onMouseOver"></li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class="newItemBox" data-dojo-type="ws/widget/Pane" data-dojo-props="region:\'top\'" style="display:none;">\n\t\t\t<div data-dojo-type="ws/widget/DefaultTextbox" data-dojo-attach-point="newTaskBox" defaultValue="${EnterTask}"></div>\n\t\t</div>\n\t\t<div class="todoLoading" data-dojo-type="ws/widget/Pane" data-dojo-attach-point="todoLoading" data-dojo-props="region:\'center\'">\n\t\t\t<div class="todoSpinner" data-dojo-attach-point="todoSpinner"></div>\n\t\t\t<div class="todoLoadingMsg">${Loading}</div>\n\t\t</div>\n\t\t<div class="contentNode" data-dojo-type="ws/widget/Pane" data-dojo-attach-point="contentNode" data-dojo-props="region:\'center\'">\n\t\t\t<div data-dojo-attach-point="appTodoEmpty" data-dojo-type="ws/widget/Pane" data-dojo-props="region:\'center\'" style="display:none;">\n\t\t\t\t<div class="appTodoEmptyMsg">${TodoAppEmpty}</div>\n\t\t\t</div>\n\t\t\t<div class="todoNode" data-dojo-attach-point="todoNode" data-dojo-attach-event="onclick: onItemClick"></div>\n\t\t</div>\n\t</div>\n</div>\t\t\t\t\n\n',
"dojo/selector/_loader":function(){define(["../has","require"],function(g,j){var f=document.createElement("div");g.add("dom-qsa2.1",!!f.querySelectorAll);g.add("dom-qsa3",function(){try{return f.innerHTML="<p class='TEST'></p>",1==f.querySelectorAll(".TEST:empty").length}catch(a){}});var a;return{load:function(b,e,h){var k=j,b="default"==b?g("config-selectorEngine")||"css3":b,b="css2"==b||"lite"==b?"./lite":"css2.1"==b?g("dom-qsa2.1")?"./lite":"./acme":"css3"==b?g("dom-qsa3")?"./lite":"./acme":"acme"==
b?"./acme":(k=e)&&b;if("?"==b.charAt(b.length-1))var b=b.substring(0,b.length-1),f=!0;if(f&&(g("dom-compliant-qsa")||a))return h(a);k([b],function(e){"./lite"!=b&&(a=e);h(e)})}}})},"dojox/grid/scroller/columns":function(){define("dojox/grid/scroller/columns",["dojo/_base/declare","dojo","dojox/grid/scroller"],function(g,j,f){return g("dojox.grid.scroller.columns",f,{constructor:function(a){this.setContentNodes(a)},setContentNodes:function(a){this.colCount=(this.contentNodes=a)?this.contentNodes.length:
0;this.pageNodes=[];for(a=0;a<this.colCount;a++)this.pageNodes[a]=[]},getDefaultNodes:function(){return this.pageNodes[0]||[]},scroll:function(a){this.colCount&&dojox.grid.scroller.prototype.scroll.call(this,a)},resize:function(){if(this.scrollboxNode)this.windowHeight=this.scrollboxNode.clientHeight;for(var a=0;a<this.colCount;a++)dojox.grid.setStyleHeightPx(this.contentNodes[a],this.height)},positionPage:function(a,b){for(var e=0;e<this.colCount;e++)this.positionPageNode(this.pageNodes[e][a],b)},
preparePage:function(a,b){for(var e=b?this.popPage():null,h=0;h<this.colCount;h++)this.preparePageNode(a,e,this.pageNodes[h])},installPage:function(a){for(var b=0;b<this.colCount;b++)this.contentNodes[b].appendChild(this.pageNodes[b][a])},destroyPage:function(a){for(var b=0;b<this.colCount;b++)dojox.grid.removeNode(this.invalidatePageNode(a,this.pageNodes[b]))},renderPage:function(a){for(var b=[],e=0;e<this.colCount;e++)b[e]=this.pageNodes[e][a];e=0;for(a*=this.rowsPerPage;e<this.rowsPerPage&&a<this.rowCount;e++,
a++)this.renderRow(a,b)}})})},"ws/widget/ContainerPane":function(){define("ws/widget/ContainerPane",["dojo/_base/declare","dijit/_Widget","dijit/_Container"],function(g,j,f){return g([j,f],{})})},"dijit/place":function(){define("dijit/place","dojo/_base/array,dojo/dom-geometry,dojo/dom-style,dojo/_base/kernel,dojo/_base/window,dojo/window,./main".split(","),function(g,j,f,a,b,e,h){function k(a,h,k,f){var s=e.getBox(a.ownerDocument);(!a.parentNode||"body"!=(""+a.parentNode.tagName).toLowerCase())&&
b.body(a.ownerDocument).appendChild(a);var o=null;g.some(h,function(h){var b=h.corner,e=h.pos,n=0,g={w:{L:s.l+s.w-e.x,R:e.x-s.l,M:s.w}[b.charAt(1)],h:{T:s.t+s.h-e.y,B:e.y-s.t,M:s.h}[b.charAt(0)]},u=a.style;u.left=u.right="auto";k&&(n=k(a,h.aroundCorner,b,g,f),n="undefined"==typeof n?0:n);var B=a.style,C=B.display,I=B.visibility;if("none"==B.display)B.visibility="hidden",B.display="";u=j.position(a);B.display=C;B.visibility=I;C={L:e.x,R:e.x-u.w,M:Math.max(s.l,Math.min(s.l+s.w,e.x+(u.w>>1))-u.w)}[b.charAt(1)];
I={T:e.y,B:e.y-u.h,M:Math.max(s.t,Math.min(s.t+s.h,e.y+(u.h>>1))-u.h)}[b.charAt(0)];e=Math.max(s.l,C);B=Math.max(s.t,I);C=Math.min(s.l+s.w,C+u.w);I=Math.min(s.t+s.h,I+u.h);C-=e;I-=B;n+=u.w-C+(u.h-I);if(null==o||n<o.overflow)o={corner:b,aroundCorner:h.aroundCorner,x:e,y:B,w:C,h:I,overflow:n,spaceAvailable:g};return!n});o.overflow&&k&&k(a,o.aroundCorner,o.corner,o.spaceAvailable,f);var h=j.isBodyLtr(a.ownerDocument),u=a.style;u.top=o.y+"px";u[h?"left":"right"]=(h?o.x:s.w-o.x-o.w)+"px";u[h?"right":"left"]=
"auto";return o}return h.place={at:function(a,h,b,e){b=g.map(b,function(a){var b={corner:a,pos:{x:h.x,y:h.y}};e&&(b.pos.x+="L"==a.charAt(1)?e.x:-e.x,b.pos.y+="T"==a.charAt(0)?e.y:-e.y);return b});return k(a,b)},around:function(h,b,e,q,s){function o(a,h){J.push({aroundCorner:a,corner:h,pos:{x:{L:A,R:A+C,M:A+(C>>1)}[a.charAt(1)],y:{T:B,B:B+I,M:B+(I>>1)}[a.charAt(0)]}})}var u="string"==typeof b||"offsetWidth"in b?j.position(b,!0):b;if(b.parentNode)for(var p="absolute"==f.getComputedStyle(b).position,
b=b.parentNode;b&&1==b.nodeType&&"BODY"!=b.nodeName;){var v=j.position(b,!0),w=f.getComputedStyle(b);/relative|absolute/.test(w.position)&&(p=!1);if(!p&&/hidden|auto|scroll/.test(w.overflow)){var z=Math.min(u.y+u.h,v.y+v.h),x=Math.min(u.x+u.w,v.x+v.w);u.x=Math.max(u.x,v.x);u.y=Math.max(u.y,v.y);u.h=z-u.y;u.w=x-u.x}"absolute"==w.position&&(p=!0);b=b.parentNode}var A=u.x,B=u.y,C="w"in u?u.w:u.w=u.width,I="h"in u?u.h:(a.deprecated("place.around: dijit/place.__Rectangle: { x:"+A+", y:"+B+", height:"+
u.height+", width:"+C+" } has been deprecated.  Please use { x:"+A+", y:"+B+", h:"+u.height+", w:"+C+" }","","2.0"),u.h=u.height),J=[];g.forEach(e,function(a){var h=q;switch(a){case "above-centered":o("TM","BM");break;case "below-centered":o("BM","TM");break;case "after-centered":h=!h;case "before-centered":o(h?"ML":"MR",h?"MR":"ML");break;case "after":h=!h;case "before":o(h?"TL":"TR",h?"TR":"TL");o(h?"BL":"BR",h?"BR":"BL");break;case "below-alt":h=!h;case "below":o(h?"BL":"BR",h?"TL":"TR");o(h?"BR":
"BL",h?"TR":"TL");break;case "above-alt":h=!h;case "above":o(h?"TL":"TR",h?"BL":"BR");o(h?"TR":"TL",h?"BR":"BL");break;default:o(a.aroundCorner,a.corner)}});h=k(h,J,s,{w:C,h:I});h.aroundNodePos=u;return h}}})},"ws/dnd/HtmlDragManager":function(){define("ws/dnd/HtmlDragManager",["dojo","dojo/_base/lang"],function(g,j){j.setObject("ws.dnd.DragEvent",function(){this.target=this.dragObject=this.dragSource=null;this.eventStatus="success"});j.setObject("ws.dnd.dragManager",{disabled:!1,nestedTargets:!1,
mouseDownTimer:null,dsCounter:0,dsPrefix:"dojoDragSource",dropTargetDimensions:[],currentDropTarget:null,previousDropTarget:null,_dragTriggered:!1,lastDragTarget:null,currentDragTarget:null,selectedSources:[],dragObjects:[],dragSources:[],dropTargets:[],currentX:null,currentY:null,lastX:null,lastY:null,mouseDownX:null,mouseDownY:null,threshold:7,dropAcceptable:!1,cancelEvent:function(a){a.stopPropagation();a.preventDefault()},registerDragSource:function(a){if(a.domNode){var e=this.dsPrefix,h=e+"Idx_"+
this.dsCounter++;a.dragSourceId=h;this.dragSources[h]=a;a.domNode.setAttribute(e,h);if(g.isIE)this.dragstartHandle=g.connect(a.domNode,"ondragstart",this.cancelEvent)}},unregisterDragSource:function(a){if(a.domNode){var e=this.dsPrefix,h=a.dragSourceId;delete a.dragSourceId;delete this.dragSources[h];a.domNode.setAttribute(e,null);g.isIE&&g.disconnect(this.dragstartHandle)}},registerDropTarget:function(a){this.dropTargets.push(a)},unregisterDropTarget:function(a){a=g.indexOf(this.dropTargets,a,null,
!0);0<=a&&this.dropTargets.splice(a,1)},getDragSource:function(a){a=a.target;if(a!==g.body()){for(var e=a.getAttribute(this.dsPrefix);!e&&a;){a=a.parentNode;if(!a||a===g.body())return;a.getAttribute&&(e=a.getAttribute(this.dsPrefix))}return this.dragSources[e]}},onKeyDown:function(a){if(0!=this.selectedSources.length)switch(a.keyCode){case g.keys.ESCAPE:this.dropAcceptable=!1,this.onMouseUp(a,!0)}},onMouseDown:function(a){if(a&&!this.disabled){if(9>g.isIE){if(1!=a.button)return}else if(1!=a.which)return;
var e=3==a.target.nodeType?a.target.parentNode:a.target;if(-1==g.indexOf(["button","textarea","input","select","option"],e.tagName.toLowerCase())){var h=this.getDragSource(a);if(h)-1==g.indexOf(this.selectedSources,h)&&(this.selectedSources.push(h),h.onSelected()),this.mouseDownX=a.pageX,this.mouseDownY=a.pageY,this.mouseDownTarget=e,a.preventDefault(),this.mousemoveHandle=g.connect(document,"onmousemove",this,"onMouseMove")}}},onMouseUp:function(a){if(a&&0!=this.selectedSources.length){this.mouseDownY=
this.mouseDownX=null;this._dragTriggered=!1;a.dragSource=this.dragSource;if(!a.shiftKey&&!a.ctrlKey){if(this.currentDropTarget)this.currentDropTarget.onDropStart();g.forEach(this.dragObjects,function(e){var h=null;if(e){if(this.currentDropTarget){a.dragObject=e;var k=this.currentDropTarget.domNode.childNodes;if(0<k.length)for(a.dropTarget=k[0];a.dropTarget==e.domNode;)a.dropTarget=a.dropTarget.nextSibling;else a.dropTarget=this.currentDropTarget.domNode;if(this.dropAcceptable)h=this.currentDropTarget.onDrop(a);
else this.currentDropTarget.onDragOut(a)}a.dragStatus=this.dropAcceptable&&h?"dropSuccess":"dropFailure";setTimeout(function(){try{e.dragSource.onDragEnd(a)}catch(h){var k={},f;for(f in a)"type"==f?k.type="mouseup":k[f]=a[f];e.dragSource.onDragEnd(k)}},0);setTimeout(function(){e.onDragEnd(a)},0)}},this);this.selectedSources=[];this.dragObjects=[];this.dragSource=null;if(this.currentDropTarget)this.currentDropTarget.onDropEnd()}g.disconnect(this.mousemoveHandle);this.currentDropTarget=null}},onScroll:function(){for(var a=
0;a<this.dragObjects.length;a++)this.dragObjects[a].updateDragOffset&&this.dragObjects[a].updateDragOffset();this.dragObjects.length&&this.cacheTargetLocations()},_dragStartDistance:function(a,e){if(this.mouseDownX&&this.mouseDownX){var h=Math.abs(a-this.mouseDownX),h=h*h,k=Math.abs(e-this.mouseDownY);return parseInt(Math.sqrt(h+k*k),10)}},cacheTargetLocations:function(){this.dropTargetDimensions=[];g.forEach(this.dropTargets,function(a){var e=a.domNode;if(e&&e.parentNode&&a.accepts([this.dragSource])){var h=
g.position(e),k=g.contentBox(e),e=g._getPadBorderExtents(e);this.dropTargetDimensions.push([[h.x,h.y],[h.x+k.w-e.w,h.y+k.h-e.h],a])}},this)},onMouseMove:function(a){if(a)if(9>g.isIE&&1!=a.button)this.currentDropTarget=null,this.onMouseUp(a,!0);else{if(this.selectedSources.length&&!this.dragObjects.length){var e,h;if(!this._dragTriggered){this._dragTriggered=this._dragStartDistance(a.pageX,a.pageY)>this.threshold;if(!this._dragTriggered)return;e=a.pageX-this.mouseDownX;h=a.pageY-this.mouseDownY}this.dragSource=
this.selectedSources[0];g.forEach(this.selectedSources,function(k){if(k){var f=k.onDragStart(a);if(f)f.onDragStart(a),f.dragOffset.y+=h,f.dragOffset.x+=e,f.dragSource=k,this.dragObjects.push(f)}},this);this.previousDropTarget=null;this.cacheTargetLocations()}g.forEach(this.dragObjects,function(h){if(h)h.onDragMove(a)});if(this.currentDropTarget)var k=g.position(this.currentDropTarget.domNode),k=[[k.x,k.y],[k.x+k.w,k.y+k.h]];if(!this.nestedTargets&&k&&this.isInsideBox(a,k)){if(this.dropAcceptable)this.currentDropTarget.onDragMove(a,
this.dragObjects)}else if(k=this.findBestTarget(a),null===k.target){if(this.currentDropTarget)this.currentDropTarget.onDragOut(a),this.previousDropTarget=this.currentDropTarget,this.currentDropTarget=null;this.dropAcceptable=!1}else if(this.currentDropTarget!==k.target){if(this.currentDropTarget)this.previousDropTarget=this.currentDropTarget,this.currentDropTarget.onDragOut(a);this.currentDropTarget=k.target;a.dragObjects=this.dragObjects;this.dropAcceptable=this.currentDropTarget.onDragOver(a)}else if(this.dropAcceptable)this.currentDropTarget.onDragMove(a,
this.dragObjects)}},findBestTarget:function(a){var e=this,h={target:null,points:null};g.every(this.dropTargetDimensions,function(k){if(!e.isInsideBox(a,k))return!0;h.target=k[2];h.points=k;return Boolean(e.nestedTargets)});return h},isInsideBox:function(a,e){return a.pageX>e[0][0]&&a.pageX<e[1][0]&&a.pageY>e[0][1]&&a.pageY<e[1][1]?!0:!1},onMouseOver:function(){},onMouseOut:function(){}});var f=document,a=ws.dnd.dragManager;g.connect(f,"onkeydown",a,"onKeyDown");g.connect(f,"onmouseover",a,"onMouseOver");
g.connect(f,"onmouseout",a,"onMouseOut");g.connect(f,"onmousedown",a,"onMouseDown");g.connect(f,"onmouseup",a,"onMouseUp");g.connect(window,"onscroll",a,"onScroll")})},"url:ws/suite/Hat.html":'<div class="WSHat">\n\t<div class="leftHat" data-dojo-attach-point="leftHat">\n\t\t<div class="logoArea" data-dojo-attach-point="logoArea" data-dojo-attach-event="onclick: onLogoClick">\n\t\t\t<span style="display: none;" class="CalSoloText" data-dojo-attach-point="CalSoloText"></span>\n\t\t</div>\n\t</div>\n\t<div class="searchArea" data-dojo-attach-point="searchAreaNode" style="display: none">\n\t\t<input type="text" name="query" autocomplete="off" maxlength="256" class="wsInput search" value="" data-dojo-attach-point="searchWebField" data-dojo-attach-event="onkeypress: onKeyPressSearchWebField" />\n\t\t<div class="searchButtonContainer" data-dojo-attach-point="searchButtonContainer">\n\t\t\t<div data-dojo-type="ws/widget/Button" data-dojo-attach-point="searchWebButton" id="searchButton" size="Large" data-dojo-attach-event="onClick: searchWeb">\n\t\t\t\t${SearchCaps}</div>\n\t\t</div>\n\t</div>\n\t<div data-dojo-attach-point="rightHat" class="rightHat">\n\t\t<div data-dojo-attach-point="navIconsDiv" class="navIconsDiv" >\n\t\t\t<img src="${spacer}" class="mainSprite navIcon homeIcon" data-dojo-attach-event="onmouseenter:showTip,onmouseleave:hideTip" data-dojo-attach-point="homeIcon">\n\t\t\t<img src="${spacer}" class="mainSprite navIcon mailIcon" data-dojo-attach-point="mailIcon" title="">\n\t\t\t<img src="${spacer}" class="mainSprite navIcon onVidIcon" data-dojo-attach-event="onmouseenter:showTip,onmouseleave:hideTip" data-dojo-attach-point="onVidIcon">\n\t\t\t<img src="${spacer}" class="mainSprite navIcon favsIcon" data-dojo-attach-event="onmouseenter:showTip,onmouseleave:hideTip" data-dojo-attach-point="favsIcon">\n\t\t</div>\n\t\t<div class="salutation">\n\t\t\t<div data-dojo-attach-point="screenNameNode" class="screenNameNode"></div>\n\t\t</div>\n\t\t<div data-dojo-attach-point="adminLinks" class="adminLinks">\n\t\t\t<span data-dojo-attach-point="signOutLink" class="signOutLink"></span>\n\t\t\t<span class="pipe">&nbsp;</span>\n\t\t\t<span data-dojo-attach-point="megaMenuNode" class="link"><a href="#" data-dojo-attach-point="optionsLink" class="link" tabindex=0>${Options}</a><img data-dojo-attach-point="megaMenuArrow" src="${spacer}" class="btnArrowImg megaMenuArrow"></span>\n\t\t</div>\n\t</div>\n\t<div class="hatBoxShadow mainSprite"></div>\n</div>\n',
"ws/calendar/calutil":function(){define("ws/calendar/calutil","dojo,dojo/_base/lang,ws/date,ws/io,ws/reporting,ws/string,ws/presence,ws/UserContext".split(","),function(g,j){j.setObject("ws.calendar.calutil",{kADDRESS_STREET:0,kADDRESS_CITY:1,kADDRESS_STATE:2,kADDRESS_ZIP:3,kADDRESS_COUNTRY:4,componentColorMap:{"#009712":{border:"#009712",dark:"#009712",light:"#009712"},"#0360EB":{border:"#0360EB",dark:"#0360EB",light:"#0360EB"},"#CC0000":{border:"#CC0000",dark:"#CC0000",light:"#CC0000"},"#E76808":{border:"#E76808",
dark:"#E76808",light:"#E76808"},"#808000":{border:"#808000",dark:"#808000",light:"#808000"},"#6600FF":{border:"#6600FF",dark:"#6600FF",light:"#6600FF"},"#008080":{border:"#008080",dark:"#008080",light:"#008080"},"#800080":{border:"#800080",dark:"#800080",light:"#800080"},"#6C6C6C":{border:"#6C6C6C",dark:"#6C6C6C",light:"#6C6C6C"},"#0088FF":{border:"#0088FF",dark:"#0088FF",light:"#0088FF"},"#646496":{border:"#646496",dark:"#646496",light:"#646496"},"#FF0080":{border:"#FF0080",dark:"#FF0080",light:"#FF0080"}},
componentColorMapRGBAIE:{"#009712":"#B2E6A8","#0360EB":"#AACDF5","#CC0000":"#F69E9D","#E76808":"#FED295","#808000":"#F2E7B1","#6600FF":"#B7ADEA","#008080":"#9DDBD6","#800080":"#C0A594","#6C6C6C":"#D7D7D7","#0088FF":"#D4E099","#646496":"#B0B0B0","#FF0080":"#F6B7D1"},componentColorMapTxt:{"#009712":"#397031","#0360EB":"#2A5581","#CC0000":"#8F2121","#E76808":"#6C450E","#808000":"#695B13","#6600FF":"#382D72","#008080":"#086D65","#800080":"#4D230A","#6C6C6C":"#656565","#0088FF":"#5F6f0E","#646496":"#292929",
"#FF0080":"#9F2254"},componentColorMapRGBA:{"#009712":"rgba(66,195,48,0.4)","#0360EB":"rgba(49,137,230,0.4)","#CC0000":"rgba(234,25,25,0.4)","#E76808":"rgba(253,148,0,0.4)","#808000":"rgba(223,197,70,0.4)","#6600FF":"rgba(81,60,204,0.4)","#008080":"rgba(20,170,158,0.4)","#800080":"rgba(104,39,0,0.4)","#6C6C6C":"rgba(155,155,155,0.4)","#0088FF":"rgba(148,178,0,0.4)","#646496":"rgba(58,58,58,0.4)","#FF0080":"rgba(233,76,139,0.4)"},initSimpleLocation:function(){return{street:"",city:"",state:"",zip:"",
country:"US",originalLocationString:""}},initMapViewStruct:function(){return{width:"140",height:"140",zoom:"10",zoomCtrl:"true",viewCtrl:"false"}},privateSetSimpleLocationField:function(f,a,b){a=g.trim(a);switch(b){case this.kADDRESS_STREET:f.street=a;break;case this.kADDRESS_CITY:f.city=a;break;case this.kADDRESS_STATE:f.state=a;break;case this.kADDRESS_ZIP:f.zip=a}},reallySimpleLocationToUSAddressParser:function(f){var a=this.initSimpleLocation();a.originalLocationString=f;var b=f.split(",");if(3==
b.length){var e=g.trim(b[2]),h=e.lastIndexOf(" ");if(0<=h){var k=e.substring(h+1),k=g.trim(k),l=k.charAt(0);null!=l&&"0"<=l&&"9">=l&&(b[2]=g.trim(e.substring(0,h)),b[3]=k)}}for(e=0;e<b.length;e++)this.privateSetSimpleLocationField(a,b[e],e);2==b.length&&(k=g.trim(b[1]),e=g.trim(b[0]),5==k.length&&0<parseInt(k)?0<parseInt(e)?(this.privateSetSimpleLocationField(a,k,3),this.privateSetSimpleLocationField(a,"",1)):2==e.length&&(this.privateSetSimpleLocationField(a,"",1),this.privateSetSimpleLocationField(a,
e,2),this.privateSetSimpleLocationField(a,k,3),this.privateSetSimpleLocationField(a,"",0)):(e=k,k=g.trim(b[0]),!(0<parseInt(k))&&2==e.length&&(this.privateSetSimpleLocationField(a,"",0),this.privateSetSimpleLocationField(a,k,1),this.privateSetSimpleLocationField(a,e,2))));if(1==b.length)if(k=g.trim(b[0]),l=k.charAt(0),null!=l&&"0"<=l&&"9">=l){f=!0;if(5==k.length)for(e=1;5>e;e++){if("0">k.charAt(e)||"9"<k.charAt(e))f=!1}else f=!1;f?(this.privateSetSimpleLocationField(a,"",0),this.privateSetSimpleLocationField(a,
"",1),this.privateSetSimpleLocationField(a,"",2),this.privateSetSimpleLocationField(a,k,3)):(this.privateSetSimpleLocationField(a,"",0),this.privateSetSimpleLocationField(a,a.originalLocationString,1),this.privateSetSimpleLocationField(a,"",2),this.privateSetSimpleLocationField(a,"",3))}else b=f.split(/\s+/),2==b.length?(e=b[0],k=b[1],2==e.length&&this.privateSetSimpleLocationField(a,e,2),l=k.charAt(0),null!=l&&"0"<=l&&"9">=l&&this.privateSetSimpleLocationField(a,k,3),this.privateSetSimpleLocationField(a,
"",0),1>a.state.length&&1>a.zip.length&&this.privateSetSimpleLocationField(a,a.originalLocationString,1)):(1==b.length&&2==b[0].length?(this.privateSetSimpleLocationField(a,"",0),this.privateSetSimpleLocationField(a,"",1),this.privateSetSimpleLocationField(a,b[0],2)):(this.privateSetSimpleLocationField(a,"",0),this.privateSetSimpleLocationField(a,a.originalLocationString,1),this.privateSetSimpleLocationField(a,"",2)),this.privateSetSimpleLocationField(a,"",3));return a},showMapLink:function(f,a){this.showMapLinkFromLocStruct(ws.calendar.calutil.reallySimpleLocationToUSAddressParser(f),
a,"map")},showMapLinkFromLocStruct:function(f,a,b){if(null!=f&&(!a||this.IsLocationStructValidUSAddress(f))){a=null;switch(b){case null:case "map":a="http://www.mapquest.com/maps/map.adp?address="+f.street+"&city="+f.city+"&state="+f.state+"&zipcode="+f.zip+"&country=US&cid=lfmaplink";break;case "to":a="http://www.mapquest.com/directions/main.adp?src=maps&1sb=revise&2v=ADDRESS&2a="+f.street+"&2c="+f.city+"&2s="+f.state+"&2z="+f.zip+"&2y=US";break;case "from":a="http://www.mapquest.com/directions/main.adp?src=maps&2sb=revise&1v=ADDRESS&1a="+
f.street+"&1c="+f.city+"&1s="+f.state+"&1z="+f.zip+"&1y=US"}null!=a&&(f=ws.io.openWindow(a,"Mapquest",""),null!=f&&(f.focus(),ws.reporting.reportDLAction("Mail-Calendar-ShowMap")))}},getMapIFrameURL:function(f,a){var b=null;return b=Config.EnableShowInlineMapFreeformParse?ws.string.substituteParams("{0}common/MapUtil.aspx?fullAddress={1}&width={2}&height={3}&zoom={4}&zoomCtrl={5}&viewCtrl={6}",Config.BasePagesURL,f.originalLocationString,a.width,a.height,a.zoom,a.zoomCtrl,a.viewCtrl):ws.string.substituteParams("{0}common/MapUtil.aspx?street={1}&city={2}&state={3}&country=US&width={4}&height={5}&zoom={6}&zoomCtrl={7}&viewCtrl={8}",
Config.BasePagesURL,f.street,f.city,f.state,a.width,a.height,a.zoom,a.zoomCtrl,a.viewCtrl)},kStateAbbrevArray:"AL,AK,AS,AZ,AR,CA,CO,CT,DE,DC,FM,FL,GA,GU,HI,ID,IL,IN,IA,KS,KY,LA,ME,MH,MD,MA,MI,MN,MS,MO,MT,NE,NV,NH,NJ,NM,NY,NC,ND,MP,OH,OK,OR,PW,PA,PR,RI,SC,SD,TN,TX,UT,VT,VI,VA,WA,WV,WI,WY".split(","),kStateFullArray:"ALABAMA,ALASKA,AMERICAN SAMOA,ARIZONA,ARKANSAS,CALIFORNIA,COLORADO,CONNECTICUT,DELAWARE,DISTRICT OF COLUMBIA,FEDERATED STATES OF MICRONESIA,FLORIDA,GEORGIA,GUAM,HAWAII,IDAHO,ILLINOIS,INDIANA,IN,IOWA,KANSAS,KENTUCKY,LOUISIANA,MAINE,MARSHALL ISLANDS,MARYLAND,MASSACHUSETTS,MICHIGAN,MINNESOTA,MISSISSIPPI,MISSOURI,MONTANA,NEBRASKA,NEVADA,NEW HAMPSHIRE,NEW JERSEY,NEW MEXICO,NEW YORK,NORTH CAROLINA,NORTH DAKOTA,NORTHERN MARIANA ISLANDS,OHIO,OKLAHOMA,OREGON,PALAU,PENNSYLVANIA,PUERTO RICO,RHODE ISLAND,SOUTH CAROLINA,SOUTH DAKOTA,TENNESSEE,TEXAS,UTAH,VERMONT,VIRGIN ISLANDS,VIRGINIA,WASHINGTON,WEST VIRGINIA,WISCONSIN,WYOMING".split(","),
IsLocationStructValidUSAddress:function(f){var a=!1;if(null==f||0==f.length)return!1;if(Config.EnableShowInlineMapFreeformParse)return!0;if(!f.street||!f.city||!f.state)return!1;var f=f.state.toUpperCase(),b=0;2==f.length&&(b=g.indexOf(this.kStateAbbrevArray,f),0<=b&&(a=!0));return a},LocalPopulateCalendarListFromCalArray:function(f,a,b,e){if(null!=f&&0<f.length)for(var h=0,k=null!=b,l=[],h=0;h<f.length;h++){var n=f[h],g=n[a.id],n=ws.string.escapeXml(n[a.displayName]);k?l.push({display:n,value:g,
selected:g==b}):l.push({display:n,value:g,selected:0==h});e.setOptions(l)}},GetDefaultCalid:function(f){for(var a=ws.WebSuite.theCalendarModel,b=ws.WebSuite.theCalendarModel.calendars,e=0;e++;)if(0==f&&0==b[e][a.calendarEnum.calType]||1==f&&1==b[e][a.componentEnum])return b[e][a.calendarEnum.id];return""},DecodeHTMLEntities:function(f){for(var a=f.match(/&#\d+;?/g),b=a?a.length:0,e=0;e<b;e++)var h=String.fromCharCode(a[e].replace(/\D/g,"")),f=f.replace(/&#\d+;?/,h);return f},DecodeHTML:function(f){if(null==
f)return null;f=f.replace(/&#38;|&amp;/g,"&");f=f.replace(/&#60;|&lt;/g,"<");f=f.replace(/&#62;|&gt;/g,">");f=f.replace(/&#34;|&quot;/g,'"');f=f.replace(/&#39;|&apos;/g,"'");return f=f.replace(/\\x2f/g,"/")},GetNext30MinuteIncrement:function(f){30>f.getMinutes()?f.setMinutes(30):(f=ws.date.add(f,ws.date.dateParts.HOUR,1),f.setMinutes(0));return f},GetTimezoneInfo:function(){var f=new Date,a=new Date(f.getFullYear(),0,1,0,0,0,0),f=new Date(f.getFullYear(),6,1,0,0,0,0),a=a.getTimezoneOffset(),f=f.getTimezoneOffset();
return ws.string.substituteParams("{0}|{1}",-a,-f)},GetTimezoneInfoInObject:function(){var f=new Date,a=new Date(f.getFullYear(),0,1,0,0,0,0),f=new Date(f.getFullYear(),6,1,0,0,0,0),a=a.getTimezoneOffset(),f=f.getTimezoneOffset(),b={};b.winterOffset=-a;b.summerOffset=-f;return b},ConvertTimeZoneStringToTZID:function(f){var f="",a=this.GetTimezoneInfoInObject();if(null!=a){var b=a.winterOffset,a=a.summerOffset;-480==b&&-420==a?f="America/Los_Angeles":-420==b&&-360==a?f="America/Denver":-360==b&&-300==
a?f="America/Chicago":-300==b&&-240==a?f="America/New_York":-420==b&&-420==a?f="America/Phoenix":-300==b&&-300==a?f="America/Indianapolis":-540==b&&-480==a?f="America/Anchorage":-600==b&&-600==a?f="Pacific/Honolulu":-240==b&&-180==a?f="America/Halifax":-210==b&&-150==a&&(f="America/St_Johns")}return f},AdjustEndTimeTo30MinsAfterStart:function(f,a,b,e,h,k){if(23!=a.hr||23==a.hr&&0==a.min)0==a.min?(b.hr=a.hr,b.min=30):(b.hr=a.hr+1,b.min=0),a=null,a=null!=e?ws.date.ParseDateFromFormat(e,h):new Date,
a.setHours(b.hr,b.min),f=ws.date.formatDateTime(a,k);return f},AdjustStartTimeTo30MinsBeforeEnd:function(f,a,b,e,h,k){if(!(0==b.hr&&0==b.min))30<=b.min?(a.hr=b.hr,a.min=0):(a.hr=b.hr-1,a.min=30),b=null,b=null!=e?ws.date.ParseDateFromFormat(e,h):new Date,b.setHours(a.hr,a.min),f=ws.date.formatDateTime(b,k);return f},showConfirmRecurDialog:function(f,a){if("edit"==f)var b=Config.Strings.RepeatEventMsg,e=[Config.Strings.RepeatEventOnly,Config.Strings.RepeatEventFuture,Config.Strings.Cancel];else b=Config.Strings.RepeatEventDelMsg,
e=[Config.Strings.RepeatEventDelOnly,Config.Strings.RepeatEventDelFuture,Config.Strings.Cancel];ws.widget.Dialogs.show(b,e,function(h){a&&a(2!=h,0==h?"CHANGE_CURRENT":"CHANGE_FUTURE")},{width:500})},getNewCalTicket:function(){return"tk"+(new Date).getTime()},getPublicCalendarURL:function(f,a){return Config.PubCalEmailURL+"?encalid="+this.encode64(f)+(null!=a&&0<a.length?"&t="+a:"")},getSubscribeCalendarURL:function(f,a){return Config.BaseDotNETPagesURL+"calendar/subscribecalendar.aspx?encalid="+this.encode64(f)+
(a?"&t="+encodeURIComponent(a):"")},getPublicCalendarData:function(f,a){var b=this.encode64(f),e=new Date;e.setDate(1);var h=ws.date.add(e,ws.date.dateParts.YEAR,1);return Config.BaseCalPagesUrl+"anon/export?comptype=EVENT&encalid="+encodeURIComponent(b)+"&dtstart="+ws.date.formatRFC2445(e)+"&dtend="+ws.date.formatRFC2445(h)+(null!=a&&0<a.length?"&t="+a:"")},getSharingTableRowNode:function(f,a){var b=g.create("tr",{onmouseover:g.hitch(a,"onMouseOverScreenNameRow"),onmouseout:g.hitch(a,"onMouseOutScreenNameRow")});
b.nSn=f;if(Config.ShowPresenceIcon){var e=f,h=ws.presence.parseEmailAddress(e);if(h&&-1!=g.indexOf(Config.KnownDomains,h.domain))e=h.name;e=ws.presence.getBuddyIconUrl({screenName:e});b.appendChild(g.create("td",{className:"buddyIconTD",width:"38px",innerHTML:"<img class='buddyIcon' width='32' height='32' border='1' align='absmiddle' src='"+e+"' onerror='this.src=Config.SpacerImageURL;'>"}));b.appendChild(g.create("td",{width:"155px",innerHTML:"<span style='padding-right:5px' title='"+f+"'>"+f+"</span>"}));
b.appendChild(g.create("td",{align:"left",width:"20px",innerHTML:"<div style='display:none' class='mainSprite wsHotClearButton'></div>"}))}else b.appendChild(g.create("td",{className:"buddyIconTD",width:"0px"})),b.appendChild(g.create("td",{width:"155px",innerHTML:"<span style='padding-right:5px' title='"+f+"'>"+f+"</span>"})),b.appendChild(g.create("td",{align:"left",width:"30px",innerHTML:"<div style='display:none' class='mainSprite wsHotClearButton'></div>"}));b.appendChild(g.create("td",{style:"width:155px;"}));
return b},keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode64:function(f){var a="",b,e,h,k,l,n,g=0;do b=f.charCodeAt(g++),e=f.charCodeAt(g++),h=f.charCodeAt(g++),k=b>>2,b=(b&3)<<4|e>>4,l=(e&15)<<2|h>>6,n=h&63,isNaN(e)?l=n=64:isNaN(h)&&(n=64),a=a+this.keyStr.charAt(k)+this.keyStr.charAt(b)+this.keyStr.charAt(l)+this.keyStr.charAt(n);while(g<f.length);return a},selectedCalendarsExist:function(f){for(var a=f.getCalendarList(),f=f.calendarEnum,b=0;b<a.length;b++)if(a[b][f.selected])return!0;
return!1},showNoCalendarsSelectedDialog:function(f){return!ws.WebSuite.shownNoCalendarSelectedDialog||f?(ws.WebSuite.shownNoCalendarSelectedDialog=!0,ws.widget.Dialogs.ok(Config.Strings.NoSelectedCalendars),!0):!1},decode64:function(f){var a="",b,e,h,k,l,g=0,f=f.replace(/[^A-Za-z0-9\+\/\=]/g,"");do b=this.keyStr.indexOf(f.charAt(g++)),e=this.keyStr.indexOf(f.charAt(g++)),k=this.keyStr.indexOf(f.charAt(g++)),l=this.keyStr.indexOf(f.charAt(g++)),b=b<<2|e>>4,e=(e&15)<<4|k>>2,h=(k&3)<<6|l,a+=String.fromCharCode(b),
64!=k&&(a+=String.fromCharCode(e)),64!=l&&(a+=String.fromCharCode(h));while(g<f.length);return a}})})},"ws/widget/util":function(){define("ws/widget/util","dojo,dijit,dojo/window,dijit/registry,dijit/_Widget,dijit/WidgetSet,ws/widget/WSMenu,ws/widget/WSMenuItem,ws/widget/WSMenuSeparator,ws/presence,ws/reporting".split(","),function(g,j,f,a,b,e,h,k,l){g.extend(b,{show:function(){g.hasClass(this.domNode,"dijitStackContainer-child")&&g.removeClass(this.domNode,"dijitHidden");this.domNode.style.display=
""},hide:function(){g.hasClass(this.domNode,"dijitStackContainer-child")&&g.addClass(this.domNode,"dijitHidden");this.domNode.style.display="none"},isShowing:function(){return this.domNode&&g.hasClass(this.domNode,"dijitStackContainer-child")?!g.hasClass(this.domNode,"dijitHidden"):this.domNode&&"none"!=this.domNode.style.display},setShowing:function(a){a?this.show():this.hide()},setEnabled:function(a){a?this.enable():this.disable()},resize:function(a){if(a&&(!this.coords||this.coords.w!=a.w||this.coords.h!=
a.h))this.coords=a,g.marginBox(this.domNode,a);this.onResized()},onResized:function(){var a=this.stackWidget||this.layoutWidget;a&&a.resize&&a.resize()},onShow:function(){var a=g.contentBox(this.domNode);if(a.w!=this.width||a.h!=this.height)this.onResized();this.width=a.w;this.height=a.h},onHide:function(){},spacer:Config.SpacerImageURL,baseimages:Config.BaseImagesURL,images:Config.BaseResourcesURL+"images/",affinityimages:Config.BaseAffinityResourcesURL+"images/"});g.extend(e,{first:function(){for(var a in this._hash)return this._hash[a];
return null}});g.mixin(ws.widget,{insertCssText:function(a,h){if(a&&0!=a.length){var b=a.match(/\$\{([^\}]+)\}/g);if(b)for(var e=0;e<b.length;e++){var k=b[e],k=k.substring(2,k.length-1);(k=j._Widget.prototype[k])&&(a=a.replace(b[e],k))}var f,b=g.doc.getElementsByTagName("style");25>b.length?(f=g.doc.createElement("style"),b=g.doc.getElementsByTagName(g.isSafari||h?"head":"body")[0],b||(b=g.doc.createElement("head"),g.place(b,g.doc.documentElement,"first")),b.appendChild(f)):f=b[b.length-1];f.styleSheet?
(b=function(){try{f.styleSheet.cssText+=a}catch(h){}},f.styleSheet.disabled?setTimeout(b,10):b()):(b=g.doc.createTextNode(a),f.appendChild(b));return f}},createMenu:function(a){var b=new h;g.forEach(a,function(a){a&&(a=new (a.dojoType?a.dojoType:a.separator?l:k)(a),b.addChild(a))});g.body().appendChild(b.domNode);b.startup();return b},fixFFCursor:function(a){if(g.isMoz)a.style.overflow="hidden",ws.lang.setTimeout(this,function(){a.style.overflow="auto"},0)},pointer:function(a){var h=g.query(".wsPointerContainer",
a.node)[0];h||(h=document.createElement("div"),a.node.appendChild(h));h.className="wsPointerContainer wsPointerContainer-"+a.side;h.style.display="block";h.style.zIndex=2;var b=g.query(".wsPointer",a.node)[0];b||(b=document.createElement("div"),h.appendChild(b));b.pointerSide=a.side;b.className="wsPointer wsPointer-"+a.side;b.style.display="block";b.style.zIndex=2;var e=g.position(a.node),k=g.position(a.target);"right"==a.side||"left"==a.side?(e=k.y-e.y,e+=a.target.offsetHeight/2,e-=ws.widget.pointerHeight,
e+=a.nudge?a.nudge:0,b.style.top=Math.round(e)+"px",b.style.left="0",h.style.width=this.pointerWidth+"px",h.style.height=g._getMarginSize(a.node).h+"px",g.addClass(h,"wsPointerContainer-0Top"),g.removeClass(h,".wsPointerContainer-0Left")):(e=k.x-e.x,e+=a.target.offsetWidth/2,e-=ws.widget.pointerWidth,e+=a.nudge?a.nudge:0,b.style.left=Math.round(e)+"px",b.style.top="0",h.style.height=this.pointerHeight+"px",h.style.width=g._getMarginSize(a.node).w+"px",g.addClass(h,"wsPointerContainer-0Left"),g.removeClass(h,
".wsPointerContainer-0Top"));return h},setPointerLoc:function(a,h){if(null!=h){var b=g.query(".wsPointer",a)[0];b||(b=document.createElement("div"),a.appendChild(b));b.pointerSide=h.side;b.className="wsPointer wsPointer-"+h.side;b.style.display="block";b.style.zIndex=2;"right"==h.side||"left"==h.side?(b.style.top=h.offset+"px",b.style.left=""):(b.style.left=h.offset+"px",b.style.top="")}},getPointerLoc:function(a){var h=g.query(".wsPointer",a)[0];if(!h)return null;a=h.pointerSide;h="right"==a||"left"==
a?parseInt(h.style.top):parseInt(h.style.left);return{offset:isNaN(h)?0:h,side:a}},hidePointer:function(a){if(a=g.query(".wsPointer",a)[0])a.style.display="none"},pointerWidth:15,pointerHeight:12,getEventTarget:function(a,h,b){a=a.target||a.srcElement;if(3==a.nodeType)a=a.parentNode;if(g.hasClass(a,h))return a;for(;"BODY"!=a.nodeName&&(!b||!g.hasClass(a,b));){if(g.hasClass(a,h))return a;a=a.parentNode}return null},_showInstatip:function(a,h,b,e,k){g.byId("instatip").innerHTML=h;b||(b=g.marginBox(window.wsMasterTip));
h=b.w;tipHeight=b.h;var l=e||g.position(a);if(!(0==l.w&&0==l.y)){var j=l.x+l.w/2-h/2,v=l.y+l.h+4,e=h/2-6,b=-7,w="mainSprite instatipArrow";"right"==k?(j=l.x+l.w+12,v=l.y+(l.h-tipHeight)/2,e=-10,b=tipHeight/2-6,w+=" instatipArrowR"):"left"==k?(j=l.x-h-12,v=l.y+(l.h-tipHeight)/2,e=h+7,b=tipHeight/2-6,w+=" instatipArrowL"):"top"==k&&(b=tipHeight-4,v=l.y-tipHeight-4-11,w+=" instatipArrowT");if(0>j)j=3,e=l.x+l.w/2-8;else{var k=j+h,z=f.getBox().w;k>z&&(j-=k-z+3,e=h-l.w/2-4-(z-(l.x+l.w)))}g.style(window.wsMasterTip,
{top:v+"px",left:j+"px"});if(h=g.query(".instatipArrow")[0])h.className=w,h.style.left=e+"px",h.style.top=b+"px";window.wsMasterTip.style.visibility="visible";this.currentInstatipNode=a}},hideInstatip:function(a){this.instatipAboutToShowNode&&a==this.instatipAboutToShowNode&&this.clearInstatipTimer();window.wsMasterTip.style.visibility="hidden"},showInstatip:function(a,h){if(a){h||(h={});if(h.noCache)g.removeAttr(a,"data-tip-width"),this.currentInstatipNode=null;if(this.instatipShowTimer){if(a==this.instatipAboutToShowNode)return;
this.clearInstatipTimer()}if(!h.label)h.label=g.attr(a,"data-title")||g.attr(a,"title"),h.label&&g.attr(a,"data-title",h.label);if(h.label){g.removeAttr(a,"title");if(!h.side)h.side="bottom";this.instatipAboutToShowNode=a;var b=300;if(g.body().className.indexOf("btnLabelsOn"!=-1)){var e=g.query(".label",a);e&&e[0]&&"none"!=g.style(e[0],"display")&&(b=1E3)}this.instatipShowTimer=setTimeout(g.hitch(this,function(){this._showInstatip(a,h.label,h.tipDimensions,h.nodePosition,h.side);this.clearInstatipTimer()}),
b)}}},isInstatipShowing:function(){return"visible"==window.wsMasterTip.style.visibility},clearInstatipTimer:function(){if(this.instatipShowTimer)clearTimeout(this.instatipShowTimer),this.instatipShowTimer=null;this.instatipAboutToShowNode=null},instatipAboutToShowNode:null,currentInstatipNode:null,launchIM:function(a,h){ws.presence._launchIM(a,!1);ws.reporting.reportAction("IM Button in Toolbar Clicked - "+h)},updateIMButton:function(a,h,b){a.enableArrow(!1);var e=a.containerNode.getElementsByTagName("img");
if(e)if(e=e[0],h){for(var k=null,f=[],l=0;l<h.length;l++)if("offline"!=h[l].state)k=h[l].aimId,f.push({caption:"<img class='buddyIcon' src='"+(h[l].buddyIcon||h[l].presenceIcon)+"'><span class='buddyName'>"+h[l].aimId+"</span>",onClick:g.hitch(this,"launchIM",h[l].aimId,b)});if(k){a.enable();if(e)e.className="icon";1<f.length?(a.enableArrow(!0),a.onClick=g.hitch(a,"toggleMenu")):a.onClick=g.hitch(this,"launchIM",k,b);a.setMenuDefinition(f)}else if(a.disable(),e)e.className="disIcon"}else if(a.disable(),
e)e.className="disIcon"}});g.mixin(j,{setWaiRole:function(){},setWaiState:function(){},removeWaiState:function(){}});g.connect(a,"add",function(a){for(;null!=a;){if(a.css){var h=a.css.templatePath,b=a.css.templateString;h&&!j._Widget._cssFiles[h.toString()]&&(b=b||g._getText(h),j._Widget._cssFiles[h.toString()]=!0);b&&!j._Widget._cssStrings[b]&&(ws.widget.insertCssText(b,null,h),j._Widget._cssStrings[b]=!0)}a=a.constructor.superclass}});b._cssFiles={};b._cssStrings={}})},"ws/mail/MailModel":function(){define("ws/mail/MailModel",
"dojo/_base/declare,ws/mail/folderName,ws/mail/folder,ws/CachedList,ws/cache,ws/idleMonitor,ws/lang,ws/io,ws/UserContext".split(","),function(g,j,f,a,b,e){if(!ws.mail)ws.mail={};ws.mail.folderName=new j;return g(null,{inboxStateToken:"-1",nCheckNewMessageCount:0,columns:{UID:0,FromToAddress:1,Description:2,Subject:3,Received:4,Size:5,Attachment:6,Seen:8,Read:9,Draft:11,Answered:12,Flag:13,Official:14,Certified:15,Voicemail:16,TopContactMsg:19,Folder:20,Fragment:21,CID:22,Account:23,isSpam:24,Forwarded:25,
canUnsubscribe:26,spamReason:27},sortIndices:{FromToAddress:"fromToName",Subject:"subject",Attachment:"attachments",Received:"received",Flag:"flagged",Size:"size",Folder:"folder",Account:"account"},sort:function(a,b){if(a in this.sortIndices){if(("Flag"==a||"Attachment"==a)&&this.sortIndices[a]!=this.activeCachedList.CurrentIndex)b="descending";"Flag"==a?(this.activeCachedList.SetSort(this.sortIndices[a],b,this.flagsDirty),this.flagsDirty=!1):this.activeCachedList.SetSort(this.sortIndices[a],b);dojo.publish("wsapi/postEvent",
["msgSort",{column:a,dir:b}])}},constructor:function(h){this.checkVersionTimer=this.checkNewMessagesTimer=null;ws.bootstrap.reset("load_mail");this.tracklm("MM.Ca");this.getInfo();this.standAloneMailModel=h;this.inboxCachedList=new a(Config.ClientSideMaxCache,Config.ClientSideMaxMessageFetch,!0);this.otherCachedList=new a(Config.ClientSideMaxCache,Config.ClientSideMaxMessageFetch,!1);this.activeCachedList=this.inboxCachedList;for(var h=[this.inboxCachedList,this.otherCachedList],e=0;e<h.length;e++){var f=
h[e];dojo.connect(f,"FoldersChanged",this,"_folderListChanged");dojo.connect(f,"Cleared",dojo.hitch(this,"cachedListUpdated",f));dojo.connect(f,"IndexUpdated",dojo.hitch(this,"cachedListUpdated",f));dojo.connect(f,"RowsUpdated",dojo.hitch(this,"changeRows",f))}this.folders=[];this.linkedSNData=[];this.selectedUids={};this.exclUids={};this.filter="all";this.sSubSearch=null;this.identity="default";this.allSelected=this.fetchingNewMail=!1;this.fetchIndexCB=null;this.messageCache=new b(10,1);this.setFolder(this.getInboxFolderName(),
null,null,null,null,"descending",!0);dojo.subscribe("SettingsChanged/Compose",this,"composeSettingsChanged");dojo.subscribe("WSSessionExpired",this,"onSessionExpired");if(Settings.AutoRefresh)this.checkNewMessagesTimer=setInterval(dojo.hitch(this,"checkNewMessages"),1E3*Config.StandardMessagePolling);if(Config.StandardCheckVersionPolling)this.checkVersionTimer=setInterval(dojo.hitch(this,"checkVersion"),1E3*Config.StandardCheckVersionPolling);this.sendAddresses=[[ws.UserContext.UserAddress,ws.UserContext.UserAddress]];
this._messagesInFlight={};this.tracklm("-MM.Cz")},cachedListUpdated:function(a){if(this.fetchIndexCB)this.fetchIndexCB(),this.fetchIndexCB=null;else if(a==this.activeCachedList&&(this.modelUpdated(),Config.EnableClientSideMessagePrefetch&&ws.lang.setTimeout(this,"prefetchUnreadMessages",3E3)),this.fetchingNewMail)this.fetchingNewMail=!1,this.newMailReceived();a&&a.errorState&&!ws.bootstrap.lmsent&&!ws.bootstrap.sending&&(this.tracklm("-MM._CLUb"),a=new Date-window._g_ws_loginStartTime,a={opResult:"fail",
errType:"api",errCode:this.getErrCode(),sessionID:Settings.SessionID,opTime:a},ws.bootstrap.sendLoadMailReport(a))},modelUpdated:function(){},changeRow:function(){},onSelectionChange:function(){},newMailReceived:function(){},folderCountUpdated:function(){},moveListChanged:function(){},changeRows:function(a,b){if(a==this.activeCachedList)if(b)for(var e=0;e<b.length;e++)this.changeRow(b[e]);else this.modelUpdated()},isLoading:function(){return this.activeCachedList.IsLoading()&&!this.activeCachedList.errorState},
isErrorState:function(){return this.activeCachedList.errorState},isNetErrorState:function(){return this.activeCachedList.netErrorState},getErrorObj:function(){return this.activeCachedList.errorObj},getErrCode:function(){return this.activeCachedList.errCode},setFolder:function(a,b,e,f,g,j,s,o){this.screenName=ws.UserContext.ActiveScreenName;this.trackall("-MM.SFa");f=a!=this.currentFolder;this.currentFolder=a;this.currentUid=null;this.selectedUids={};this.exclUids={};this.filter="all";this.sSubSearch=
null;this.allSelected=!1;this.activeCachedList=a==this.getInboxFolderName()?this.inboxCachedList:this.otherCachedList;this.inboxCachedList.ClearSeenMessages();this.screenName!=ws.UserContext.ActiveScreenName&&this.activeCachedList.Clear();if(!ws.lang.undefinedOrNull(g)&&!ws.lang.undefinedOrNull(j))this.activeCachedList.Clear(),this.activeCachedList.CurrentIndex=g,this.activeCachedList.SortDirection=j,this.activeCachedList.IndexDirection=j;ws.lang.undefinedOrNull(a);this.activeCachedList.SetFolder(a,
b,e,this.screenName,f,s,o);dojo.publish("wsapi/postEvent",["folderView",{folder:a}]);this.trackall("-MM.SFz")},saveDisplayName:function(a,b){if(this.isPrimaryAddrs(a))Settings.FromDisplayName=b,ws.settings.saveSoon({FromDisplayName:b}),this.updatePrimaryIdentityWithFromDisplayName();else{for(var e=this.getIdentities(),f=null,g=0;g<e.length;g++)-1!=a.indexOf(e[g][1])&&(f=e[g]);f&&(f[2]=b,ws.settings.saveSoon({IdentityDisplayName:f}))}},updatePrimaryIdentityWithFromDisplayName:function(){var a=this.getIdentities();
if(a.length)a[0][2]=Settings.FromDisplayName;dojo.publish("friendlyNameUpdated")},isPrimaryAddrs:function(a){for(var b=this.sendAddresses,e=0;e<b.length;e++)if(-1!=a.indexOf(b[e][1]))return b[e][2];return!1},getIdentities:function(){return this.identities||[]},getIdentityDN:function(a){var b=this.identities;if(b)for(var e=0;e<b.length;e++)if(b[e][1]==a)return b[e][0];return a},getInboxFolderName:function(){return Settings.HasAggregatedAccount?"AllInboxes":!Settings.ViewNewOld?"Inbox":"NewMail"},search:function(a,
b){this.trackdl("-MM.Sa","search_mail");this.searchInProgress=a?!0:!1;var e=this.currentFolder;if(Config.UseOMS&&Config.CrossFolderSearch){if(a)ws.WebSuite.currentFolder=this.currentFolder;e=this.getInboxFolderName();this.trackdl("-MM.Sb","search_mail")}b=b||"alltext";"alltext"==b&&!this.allowAllTextSearch()&&(b="from|subject");this.filter="all";this.setFolder(e,a,b,null,null,"descending",!1);this.trackdl("-MM.Sz","search_mail")},subSearch:function(a){this.searchInProgress=!0;var b=this.activeCachedList.SearchIn,
e=this.activeCachedList.SearchString;this.sSubSearch=a;this.selectedUids={};this.exclUids={};this.allSelected=!1;this.currentUid=null;this.activeCachedList.SetSearch(e,b,a)},getSearchString:function(){return"all"==this.filter&&this.activeCachedList&&this.activeCachedList.SearchString||null},getSearchIn:function(){return this.activeCachedList?this.activeCachedList.SearchIn||null:null},allowAllTextSearch:function(){return Config.ImapSearchEnabled&&(Config.AllowSearchAllTextTrash||this.getCurrentFolder()&&
"Deleted"!=this.getCurrentFolder().type)},setFilter:function(a,b,e){e={all:{searchIn:"subject",search:""},unread:{searchIn:"seen",search:"false"},read:{searchIn:"seen",search:"true"},flagged:{searchIn:"flagged",search:"true"},unflagged:{searchIn:"flagged",search:"false"},answered:{searchIn:"answered",search:"true"},unanswered:{searchIn:"answered",search:"false"},attachments:{searchIn:"attachments",search:"true"},noattachments:{searchIn:"attachments",search:"false"},tag:{searchIn:"tag",search:e}};
this.filter=a;this.identity=b;a=e[a];this.selectedUids={};this.exclUids={};this.allSelected=!1;this.currentUid=null;this.activeCachedList.SetSearch(a.search,a.searchIn)},setArchiveFilter:function(a){this.activeCachedList.SetSearch(a,"before")},sendMessage:function(a){ws.io.rpc({action:"SendMessage",content:a.content,mk:a.mk,formNode:a.formNode,load:dojo.hitch(this,function(b){this.standAloneMailModel||this.refetchFolderIndex(Config.SentItemsFolderName);a.content.AnswerUID&&this.changeMessagesLocal(a.content.AnswerFolder,
[a.content.AnswerUID],this.columns.Answered,!0);a.content.DraftMsgFolder&&a.content.DraftMsgUID&&this.removeMessagesLocal(a.content.DraftMsgFolder,[a.content.DraftMsgUID]);a.load&&a.load(b)}),error:a.error})},preUpdateExistingDraft:function(){},saveMessage:function(a){ws.io.rpc({action:"SaveMessage",content:a.content,mk:a.mk,formNode:a.formNode,load:dojo.hitch(this,function(b){this.standAloneMailModel||this.refetchFolderIndex(Config.DraftsFolderName);if(a.content.DraftMsgFolder&&a.content.DraftMsgUID){if(!this.standAloneMailModel){this.preUpdateExistingDraft(a.content.DraftMsgUID,
b.savedMsgUID);var e=this.getFolderCount(Config.DraftsFolderName);this.removeMessagesLocal(a.content.DraftMsgFolder,[a.content.DraftMsgUID]);var f=this.getFolderCount(Config.DraftsFolderName);e!=f&&this.updateFolderCount(Config.DraftsFolderName,1,!0)}}else this.standAloneMailModel||this.updateFolderCount(Config.DraftsFolderName,1,!0);a.load&&a.load(b)}),error:a.error})},inboxTypeUpdated:function(){},folderListChanged:function(){if(Settings.ViewNewOld){if("Inbox"==this.currentFolder)this.currentFolder=
this.getInboxFolderName(),this.inboxTypeUpdated()}else if("NewMail"==this.currentFolder||"OldMail"==this.currentFolder)this.currentFolder=this.getInboxFolderName(),this.inboxTypeUpdated()},_folderListChanged:function(a){this.trackall("-MM._FLCa");this.folders=[];var b,e;for(e=0;e<a.length;e++)b=new f(a[e]),this.folders.push(b);if(!ws.bootstrap.lmsent&&!ws.bootstrap.sending){this.trackall("-MM._FLCb");var a=!1,g=this.getInboxFolderName();for(e=0;e<this.folders.length;e++)if(b=this.folders[e],g==b.name){a=
!0;break}b=new Date-window._g_ws_loginStartTime;b=a?{opResult:"success",opTime:b}:{opResult:"fail",errType:"api",errCode:this.getErrCode(),sessionID:Settings.SessionID,opTime:b};ws&&ws.bootstrap&&ws.bootstrap.sendLoadMailReport&&ws.bootstrap.sendLoadMailReport(b)}else this.trackall("-MM._FLCc");this.trackall("-MM._FLCf");this.folderListChanged();this.trackall("-MM._FLCz")},getFolderByName:function(a){if(!a)return null;var b;for(b=0;b<this.folders.length;b++)if(this.folders[b].name==a)return this.folders[b];
if("new mail"==a.toLowerCase())a="NewMail";else if("old mail"==a.toLowerCase())a="OldMail";else return null;for(b=0;b<this.folders.length;b++)if(this.folders[b].name==a)return this.folders[b];return null},getCurrentFolder:function(){return this.getFolderByName(this.currentFolder)},isInboxNewOld:function(a){a=this.getFolderByName(a||this.currentFolder).type;return"Inbox"==a||"NewMail"==a||"OldMail"==a},getFolderByType:function(a){for(var b=0;b<this.folders.length;b++)if(this.folders[b].type==a)return this.folders[b];
return null},createFolder:function(a){var b=Config.NewFolderPrefix+a.newName;if(ws.mail.folderName.validate(a.newName,b,null,this.folders,a.dialogOkCB))a.newName=b,this.folderAction("create",a)},deleteFolder:function(a){if(a.name==this.currentFolder)a.doNotUpdateFolderList=!0,a.switchToFolder=this.getInboxFolderName();this.folderAction("delete",a)},emptyFolder:function(a){var b=a.load;a.load=dojo.hitch(this,function(e){if(a.name==this.currentFolder)this.activeCachedList.rowCount=0,this.modelUpdated();
b&&b(e)});this.folderAction("empty",a)},renameFolder:function(a){var b=Config.NewFolderPrefix+a.newName;if(Config.EnableIMAPFolderHierarchy){var e=this.getFolderByName(a.name);1<e.depth&&(b=e.parentName+a.newName)}var e=a.name,f=e.lastIndexOf(Config.FolderNameSeparator)+1;0<f&&(e=e.substring(f));0==f&&(e=e.substring(Config.NewFolderPrefix.length));if(ws.mail.folderName.validate(a.newName,b,e,this.folders)){a.newName=b;if(a.name==this.currentFolder||Config.EnableIMAPFolderHierarchy)a.switchToFolder=
a.newName;this.folderAction("rename",a)}},getFolderInfo:function(a){this.folderAction("getInfo",a)},folderAction:function(a,b){ws.io.rpc({action:"FolderAction",content:{folderAction:a,folder:b.name,newName:b.newName,fetchUIDs:b.fetchUIDs?b.fetchUIDs:!1},load:dojo.hitch(this,function(e){if(b.name==this.currentFolder&&"rename"==a)this.getCurrentFolder().name=this.currentFolder=b.switchToFolder=e.iName;b.doNotUpdateFolderList||this.activeCachedList.RefetchInfo();b.switchToFolder&&this.setFolder(b.switchToFolder);
"create"==a&&this.activeCachedList.foldersCanMoveTo.push(e.iName);if("delete"==a){var f=this.activeCachedList.foldersCanMoveTo,g=dojo.indexOf(f,e.iName);-1!=g&&f.splice(g,1)}b.load&&b.load(e);this.moveListChanged()}),error:b.error})},getRowCount:function(){return this.activeCachedList.GetRowCount()},getDatum:function(a,b){if(0==this.activeCachedList.GetRowCount())return null;var e=this.activeCachedList.GetRow(a);return null==e?null:e[b]},getUidForRow:function(a){return this.activeCachedList.GetUID(a)},
getRowData:function(a){if(0==this.activeCachedList.GetRowCount())return null;a=this.activeCachedList.GetRow(a);return null==a?null:a},getUidData:function(a){return!a||0==this.activeCachedList.GetRowCount()?null:this.activeCachedList.Cache.get(a)},getOpSize:function(a){var b=0,e=!1;if(this.isAllSelected())b=this.getRowCount()-ws.lang.getPropCount(this.exclUids),ws.lang.isEmptyObject(this.exclUids)||(e=!0);else if(a)b=a.length;return{opSize:b,havexuids:e}},getTypeName:function(a){return a[this.columns.Seen]&&
Config.EnableMsgStatusColumn&&"OldMail"!=this.getFolderByName(this.currentFolder).type&&Settings.ViewNewOld?"SEEN":a[this.columns.Official]?"OFFICIAL":a[this.columns.Certified]?"CERTIFIED":a[this.columns.Voicemail]?"VOICEMAIL":a[this.columns.Answered]?"ANSWERED":a[this.columns.Forwarded]?"FORWARDED":"NONE"},getBaseSubject:function(a){var b=a,a=a.replace(/^([\(\[\{\<\-\s]*(re|fwd|fw|antwort|aw|wg|wtr|trans\. )[:\)\]\}\>\-\s][\s]*)+/i,"");b!=a&&0==b.indexOf("[")&&(a=a.replace(/\]$/,""));return a},checkVersion:function(){dojo.xhrGet({url:"/webmail-std/version",
handleAs:"json",content:{staticVersion:Config.ClientVersion},load:dojo.hitch(this,function(a){if(a&&a.staticVersion&&a.staticVersion!==Config.ClientVersion)null!==this.checkVersionTimer&&clearInterval(this.checkVersionTimer),a=ws.io.getQueryParameter("debugIdleTimer"),this.idleMonitor=new e(a),dojo.publish("IdleMonitor/started")})})},checkNewMessages:function(){this.nCheckNewMessageCount++;ws.io.rpc({action:"CheckNewMessages",automatic:!0,content:{stateToken:this.inboxStateToken},load:dojo.hitch(this,
function(a){if(a.stateToken)this.inboxStateToken=a.stateToken;switch(a.stateChange){case this.stateChangeEnum.SomethingChangedAndNewMail:this.fetchingNewMail=!0;case this.stateChangeEnum.SomethingChanged:this.inboxCachedList.RefetchIndex({automatic:!0});break;case this.stateChangeEnum.SomethingChangedOtherMbox:case this.stateChangeEnum.SomethingChangedInboxOtherMbox:var b=!1;if(a.folderchanged)for(var a=a.folderchanged,e=0;e<a.length;e++)if(a[e]==this.otherCachedList.folder&&a[e]==this.currentFolder){this.otherCachedList.RefetchIndex({automatic:!0});
b=!0;break}b||this.inboxCachedList.RefetchIndex({automatic:!0})}}),error:dojo.hitch(this,function(){})});Config&&Config.EnableClientSideHiddenPrefBuffer&&!(this.nCheckNewMessageCount%Config.SavePrefBuffEveryNTimesChkNewMsg)&&ws.settings&&ws.settings.savePending&&ws.settings.savePending()},stateChangeEnum:{NothingChanged:1,SomethingChanged:2,SomethingChangedAndNewMail:3,NewMail:4,SomethingChangedOtherMbox:5,SomethingChangedInboxOtherMbox:6},onSessionExpired:function(){null!=this.checkNewMessagesTimer&&
clearInterval(this.checkNewMessagesTimer);null!=this.checkVersionTimer&&clearInterval(this.checkVersionTimer)},refetchFolderIndex:function(a){a==this.getInboxFolderName()?this.inboxCachedList.RefetchIndex():a==this.otherCachedList.folder&&this.otherCachedList.RefetchIndex()},resetCachedLists:function(a){this.standAloneMailModel||(this.inboxCachedList.Clear({keepSort:!0}),this.otherCachedList.Clear({keepSort:!0}),a?this.activeCachedList.GetData({reqRows:!0,tcs:!0}):this.activeCachedList.GetData({reqRows:!0}))},
fetchIndexForSel:function(a,b,e){a+b<this.activeCachedList.FetchSize?e():(this.activeCachedList.GetData({reqRows:!1,reqInfo:!1,reqIndex:!0,indexStart:a,indexMax:b}),this.fetchIndexCB=e)},groupByTopContacts:function(a){this.inboxCachedList.TopContactsFirst=a?a:!1;this.otherCachedList.TopContactsFirst=a?a:!1;this.resetCachedLists(a)},checkMessageReadState:function(a,b){var e=this.getCachedListForFolder(b.folder),e=(e=e&&e.Cache.get(b.uid))&&!(e[this.columns.Read]&&e[this.columns.Seen]);a&&e?this.changeMessagesReadState({uids:[b.uid],
read:!0,xaolRead:!0,preserveInList:!0}):(Settings.HasAggregatedAccount||this.changeMessagesReadStateLocal(!0,null,b.folder,[b.uid]),this.changeMessagesSeenStateLocal(!0,null,b.folder,[b.uid]));e&&this.updateAggCounts(b.folder,[b.uid],this.columns.Seen,!0)},tracklm:function(a){ws.bootstrap&&ws.bootstrap.add&&ws.bootstrap.add("load_mail",a)},trackdl:function(a,b){ws.reporting&&ws.reporting.DL&&ws.reporting.DL.append&&ws.reporting.DL.append(a,b)},trackall:function(a,b){ws.bootstrap&&ws.bootstrap.add&&
ws.bootstrap.add("load_mail",a);ws.reporting&&ws.reporting.DL&&ws.reporting.DL.append&&ws.reporting.DL.append(a,b)},getMessage:function(a){var b=a.uid,e=a.peek;this.trackdl("-MM.GMa",b);var f=a.folder+b,g=this.messageCache.get(f),j=this.getFolderByName(a.folder),s=dojo.mixin({},a);if(!e)j&&("NewMail"==j.type&&this.inboxCachedList.AddSeenMessage(b),"Drafts"!=j.type&&setTimeout(dojo.hitch(this,"checkMessageReadState",g,s),0)),this.cacheSuccess=g?"hit":"miss";if(g){a.load&&a.load(g);if(ws.WebSuite.isRecordTimingData)ws.WebSuite.messageSize=
g.body.length,ws.WebSuite.messageReadTimerEnd=new Date;this.trackdl("-MM.GMb",b)}else{g=a.folder;j&&"AllInboxes"==j.type&&(g=this.getUidData(b),j=this.getIdentities(),g=g[this.columns.Account],g=0==g?"Inbox":j[g][1]);var o=this._messagesInFlight[f],j=!!o;o||(o=this._messagesInFlight[f]=[]);o.push({load:s.load,error:s.error});if(j)this.trackdl("-MM.GMc",b);else{this.trackdl("-MM.GMd",b);e={action:"GetMessage",content:{folder:g,uid:b,peek:e},load:dojo.hitch(this,function(a){if(o&&o.length)for(var h=
0;h<o.length;h++)try{var b=o[h];b.load&&b.load(a)}catch(e){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.AjaxErr,"Exception in MM.GM(load): "+e),this.trackdl("-MM.GMx",s.uid)}delete this._messagesInFlight[f];if(ws.WebSuite.isRecordTimingData)ws.WebSuite.messageSize=a.body.length,ws.WebSuite.messageReadTimerEnd=new Date;this.messageCache.add(s.folder+s.uid,a);this.trackdl("-MM.GMe",s.uid)}),error:dojo.hitch(this,function(a,h,b){if(o&&o.length)for(var e=0;e<o.length;e++)try{var k=o[e];k.error&&
k.error(a,h,b)}catch(l){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.AjaxErr,"Exception in MM.GM(error): "+l),this.trackdl("-MM.GMy",s.uid)}delete this._messagesInFlight[f];this.trackdl("-MM.GMf",s.uid)}),cancel:dojo.hitch(this,function(){this.trackdl("-MM.GMh",s.uid);delete this._messagesInFlight[f]})};if(a.isPreviewPane)e.isPreviewPane=a.isPreviewPane;("undefined"==typeof e.content.uid||null==e.content.uid)&&window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.ProgErr,"GetMessage RPC has null or undefined uid param: file:MailModel.js");
this.trackdl("-MM.GMg",b);ws.io.rpc(e);this.trackdl("-MM.GMz",b)}}},prefetchAdjacentMessages:function(a){Config.EnableClientSideMessagePrefetch&&(a=this.activeCachedList.GetAvailableRowsForUIDs([a])[0],"undefined"!=typeof a&&(this._prefetchRow(a+1),this._prefetchRow(a-1)))},prefetchUnreadMessages:function(){if(Config.EnableClientSideMessagePrefetch)for(var a=Math.min(this.getRowCount(),30),b=0,e=0;e<a&&4>b;e++)this.getDatum(e,this.columns.Read)||(this._prefetchRow(e),b++)},_prefetchRow:function(a){var b=
this.activeCachedList.GetUID(a);b&&(a=this.getDatum(a,this.columns.Size))&&1E5>a&&this.getMessage({folder:this.currentFolder,uid:b,peek:!0})},getMessageStatus:function(a){ws.io.rpc({action:"GetMessageStatus",content:{screenName:this.screenName,folder:a.folder,uids:a.uids},load:a.load,error:a.error})},getAdjacentMessageUid:function(a,b){var e=this.activeCachedList.GetAvailableRowsForUIDs([a]);return 1>e.length?null:this.activeCachedList.GetUID(e[0]+b)},makeUidList:function(a,b){var e={};if(a)for(var f=
0;f<a.length;f++){var g=b,j=this.getUidData(a[f]);j&&(j[this.columns.Folder]?g=j[this.columns.Folder]:"AllInboxes"==g&&(g=this.getIdentities(),j=j[this.columns.Account],g=0==j?"Inbox":g[j][1]));null==e[g]&&(e[g]=[]);e[g].push(a[f])}return e},messageAction:function(a){if("undefined"==typeof a.folder)a.folder=this.currentFolder;if("undefined"==typeof a.checkUndo)a.checkUndo=!1;if("undefined"==typeof a.isUndoAction)a.isUndoAction=!1;var b=null!=this.getSearchString();if(!a.hasOwnProperty("isAllSel")&&
ws.lang.isEmptyArray(a.uids))a.isAllSel=b?!1:this.isAllSelected();a.xuids=this.getSelectedXUids();var e={},f={};a.isUndoAction?e=a.uids:a.isAllSel?f=this.makeUidList(a.xuids,a.folder):e=this.makeUidList(a.uids,a.folder);ws.io.rpc({action:"MessageAction",content:{messageAction:a.action,folder:a.folder,uids:e,xuids:f,destFolder:a.destFolder,isSpam:a.isSpam,checkUndo:a.checkUndo,screenName:this.screenName,reason:a.reason,isAllSelected:a.isAllSel,isUndoAction:a.isUndoAction,returnSpamKnob:a.returnSpamKnob||
!1,isSearchAction:b,unsubscribe:a.unsubscribe},load:dojo.hitch(this,function(b){this.deselectAll(!0);Config.UseOMS&&this.activeCachedList.SearchString&&this.inboxCachedList.RefetchIndex();a.load&&a.load(b)}),error:a.error})},flagMessages:function(a){a.action=a.flag?"flagged":"unflagged";this.messageAction(a);this.changeMessagesLocal(a.folder,a.uids,this.columns.Flag,a.flag);var b=a.folder||this.currentFolder;this.messageCache.update(dojo.map(a.uids,function(a){return b+a}),"isFlagged",a.flag);this.flagsDirty=
!0;a.fromDisplayMessage||dojo.publish("MessageList/flagMessage",[a.folder,a.uids,a.flag])},changeMessagesReadState:function(a){a.action=a.xaolRead?"read":a.read?"seen":"unseen";this.messageAction(a);this.updateAggCounts(a.folder,a.uids,this.columns.Seen,"seen"==a.action);this.allSelected&&this.fetchNewMsgCount();var b=this.getCurrentFolder().type;a.read&&!a.preserveInList&&Config.EnableMoveForMarkSeen&&"NewMail"==b?(this.removeMessagesLocal(a.folder,a.uids),this.updateFolderCount("OldMail",a.uids.length,
!0),this.updateUnseenCount("OldMail",a.uids,!0,!0)):!a.read&&!a.preserveInList&&(Config.EnableMoveForMarkUnseen||Settings.ViewNewOld)&&"OldMail"==b?(this.removeMessagesLocal(a.folder,a.uids,this.allSelected),this.updateFolderCount("NewMail",a.uids.length,!0),this.updateUnseenCount("NewMail",a.uids,!0,!0),this.refetchFolderIndex("NewMail")):(a.xaolRead&&!Settings.HasAggregatedAccount&&this.changeMessagesReadStateLocal(!0,a.msgInfos,a.folder,a.uids),this.changeMessagesSeenStateLocal(a.read,a.msgInfos,
a.folder,a.uids))},canChangeMessageReadState:function(a){return Config.EnableMarkOutsideInbox||this.isInboxNewOld(a)},deleteMessages:function(a){a.action="delete";this.messageAction(a);this.removeMessagesLocal(a.folder,a.uids,a.isAllSel);a.skipRefetchCounts||this.fetchNewMsgCount();if(this.isInboxNewOld(this.activeCachedList.folder)&&this.otherCachedList.folder==Config.DeletedItemsFolderName)this.otherCachedList.Clear(),this.otherCachedList.folder="undefined";a.folder!=Config.DeletedItemsFolderName&&
this.refetchFolderIndex(Config.DeletedItemsFolderName)},restoreMessages:function(a){a.action="restore";this.messageAction(a);this.removeMessagesLocal(a.folder,a.uids);this.fetchNewMsgCount()},moveMessages:function(a){a.action="move";this.messageAction(a);this.removeMessagesLocal(a.folder,a.uids,a.isAllSel);a.skipRefetchCounts||this.fetchNewMsgCount();(!Config.UseOMS||!Config.CrossFolderSearch||!this.getSearchString()||a.isUndoAction)&&this.refetchFolderIndex(a.destFolder)},undoMoveMessages:function(a,
b,e){var f=null;if(b==Config.DeletedItemsFolderName){var g=0,j;for(j in a)a.hasOwnProperty(j)&&(g+=a[j].length);f=1==g?Config.Strings.MessageRestored:ws.string.substituteParams(Config.Strings.MessagesRestored,g)}this.moveMessages({uids:a,folder:b,destFolder:e?e:this.currentFolder,checkUndo:!1,isUndoAction:!0,load:function(){f&&dojo.publish("WSFeedbackStart",[f,!0])},error:function(a){window.ws_ErrLgr&&!a&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"OkCancelDialog.alert shown - Error Handler for moveMessages-undoMoveMessages file:MailModel.js");
ws.widget.Dialogs.ok(a||Config.Strings.MoveMessageError)}})},undoRestoreMessages:function(a){this.restoreMessages({uids:a,folder:Config.DeletedItemsFolderName,checkUndo:!1,isUndoAction:!0,load:dojo.hitch(this,function(){this.refetchFolderIndex(this.currentFolder);var b=1==a.length?Config.Strings.MessageRestored:ws.string.substituteParams(Config.Strings.MessagesRestored,a.length);dojo.publish("WSFeedbackStart",[b,!0])}),error:function(a){window.ws_ErrLgr&&!a&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,
"Dialogs.ok shown - Error Handler for model.restoreMessages-restoreMessages file:MessageListView.js");ws.widget.Dialogs.ok(a||Config.Strings.ErrorRestoring)}})},undoReportSpamMessages:function(a){this.reportSpamMessages({uids:a,folder:Config.SpamFolderName,destFolder:this.currentFolder,checkUndo:!1,isUndoAction:!0,load:function(){},error:function(a){window.ws_ErrLgr&&!a&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"OkCancelDialog.alert shown - Error Handler for reportSpamMessages-undoReportSpamMessages file:MailModel.js");
ws.widget.Dialogs.ok(a||Config.Strings.ReportSpamError)}})},fetchNewMsgCount:function(){this.activeCachedList.fastCountSupport&&this.activeCachedList.RefetchInfo()},getFoldersCanMoveTo:function(){return this.activeCachedList.foldersCanMoveTo||[]},getFoldersCanMoveToFromInbox:function(){return this.inboxCachedList.foldersCanMoveTo||[]},reportSpamMessages:function(a){var b=a.load;if(a.isSpam&&!Settings.PersonalAdaptiveSpamFilterLevel)a.returnSpamKnob=!0;a.load=function(e){var f=function(){Settings.PersonalAdaptiveSpamFilterLevel=
"Medium";ws.settings.saveNow({PersonalAdaptiveSpamFilterLevel:"Medium"});e._showSpamOffAlert=!0};if(a.isSpam&&!a.unsubscribe)e&&e.PersonalAdaptiveSpamFilterLevel?"Off"==e.PersonalAdaptiveSpamFilterLevel?f():Settings.PersonalAdaptiveSpamFilterLevel=e.PersonalAdaptiveSpamFilterLevel:Settings.PersonalAdaptiveSpamFilterLevel&&"Off"==Settings.PersonalAdaptiveSpamFilterLevel&&f();b&&b(e)};a.action="reportSpam";this.messageAction(a);this.removeMessagesLocal(a.folder,a.uids,a.isAllSel);a.skipRefetchCounts||
this.fetchNewMsgCount();if(this.isInboxNewOld(this.activeCachedList.folder)&&this.otherCachedList.folder==Config.SpamFolderName)this.otherCachedList.Clear(),this.otherCachedList.folder="undefined";dojo.publish("wsapi/postEvent",["markSpam",{msgId:a.uids,folder:a.folder}]);this.refetchFolderIndex(a.isSpam?Config.SpamFolderName:this.getInboxFolderName())},forwardMessages:function(a){a.action="forward";var b=function(){};this.messageAction(a);if(!a.load)a.load=b;if(!a.error)a.error=b},composeSettingsChanged:function(){this.messageCache.clear()},
getSignature:function(a){var b="";if(Settings.SignatureEnabled){b=Settings.Signature;if(-1==b.search(/<[^>]*>/gi)){if(dojo.isWebKit||dojo.isFF)b=b.replace(/\r/g,"");b=b.replace(/\n/g,"<br/>")}Settings.AddPresenceSignature&&this.signatureAimPresence&&a&&(b=ws.string.substituteParams(this.signatureAimPresence,b))}return b},getAcctType:function(a){if(a)for(var b=this.getIdentities(),e=0;e<b.length;e++)if(a.toLowerCase()==b[e][1])return b[e][3];return"aol"},getInfo:function(){this.tracklm("-MM.GIa");
ws.io.rpc({action:"GetMailInfo",load:dojo.hitch(this,function(a){this.tracklm("-MM.GIb");this.sendAddresses=a.sendAddresses;this.signatureAimPresence=a.signatureAimPresence;window.Settings.MailStorageQuota=a.storageQuota;window.Settings.MailStorageUsed=a.storageUsed;window.Settings.HasUnlimitedMailStorage=a.hasUnlimitedStorage;if(a.identities)this.identities=a.identities;this.infoUpdated();try{if(a.sendAddresses[0][1]){var b=dojo.byId("aoluid");b||(b=dojo.create("div",{id:"aoluid",style:{display:"none"}},
dojo.body()));b.innerHTML=a.sendAddresses[0][1]}}catch(e){}}),error:function(a){this.tracklm("-MM.GIc");window.ws_ErrLgr&&!a&&ws_ErrLgr.logError(ws_ErrLgr.cat.ProgErr,"Error Handler for GetMailInfo-getInfo file:MailModel.js")}});this.tracklm("-MM.GIz")},infoUpdated:function(){},isCurrentRow:function(a){return(a=this.activeCachedList.GetUID(a))&&a==this.currentUid},getCurrentRow:function(){var a=this.activeCachedList.GetAvailableRowsForUIDs([this.currentUid]);return 1==a.length?a[0]:-1},setCurrentRow:function(a){this.setCurrentUid(this.activeCachedList.GetUID(a))},
setCurrentUid:function(a){var b=this.activeCachedList.GetAvailableRowsForUIDs([a,this.currentUid]);this.currentUid=a;for(a=0;a<b.length;a++)this.changeRow(b[a])},toggleSelectRow:function(a,b){var e=this.activeCachedList.GetUID(a);if(null!=e){var f="undefined"==typeof b?!this.isSelected(e):b;this.allSelected?f?delete this.exclUids[e]:this.exclUids[e]=!0:f?this.selectedUids[e]=!0:delete this.selectedUids[e];if(null==this.activeCachedList.SearchString)if(this.getRowCount()==ws.lang.getPropCount(this.selectedUids))this.allSelected=
!0,this.selectedUids={};else if(this.allSelected&&this.getRowCount()==ws.lang.getPropCount(this.exclUids))this.allSelected=!1,this.exclUids={};this.changeRow(a);this.onSelectionChange()}},selectRange:function(a,b,e,f){var g=1+b-a;g==this.getRowCount()?(this.selectAll(),f&&f()):this.fetchIndexForSel(a,g,dojo.hitch(this,function(){for(var g=a;g<=b;g++)this.toggleSelectRow(g,e);f&&f()}))},selectAll:function(){if(null!=this.activeCachedList.SearchString)if(this.getRowCount()>this.activeCachedList.FetchSize)this.fetchIndexForSel(0,
this.getRowCount(),dojo.hitch(this,function(){for(var a,b=0;b<this.getRowCount();b++)(a=this.activeCachedList.GetUID(b))&&(this.selectedUids[a]=!0);this.modelUpdated()}));else for(var a=0;a<this.getRowCount();a++)this.toggleSelectRow(a,"ON");else this.allSelected=!0,this.currentUid=null,this.selectedUids={},this.exclUids={},this.modelUpdated()},deselectAll:function(a){var b=this.allSelected;this.allSelected=!1;if(!a)this.currentUid=null;a=this.getSelectedUids();this.selectedUids={};this.exclUids=
{};if(b||10<a.length)this.modelUpdated();else{b=this.activeCachedList.GetAvailableRowsForUIDs(a);for(a=0;a<b.length;a++)this.changeRow(b[a]);this.onSelectionChange()}},isAllInViewSelected:function(){return null!=this.activeCachedList.SearchString?this.getRowCount()==ws.lang.getPropCount(this.selectedUids):this.isAllSelReal()},isAllSelected:function(){return this.allSelected},isAnySelected:function(){return!ws.lang.isEmptyObject(this.selectedUids)||this.allSelected},isAllSelReal:function(){return this.allSelected&&
ws.lang.isEmptyObject(this.exclUids)},isSelected:function(a){return this.allSelected?!(a in this.exclUids):a in this.selectedUids},getSelectedUids:function(){var a=[],b;for(b in this.selectedUids)a.push(b);return a},getSelectedXUids:function(){var a=[],b;for(b in this.exclUids)a.push(b);return a},changeMessagesLocal:function(a,b,e,f){var g=this.getCachedListForFolder(a);if(g){var j=this.allSelected&&ws.lang.isEmptyArray(b)?this.exclUids:null;g.UpdateCache(b,e,f,j);if(j)this.modelUpdated();else{var s=
g.GetAvailableRowsForUIDs(b);this.changeRows(g,s)}a=this.getFolderByName(a);Settings.HasAggregatedAccount&&a&&("Aggregated"==a.type||"Inbox"==a.type)&&this.getCachedListForFolder("AllInboxes").UpdateCache(b,e,f,j)}},updateAggCounts:function(a,b,e,f){var g=this.getFolderByName(a);if(g&&"AllInboxes"==g.type&&e==this.columns.Seen)if(this.allSelected)this.fetchNewMsgCount();else{var a=this.getAggFolderCounts(this.getCachedListForFolder(a).GetAvailableRowsForUIDs(b)),j;for(j in a)if(b=this.getFolderByName(j))b.unseenCount+=
(f?-1:1)*a[j];this.folderCountUpdated(g)}},getAggFolderCounts:function(a){for(var b,e={},f=0;f<a.length;f++)if(b=this.activeCachedList.GetRow(a[f]))b=b[this.columns.Account],b=0==b?"Inbox":this.identities[b][1],e[b]?e[b]++:e[b]=1;return e},changeMessagesReadStateLocal:function(a,b,e,f){this._changeMessagesReadStateLocal(a,b,e,f);Settings.ViewNewOld||this._changeMessagesSeenStateLocal(a,b,e,f)},changeMessagesSeenStateLocal:function(a,b,e,f){this._changeMessagesSeenStateLocal(a,b,e,f);Settings.ViewNewOld?
"NewMail"==this.getFolderByName(e).type&&(a||this.inboxCachedList.DeleteSeenMessage(f)):this._changeMessagesReadStateLocal(a,b,e,f)},_changeMessagesReadStateLocal:function(a,b,e,f){this.changeMessagesLocal(e,f,this.columns.Read,a);b&&dojo.forEach(b,function(b){b.isRead=a})},_changeMessagesSeenStateLocal:function(a,b,e,f){this.updateUnseenCount(e,f,!a);this.changeMessagesLocal(e,f,this.columns.Seen,a);b&&dojo.forEach(b,function(b){b.isSeen=a})},checkMessageLocal:function(a,b){var e=this.getCachedListForFolder(a);
return!e?!1:e.IsUidExist(b)},removeMessagesLocal:function(a,b,e){var f=this.getCachedListForFolder(a);if(f){if(e){f.Clear({keepSort:!0});this.setFolder(a,null,null,null,null,"descending",!0);if(e=this.getFolderByName(a))e.count=0,e.unseenCount=0;this.folderCountUpdated(e);f.DeleteAllFromIndex();f.ClearSeenMessages()}else this.updateUnseenCount(a,b,!1),this.updateFolderCount(a,b.length,!1),f.DeleteFromIndex(b),f.RemoveSeenMessages(b);if("undefined"==typeof a||a==this.currentFolder)this.currentUid&&
-1!=dojo.indexOf(b,this.currentUid)&&this.setCurrentUid(null),dojo.forEach(b,function(a){a in this.selectedUids&&delete this.selectedUids[a]},this),this.modelUpdated();"NewMail"==this.getFolderByName(a).type&&this.inboxCachedList.DeleteSeenMessage(b)}},updateFolderCount:function(a,b,e){if(Config.ShowFolderMessageCount)a=this.getFolderByName(a),a.count=e?a.count+b:a.count-b,this.folderCountUpdated(a)},getFolderCount:function(a){return!Config.ShowFolderMessageCount?-1:this.getFolderByName(a).count},
updateUnseenCount:function(a,b,e,f){var a=a||this.currentFolder,g=this.getFolderByName(a);if(g){if("number"==typeof b)g.unseenCount=e?g.unseenCount+b:g.unseenCount-b;else{var j=this.getFolderByName(a),s=null;if(Settings.HasAggregatedAccount&&j&&("Aggregated"==j.type||"Inbox"==j.type))s=this.getFolderByName("AllInboxes");var o=this.getCachedListForFolder(a);if(!o)return;if(o.fastCountSupport&&b&&b.length>o.FetchSize)this.fetchNewMsgCount();else{var a=o.GetAvailableRowsForUIDs(b),u=this.columns.Seen;
dojo.forEach(a,function(a){if(a=o.GetRow(a))e&&a[u]?(g.unseenCount++,f&&(a[u]=!1),s&&s.unseenCount++):!e&&!a[u]&&(g.unseenCount--,f&&(a[u]=!0),s&&s.unseenCount--)})}}this.folderCountUpdated(g)}},getCachedListForFolder:function(a){return"undefined"==typeof a||this.getSearchString()?this.activeCachedList:a==this.getInboxFolderName()?this.inboxCachedList:a==this.currentFolder?this.otherCachedList:null},getSearchMailResultDL:function(){var a=this.getSearchString(),b=Math.max(this.getRowCount(),0);if(a)return b+
" "+a},getSubSearchStr:function(){var a=this.getSearchString(),b=this.getSearchIn(),e=this.getCurrentFolder()||{},f=Math.max(this.getRowCount(),0),g=this.sSubSearch.charAt(0),j="",s=this.sSubSearch.substr(2),o=this.activeCachedList.data.searchCounts;if("f"==g&&(e=this.getFolderByName(s))&&e.displayName)s=e.displayName;if("d"==g){if("Inbox"==s)s=ws.UserContext.UserAddress;s=this.getIdentityDN(s)}if("s"==g&&o)for(var u=0;u<o.senders.length;u++)if(o.senders[u].n==s){s=o.senders[u].fn;break}22<s.length&&
(s=s.substr(0,22)+"&hellip;");22<a.length&&(a=ws.string.escapeXml(a.substr(0,22))+"&hellip;");switch(b){case null:case "alltext":j=0==f?"s"==g?Config.Strings.DSHAll0fr:"m"==g?Config.Strings.DSHAll0snt:"a"==g?Config.Strings.DSHAll0att:Config.Strings.DSHAll0:1==f?"s"==g?Config.Strings.DSHAll1fr:"m"==g?Config.Strings.DSHAll1snt:"a"==g?Config.Strings.DSHAll1att:Config.Strings.DSHAll1:"s"==g?Config.Strings.DSHAllNfr:"m"==g?Config.Strings.DSHAllNsnt:"a"==g?Config.Strings.DSHAllNatt:Config.Strings.DSHAllN;
break;case "subject":j=0==f?"s"==g?Config.Strings.DSHSub0fr:"m"==g?Config.Strings.DSHSub0snt:"a"==g?Config.Strings.DSHSub0att:Config.Strings.DSHSub0:1==f?"s"==g?Config.Strings.DSHSub1fr:"m"==g?Config.Strings.DSHSub1snt:"a"==g?Config.Strings.DSHSub1att:Config.Strings.DSHSub1:"s"==g?Config.Strings.DSHSubNfr:"m"==g?Config.Strings.DSHSubNsnt:"a"==g?Config.Strings.DSHSubNatt:Config.Strings.DSHSubN;break;case "fromto":j=null!=e&&("Sent"==e.type||"Drafts"==e.type||"AutoSavedSent"==e.type)?0==f?"s"==g?Config.Strings.DSHRcp0fr:
"m"==g?Config.Strings.DSHRcp0snt:"a"==g?Config.Strings.DSHRcp0att:Config.Strings.DSHRcp0:1==f?"s"==g?Config.Strings.DSHRcp1fr:"m"==g?Config.Strings.DSHRcp1snt:"a"==g?Config.Strings.DSHRcp1att:Config.Strings.DSHRcp1:"s"==g?Config.Strings.DSHRcpNfr:"m"==g?Config.Strings.DSHRcpNsnt:"a"==g?Config.Strings.DSHRcpNatt:Config.Strings.DSHRcpN:0==f?"s"==g?Config.Strings.DSHSnd0fr:"m"==g?Config.Strings.DSHSnd0snt:"a"==g?Config.Strings.DSHSnd0att:Config.Strings.DSHSnd0:1==f?"s"==g?Config.Strings.DSHSnd1fr:"m"==
g?Config.Strings.DSHSnd1snt:"a"==g?Config.Strings.DSHSnd1att:Config.Strings.DSHSnd1:"s"==g?Config.Strings.DSHSndNfr:"m"==g?Config.Strings.DSHSndNsnt:"a"==g?Config.Strings.DSHSndNatt:Config.Strings.DSHSndN}return ws.string.substituteParams(j,"&ldquo;"+a+"&rdquo;",s,500<f?"500+":f)},getNoFolderStr:function(){if(this.sSubSearch)return this.getSubSearchStr();var a="",b=this.getSearchString(),e=this.getSearchIn(),f=this.getCurrentFolder()||{},g=Math.max(this.getRowCount(),0);22<b.length&&(b=ws.string.escapeXml(b.substr(0,
22))+"&hellip;");switch(e){case null:case "alltext":a=0==g?Config.Strings.DSHNoFolderAll0:1==g?Config.Strings.DSHNoFolderAll1:Config.Strings.DSHNoFolderAllN;break;case "subject":a=0==g?Config.Strings.DSHNoFolderSub0:1==g?Config.Strings.DSHNoFolderSub1:Config.Strings.DSHNoFolderSubN;break;case "fromto":a=null!=f&&("Sent"==f.type||"Drafts"==f.type||"AutoSavedSent"==f.type)?0==g?Config.Strings.DSHNoFolderRcp0:1==g?Config.Strings.DSHNoFolderRcp1:Config.Strings.DSHNoFolderRcpN:0==g?Config.Strings.DSHNoFolderSnd0:
1==g?Config.Strings.DSHNoFolderSnd1:Config.Strings.DSHNoFolderSndN}return ws.string.substituteParams(a,"&ldquo;"+b+"&rdquo;",500<g?"500+":g)},getDisplayableSearchHeaderStr:function(a){if(a)return this.getNoFolderStr();var a="",b=this.getSearchString(),e=this.getSearchIn(),f=this.getCurrentFolder()||{},g=Math.max(this.getRowCount(),0),j=Config.Strings.Mail;if(f&&f.displayName)j=f.displayName;22<j.length&&(j=j.substr(0,22)+"&hellip;");22<b.length&&(b=ws.string.escapeXml(b.substr(0,22))+"&hellip;");
switch(e){case null:case "alltext":a=0==g?Config.Strings.DSHAll0:1==g?Config.Strings.DSHAll1:Config.Strings.DSHAllN;break;case "subject":a=0==g?Config.Strings.DSHSub0:1==g?Config.Strings.DSHSub1:Config.Strings.DSHSubN;break;case "fromto":a=null!=f&&("Sent"==f.type||"Drafts"==f.type||"AutoSavedSent"==f.type)?0==g?Config.Strings.DSHRcp0:1==g?Config.Strings.DSHRcp1:Config.Strings.DSHRcpN:0==g?Config.Strings.DSHSnd0:1==g?Config.Strings.DSHSnd1:Config.Strings.DSHSndN}return ws.string.substituteParams(a,
"&ldquo;"+b+"&rdquo;",j,500<g?"500+":g)},deleteAttachments:function(a){var b={load:function(){},error:function(a){window.ws_ErrLgr&&!a&&ws_ErrLgr.logError(ws_ErrLgr.cat.ProgErr,"Error Handler for DeleteAttachment-deleteAttachments file:MailModel.js")}};ws.io.rpc({action:"DeleteAttachment",automatic:!1,content:{PreloadAttachmentIDs:a},load:dojo.hitch(b,"load"),error:dojo.hitch(b,"error")})}})})},"dojo/dom-prop":function(){define("exports,./_base/kernel,./sniff,./_base/lang,./dom,./dom-style,./dom-construct,./_base/connect".split(","),
function(g,j,f,a,b,e,h,k){var l={},n=0,m=j._scopeName+"attrid";g.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"};g.get=function(a,e){var a=b.byId(a),h=e.toLowerCase();return a[g.names[h]||e]};g.set=function(j,s,o){j=b.byId(j);if(2==arguments.length&&"string"!=typeof s){for(var u in s)g.set(j,u,s[u]);return j}u=s.toLowerCase();u=g.names[u]||s;if("style"==u&&"string"!=typeof o)return e.set(j,
o),j;if("innerHTML"==u)return f("ie")&&j.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(h.empty(j),j.appendChild(h.toDom(o,j.ownerDocument))):j[u]=o,j;if(a.isFunction(o)){var p=j[m];p||(p=n++,j[m]=p);l[p]||(l[p]={});var v=l[p][u];if(v)k.disconnect(v);else try{delete j[u]}catch(w){}o?l[p][u]=k.connect(j,u,o):j[u]=null;return j}j[u]=o;return j}})},"dojo/errors/CancelError":function(){define(["./create"],function(g){return g("CancelError",null,null,{dojoType:"cancel"})})},
"dojo/_base/xhr":function(){define("dojo/_base/xhr","./kernel,./sniff,require,../io-query,../dom,../dom-form,./Deferred,./config,./json,./lang,./array,../on,../aspect,../request/watch,../request/xhr,../request/util".split(","),function(g,j,f,a,b,e,h,k,l,n,m,q,s,o,u,p){g._xhrObj=u._create;var v=g.config;g.objectToQuery=a.objectToQuery;g.queryToObject=a.queryToObject;g.fieldToObject=e.fieldToObject;g.formToObject=e.toObject;g.formToQuery=e.toQuery;g.formToJson=e.toJson;g._blockAsync=!1;var w=g._contentHandlers=
g.contentHandlers={text:function(a){return a.responseText},json:function(a){return l.fromJson(a.responseText||null)},"json-comment-filtered":function(a){var a=a.responseText,b=a.indexOf("/*"),e=a.lastIndexOf("*/");if(-1==b||-1==e)throw Error("JSON was not comment filtered");return l.fromJson(a.substring(b+2,e))},javascript:function(a){return g.eval(a.responseText)},xml:function(a){var b=a.responseXML;if(j("ie")&&(!b||!b.documentElement)){var e=function(a){return"MSXML"+a+".DOMDocument"},e=["Microsoft.XMLDOM",
e(6),e(4),e(3),e(2)];m.some(e,function(e){try{var h=new ActiveXObject(e);h.async=!1;h.loadXML(a.responseText);b=h}catch(f){return!1}return!0})}return b},"json-comment-optional":function(a){return a.responseText&&/^[^{\[]*\/\*/.test(a.responseText)?w["json-comment-filtered"](a):w.json(a)}};g._ioSetArgs=function(f,k,l,j){var m={args:f,url:f.url},q=null;if(f.form){var q=b.byId(f.form),s=q.getAttributeNode("action");m.url=m.url||(s?s.value:null);q=e.toObject(q)}s=[{}];q&&s.push(q);f.content&&s.push(f.content);
f.preventCache&&s.push({"dojo.preventCache":(new Date).valueOf()});m.query=a.objectToQuery(n.mixin.apply(null,s));m.handleAs=f.handleAs||"text";var o=new h(function(a){a.canceled=!0;k&&k(a);var b=a.ioArgs.error;if(!b)b=Error("request cancelled"),b.dojoType="cancel",a.ioArgs.error=b;return b});o.addCallback(l);var w=f.load;w&&n.isFunction(w)&&o.addCallback(function(a){return w.call(f,a,m)});var u=f.error;u&&n.isFunction(u)&&o.addErrback(function(a){return u.call(f,a,m)});var p=f.handle;p&&n.isFunction(p)&&
o.addBoth(function(a){return p.call(f,a,m)});o.addErrback(function(a){return j(a,o)});v.ioPublish&&g.publish&&!1!==m.args.ioPublish&&(o.addCallbacks(function(a){g.publish("/dojo/io/load",[o,a]);return a},function(a){g.publish("/dojo/io/error",[o,a]);return a}),o.addBoth(function(a){g.publish("/dojo/io/done",[o,a]);return a}));o.ioArgs=m;return o};var z=function(a){a=w[a.ioArgs.handleAs](a.ioArgs.xhr);return void 0===a?null:a},x=function(a){return a},A=function(a){0>=B&&(B=0,v.ioPublish&&g.publish&&
(!a||a&&!1!==a.ioArgs.args.ioPublish)&&g.publish("/dojo/io/stop"))},B=0;s.after(o,"_onAction",function(){B-=1});s.after(o,"_onInFlight",A);g._ioCancelAll=o.cancelAll;g._ioNotifyStart=function(a){v.ioPublish&&g.publish&&!1!==a.ioArgs.args.ioPublish&&(B||g.publish("/dojo/io/start"),B+=1,g.publish("/dojo/io/send",[a]))};g._ioWatch=function(a,b,e,h){a.ioArgs.options=a.ioArgs.args;n.mixin(a,{response:a.ioArgs,isValid:function(){return b(a)},isReady:function(){return e(a)},handleResponse:function(){return h(a)}});
o(a);A(a)};g._ioAddQueryToUrl=function(a){if(a.query.length)a.url+=(-1==a.url.indexOf("?")?"?":"&")+a.query,a.query=null};g.xhr=function(a,b,e){var h,f=g._ioSetArgs(b,function(){h&&h.cancel()},z,x),k=f.ioArgs;"postData"in b?k.query=b.postData:"putData"in b?k.query=b.putData:"rawBody"in b?k.query=b.rawBody:(2<arguments.length&&!e||-1==="POST|PUT".indexOf(a.toUpperCase()))&&g._ioAddQueryToUrl(k);var l={method:a,handleAs:"text",timeout:b.timeout,withCredentials:b.withCredentials,ioArgs:k};if("undefined"!==
typeof b.headers)l.headers=b.headers;if("undefined"!==typeof b.contentType){if(!l.headers)l.headers={};l.headers["Content-Type"]=b.contentType}if("undefined"!==typeof k.query)l.data=k.query;if("undefined"!==typeof b.sync)l.sync=b.sync;g._ioNotifyStart(f);try{h=u(k.url,l,!0)}catch(j){return f.cancel(),f}f.ioArgs.xhr=h.response.xhr;f.rDfd=h;h.then(function(){f.resolve(f)}).otherwise(function(a){k.error=a;if(a.response)a.status=a.response.status,a.responseText=a.response.text,a.xhr=a.response.xhr;f.reject(a)});
return f};g.xhrGet=function(a){return g.xhr("GET",a)};g.rawXhrPost=g.xhrPost=function(a){return g.xhr("POST",a,!0)};g.rawXhrPut=g.xhrPut=function(a){return g.xhr("PUT",a,!0)};g.xhrDelete=function(a){return g.xhr("DELETE",a)};g._isDocumentOk=function(a){return p.checkStatus(a.status)};g._getText=function(a){var b;g.xhrGet({url:a,sync:!0,load:function(a){b=a}});return b};n.mixin(g.xhr,{_xhrObj:g._xhrObj,fieldToObject:e.fieldToObject,formToObject:e.toObject,objectToQuery:a.objectToQuery,formToQuery:e.toQuery,
formToJson:e.toJson,queryToObject:a.queryToObject,contentHandlers:w,_ioSetArgs:g._ioSetArgs,_ioCancelAll:g._ioCancelAll,_ioNotifyStart:g._ioNotifyStart,_ioWatch:g._ioWatch,_ioAddQueryToUrl:g._ioAddQueryToUrl,_isDocumentOk:g._isDocumentOk,_getText:g._getText,get:g.xhrGet,post:g.xhrPost,put:g.xhrPut,del:g.xhrDelete});return g.xhr})},"dijit/focus":function(){define("dijit/focus","dojo/aspect,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-construct,dojo/Evented,dojo/_base/lang,dojo/on,dojo/ready,dojo/sniff,dojo/Stateful,dojo/_base/unload,dojo/_base/window,dojo/window,./a11y,./registry,./main".split(","),
function(g,j,f,a,b,e,h,k,l,n,m,q,s,o,u,p,v){var w=new (j([m,e],{curNode:null,activeStack:[],constructor:function(){var a=h.hitch(this,function(a){f.isDescendant(this.curNode,a)&&this.set("curNode",null);f.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});g.before(b,"empty",a);g.before(b,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,b){var e=this,h=function(a){e._justMouseDowned=!0;setTimeout(function(){e._justMouseDowned=!1},0);
if(!n("ie")||!a||!(a.srcElement&&null==a.srcElement.parentNode))e._onTouchNode(b||a.target||a.srcElement,"mouse")},f=n("ie")?a.document.documentElement:a.document;if(f){if(n("ie")){a.document.body.attachEvent("onmousedown",h);var k=function(a){if(a&&a.srcElement&&a.srcElement.tagName){var h=a.srcElement.tagName.toLowerCase();"#document"==h||"body"==h||(u.isTabNavigable(a.srcElement)?e._onFocusNode(b||a.srcElement):e._onTouchNode(b||a.srcElement))}};f.attachEvent("onfocusin",k);var l=function(a){e._onBlurNode(b||
a.srcElement)};f.attachEvent("onfocusout",l);return{remove:function(){a.document.detachEvent("onmousedown",h);f.detachEvent("onfocusin",k);f.detachEvent("onfocusout",l);f=null}}}f.body.addEventListener("mousedown",h,!0);f.body.addEventListener("touchstart",h,!0);var g=function(a){e._onFocusNode(b||a.target)};f.addEventListener("focus",g,!0);var j=function(a){e._onBlurNode(b||a.target)};f.addEventListener("blur",j,!0);return{remove:function(){f.body.removeEventListener("mousedown",h,!0);f.body.removeEventListener("touchstart",
h,!0);f.removeEventListener("focus",g,!0);f.removeEventListener("blur",j,!0);f=null}}}},_onBlurNode:function(){this._clearFocusTimer&&clearTimeout(this._clearFocusTimer);this._clearFocusTimer=setTimeout(h.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0);if(!this._justMouseDowned)this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),this._clearActiveWidgetsTimer=setTimeout(h.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),
0)},_onTouchNode:function(b,e){this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);var h=[];try{for(;b;){var f=a.get(b,"dijitPopupParent");if(f)b=p.byId(f).domNode;else if(b.tagName&&"body"==b.tagName.toLowerCase()){if(b===s.body())break;b=o.get(b.ownerDocument).frameElement}else{var k=b.getAttribute&&b.getAttribute("widgetId"),l=k&&p.byId(k);l&&!("mouse"==e&&l.get("disabled"))&&h.unshift(k);b=b.parentNode}}}catch(g){}this._setStack(h,
e)},_onFocusNode:function(a){a&&9!=a.nodeType&&(this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,b){var e=this.activeStack;this.set("activeStack",a);for(var h=0;h<Math.min(e.length,a.length)&&!(e[h]!=a[h]);h++);for(var f,k=e.length-1;k>=h;k--)if(f=p.byId(e[k]))f._hasBeenBlurred=!0,f.set("focused",!1),f._focusManager==this&&f._onBlur(b),this.emit("widget-blur",
f,b);for(k=h;k<a.length;k++)if(f=p.byId(a[k]))f.set("focused",!0),f._focusManager==this&&f._onFocus(b),this.emit("widget-focus",f,b)},focus:function(a){if(a)try{a.focus()}catch(b){}}}));l(function(){var a=w.registerWin(o.get(s.doc));n("ie")&&q.addOnWindowUnload(function(){a&&(a.remove(),a=null)})});v.focus=function(a){w.focus(a)};for(var z in w)/^_/.test(z)||(v.focus[z]="function"==typeof w[z]?h.hitch(w,z):w[z]);w.watch(function(a,b,e){v.focus[a]=e});return w})},"dijit/hccss":function(){define("dijit/hccss",
["dojo/dom-class","dojo/hccss","dojo/ready","dojo/_base/window"],function(g,j,f,a){f(90,function(){j("highcontrast")&&g.add(a.body(),"dijit_a11y")});return j})},"ws/suite/Hat":function(){define("ws/suite/Hat","dojo/_base/declare,dojo/text!ws/suite/Hat.html,dojo/text!ws/suite/Hat.css,dojo,dijit,dojo/window,dijit/_Widget,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,ws/widget/FTUTip,ws/widget/SearchAutoComplete,ws/widget/WSMenuItem,ws/widget/WSMenuSeparator,ws/widget/SplitDropDownButton,ws/io,ws/lang,ws/presence,ws/reporting,ws/settings,ws/string,ws/UserContext,ws/WebSuite,ws/widget/Dialogs,ws/widget/util,ws/widget/BuddyIcon".split(","),
function(g,j,f,a,b,e,h,k,l,n,m,q,s){return g([h,k,l],{templateString:j,css:{templateString:f},_earlyTemplatedStartup:!0,minLogoAreaWidth:270,maxSearchFieldWidth:276,promoThemeAdsBlocked:!1,searchBarAdsBlocked:!1,logoutUrl:Config.ClientLogoutUrl,loginUrl:Config.BaseDotNETPagesURL+"solo.aspx",whatsNewUrl:Config.WhatsNewURL,checkLinkedScreenNamesInterval:6E5,megaMenu:null,settingsWidget:null,mailModel:null,folderDataType:null,searchScope:"alltext",searchFieldColor:"#000",hatType:"mail",themePicker:null,
hideSalutation:!1,setMailModel:function(a){this.mailModel=a},createThemeSelector:function(){this.themePicker||require(["ws/themes/widget/ThemePicker"],a.hitch(this,function(b){var e="mail"!=this.hatType?"DEFAULT":null,h=document.createElement("div");this.leftHat.appendChild(h);this.themePicker=new b({overrideTheme:e},h);a.addClass(this.themePicker.domNode,"themePicker")}))},startup:function(){if(Config.WebSearchUiEnabled&&!Config.EnableHatRevenueSearchBar)this.searchAreaNode.style.display="";a.subscribe("WSSessionExpired",
this,function(){clearTimeout(this.updateLSNTimeout)});if("pubcal"==this.hatType)this.signOutLink.innerHTML=ws.string.substituteParams("<a href='{0}'>{1}</a>",this.loginUrl,Config.Strings.SignIn);else if(ws.UserContext.ActiveScreenName&&""!=ws.UserContext.ActiveScreenName){a.subscribe("WSDeferredInit",this,"updateLinkedScreenNames");var b=ws.UserContext.ActiveScreenName;this.hideSalutation&&(b="");var e=Config.Strings.SignOut;this.screenNameNode.innerHTML=b;this.signOutLink.innerHTML=ws.string.substituteParams("<a href='javascript:void(0)'>{1}</a>",
this.logoutUrl,e);a.connect(a.query("a",this.signOutLink)[0],"onclick",a.hitch(this,function(b){null!=ws.io.calRpcToken&&ws.io.doRpcIssueRequests([{action:"EndSession",content:{tg:ws.UserContext.ActiveScreenName}}],!1,!1,!0);if(b.shiftKey)return a.publish("WSSessionExpired",[Config.Strings.AuthTimeoutMain]),b.preventDefault(),b.stopPropagation(),!1;(!a.isIE||9>a.isIE)&&ws.settings.savePending();ws.reporting.reportDLAction("Mail-Header-SignOut");setTimeout(a.hitch(this,function(){document.location=
this.logoutUrl}),200);return!1}))}if(Config.AddDomainToHatUrls)b=function(a){if(a&&0<a.length){var b=ws.UserContext.UserAddress.indexOf("@");-1!=b&&(b=ws.UserContext.UserAddress.substr(b+1),a+=0<a.indexOf("?")?"&":"?",a+="d="+encodeURIComponent(b))}return a},Config.MailTourURL=b(Config.MailTourURL),Config.WelcomeDialogMailTourURL=b(Config.WelcomeDialogMailTourURL),Config.HelpMenuTourURL=b(Config.HelpMenuTourURL),Config.MailTourPanelsURL=b(Config.MailTourPanelsURL);this.initNavIcons();this.initMegaMenu();
if(!Config.EnableHatRevenueSearchBar&&Config.WebSearchAutoCompleteEnabled)this.searchAutoComplete=new m({textbox:this.searchWebField,actionCB:a.hitch(this,"doSearchWeb"),getWidthCB:a.hitch(this,"getSearchWebFieldWidth")}),this.searchAutoComplete.startup();a.subscribe("WSDeferredInit",a.hitch(this,function(){ws.bubbleConfig.showPinBubble("OptionsTheme",this.optionsLink,!0);ws.WebSuite.startupDlgDone||(this.themePicker&&Settings.EnablePromoThemes&&this.themePicker.showNewPromoThemeBubble(!1),ws.bubbleConfig.canShowOtherBubbles&&
Config.ShowMailExtPromotionForFF&&3<=a.isFF&&ws.bubbleConfig.isShowable("FF3MailTo")&&this._showFF3MailToDiscovery())}));Config.EnableHatRevenueSearchBar&&(a.require("ws.layers.HatRevenue"),a.addOnLoad(a.hitch(this,function(){this.searchBarAdsBlock(!0);this.HatRevenue=new ws.suite.HatRevenue({id:"HatRevenue"});this.HatRevenue.startup();a.place(this.HatRevenue.domNode,this.rightHat,"after")})));this.searchWebField.focus();ws.WebSuite.isUsrInSrchTestCell(20)||ws.WebSuite.isUsrInSrchTestCell(26)?(b=
window._g_WS_MediaMatchHiDef&&window.matchMedia&&window.matchMedia(window._g_WS_MediaMatchHiDef).matches?a.create("img",{src:this.baseimages+"searchTest/google_enhanced@2x.png","class":"SearchABTestGoogleLogo"}):a.create("img",{src:this.baseimages+"searchTest/google_enhanced.png","class":"SearchABTestGoogleLogo"}),this.searchButtonContainer.appendChild(b)):ws.WebSuite.isUsrInSrchTestCell(21)?(b=a.create("img",{src:this.baseimages+"searchTest/google_powered.png","class":"SearchABTestGoogleLogo"}),
this.searchButtonContainer.appendChild(b)):ws.WebSuite.isUsrInSrchTestCell(22)&&a.addClass(this.searchAreaNode,"SearchABTest22");this.setWidth();a.subscribe("wsresize",this,"setWidth")},openFeedbackDlg:function(){require(["ws/widget/FeedbackPane","ws/widget/FeedbackIframeDlg"],a.hitch(this,function(b,e){if(Config.FeedbackIframeDlgUrl&&Settings.UserHash>=Config.FeedbackIframeDlgThreshold){var h=new e;h.startup();h.open()}else{if(!this.fdbkPane)this.fdbkPane=new b,this.fdbkPane.startup(),a.body().appendChild(this.fdbkPane.domNode),
this.fdbkPaneCloseHandler=a.connect(this.fdbkPane,"close",this,function(){a.destroy(this.fdbkPane);this.fdbkPane=null;a.disconnect(this.fdbkPaneCloseHandler)});this.fdbkPane.open()}}))},showSoloLogo:function(){a.removeClass(this.logoArea,"logoArea");a.addClass(this.logoArea,"logoAreaCal");a.removeClass(this.leftHat,"leftHat");a.addClass(this.leftHat,"leftHatCal")},initNavIcons:function(){var b=function(b,e,h){if(b)if(e&&e.url)if(b.onclick=a.hitch(h,h.openNavIconLink,e),e.caption)b.title=e.caption;
else{if(e.id&&Config.Strings["NI_"+e.id])b.title=Config.Strings["NI_"+e.id]}else b.style.display="none"};b(this.homeIcon,Config.HatNavIconHome,this);b(this.onVidIcon,Config.HatNavIconOnVid,this);b(this.favsIcon,Config.HatNavIconFavs,this);this.mailIcon.style.display="none";if(window.gMobileCalSolo)this.mailIcon.onclick=a.hitch(this,this.openNavIconMail)},openNavIconMail:function(){document.location="Suite.aspx"},openNavIconLink:function(a){var b="",b=(b=ws.WebSuite.getSearchRprtSuffix())?"Mail-ST-"+
b+"-icon-"+a.id:"Mail-Header-Icon"+a.id;ws.reporting.reportDLAction(b);window.open(a.url,"_blank")},openMegaMenuLink:function(a,b){"Basic"==a||"Accessible"==a||"ResetBubblePins"==a||ws.reporting.reportDLAction("Mail-Options-"+a);b&&b()},initMegaMenu:function(b){var e=this;if(!this.megaMenuDef)"mail"==this.hatType?this.megaMenuDef=a.filter(Config.MegaMenuLinks,a.hitch(this,function(b){b.className="ghMenuItem";b.mouseOverSamplingClass="btnHover";b.needsStyleUpdate=1;if(b.id&&Config.Strings["MM_"+b.id])b.caption=
Config.Strings["MM_"+b.id];if("Feedback"==b.id)if(Config.FeedbackLinkPath&&""!=Config.FeedbackLinkPath)b.onClick=a.hitch(e,e.openFeedbackDlg);else return!1;else if("MyAccount"==b.id){var h=b.url;if(-1!=h.toLowerCase().indexOf("locale={0}_{1}"))var f=Config.PageLocale.split("-"),h=ws.string.substituteParams(h,f[0],f[1].toUpperCase());b.onClick=a.hitch(ws.io,"openWindow",h)}else if("Help"==b.id)ws.reporting.makeFeedbackUrl(b.url),f=ws.reporting.getFeedbackUrl(),b.onClick=a.hitch(ws.io,"openWindow",
f);else if("MailTour"==b.id){h="aol";if("en-ca"==Config.PageLocale||"es-us"==Config.PageLocale)"AIM"==Config.UIVariant&&(h="aim");var f=Config.HelpMenuTourURL||Config.MailTourURL,k=ws.string.substituteParams(f,h,Config.PageLocale);b.onClick=function(){ws.io.openWindow(k,"","status=yes,resizable=yes,menubar=yes,scrollbars=yes,location=yes,toolbar=yes,top=50,left=50")}}else if("Settings"==b.id)b.onClick=a.hitch(e,e.onSettingsClick);else if("Themes"==b.id)if(Config.EnableThemes)e.createThemeSelector(),
b.onClick=a.hitch(e,e.onThemeClick);else return!1;else if("Basic"==b.id)b.onClick=a.hitch(e,e.switchToBasic);else if("Accessible"==b.id)b.onClick=a.hitch(e,e.a11yPrompt);else{if("WelcomeFTE"==b.id)return!1;if("ResetBubblePins"==b.id)b.onClick=function(){ws.bubbleConfig.resetPinPref()},b.caption="";else if("ErrorConsole"==b.id)if(Config.ClientLogAllEnabled&&Config.ClientLogConsoleEnabled)b.onClick=ws.WebSuite.openErrorConsole,b.isErrorConsoleMenuItem=!0;else return!1;else b.onClick=a.hitch(ws.io,"openWindow",
b.url)}b.title="";b.onClick=a.hitch(this,this.openMegaMenuLink,b.id,b.onClick);return!0})):"pubcal"==this.hatType?(this.megaMenuArrow.style.display="none",Config.PubCalHelpURL?(this.optionsLink.innerHTML=Config.Strings.Help,this.optionsLink.href=Config.PubCalHelpURL,a.attr(this.optionsLink,"target","_blank")):this.optionsLink.style.display="none"):(this.megaMenuDef=[],this.megaMenuDef.push({caption:Config.Strings.Settings,className:"ghMenuItem",mouseOverSamplingClass:"btnHover",needsStyleUpdate:1,
onClick:a.hitch(e,e.onSettingsClick)}),Config.PubCalHelpURL&&this.megaMenuDef.push({caption:Config.Strings.Calendar,className:"ghMenuItem",mouseOverSamplingClass:"btnHover",needsStyleUpdate:1,onClick:a.hitch(ws.io,"openWindow",Config.PubCalHelpURL)}));if(ws.UserContext.UserAddress&&"pubcal"!=this.hatType){var h="";Settings.FromDisplayName&&(h=Settings.FromDisplayName+"<br>");h+=ws.UserContext.UserAddress;this.megaMenuDef.unshift({id:"ghSep",separator:!0,className:"ghMenuItem",hideLine:"#fff"});this.megaMenuDef.unshift({id:"UserName",
caption:h,isLabel:!0,className:"ghMenuItemGlobal"})}if(b&&b.length&&"pubcal"!=this.hatType&&(b.push({separator:!0}),this.megaMenu)){if(this.linkedScreenNamesInMenu&&0<this.linkedScreenNamesInMenu.length)for(h=0;h<this.linkedScreenNamesInMenu.length;h++)this.linkedScreenNamesInMenu[h].destroy();this.linkedScreenNamesInMenu=[];a.forEach(b,function(b,h){var f=new (b.separator?s:q)(b);f.startup();e.linkedScreenNamesInMenu.push(f);a.place(f.domNode,e.megaMenu.containerNode,h+2)})}if(!this.megaMenu&&"pubcal"!=
this.hatType)this.megaMenu=ws.widget.createMenu(this.megaMenuDef),this.megaMenu.enableA11yKey=!0,a.addClass(this.megaMenu.domNode,"megaMenu"),this.megaMenu.bindDomNode(this.megaMenuNode),this.megaMenu.menuOrient={BR:"TR"},this.connect(this.megaMenuNode,"keyup","a11yKeyHndlr"),this.megaMenu.connect(this.megaMenu,"open",a.hitch(this,"onMegaMenuOpen")),this.megaMenu.connect(this.megaMenu,"onClose",a.hitch(this,"onMegaMenuClose"));setTimeout(function(){a.publish("Menu/StyleUpdate")},50)},a11yKeyHndlr:function(b){if(b&&
(b.keyCode==a.keys.DOWN_ARROW&&!b.shiftKey||"Down"==b.keyIdentifier)&&this.megaMenu)this.megaMenu.openMyself(),this.megaMenu.a11yMoveSelection(1)},getSearchWebFieldWidth:function(){return this.realSearchFieldWidth+8},setWidth:function(){var b="mail"!=this.hatType?255:Config.HatLogoWidth,h=e.getBox().w,f=508;if(!this.searchWebButtonWidth)this.searchWebButtonWidth=a._getMarginSize(this.searchWebButton.domNode).w+10,this.searchButtonContainer.style.right=-(this.searchWebButtonWidth-7)+"px";this.rightHat.style.paddingLeft=
a._getMarginSize(this.navIconsDiv).w+5+"px";var k=a._getMarginSize(this.rightHat).w,l=ws.WebSuite.isUsrInSrchTestCell(20)||ws.WebSuite.isUsrInSrchTestCell(21)||ws.WebSuite.isUsrInSrchTestCell(26)?60:0,f=Math.max(508,Math.min(h-(b+k+l),823));this.realSearchFieldWidth=f-33;this.searchWebField.style.width=f-this.searchWebButtonWidth-33+"px";h<b+508+k+l?(this.domNode.style.minWidth=b+508+k+l+"px",this.rightHat.style.right="auto",this.rightHat.style.left=b+508+l+"px"):1024>h?(this.domNode.style.minWidth=
h+"px",this.rightHat.style.right="auto",this.rightHat.style.left=b+f+l+"px"):(this.domNode.style.minWidth=0,this.rightHat.style.left="auto",this.rightHat.style.right="3px");this.searchAreaNode.style.left=Math.floor(Math.max(b,(h-k-b-l)/2-f/2+b))+"px";this.megaMenu&&"none"!=this.megaMenu.domNode.style.display&&this.megaMenu.close();this.searchAutoComplete&&"none"!=this.searchAutoComplete.domNode.style.display&&ws.widget.popup.close(this.searchAutoComplete)},onKeyPressSearchWebField:function(b){b.keyCode==
a.keys.ENTER&&(this.doSearchWeb(),b.preventDefault())},doSearchWeb:function(){this.searchWeb()},updateMenuPulldown:function(){},searchWeb:function(){var b=this.searchWebField.value,e=Config.WebSearchUrl;if(this.searchAutoComplete&&this.searchAutoComplete.isAutoCompleteEntry)e=Config.WebSearchAutoCompleteUrl;var b=e+encodeURIComponent(b),e="",h=ws.io.getQueryParameter("s_chn");Config.AolComTestReporting&&h&&("wm_c1AOL"==h||"wm_c2AOL"==h)?e="&s_chn=wm_"+h:(h=ws.WebSuite.getSearchRprtSuffix())&&(e="&s_chn=wm_"+
h.toLowerCase());b+=e;ws.reporting.reportDLAction("Mail-Header-Websearch");(this.newhw=ws.io.openWindow(b))&&setTimeout(a.hitch(this,function(){this.newhw.focus()}),50)},onSettingsClick:function(){Settings.WSSConnectError?ws.widget.Dialogs.ok("undefined"!=typeof ws.CalSolo?Config.Strings.SettingsDisabledCal:Config.Strings.SettingsDisabled):this.openSettingsCB&&this.openSettingsCB()},onThemeClick:function(){if(this.themePicker)this.themePicker.onChangeTheme();else this.createThemeSelector()},switchToBasic:function(){_wsSwitchToBasic(Config.BaseDotNETPagesURL+
"Lite/Today.aspx","Mail-Options-BasicVersion",!1)},a11yPrompt:function(){setA11yPref(Config.BaseDotNETPagesURL+"Lite/Today.aspx?AccessibilityRedirect=true","Mail-Options-AccessibleVersion")},openMailBlog:function(){ws.io.openWindow("http://mailblog.aol.com")},onMegaMenuOpen:function(){this.megaMenu&&this.megaMenu.domNode&&this.megaMenu.domNode.parentNode&&a.addClass(this.megaMenu.domNode.parentNode,"megaMenuDomNode");window._ws_theme&&window._ws_theme.themePicker&&!window._ws_theme.themePicker.useDarkArrow?
a.addClass(this.megaMenuArrow,"megaMenuArrowOpenLght"):a.addClass(this.megaMenuArrow,"megaMenuArrowOpenDrk");var b=this.megaMenu.getChildren();b&&a.forEach(b,function(a){if(a.isErrorConsoleMenuItem)a.domNode.style.display=ws.WebSuite.getErrorCount()?"":"none";else if("ResetBubblePins"==a.id)Config.BubblePinsEnabled?(a.domNode.style.display="",a.setCaption(ws.bubbleConfig.getOptionMenuLabel())):a.domNode.style.display="none"});a.publish("MegaMenuOpen")},onMegaMenuClose:function(){a.removeClass(this.megaMenuArrow,
"megaMenuArrowOpenDrk");a.removeClass(this.megaMenuArrow,"megaMenuArrowOpenLght");a.publish("MegaMenuClose")},onLogoClick:function(a){if(a.shiftKey)return ws.io.openWindow(Config.BasePagesURL+"support"),a.preventDefault(),a.stopPropagation(),!1;Config.MainLogoClickURL?ws.io.openWindow(Config.MainLogoClickURL,"_blank"):this.clickLogo()},clickLogo:function(){},updateLinkedScreenNames:function(){Settings.HasLinkedAccounts&&ws.lang.ensureLayersLoaded(a.hitch(this,"_updateLinkedScreenNames"))},_updateLinkedScreenNames:function(){ws.io.rpc({action:"GetScreenNames",
automatic:!0,content:{updateMsgCounts:!0},load:a.hitch(this,function(b){this.screenNames=b.screenNames;var e=[];if(b.enabled&&1<this.screenNames.length){e.push({className:"ghMenuItemGlobalLSNlabel",mouseOverSamplingClass:"btnHover",needsStyleUpdate:1,caption:Config.Strings.LSN_OtherAccounts,isLabel:1});if(1<this.screenNames.length){for(var h=0;h<this.screenNames.length;h++){var f=this.screenNames[h];if(!f.activeUser){var k=f.screenName;0<f.newMsgCount&&(k=k+" ("+f.newMsgCount+")");e.push({className:"ghMenuItem",
mouseOverSamplingClass:"btnHover",needsStyleUpdate:1,caption:k,onClick:a.hitch(this,"switchScreenName",f)})}}e.push({className:"ghMenuItem",mouseOverSamplingClass:"btnHover",needsStyleUpdate:1,caption:Config.Strings.ManageScreenNamesText,onClick:a.hitch(this,"manageScreenNames")})}this.updateLSNTimeout=setTimeout(a.hitch(this,"updateLinkedScreenNames"),this.checkLinkedScreenNamesInterval)}e.length&&this.initMegaMenu(e);Config.EnableLinkedScreenNames=b.enabled}),error:a.hitch(this,function(){this.updateLSNTimeout=
setTimeout(a.hitch(this,"updateLinkedScreenNames"),this.checkLinkedScreenNamesInterval)})})},switchScreenName:function(b){ws.reporting.reportDLAction("Mail-Options-SwitchSN");ws.io.rpc({action:"SwitchScreenName",content:{screenName:b.screenName},load:function(b){b.url?document.location.replace(b.url):b.loginRequired&&a.publish("WSSessionExpired",[null,b.screenName,!1])},error:function(a){window.ws_ErrLgr&&!a&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for SwitchScreenName-switchScreenName file:Hat.js");
ws.widget.Dialogs.ok(a||"There was an error switching screen names.")}})},manageScreenNames:function(){(this.manageScreenNamesWindow=ws.io.openWindow(Config.ManageScreenNamesUrl,"","status=no,resizable=yes,menubar=no,scrollbars=no,left=250,top=150,width=570,height=460"))&&this.checkManageScreenNamesWindow()},checkManageScreenNamesWindow:function(){this.manageScreenNamesWindow.closed?(ws.widget.Dialogs.ok(Config.Strings.ManageScreenNamesNotification),this.manageScreenNamesWindow=null):setTimeout(a.hitch(this,
"checkManageScreenNamesWindow"),500)},composeMessage:function(){},checkMail:function(){},_showFF3MailToDiscovery:function(){if(!this.ff3MailToTip)this.ff3MailToTip=new n({name:"FF3MailTo",content:Config.Strings.FF3MailTo_FTUTip+"<div style='height:30px;margin-top:10px;'><div class='btn' style='float:left;margin-left:40px'><span class='btnLabel'>"+Config.Strings.FF3MailTo_ButtonYes+"</span></div><div style='float:left;margin:5px 0 0 20px'><a href='#'>"+Config.Strings.NoThanks+"</a></div></div>",positionOverNode:this.screenNameNode,
arrowPosition:"top",distanceArrowFromEdge:245,dimensions:{w:240},offset:{x:-233,y:30},onClick:function(){},load:a.hitch(this,function(){this.ff3MailToTip.connect(a.query(".btn",this.ff3MailToTip.message)[0],"onclick",a.hitch(this,function(){ws.reporting.reportDLAction("Mail-Onboarding-FFMailTo");ws.browser.registerMailToHandler();this.ff3MailToTip.offset.y=2;this.ff3MailToTip.placeOnScreen();this.ff3MailToTip.message.innerHTML=ws.string.substituteParams("<div style='margin-bottom:10px'>"+Config.Strings.FF3MailTo_Added+
"<div class='btn' style='margin:5px 0 15px 90px'><span class='btnLabel'>"+Config.Strings.Done+"</span></div></div>","<b>","</b>");this.ff3MailToTip.connect(a.query(".btn",this.ff3MailToTip.message)[0],"onclick",a.hitch(this,function(){this.ff3MailToTip.closeTip()}))}));this.ff3MailToTip.connect(a.query("a",this.ff3MailToTip.ftutip)[0],"onclick",a.hitch(this,function(){this.ff3MailToTip.closeTip()}))})}),a.body().appendChild(this.ff3MailToTip.domNode),this.ff3MailToTip.startup();this.ff3MailToTip.showTip()},
_blockHatAds:function(){},promoThemeAdsBlock:function(a){this.HatRevenue&&this.HatRevenue.setShowing(!a);this.promoThemeAdsBlocked=a;this._blockHatAds(this.hatAdsAreBlocked())},searchBarAdsBlock:function(a){this.searchBarAdsBlocked=a;this._blockHatAds(a)},hatAdsAreBlocked:function(){return this.searchBarAdsBlocked||this.promoThemeAdsBlocked},showTip:function(b){a.addClass(a.byId("instatip"),"instatipGblHdr");ws.widget.showInstatip(b.target)},hideTip:function(b){a.removeClass(a.byId("instatip"),"instatipGblHdr");
ws.widget.hideInstatip(b.target)}})})},"url:ws/calendar/EditCalendar.css":"","ws/themes/widget/ThemePicker":function(){define("ws/themes/widget/ThemePicker","dojo/_base/declare,dojo/text!ws/themes/widget/ThemePicker.html,dojo/text!ws/themes/widget/ThemeStyles.css,dojo/text!ws/themes/widget/ThemeStylesHighContrast.css,dojo,dijit,dijit/registry,dijit/_Widget,dijit/_TemplatedMixin,ws/widget/FTUTip,ws/widget/Button,ws/themes/ThemeConfig,ws/lang,ws/string,ws/widget/util,ws/reporting,ws/settings".split(","),
function(g,j,f,a,b,e,h,k,l,n,m){return g([k,l],{templateString:j,themeCss:{templateString:f},themeCssStr:"",highContrastCss:{templateString:a},highContrastThemeCssStr:null,isHighContrastTheme:!1,useDarkArrow:!0,isVisible:!0,prefs:null,postCreate:function(){window._ws_theme=ws.themes.ThemeConfig;this.tc=window._ws_theme;window._ws_theme.themePicker=this;if(this.themePickerDialog)b._destroyElement(this.themePickerDialog.domNode),this.themePickerDialog.destroy(),this.themePickerDialog=null;this.hatWidget=
h.byId("HatWidget");if(!this.isVisible)this.domNode.style.display="none",this.hide();this.themeCssStr=this.themeCss.templateString||b._getText(this.themeCss.templatePath);this.prefs=this.tc.prefs;Config.DefaultLogoIsDark?(this.hatLogoUrl=Config.BaseAffinityResourcesURL+"images/hat_logo_gen_light.png",this.hatLogoUrl2X=Config.BaseAffinityResourcesURL+"images/hat_logo_gen_light@2x.png"):(this.hatLogoUrl=Config.BaseAffinityResourcesURL+"images/hat_logo_dark.png",this.hatLogoUrl2X=Config.BaseAffinityResourcesURL+
"images/hat_logo_dark@2x.png");if(this.tc.initialThemeLoaded)this.startUpThemeLoaded(),this.startUpThemeChangeDone=!0;this.tc.wasTakeover&&this.tc.optOut?this.showNewPromoThemeBubble(!0):this.tc.wasStpdCoreForce&&this.saveTheme(!0)},startUpThemeLoaded:function(){this.tc.currentThemeId!=Config.ThemeDefault&&this.changeTheme(this.tc.currentThemeId)},sendTrackingURL:function(a){if(null!=a.trackingURL){var b="?rnd=";0<=a.trackingURL.indexOf("?")&&(b="&rnd=");a=a.trackingURL+b+Math.random();(new Image).src=
a}},onChangeTheme:function(){this.openThemePickerDialog(this.tc.currentThemeId)},openThemePickerDialog:function(a,e){Settings.WSSConnectError?ws.widget.Dialogs.ok(Config.Strings.SettingsDisabledThm):this.themePickerDialog?(this.themePickerDialog.show(a,this.tc.currentThemeId),e&&this.changeTheme(a)):ws.lang.ensureLayersLoaded(b.hitch(this,function(){require(["ws/themes/widget/ThemePickerDialog"],b.hitch(this,function(h){this.themePickerDialog=new h({themeWidget:this,currentSelected:a,originalSelection:this.tc.currentThemeId});
b.body().appendChild(this.themePickerDialog.domNode);this.themePickerDialog.startup();e&&this.changeTheme(a)}))}))},changeTheme:function(a){if(!this.isThemeValid(a)&&(a=this.tc.restoreToThemeId,!this.isThemeValid(a)))a=Config.ThemeDefault;if(this.tc.themeData[a]||a==Config.ThemeDefault){var e=this.tc.themeData[a];this.tc.currentThemeId=e.id;this.tc.currentThemeData=e;this._changeTheme(a)}else this.tc.loadTheme(a,b.hitch(this,this._changeTheme,a))},_changeTheme:function(a){if(this.tc.themeData[a])this.tc.currentThemeId=
a,this.tc.currentThemeData=this.tc.themeData[a];if(Settings.EnablePromoThemes&&this.tc.forceOrOptoutThemeId&&this.isThemeValid(a)&&this.tc.forceOrOptoutThemeId!=a)this.prefs.optOutForcedThemeId=this.tc.forceOrOptoutThemeId;if(a!=this.tc.forceOrOptoutThemeId&&a!=this.tc.optinThemeId)this.tc.restoreToThemeId=a;this._insertThemeCss(a);b.publish("Theme/Change",[a]);return a},isThemeValid:function(a){return this.tc.active[a]?!0:!1},saveTheme:function(){this.prefs.SelectedTheme="theme-"+this.tc.currentThemeId.toLowerCase();
this.prefs.restoreToTheme=this.tc.restoreToThemeId;this.prefs.randomThemeEnabled=this.tc.randomThemeEnabled;ws.settings.saveNow({ThemePrefs:this.prefs});Settings.ThemePrefs=this.prefs},_changeToPromoTheme:function(){this.themeOptTip.closeTip();this.tc.optinThemeId&&(b.isIE?setTimeout(b.hitch(this,function(){this.openThemePickerDialog(this.tc.optinThemeId,!0)}),100):this.openThemePickerDialog(this.tc.optinThemeId,!0))},_optOutTakeOverTheme:function(){this.themeOptTip.closeTip();this.tc.loadTheme(this.tc.forceOrOptoutThemeId,
b.hitch(this,function(){this.changeTheme(this.tc.restoreToThemeId);this.saveTheme(!0)}))},_openSettings:function(){ws.WebSuite.openSettings();this.themeOptTip.closeTip()},showNewPromoThemeBubble:function(a){var e=a?this.tc.forceOrOptoutThemeId:this.tc.optinThemeId;e&&this.tc.loadTheme(e,b.hitch(this,function(){ws.lang.ensureLayersLoaded(b.hitch(this,function(){var h=a?"ThemeOptout":"ThemeOptin",f=this.tc.themeData[e],k=f.PromoAttribute;if(f&&k&&this.hatWidget){var l=Settings.LastSeenPromoTipBubble,
g=["",""];l&&(g=l.split(";"));2>g.length&&(g[1]="");l=a?1:0;if(g[l]!=f.id){g[l]=f.id;var j=a?"optout":"optin";(l=k[j+"TipMessage"])||(l=a?Config.Strings.ThemesPromoFTUTipOptOut:Config.Strings.ThemesPromoFTUTipOptIn);var x="12px",A="20px",B="",C=208;if(k=k[j+"TipIcon"])B=ws.string.substituteParams("<div style='position:absolute;left:15px;top:19px;width:115px;height:70px;border: 1px solid #ccc;background:url({0}) no-repeat center center'></div>",f.resourcePath+"/"+k),x="146px",A="43px",C=175;this.themeOptTip=
new n({name:h,content:B+"<div style='min-height:"+A+"'>"+l+"</div>"+("<div style='position:relative;height:25px;margin-top:5px;margin-right:10px;font-weight:normal;'><div class='wsLink ptbNoThanksLnk'>"+Config.Strings.Themes_NoThanks+"</div><div class='ptbOKBtn'></div></div>"),positionOverNode:this.domNode,distanceArrowFromEdge:64,arrowPosition:"top",dimensions:{w:C},offset:{x:-63,y:24},saveAsSeenOnClose:!1,load:b.hitch(this,function(){var h=new m;h.startup();h.setLabel(Config.Strings.OK);h.onClick=
b.hitch(this,function(){this.themeOptTip.closeTip()});var f=b.query(".ptbOKBtn",this.themeOptTip.ftutip);f.length&&f[0].appendChild(h.domNode);a?(h.onClick=b.hitch(this,function(){ws.reporting.reportDLAction("Mail-Theme"+j+"-Ok"+e);this.themeOptTip.closeTip()}),b.query(".ptbNoThanksLnk",this.themeOptTip.ftutip).onclick(b.hitch(this,function(){ws.reporting.reportDLAction("Mail-Theme"+j+"-Cancel"+e);this._optOutTakeOverTheme()}))):(h.onClick=b.hitch(this,function(){ws.reporting.reportDLAction("Mail-Theme"+
j+"-Ok"+e);this._changeToPromoTheme()}),b.query(".ptbNoThanksLnk",this.themeOptTip.ftutip).onclick(b.hitch(this,function(){ws.reporting.reportDLAction("Mail-Theme"+j+"-Cancel"+e);this.themeOptTip.closeTip()})))})});b.body().appendChild(this.themeOptTip.domNode);if(this.themeOptTip.closeButton)this.themeOptTip.closeButton.style.display="none";this.themeOptTip.padBox.style.backgroundColor="#fff";b.style(this.themeOptTip.message,{backgroundColor:"#fff",color:"#000",fontSize:"14px",fontWeight:"normal",
padding:"17px 14px 14px "+x,backgroundColor:"#fff"});this.themeOptTip.startup();if(Settings.FirstLogin&&this.themeOptTip.domNode)this.themeOptTip.domNode.style.zIndex=990;this.themeOptTip.placeOnScreen();this.themeOptTip.domNode.style.display="";ws.settings.saveSoon({LastSeenPromoTipBubble:g.join(";")});Settings.LastSeenPromoTipBubble=g.join(";");ws.reporting.reportDLAction("Mail-Theme"+j+"-Shown"+e)}}}))}))},onPromoClick:function(){ws.io.openWindow(this.tc.currentThemeData.promoLink)},_insertThemeCss:function(){this.isHighContrastTheme=
!1;var a="",e=this.tc.currentThemeData;ws&&ws.WebSuite&&ws.WebSuite.HatWidget&&ws.WebSuite.HatWidget.rightHat&&b.removeClass(ws.WebSuite.HatWidget.rightHat,"rightHatLightForeColor");this.useDarkArrow=!0;if(!e.defaultTheme){if(ws.WebSuite.isUsrInSrchTestCell(23)&&"SIMPLE"==e.id)e.styleInfo.GeneralApp.search="#dd4ba1";var h=e.resourcePath,f=e.useDarkArrow?"-106px -83px":"-131px -307px";if(e.highContrast){this.isHighContrastTheme=!0;h={baseImage:Config.BaseImagesURL,themeDir:h};if(!this.highContrastThemeCssStr)this.highContrastThemeCssStr=
this.highContrastCss.templateString||b._getText(this.highContrastCss.templatePath);try{a=ws.string.substituteParams(this.highContrastThemeCssStr,h)}catch(k){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.ProgErr,"ThemeStylesHighContrast.css  error: targeted theme ("+this.tc.currentThemeId+") has invalid property: file:ThemePicker.js")}}else{var h={themeDir:h,themeVer:Config.ThemeConfigVer},l;for(l in this.tc.map){var g=this.tc.map[l];h[l]=e.styleInfo[g[0]][g[1]]}try{a=ws.string.substituteParams(this.themeCssStr,
h)}catch(j){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.ProgErr,"ThemeStyles.css error: targeted theme ("+this.tc.currentThemeId+") has invalid property: file:ThemePicker.js")}}a+=""+(" body .WSHat .megaMenuArrow { background-position: "+f+";}");if(e.changeHatLogo)f=[' body .WSHat .logoArea, body .miniLogin .logoArea IMG { background-image: url("',e.resourcePath+"/hat_logo_std.png",'"); } '].join(""),a+=f;else if(Config.DefaultLogoIsDark&&!e.useDarkHatLogo||!Config.DefaultLogoIsDark&&e.useDarkHatLogo)f=
[' body .WSHat .logoArea, body .miniLogin .logoArea IMG { background-image: url("',this.hatLogoUrl,'"); } '],window._g_WS_MediaMatchHiDef&&window.matchMedia&&window.matchMedia(window._g_WS_MediaMatchHiDef).matches&&f.push(" @media "+window._g_WS_MediaMatchHiDef+'{ body .WSHat .logoArea, body .miniLogin .logoArea IMG { background-image: url("',this.hatLogoUrl2X,'"); background-size: 267px 57px; } } '),a+=f.join("");this.useDarkArrow=e.useDarkArrow;e.styleInfo&&"#fff"==e.styleInfo.Header.grtingTxt.toLowerCase()&&
ws&&ws.WebSuite&&ws.WebSuite.HatWidget&&ws.WebSuite.HatWidget.rightHat&&b.addClass(ws.WebSuite.HatWidget.rightHat,"rightHatLightForeColor")}b.isWebKit?(b._destroyElement(document.getElementById("themeCommon")),e=document.createElement("style"),e.setAttribute("id","themeCommon"),e.innerText=a,document.getElementsByTagName("head")[0].appendChild(e)):b.isIE?document.getElementById("themeCommon").styleSheet.cssText=a:document.getElementById("themeCommon").innerHTML=a}})})},"dojo/_base/lang":function(){define("dojo/_base/lang",
["./kernel","../has","../sniff"],function(g,j){j.add("bug-for-in-skips-shadowed",function(){for(var a in{toString:1})return 0;return 1});var f=j("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],a=f.length,b=function(a,b,e){var h,f=0,k=g.global;if(!e)if(a.length){h=a[f++];try{e=g.scopeMap[h]&&g.scopeMap[h][1]}catch(l){}e=e||(h in k?k[h]:b?k[h]={}:void 0)}else return k;for(;e&&(h=a[f++]);)e=h in e?e[h]:b?e[h]=
{}:void 0;return e},e=Object.prototype.toString,h=function(a,b,e){return(e||[]).concat(Array.prototype.slice.call(a,b||0))},k=/\{([^\}]+)\}/g,l={_extraNames:f,_mixin:function(b,e,h){var k,l,g,p={};for(k in e)if(l=e[k],!(k in b)||b[k]!==l&&(!(k in p)||p[k]!==l))b[k]=h?h(l):l;if(j("bug-for-in-skips-shadowed")&&e)for(g=0;g<a;++g)if(k=f[g],l=e[k],!(k in b)||b[k]!==l&&(!(k in p)||p[k]!==l))b[k]=h?h(l):l;return b},mixin:function(a,b){a||(a={});for(var e=1,h=arguments.length;e<h;e++)l._mixin(a,arguments[e]);
return a},setObject:function(a,e,h){var f=a.split("."),a=f.pop();return(h=b(f,!0,h))&&a?h[a]=e:void 0},getObject:function(a,e,h){return b(a.split("."),e,h)},exists:function(a,b){return void 0!==l.getObject(a,!1,b)},isString:function(a){return"string"==typeof a||a instanceof String},isArray:function(a){return a&&(a instanceof Array||"array"==typeof a)},isFunction:function(a){return"[object Function]"===e.call(a)},isObject:function(a){return void 0!==a&&(null===a||"object"==typeof a||l.isArray(a)||
l.isFunction(a))},isArrayLike:function(a){return a&&void 0!==a&&!l.isString(a)&&!l.isFunction(a)&&!(a.tagName&&"form"==a.tagName.toLowerCase())&&(l.isArray(a)||isFinite(a.length))},isAlien:function(a){return a&&!l.isFunction(a)&&/\{\s*\[native code\]\s*\}/.test(""+a)},extend:function(a,b){for(var e=1,h=arguments.length;e<h;e++)l._mixin(a.prototype,arguments[e]);return a},_hitchArgs:function(a,b){var e=l._toArray(arguments,2),h=l.isString(b);return function(){var f=l._toArray(arguments),k=h?(a||g.global)[b]:
b;return k&&k.apply(a||this,e.concat(f))}},hitch:function(a,b){if(2<arguments.length)return l._hitchArgs.apply(g,arguments);b||(b=a,a=null);if(l.isString(b)){a=a||g.global;if(!a[b])throw['lang.hitch: scope["',b,'"] is null (scope="',a,'")'].join("");return function(){return a[b].apply(a,arguments||[])}}return!a?b:function(){return b.apply(a,arguments||[])}},delegate:function(){function a(){}return function(b,e){a.prototype=b;var h=new a;a.prototype=null;e&&l._mixin(h,e);return h}}(),_toArray:j("ie")?
function(){function a(b,e,h){h=h||[];for(e=e||0;e<b.length;e++)h.push(b[e]);return h}return function(b){return(b.item?a:h).apply(this,arguments)}}():h,partial:function(a){return l.hitch.apply(g,[null].concat(l._toArray(arguments)))},clone:function(a){if(!a||"object"!=typeof a||l.isFunction(a))return a;if(a.nodeType&&"cloneNode"in a)return a.cloneNode(!0);if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return RegExp(a);var b,e,h;if(l.isArray(a)){b=[];for(e=0,h=a.length;e<h;++e)e in
a&&b.push(l.clone(a[e]))}else b=a.constructor?new a.constructor:{};return l._mixin(b,a,l.clone)},trim:String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(a,b,e){return a.replace(e||k,l.isFunction(b)?b:function(a,e){return l.getObject(e,!1,b)})}};l.mixin(g,l);return l})},"dojo/_base/NodeList":function(){define("dojo/_base/NodeList",["./kernel","../query","./array","./html","../NodeList-dom"],function(g,j,f){var j=j.NodeList,
a=j.prototype;a.connect=j._adaptAsForEach(function(){return g.connect.apply(this,arguments)});a.coords=j._adaptAsMap(g.coords);j.events="blur,focus,change,click,error,keydown,keypress,keyup,load,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,submit".split(",");f.forEach(j.events,function(b){var e="on"+b;a[e]=function(a,b){return this.connect(e,a,b)}});return g.NodeList=j})},"ws/WebSuite":function(){define("ws/WebSuite","dojo,dojo/dom,dojo/window,dijit/_Widget,dijit/registry,dojo/parser,dojo/io-query,ws/suite/Navigation,ws/calendar/CNavigation,ws/widget/Button,ws/widget/FTUTip,ws/suite/TodayPage,ws/suite/NewToday,ws/widget/WSToolbar,dijit/layout/StackContainer,ws/widget/Splitter,ws/suite/SidePanel,ws/suite/Hat,ws/suite/Footer,ws/widget/Pane,ws/mail/MailFilters,ws/suite/InforOfferDialog,ws/browser,ws/io,ws/lang,ws/mail/MailModel,ws/reporting,ws/widget/Dialogs,ws/widget/ModalNotification,ws/bubbleConfig".split(","),
function(g,j,f,a,b,e,h,k,l,n,m,q,s,o,u,p,v,w,z,x,A,B){ws.WebSuite={isRecordTimingData:!1,todayPageLoaded:0,todayPageUnloaded:0,messageListTimerStart:0,messageListTimerEnd:0,messageReadTimerStart:0,messageReadTimerEnd:0,messageSize:0,pluginBarRenderTime:-1,topBarNoticeHeight:0,minContentHeight:250,minViewWidth:660,qaErrConsoleHeight:0,tabNotificationShown:{},notificationMsg:null,hashWidgets:{},settingsLoaded:{},isPanelSplitterInitializing:!1,wsObj:null,lastSelectedTab:null,isModalOpen:!1,startupDlgDone:!1,
internalNotificationsActive:!1,externalNotificationInitilized:!1,cmpseMsgWidPersist:{lastSelFromAddr:null,selectedFromAddr:null},rmreqid:null,widthMode:4,heightMode:Settings.ListSpacingType,snippetsOn:!1,isSettingLoaded:function(a){return this.settingsLoaded.all||this.settingsLoaded[a]},_resize:function(){this.resize()},resize:function(a){this.viewportSize=f.getBox();this.widthMode=800>=this.viewportSize.w?1:1024>=this.viewportSize.w?2:1200>=this.viewportSize.w?3:4;if(this.isAutoSpacingEnabled){var b=
this.getAutoSpacingType();if(b!=this.heightMode)g.removeClass(g.body(),"spacing"+this.heightMode),g.addClass(g.body(),"spacing"+b),this.heightMode=b,g.publish(["ListSpacingResize"])}b=Math.max(this.viewportSize.h-(this.hatHeight+this.topBarNoticeHeight+this.qaErrConsoleHeight),this.minContentHeight);this.browserUpgradeBar&&this.browserUpgradeBar.layout();if(this.qaErrConsoleNode){var e=document.getElementById("FooterWidget");if(e)e.style.bottom=this.qaErrConsoleHeight+"px"}if(this.settingsWidget&&
this.settingsWidget.isShowing())this.layoutForSettings();else{this.minViewWidth=1==this.widthMode?580:660;this.SidePanel&&!0!==a&&this.SidePanel.updateWidth();var h=g._getMarginSize(this.Navigation.domNode).w,k=0;this.SidePanel&&(k=this.SidePanel.isClosed()?0:g._getMarginSize(this.SidePanel.domNode).w);this.standaloneCalendar?this.navSplitterWidth=0:this.NavSplitterEl.style.left=h-this.NavSplitter.splitterMargin+"px";this.ViewWidget.domNode.style.left=h+this.navSplitterWidth+"px";e=Math.max(this.viewportSize.w-
(h+this.navSplitterWidth+0+k),this.minViewWidth);k=e+k+h+this.navSplitterWidth;b-=k>this.viewportSize.w?this.scrollbarWidth:0;if(this.SidePanel)this.SidePanel.domNode.style.left=h+e+"px";if(this.HatWidget&&!ws.CalSolo)this.HatWidget.leftHat.style.height=this.viewportSize.h-10+"px";document.getElementById("ws_appScroll").style.minWidth=k+"px";h=document.getElementById("ws_application");280>b?h.style.overflowY="auto":(h.style.overflowY="hidden",h.scrollTop=0);this.SidePanel&&!0!==a&&this.SidePanel.resize({h:b});
this.Navigation.resize({h:b});this.NavSplitter&&this.NavSplitter.setHeight(b);this.ViewWidget.resize({w:e,h:b})}document.body.scrollTop="0"},layoutForSettings:function(){var a=Math.max(this.viewportSize.h-(this.hatHeight+this.topBarNoticeHeight+this.qaErrConsoleHeight),this.minContentHeight),b=document.getElementById("ws_application");b.style.overflowY="hidden";b.scrollTop=0;b=document.getElementById("ws_appScroll");b.style.width=this.viewportSize.w+"px";b.style.minWidth="0";g.marginBox(this.settingsWidget.domNode,
{w:this.viewportSize.w-1,h:a});this.settingsWidget.resize()},resizeViewWidgetWidth:function(){Math.max(this.viewportSize.h-(this.hatHeight+this.topBarNoticeHeight),this.minContentHeight);var a=g._getMarginSize(this.Navigation.domNode).w;this.SidePanel&&g._getMarginSize(this.SidePanel.domNode);var b=Math.max(this.viewportSize.w-(a+this.navSplitterWidth+0),this.minViewWidth);setTimeout(g.hitch(this,function(){this.ViewWidget.resize({w:b})}),0)},splitSizer:function(a){140>a?a=42:181>a?a=180:340<a&&(a=
340);return a},splitClick:function(){ws.WebSuite.Navigation.toggleNav("splitClick")},splitterResize:function(){this.resize()},windowResize:function(){g.isIE?ws.lang.defer(this,"_resize",100,"ws.WebSuite._resize"):this.resize()},getWSObj:function(){if(null==this.wsObj)this.wsObj=0<document.location.toString().indexOf("Solo.aspx")?ws.CalSolo:ws.WebSuite;return this.wsObj},tracklm:function(a){ws.bootstrap&&ws.bootstrap.add&&ws.bootstrap.add("load_mail",a)},trackdl:function(a,b){ws.reporting&&ws.reporting.DL&&
ws.reporting.DL.append&&ws.reporting.DL.append(a,b)},trackall:function(a,b){ws.bootstrap&&ws.bootstrap.add&&ws.bootstrap.add("load_mail",a);ws.reporting&&ws.reporting.DL&&ws.reporting.DL.append&&ws.reporting.DL.append(a,b)},initialize:function(){try{this.tracklm("-WS.Ia");if(Config.LogStatistics)this.isRecordTimingData=!0;ws.CalSolo?ws.CalSolo._initializeSolo():ws.WebSuite._initialize()}catch(a){this.tracklm("-WS.Ib"),window.DisplayAppLoadError&&DisplayAppLoadError(a)}this.tracklm("-WS.Iz")},_initializeSolo:function(){this.standaloneCalendar=
this.initialized=!0;this.hideLoadingCurtain();if(!this.scrollbarWidth)this.scrollbarWidth=ws.html.getScrollbarWidth();this.theCalendarModel=ws.bootstrap.theCalendarModel;if(this.isAnonymous=this.theCalendarModel.isAnonymous){var a=document.location.search,a=a.substring(a.indexOf("?")+1,a.length),a=h.queryToObject(a),b=a.calid;if(b)this.theCalendarModel.anonymousCalid=b;else if(b=a.encalid)this.theCalendarModel.anonymousCalid=ws.calendar.calutil.decode64(b);if(a.t)this.theCalendarModel.anonymousTicket=
a.t}setTimeout(g.hitch(this,"deferredInit"),100);ws.browser.addOnBeforeUnload(this,"onBeforeUnload");this.initGlobalUIPrefs();this.deferredInitHandle=g.connect(this.theMailModel,"modelUpdated",this,"deferredInit");a=g.byId("NavigationWidget");a.setAttribute("data-dojo-type","ws/calendar/CNavigation");this.Navigation=e.construct(l,a);this.Navigation.startup();this.Navigation.setCalendarModel(this.theCalendarModel);this.Navigation.searchCalendarCB=g.hitch(this,"calendarSearch");this.NavSplitter=null;
this.ViewWidget=e.construct(u,g.byId("ws_view"));this.ViewWidget.startup();g.addClass(g.body(),"spacing"+(this.isAutoSpacingEnabled?this.getAutoSpacingType():this.heightMode));this.initializeSizing();this.HatWidget=e.construct(w,g.byId("HatWidget"));this.HatWidget.startup();this.HatWidget.openSettingsCB=g.hitch(this,"openSettings");this.FooterWidget=e.construct(z,g.byId("FooterWidget"));this.FooterWidget.startup();window.wsMasterTip=g._toDom("<div class='instatipCntr' style='visibility:hidden'><div id='instatip'></div><div class='mainSprite instatipArrow'></div></div>");
g.body().appendChild(window.wsMasterTip);this.Navigation.modifyNavDatePicker();this.Navigation.showCalendar(!0);this.HatWidget.showSoloLogo()},setMailModel:function(a){this.theMailModel=a;if(null!=a)this.mailModelLoaded=!0},_initialize:function(){this.initialized=!0;this.asyncDlgMgr={dlgPrioityReports:[null,null,null],isPending:function(a){return null==a},isNoShow:function(a){return"boolean"===typeof a&&!1===a},isShowDlgCB:function(a){return"function"===typeof a&&"function"===typeof a.call},checkToShowDlg:function(a){if(null!=
this.dlgPrioityReports)for(var b=0;b<this.dlgPrioityReports.length;b++){var e=this.dlgPrioityReports[b];if(this.isShowDlgCB(e)){e.call();this.dlgPrioityReports=null;break}else if(!a&&this.isPending(e))break}},reportPrioity:function(a,b){if(null!=this.dlgPrioityReports){if(this.isNoShow(a))this.dlgPrioityReports[b]=!1;else if(this.isShowDlgCB(a)){if(!this.watchDog)this.watchDog=setTimeout(g.hitch(this,function(){this.checkToShowDlg(!0)}),6E3);this.dlgPrioityReports[b]=a}this.checkToShowDlg(!1)}},setSgnInHstyDlg:function(a){this.reportPrioity(a,
0)},setExternalNotificationDlg:function(a){this.reportPrioity(a,1)},setInforOfferDialog:function(a){this.reportPrioity(a,2)}};this.tracklm("-WS._Ia");window._ws_theme.hideLoadingCurtain();if(!this.scrollbarWidth)this.scrollbarWidth=ws.html.getScrollbarWidth();this.theMailModel=ws.bootstrap.theMailModel;this.theMailModel.isLoading()?this.deferredInitHandle=g.connect(this.theMailModel,"modelUpdated",this,"deferredInit"):setTimeout(g.hitch(this,"deferredInit"),100);g.connect(this.theMailModel,"inboxTypeUpdated",
this,"inboxTypeUpdated");this.currentFolder=this.theMailModel.getInboxFolderName();ws.browser.addOnBeforeUnload(this,"onBeforeUnload");var a=this.parseAppQueryString(ws.io.getQueryParameter("app")||ws.io.getQueryParameter("a"));this.initGlobalUIPrefs();this.tracklm("-WS._Ib");this.Navigation=e.construct(k,g.byId("NavigationWidget"));this.Navigation.startup();this.Navigation.setMailModel(this.theMailModel);this.Navigation.searchMailCB=g.hitch(this,"mailSearch");this.Navigation.searchCalendarCB=g.hitch(this,
"calendarSearch");this.Navigation.searchContactsCB=g.hitch(this,"contactsSearch");g.connect(this.Navigation,"displayFolder",this,"displayFolder");g.connect(this.Navigation,"composeMessage",this,"composeMessage");if(Config.waolMode){g.connect(window,"onmessage",this,function(a){({fi:1,fs:1,fd:1,tdy:1,cal:1,cnt:1,cmp:1})[a.data]&&this.exitSettings(!0);switch(a.data){case "fi":this.displayFolder(this.theMailModel.getInboxFolderName());break;case "fs":this.displayFolder(Config.SpamFolderName);break;case "fd":this.displayFolder(Config.DeletedItemsFolderName);
break;case "tdy":this.Navigation.selectApp(this.Navigation.APP_TODAY);break;case "cal":this.Navigation.selectApp(this.Navigation.APP_CALENDAR);break;case "cnt":this.Navigation.selectApp(this.Navigation.APP_CONTACTS);break;case "set":this.openSettings();break;case "cmp":this.composeMessage()}});var b=ws.io.getQueryParameter("_waolMode");b&&"string"===typeof b&&"1"==b.toLowerCase()&&window.open(Config.BaseSameDomainURL+"common/waolTest.htm","","width=200,height=450")}this.NavSplitter=e.construct(p,
g.byId("ws_navsplitter"));this.NavSplitter.startup();this.ViewWidget=e.construct(u,g.byId("ws_view"));this.ViewWidget.startup();this.NavSplitter.addSizerFunc(g.hitch(this,"splitSizer"));this.NavSplitter.addClickFunc(g.hitch(this,"splitClick"));this.SidePanel=e.construct(v,g.byId("SidePanel"));this.SidePanel.startup();g.addClass(g.body(),"spacing"+(this.isAutoSpacingEnabled?this.getAutoSpacingType():this.heightMode));this.browserUpgradeNotice();this.initializeSizing();this.tracklm("-WS._Ic");this.HatWidget=
e.construct(w,g.byId("HatWidget"));this.HatWidget.startup();if(this.viewportSize)this.HatWidget.leftHat.style.height=this.viewportSize.h-10+"px";this.HatWidget.setMailModel(this.theMailModel);g.connect(this.HatWidget,"clickLogo",this,"clickLogo");this.HatWidget.openSettingsCB=g.hitch(this,"openSettings");this.tracklm("-WS._Id");this.FooterWidget=e.construct(z,g.byId("FooterWidget"));this.FooterWidget.startup();window.wsMasterTip=g._toDom("<div class='instatipCntr' style='visibility:hidden'><div id='instatip'></div><div class='mainSprite instatipArrow'></div></div>");
g.body().appendChild(window.wsMasterTip);a.app?this.tracklm("-WS._Ie"):!this.parseAppQueryCmd()&&!this._tabSelected&&(Config.EnableTodayCurtain&&Settings.ShowTodayAtSignIn?(this.selectTab("todayPage",null,null),this.tracklm("-WS._If")):(this.selectTab("messageList",g.hitch(this,function(){window._ws_theme.hideLoadingCurtain()})),this.tracklm("-WS._Ig"),Settings.ShowTodayAtSignIn||ws.reporting.reportDLAction("Mail-TodayPage-OFF")));if(Settings.WSSConnectError)this.tracklm("-WS._Ih"),ws.widget.Dialogs.show(Config.Strings.WSSConnectErrorMessage+
"<p>"+Config.Strings.TheMailTeam,[Config.Strings.OK],null,{width:400});else if(Settings.FirstLogin?(Settings.FeatureNoticeVer=11,Config.WelcomeToMailTour&&this.openWelcomeFTE(),ws.settings.saveSoon({FirstLogin:!1,FirstTime2newUX:!1,FeatureNoticeVer:Settings.FeatureNoticeVer}),ws.bootstrap.add("-WS._Ii",1)):(ws.WebSuite.startupDlgDone||(this.openFriendlyNameFTE(),this.tracklm("-WS._Ij")),ws.WebSuite.startupDlgDone||(this.openSignatureDialog(),this.tracklm("-WS._Ik")),ws.WebSuite.startupDlgDone||(this.openGetZipDialog(),
this.tracklm("-WS._Il")),ws.WebSuite.startupDlgDone?(ws.WebSuite.asyncDlgMgr.setSgnInHstyDlg(!1),ws.WebSuite.asyncDlgMgr.setInforOfferDialog(!1)):(Config.enableSignInHistory?setTimeout(g.hitch(this,function(){ws.io.rpc({action:"GetSignInHistory",content:{isLogin:!0},load:g.hitch(this,function(a){a.isSuccess&&a.signInHistory?(Settings.signInHistory=a.signInHistory,Settings.signInHistory.isTrusted&&Settings.signInHistory.isRecentActivityValid?(this.openSgnInHstyDlg(),this.tracklm("-WS._Ij0")):ws.WebSuite.asyncDlgMgr.setSgnInHstyDlg(!1)):
ws.WebSuite.asyncDlgMgr.setSgnInHstyDlg(!1)}),error:function(){ws.WebSuite.asyncDlgMgr.setSgnInHstyDlg(!1)}})}),10):ws.WebSuite.asyncDlgMgr.setSgnInHstyDlg(!1),b=!0,!ws.WebSuite.startupDlgDone&&Settings.UserHash>=Config.InforOfferThreshold&&!ws.WebSuite.startupDlgDone&&(this.openInforOfferDialog(),b=!1),b&&ws.WebSuite.asyncDlgMgr.setInforOfferDialog(!1))),ws.bubbleConfig.checkForBubblePins(),11>Settings.FeatureNoticeVer)Settings.FeatureNoticeVer=12,ws.settings.saveSoon({FeatureNoticeVer:Settings.FeatureNoticeVer});
g.isIE||g.isWebKit?g.connect(g.body(),"onkeydown",this,"onKeyPress"):g.connect(g.doc,"onkeypress",this,"onKeyPress");ws.lang.ensureLayersLoaded(g.hitch(this,"onLayersLoaded"));a.app&&this.selectAppQueryString(a,g.hitch(window._ws_theme,window._ws_theme.hideLoadingCurtain));this.tracklm("-WS._Im");Settings.ShowTodayAtSignIn?g.subscribe("WSDeferredInit",this,"startNotification"):this.startNotification();this.tracklm("-WS._In");0<Config.LoadLayersTimeout&&setTimeout(g.hitch(this,function(){this.tracklm("-WS._Io");
ws.lang.ensureLayersLoadedExtra(g.hitch(this,function(){require(["ws/mail/MessageListView","ws/mail/DisplayMessageWidget","ws/mail/ComposeMessageWidget"],g.hitch(this,function(a,b,e){Config.CreateDspMsgAtStartup&&(this.__ensureTabExists("displayMessage",null,!1,b),this.tracklm("-WS._Ir"));Config.CreateMsgListAtStartup&&(this._ensureTabExists("messageList",null,!1,a),this.tracklm("-WS._Ip"));!g.isFF&&Config.CreateComposeAtStartup&&(this.__ensureTabExists("composeMessage",null,!1,e),this.tracklm("-WS._Iq"))}))}),
{layers:["ComposeMessage","DisplayMessage"]})}),Config.LoadLayersTimeout);this.tracklm("-WS._Iz")},initGlobalUIPrefs:function(){3!=Settings.ToolbarButtonType&&g.addClass(g.body(),"btnLabelsOn2")},shouldUpgradeBarBeDisplayed:function(a,b){var e=null;this.UpgradeBarDisplayedSet?e=this.UpgradeBarDisplayedSet:Settings&&Settings.UpgradeBarDisplayedSet&&(e=g.fromJson(Settings.UpgradeBarDisplayedSet));if(e){if(e.error)return!1;this.UpgradeBarDisplayedSet=e;if(!(e[a]&&e[a]==b))return!0}return!1},setUpgradeBarDisplayed:function(a,
b){var e=null;this.UpgradeBarDisplayedSet?e=this.UpgradeBarDisplayedSet:Settings&&Settings.UpgradeBarDisplayedSet&&(e=g.fromJson(Settings.UpgradeBarDisplayedSet));if(e&&!e.error)e[a]=b,ws.settings.saveSoon({UpgradeBarDisplayedSet:g.toJson(e)}),this.UpgradeBarDisplayedSet=e},browserUpgradeNotice:function(){function b(){var a=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/Windows NT ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(a=parseFloat(RegExp.$1));return a}function e(){var a=
-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/Trident\/([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(a=parseFloat(RegExp.$1));return a}var h=null,f=0,k=null,l=null,j=!1,m=null,v=null,q=null,s=Config.Strings.FireFoxUpgradeNoticeBtn,w=!1;if(g.isFF){if(h=Config.FireFoxUpgradeNoticeVersion,Settings.sFfUpgradeBarDisplayed!==h)k=g.isFF,j=!0,m="browser_upgrade/logo_ff.gif",v=Config.Strings.FireFoxUpgradeNoticeMsg,q=function(){ws.settings.saveSoon({sFfUpgradeBarDisplayed:h})},l=Config.FireFoxUpgradeNoticeURL}else if(g.isIE&&
(h=Config.IEUpgradeNoticeVersion,this.shouldUpgradeBarBeDisplayed("IE",h)))v=e(),k=g.isIE,5==v&&9>k&&(k=9),j=6<=b(),m="browser_upgrade/logo_ie.gif",v=Config.Strings.IEUpgradeNoticeMsg,q=g.hitch(this,function(){this.setUpgradeBarDisplayed("IE",h)}),l=Config.IEUpgradeNoticeURL;if(h)try{f=parseFloat(h)}catch(u){}0<f&&k<f&&j&&(w=!0);if(!w&&Config.AOLHomePageNoticeVersion&&this.shouldUpgradeBarBeDisplayed("AOL",Config.AOLHomePageNoticeVersion))h=Config.AOLHomePageNoticeVersion,m=null,v=Config.Strings.AOLHomePageNoticeMsg,
s=Config.Strings.AOLHomePageNoticeBtn,l=Config.AOLHomePageNoticeURL,q=g.hitch(this,function(){this.setUpgradeBarDisplayed("AOL",h)}),w=!0;if(w){var p=g.hitch(this,function(){g.style(document.getElementById("browserUpgradeNoticeBarDiv"),{display:"none"});document.getElementById("ws_application").style.top="0px";this.topBarNoticeHeight=0;q();this._initializeSizing();this.browserUpgradeBar=null}),w=g.hitch(this,function(){var a=ws.io.openWindow(l);a&&a.focus();p()});document.getElementById("ws_application").style.top=
"30px";this.topBarNoticeHeight=30;f=document.createElement("div");f.id="browserUpgradeNoticeBarDiv";g.style(f,{position:"absolute",top:"3px",left:"0px",right:"0px",height:"27px",lineHeight:"24px"});g.style(f,{background:"url('"+Config.BaseImagesURL+"browser_upgrade/bg_tile.gif') top left repeat-x"});k=this.browserUpgradeBar=new o({vizType:"Bare"});k.startup();if(m){j=new a({toolbarPosition:"center"});g.style(j.domNode,{width:"27px",height:"27px"});var z=document.createElement("img");g.style(z,{position:"relative",
top:"-2px",cursor:"pointer",border:"0"});z.src=Config.BaseImagesURL+m;z.onclick=w;j.domNode.appendChild(z);k.addToolbarItem(j)}m=new a({toolbarPosition:"center"});g.style(m.domNode,{color:"#333",fontFamily:"arial",fontSize:"12px",cursor:"pointer"});m.domNode.innerHTML="&nbsp;&nbsp;"+v+"&nbsp;&nbsp;&nbsp;";m.domNode.onclick=w;k.addToolbarItem(m);v=new n({toolbarPosition:"center",size:"Small"});v.domNode.style.height="12px";v.containerNode.style.padding="0px";v.containerNode.style.lineHeight="13px";
v.setLabel("&nbsp;&nbsp;"+s+"&nbsp;&nbsp;");v.onClick=w;v.startup();k.addToolbarItem(v);s=new a({toolbarPosition:"right"});g.addClass(s.domNode,"mainSprite wsCloseBtn");g.style(s.domNode,{position:"absolute",top:"3px",right:"11px","float":"none",border:"0"});s.domNode.onclick=p;k.addToolbarItem(s);f.appendChild(k.domNode);document.body.appendChild(f);k.layout()}},initAwayMessageNotification:function(){this.tracklm("-WS.AMNa");Settings.AwayMessageNotificationSettingsAvailable&&Settings.AwayMessageNotificationAvailable?
(this.internalNotificationsActive=!0,this.createAwayNotificationMessage()):(this.skipAwayMessageNotification=!0,this.startNotification());this.tracklm("-WS.AMNb")},initExternalNotification:function(){var a=document.createElement("script");a.type="text/javascript";a.src=Config.NotificationURL+"?uiVariant="+Config.UIVariant.toLowerCase()+"&locale="+Config.PageLocale+"&host="+document.location.host;var b=g.hitch(this,function(){if(!this.externalNotificationInitilized)this.internalNotificationsActive=
!1,this.externalNotificationInitilized=!0,this.createExternalNotificationMessage()});a.onload=a.onerror=b;a.onreadystatechange=function(){("loaded"==this.readyState||"complete"==this.readyState)&&b()};document.getElementsByTagName("head")[0].appendChild(a)},startNotification:function(){!this.externalNotificationInitilized&&Config.EnableNotification&&Settings.UserHash>=Config.UserHashThresholds.notification&&Config.NotificationURL?(this.externalNotificationInitilizeStarted=!0,this.initExternalNotification()):
!this.skipAwayMessageNotification&&Config.EnableInternalNotification&&Config.EnableVacationSettings&&Settings.UserHash>=Config.UserHashThresholds.awayMsgNotification&&(this.externalNotificationInitilizeStarted||ws.WebSuite.asyncDlgMgr.setExternalNotificationDlg(!1),setTimeout(g.hitch(this,function(){this.initAwayMessageNotification()},Config.AwayNotificationTimeOut)))},createAwayNotificationMessage:function(){this.notificationMsg={msg:ws.string.substituteParams(Config.Strings.AwayMessageNotification,
'<span class="wsLink awayMessageOff">'+Config.Strings.AwayMessageNotificationOFF+"</span>",'<a class="wsLink awayMessageSettings">'+Config.Strings.AwayMessageNotificationSettings+"</a>"),id:"awayMessage_1",type:"simplemanual",callback:g.hitch(this,function(a,b){g.query(".awayMessageSettings",a)[0].onclick=g.hitch(this,function(){this.openSettings("generalSettings",null)});g.query(".awayMessageOff",a)[0].onclick=function(){ws.settings.load({scope:"ws",load:function(){Settings.AwayMessageType="Disabled";
ws.settings.saveNow({AwayMessageType:"Disabled"})}});b.close()}})};g.publish("WebSuite/StartNotification")},createExternalNotificationMessage:function(){if("undefined"!=typeof notificationMsgs&&0<notificationMsgs.length){var a=notificationMsgs;if(a&&a.length){var b,e;seenNotificationIds=this.getNotificationsSeenIds();for(var h=0;h<a.length;h++){var f=a[h];if(!(this.hasNotifcationBeenSeen(f.id)||"ad"==f.type))switch(f.type){case "simpleauto":case "simplemanual":b=b?b.priority>f.priority?f:b:f;break;
case "modal":e=e?e.priority>f.priority?f:e:f}}a=!1;e&&!Settings.FirstLogin&&!ws.WebSuite.startupDlgDone?ws.WebSuite.asyncDlgMgr.setExternalNotificationDlg(g.hitch(this,function(){ws.widget.ModalNotification.startup({closeButton:e.closeButton,closeButtonText:e.closeButtonText,url:e.msg,box:{w:parseInt(e.width),h:parseInt(e.height)}});if(e&&e.sticky)this.seenNotificationIds[ws.WebSuite.seenNotificationIds.length]=e.id,ws.settings.saveSoon({SeenNotificationMsgs:ws.WebSuite.seenNotificationIds})})):b?
(ws.WebSuite.asyncDlgMgr.setExternalNotificationDlg(!1),this.notificationMsg=f=b,g.publish("WebSuite/StartNotification"),f&&f.sticky&&(a=!0)):(ws.WebSuite.asyncDlgMgr.setExternalNotificationDlg(!1),this.startNotification());if(a)this.seenNotificationIds[ws.WebSuite.seenNotificationIds.length]=f.id,ws.settings.saveSoon({SeenNotificationMsgs:ws.WebSuite.seenNotificationIds})}else ws.WebSuite.asyncDlgMgr.setExternalNotificationDlg(!1)}else ws.WebSuite.asyncDlgMgr.setExternalNotificationDlg(!1),this.startNotification()},
getNotificationsSeenIds:function(){if(!this.seenNotificationIds)this.seenNotificationIds=g.fromJson(Settings.SeenNotificationMsgs)||[];return this.seenNotificationIds},hasNotifcationBeenSeen:function(a){return-1!=g.indexOf(this.getNotificationsSeenIds(),a)},_showNotification:function(a){if(("todayPage"==a.id||"messageList"==a.id)&&a.notification&&null!=this.tabNotificationShown)if("messageList"==a.id&&this.tabNotificationShown[a.id])a.model.getSearchString()?(g.query(".navCollapser").removeClass("navColNot"),
a.notification&&a.notification.hide()):(g.query(".navCollapser").addClass("navColNot"),a.notification&&a.notification.show()),a.layoutWidget.resize();else if(!this.tabNotificationShown[a.id])if(this.internalNotificationsActive)this.tabNotificationShown[a.id]=a,a.notification.msg.innerHTML=this.notificationMsg.msg,a.notification.alertTxt.innerHTML=this.notificationMsg.alertTxt||Config.Strings.NotificationHeadsUp,a.notification.closeBtn.style.display=this.notificationMsg.isCloseable?"":"none",this.notificationMsg.extraClassName&&
g.addClass(a.notification.domNode,this.notificationMsg.extraClassName),this.notificationMsg.callback&&this.notificationMsg.callback(a.notification.msg,a.notification),g.query(".navCollapser").addClass("navColNot"),a.notification.show(),a.layoutWidget.resize(),g.subscribe("WebSuite/CloseNotification",this,"closeAllNotifications"),g.subscribe("Settings/hide",this,function(){this.internalNotificationsActive&&null!=Settings.AwayMessageType&&"Disabled"==Settings.AwayMessageType&&this.closeAllNotifications()});
else if(Config.EnableNotification&&Settings.UserHash>=Config.UserHashThresholds.notification&&Config.NotificationURL){this.tabNotificationShown[a.id]=a;a.notification.msg.innerHTML=this.notificationMsg.msg;"simpleauto"==this.notificationMsg.type&&a.notification.autoDismiss(this.notificationMsg.timeout);if(this.notificationMsg.callback)a.notification.closeBtn.style.display="none",this.notificationMsg.callback(a.notification.msg,a.notification);g.query(".navCollapser").addClass("navColNot");a.notification.show();
a.layoutWidget.resize();g.subscribe("WebSuite/CloseNotification",this,"closeAllNotifications")}},showNotification:function(a){this.notificationMsg?this._showNotification(a):g.subscribe("WebSuite/StartNotification",g.hitch(this,function(a){this._showNotification(a)},a))},closeAllNotifications:function(){if(this.tabNotificationShown){for(var a=["todayPage","messageList"],b=0;b<a.length;b++){var e=a[b];e&&this.tabNotificationShown[e]&&(e=this.tabNotificationShown[e],e.notification&&e.notification.hide(),
e.layoutWidget.resize())}g.query(".navCollapser").removeClass("navColNot")}this.tabNotificationShown=null},openSgnInHstyDlg:function(){Settings.signInHistory.hasAtLeastOneAtypicalEvent?Settings.signInHistory.signInHistoryData&&Settings.signInHistory.signInHistoryData.length?ws.lang.ensureLayersLoadedExtra(g.hitch(this,function(){require(["ws/suite/SgnInHstyDlg"],g.hitch(this,function(a){for(var b={},e=0;e<Settings.signInHistory.signInHistoryData.length;e++)if(Settings.signInHistory.signInHistoryData[e].toAlertUser){var h=
Settings.signInHistory.signInHistoryData[e].countryName;b[h]||(b[h]=[]);b[h].push(Settings.signInHistory.signInHistoryData[e])}var f=[],k;for(k in b)f.push(k);f=f.slice(0,3);1==f.length?ws.WebSuite.asyncDlgMgr.setSgnInHstyDlg(g.hitch(this,function(){ws.WebSuite.startupDlgDone=!0;var e=new a;e.startup();ws.reporting.reportDLAction("Mail-SA-Alert-Single");e.setLoginAlertOne(f[0]);var h=function(a){activityList=b[f[0]];for(var e=0;e<activityList.length;e++)activityList[e].userFeedback=a,ws.WebSuite.sendUserFeedback(activityList[e])};
e.noCallback=function(){h("0");e.noCallback=null;e.setSecureAccount(!0);e.secureCallback=function(){ws.WebSuite.secureAccount()}};e.yesCallback=function(){Settings.signInHistory.hasAtLeastOneAtypicalEvent=!1;h("1");e.yesCallback=null}})):1<f.length&&ws.WebSuite.asyncDlgMgr.setSgnInHstyDlg(g.hitch(this,function(){ws.WebSuite.startupDlgDone=!0;var b=new a;b.startup();ws.reporting.reportDLAction("Mail-SA-Alert-Multiple");b.setLoginAlertMany(f)}))}))}),{layers:["Settings"]}):ws.WebSuite.asyncDlgMgr.setSgnInHstyDlg(!1):
ws.WebSuite.asyncDlgMgr.setSgnInHstyDlg(!1)},sendUserFeedback:function(a){ws.io.rpc({action:"ProvideUserFeedbackOnSessions",content:{eventTime:a.eventTime.toString(),originIP:a.originIP,asnNum:a.asnNum,country:a.country,region:a.region,city:a.city,userFeedback:a.userFeedback.toString()},load:function(){},error:function(a){a&&"string"==typeof a?ws.widget.Dialogs.ok(a):window.ws_ErrLgr&&!a&&ws_ErrLgr.logError(ws_ErrLgr.cat.ProgErr,"Error Handler for ProvideUserFeedbackOnSessions file:WebSuite.js")}})},
secureAccount:function(){ws.io.rpc({action:"SecureAccount",load:function(){var a=Config.PageLocale.split("-"),a=ws.string.substituteParams(Config.ResetPasswd,a[0],a[1]);document.location=a},error:function(a){a&&"string"==typeof a?ws.widget.Dialogs.ok(a):window.ws_ErrLgr&&!a&&ws_ErrLgr.logError(ws_ErrLgr.cat.ProgErr,"Error Handler for SecureAccount file:WebSuite.js")}})},openWelcomeFTE:function(a){ws.bubbleConfig.welcomeDialogIsShown=!0;this.ensureStartupPromoLayer(g.hitch(this,function(){require(["ws/suite/WelcomeDialog"],
g.hitch(this,function(b){(new b({firstTime2newUX:a})).startup()}))}));ws.WebSuite.startupDlgDone=!0},openFriendlyNameFTE:function(){if(Config.DisplayNamePromotionDialog&&!Settings.IsFriendlyNameDlgDisplayed&&Settings.UserHash>=Config.AllowedUserRangeForFriendlyNameDlg&&Settings.IsAuthUser&&""==g.trim(Settings.FromDisplayName))""==Settings.UserFullName?ws.presence.getPresence({users:ws.UserContext.ActiveScreenName,load:g.hitch(this,"_presenceResponse"),timeout:1E4}):this.ensureStartupPromoLayer(g.hitch(this,
function(){require(["ws/suite/FriendlyNameDialog"],g.hitch(this,function(a){(new a({fromName:Settings.UserFullName})).startup()}))})),ws.WebSuite.startupDlgDone=!0},_presenceResponse:function(a){var b="";a&&a.response&&a.response.statusCode&&200==a.response.statusCode&&a.response.data.users[0]&&a.response.data.users[0].friendly&&""!=a.response.data.users[0].friendly&&(b=g.trim(a.response.data.users[0].friendly));this.ensureStartupPromoLayer(function(){require(["ws/suite/FriendlyNameDialog"],g.hitch(this,
function(a){(new a({fromName:b})).startup()}))});ws.WebSuite.startupDlgDone=!0},openGetZipDialog:function(){if(Config.EnableGetZip&&!Settings.GetZipDlgDisplayed&&Settings.UserHash>=Config.UserHashThresholds.getZipDialog)this.ensureStartupPromoLayer(g.hitch(this,function(){require(["ws/suite/GetZipDialog"],g.hitch(this,function(a){(new a({initialZip:ws.UserContext.Zip||""})).startup()}))})),ws.WebSuite.startupDlgDone=!0},openSignatureDialog:function(){if(!Settings.SignatureDlgDisplayed&&Settings.UserHash>=
Config.SignatureDlgThreshold)this.ensureStartupPromoLayer(g.hitch(this,function(){require(["ws/suite/SignatureDialog"],g.hitch(this,function(a){(new a).startup()}))})),ws.WebSuite.startupDlgDone=!0},global_InforOfferActionHandler:function(a,b){ws.WebSuite.inforOfferDlg&&ws.WebSuite.inforOfferDlg.contentAction(a,b)},openInforOfferDialog:function(){Settings.UserHash>=Config.InforOfferThreshold?8>=g.isIE&&!Config.InforOfferEnableIE8Proxy?ws.WebSuite.asyncDlgMgr.setInforOfferDialog(!1):(rpcParams={action:"GetOpenAuthToken",
content:{devid:Config.WIMKey},load:g.hitch(this,function(a){if(a.token_a){if(8==g.isIE)var b=Config.BasePagesURL+"common/proxy.aspx/InforOfferAuthURLie8Proxy?snsToken="+a.token_a;else b=Config.InforOfferAuthURL,0<=b.indexOf("{docLocRef}")&&(b=b.replace("{docLocRef}",document.location.href)),b=ws.string.substituteParams(b,Config.WIMKey,a.token_a);g.xhrGet({url:b,timeout:Config.InforOfferAuthTimeout,handleAs:"json",preventCache:!0,load:g.hitch(this,function(a){if(a&&a.access_token){window._InforOfferActionHandler=
this.global_InforOfferActionHandler;window.offer1=this.global_InforOfferActionHandler;var b=Config.InforOfferGetURL,e=encodeURIComponent(a.access_token),a={"0":e};if(-1!=b.indexOf("reqFrstOffr")){var h=!1;if(11==Settings.FeatureNoticeVer)h=!0,Settings.FeatureNoticeVer=12,ws.settings.saveSoon({FeatureNoticeVer:Settings.FeatureNoticeVer});a.reqFrstOffr=h}b=ws.string.substituteParams(b,a);g.io.script.get({callbackParamName:"_callback",timeout:Config.InforOfferGetTimeout,url:b,load:g.hitch(this,function(a){if(a&&
a.status&&a.status&&0===a.status.code)if(a.data&&a.data.offers&&a.data.offers.length&&a.data.offers[0]&&a.data.offers[0].Name){var b=a.data.offers[a.data.offers.length-1].Name;a.data.content&&a.data.content[b]&&a.data.content[b].additionalAttributeMap&&a.data.content[b].additionalAttributeMap.infor_content_id&&a.data.content[b].additionalAttributeMap.infor_content_id==b?a.data.content[b].additionalAttributeMap.infor_hero_webmail?0<=Config.InforOfferExcludedIds.indexOf("|"+b+"|")?ws.WebSuite.asyncDlgMgr.setInforOfferDialog(!1):
ws.WebSuite.asyncDlgMgr.setInforOfferDialog(g.hitch(this,function(){var h=a.data.content[b].additionalAttributeMap.infor_hero_webmail,h=h.replace(/\r?\n|\r/g,""),h=h.replace(/\\"/g,'"');ws.WebSuite.inforOfferDlg=new B({offerName:b,accessToken:e});ws.WebSuite.inforOfferDlg.startup();ws.WebSuite.inforOfferDlg.setContent(h)})):ws.WebSuite.asyncDlgMgr.setInforOfferDialog(!1):ws.WebSuite.asyncDlgMgr.setInforOfferDialog(!1)}else ws.WebSuite.asyncDlgMgr.setInforOfferDialog(!1);else ws.WebSuite.asyncDlgMgr.setInforOfferDialog(!1)}),
error:function(){ws.WebSuite.asyncDlgMgr.setInforOfferDialog(!1)}})}else ws.WebSuite.asyncDlgMgr.setInforOfferDialog(!1)}),error:function(){ws.WebSuite.asyncDlgMgr.setInforOfferDialog(!1)}})}else ws.WebSuite.asyncDlgMgr.setInforOfferDialog(!1)}),error:function(){ws.WebSuite.asyncDlgMgr.setInforOfferDialog(!1)}},ws.io.rpc(rpcParams)):ws.WebSuite.asyncDlgMgr.setInforOfferDialog(!1)},ensureStartupPromoLayer:function(a){var b=g.hitch(this,function(){this.startupPromoLayerLoad=!0;a&&a()});dojoConfig.isCustom?
require(["release/StartupPromoDlgs"],b):b()},getErrorCount:function(){var a=0;if(window.ws_ErrLgr&&window.ws_ErrLgr._errors&&window.ws_ErrLgr._errors.length)a=window.ws_ErrLgr._errors.length;return a},formatError:function(a,b){var e="count,category,fileName,lineNumber,message,info,stack".split(",");b&&(e="category,fileName,lineNumber,message,info,rpc,T,stack".split(","));result="";g.forEach(e,function(e){var h=!0;if(a[e]){switch(e){case "count":result+="<b>Error has occurred "+a[e]+" times </b>";
break;case "category":b&&(h=!1);result+="Category: "+a[e];break;case "fileName":b&&(h=!1);result+="File: "+a[e];break;case "lineNumber":b&&(h=!1);result+="Line Number: "+a[e];break;case "message":b&&(h=!1);result+="Message: "+a[e];break;case "info":b&&(h=!1);result+="Additional Info: "+a[e];break;case "rpc":b&&(h=!1,result+="Recent RPCs: "+a[e]);break;case "T":b&&(result+="Time(mSec from start): "+a[e]);break;case "stack":a[e].length&&(result+="Call Stack:<div style='padding-left:10px;'>",g.forEach(a[e],
function(a){result+=a+"<br />"}),result+="</div>")}result+=h?"<br />":";  "}});return result},openErrorConsole:function(){var a=null;if(ws.WebSuite.getErrorCount())a=window.ws_ErrLgr._errors;if(a&&a.length){var b="";g.forEach(a,function(a){b+=ws.WebSuite.formatError(a);b+="<br />"});ws.widget.Dialogs.show("<div class='errorConsoleHeader'>"+Config.Strings.ErrorConsoleHead+"</div><div class='errorConsole'><div class='consoleContent'>"+b+"</div></div>",[Config.Strings.OK],null,{width:690})}else ws.widget.Dialogs.ok("<div class='errorConsoleHeader'>"+
Config.Strings.ErrorConsoleHead+"</div>"+Config.Strings.ErrorConsoleEmpty+"<br>",null,!1)},qaErrorConsoleToggle:function(a){if(a&&"none"==this.qaErrConsoleNode.style.display)this.qaErrConsoleNode.style.display="block",this.qaErrConsoleHeight=70,this.resize();else if(!a&&"block"==this.qaErrConsoleNode.style.display)this.qaErrConsoleNode.style.display="none",this.qaErrConsoleHeight=0,this.resize()},qaErrorConsole:function(a){if(Config.QaErrorConsole)if(this.firstResize){if(!this.qaErrConsolePause&&
!this.qaErrConsoleDisabled){if(!this.qaErrConsoleNode){this.qaErrConsoleCount=1;this.qaErrConsoleNode=document.createElement("div");this.qaErrConsoleNode.style.display="none";g.addClass(this.qaErrConsoleNode,"qaErrConsoleNode");document.body.appendChild(this.qaErrConsoleNode);this.qaErrConsole=document.createElement("div");g.addClass(this.qaErrConsole,"qaErrConsole");this.qaErrConsoleNode.appendChild(this.qaErrConsole);var b=document.createElement("div");b.innerHTML="<div>WebSuite QA Error Console</div>";
g.addClass(b,"info");this.qaErrConsoleNode.appendChild(b);var e=document.createElement("span");e.innerHTML="Clear";e.onclick=g.hitch(this,function(){this.qaErrConsole.innerHTML="";this.qaErrConsoleCount=1});g.addClass(e,"qaLink");b.appendChild(e);e=document.createElement("span");e.innerHTML="Close";e.onclick=g.hitch(this,function(){this.qaErrorConsoleToggle(!1)});g.addClass(e,"qaLink");b.appendChild(e);e=document.createElement("br");b.appendChild(e);var h=document.createElement("span");h.innerHTML=
"Pause";h.onclick=g.hitch(this,function(){this.qaErrConsolePause=!this.qaErrConsolePause;h.innerHTML=this.qaErrConsolePause?"Resume":"Pause"});g.addClass(h,"qaLink");b.appendChild(h);e=document.createElement("span");e.innerHTML="Disable (for session)";e.onclick=g.hitch(this,function(){this.qaErrorConsoleToggle(!1);this.qaErrConsoleDisabled=!0});g.addClass(e,"qaLink");b.appendChild(e)}this.qaErrorConsoleToggle(!0);this.qaErrConsole.innerHTML+="<b>"+this.qaErrConsoleCount+")</b> ";this.qaErrConsoleCount++;
this.qaErrConsole.innerHTML+=ws.WebSuite.formatError(a,!0);this.qaErrConsole.scrollTop=999999}}else{if(!this.queErrors)this.queErrors=[];this.queErrors.push(a)}},promoteTheme:function(a){this.selectTab("messageList",g.hitch(this,function(){window._ws_theme.hideLoadingCurtain();this.HatWidget&&this.HatWidget.themePicker&&window._ws_theme.isActive(a)?this.HatWidget.themePicker.openThemePickerDialog(a.toUpperCase(),!0):ws.widget.Dialogs.ok(Config.Strings.Themes_NoThemesInConfig)}))},promoteStationery:function(a){Settings.ComposeInPopup?
this.selectTab("messageList",g.hitch(this,function(){window._ws_theme.hideLoadingCurtain();this.PopupComposeTip||ws.lang.ensureLayersLoaded(g.hitch(this,function(){this.PopupComposeTip=new m({name:"StationeryPopupCompose",content:ws.string.substituteParams(Config.Strings.PopupComposeStationeryTip,"<a href='javascript:void(0)' style='font-weight: bold'>","</a>"),positionOverNode:ws.WebSuite.HatWidget.optionsLink,arrowPosition:"top",distanceArrowFromEdge:270,dimensions:{w:240},offset:{x:-260,y:25},
saveAsSeenOnClose:!1});g.body().appendChild(this.PopupComposeTip.domNode);this.PopupComposeTip.startup();g.query("a",this.PopupComposeTip.domNode).onclick(function(){ws.WebSuite.openSettings("generalSettings")});this.PopupComposeTip.showTip();ws.WebSuite.targetStationery=a}))})):this.selectTab("composeMessage",g.hitch(this,function(b){window._ws_theme.hideLoadingCurtain();b.reset({targetStationery:!0});b.launchStationery(a)}))},promoteSuite:function(a){var b="<b>"+Config.Strings.SuitePromotionHeader+
"</b><br><ul style='margin:5px; padding-left:20px'>",e=null,h=null,f=null,k;for(k in a)if(a[k][1])switch(a[k][0]){case "tid":window._ws_theme&&(a[k][4]&&(f=a[k][4]),e=a[k][1].toUpperCase());break;case "sid":var l=a[k][1];a[k][4]&&(l=a[k][4]);b+="<li>";b=Settings.ComposeInPopup?b+ws.string.substituteParams(Config.Strings.SuitePromotionStationeryPopup,l,l,"<a href='javascript:void(0)' class='changeComposeSetting'>","</a>\n"):b+ws.string.substituteParams(Config.Strings.SuitePromotionStationery,l);b+=
"</li>";h=a[k][1]}var j=g.hitch(this,function(a,b,e){h&&!Settings.ComposeInPopup?this.selectTab("composeMessage",g.hitch(this,function(f){this._promoteSuite(a,b,e);f.reset({targetStationery:!0});f.launchStationery(h,!0)})):this.selectTab("messageList",g.hitch(this,function(){this._promoteSuite(a,b,e)}))});null!=e?window._ws_theme&&window._ws_theme.loadTheme(e,g.hitch(this,function(a){if(a==e){this.HatWidget.themePicker.changeTheme(a);var k=a;if(f)k=f;else if(window._ws_theme.themeData&&window._ws_theme.themeData[a]&&
window._ws_theme.themeData[a].label)k=window._ws_theme.themeData[a].label;b+="<li>";b+=ws.string.substituteParams(Config.Strings.SuitePromotionTheme,k,"&nbsp;&nbsp;<a href='javascript:void(0)' class='changeTheme'>","</a>\n");b+="</li>"}j(b,e,h)})):j(b,e,h)},_promoteSuite:function(a,b){window._ws_theme.hideLoadingCurtain(a);ws.lang.ensureLayersLoaded(g.hitch(this,function(){this._showSuitePromotionTip(a,b);b&&this.HatWidget.themePicker.saveTheme()}))},_showSuitePromotionTip:function(a,b){if(!this.SuitePromotionTip)this.SuitePromotionTip=
new m({name:"SuitePromotionTip",content:a,positionOverNode:ws.WebSuite.HatWidget.optionsLink,arrowPosition:"top",distanceArrowFromEdge:270,dimensions:{w:240},offset:{x:-260,y:25},saveAsSeenOnClose:!1}),g.body().appendChild(this.SuitePromotionTip.domNode),this.SuitePromotionTip.startup(),g.query(".changeTheme",this.SuitePromotionTip.domNode).onclick(function(){ws.WebSuite.HatWidget.themePicker.openThemePickerDialog(b,!1)}),g.query(".changeComposeSetting",this.SuitePromotionTip.domNode).onclick(function(){ws.WebSuite.openSettings("generalSettings")});
this.SuitePromotionTip.showTip()},parseAppQueryCmd:function(){var a=ws.bootstrap.parseAppQueryCmd(),b=a.cmds,e=a.cmdMap;ws.io._setObjectCookie(a.cookie,Config.WSGadgetCookieName,Config.WSGadgetCookieDomain,Config.WSGadgetCookiePath);if(1<b.length)return this.promoteSuite(e),!0;return 1==b.length?(a=e[b[0]][1],g.hitch(this,e[b[0]][2])(a),!0):!1},onLayersLoaded:function(){window.ws_ErrLgr&&ws_ErrLgr.doIntiialSend();var a=ws.io.getQueryParameter("app")||ws.io.getQueryParameter("a"),b=!1;if("ab"==a||
"abook"==a||"addresses"==a)b=!0;require(["ws/address/AddressModel","ws/calendar/CalendarViewModel"],g.hitch(this,function(a,e){this.theAddressModel=new a({sortable:!0,fullTextSearchable:!0,fetchDataOnInit:b});this.Navigation.setContactsModel(this.theAddressModel);this.theCalendarModel=new e({modelType:"event"});this.Navigation.setCalendarModel(this.theCalendarModel)}))},getCurrentViewId:function(){return this.ViewWidget?this.ViewWidget.selectedChildWidget?this.ViewWidget.selectedChildWidget.id:null:
null},hideLoadingCurtain:function(){ws.reporting.reportDLAction("Mail-ThemeOnLoad-"+(window._ws_theme&&window._ws_theme.currentThemeId?window._ws_theme.currentThemeId:Config.ThemeDefault));var a=g.byId("loadingCurtain");if(a)a.style.display="none",g.destroy(a)},deferredInit:function(){this.tracklm("-WS.DIa");g.disconnect(this.deferredInitHandle);setTimeout(g.hitch(this,function(){g.publish("WSDeferredInit");this.deferredInitComplete=!0}),100);if(Config.EnableHatRevenueSearchBar)ws.reporting.report("Initial View",
"Init - Aim SearchBar Test");else{var a="Initial View";_ws_theme&&_ws_theme.currentThemeId&&(a="Initial View - "+(_ws_theme.randomThemeEnabled?"Random Theme: ":"Theme: ")+_ws_theme.currentThemeId);ws.reporting.report(a,"Init")}this.tracklm("-WS.DIz");"f"==ws.io.getQueryParameter("ac")&&ws.io.rpc({action:"HiddenSettings",content:{WSLAccessibilityRedirect:0},load:function(){},error:function(){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.AjaxErr,"WSLAccessibilityRedirect: HiddenSettings rpc failed")}})},
initializeSizing:function(){g.connectPublisher("wsresize",ws.WebSuite,"resize");g.subscribe("WSSessionExpired",ws.WebSuite,"handleExpiredSession");this.standaloneCalendar?this.navSplitterWidth=0:(this.NavSplitterEl=g.byId("ws_navsplitter"),this.navSplitterWidth=this.NavSplitter.splitterWidth);this._initializeSizing();g.connect(window,"onresize",this,"windowResize");ws.browser.ipad&&g.connect(window,"onorientationchange",this,"windowResize");g.subscribe("Splitter/resize",this,"splitterResize")},_initializeSizing:function(){this.hatHeight=
70;this.resize();this.firstResize=!0;if(this.queErrors&&this.queErrors.length){for(;this.queErrors.length;)this.qaErrorConsole(this.queErrors.shift());this.queErrors=null}},displayFolder:function(a,b){var e=this.theMailModel.currentFolder;this.selectTab("messageList",g.hitch(this,function(h){h.displayFolder(a,null,null,b);ws.reporting.report(e==a?"Message List":"Switch Folder","Mail")}))},clickLogo:function(){var a=!1,b=this.settingsWidget;b&&b.isShowing()&&(b.onExitSettings(null,!0),a=!0);Config.EnableTodayCurtain?
this.showTodayPage(a):this.selectTab("messageList",g.hitch(this,function(b){folder=this.theMailModel.getInboxFolderName();b.displayFolder(folder);a||ws.reporting.report("Message List","Mail")}))},checkMail:function(){var a=this.settingsWidget,b=!0;a&&a.isShowing()&&(a.onExitSettings(null,!0),b=!1);this.selectTab("messageList",g.hitch(this,function(a){folder=this.theMailModel.getInboxFolderName();a.displayFolder(folder,null,null,null,!0);this.ViewWidget.selectedChildWidget.show();this.ViewWidget.selectedChildWidget.onShow(!0);
b&&ws.reporting.report("Check Mail","Mail")}));g.publish("Hat/CheckMail")},handleComet:function(a){this.theMailModel.refetchFolderIndex(a.data.folder_name)},displayContactListView:function(a,b){this.selectTab("AddressList",function(e){e.backToList(a);e.scrollToRow(0);e.searchTimer&&clearTimeout(e.searchTimer);"string"!=typeof b&&(b=void 0);e.search(b)})},displayNewContactView:function(a){this.Navigation.searchActive(!1);this.selectTab("AddressList",function(e){var h=b.byId("AddressList");h&&(h.clearSearch(),
h.updateSearchInfo());e.selectView("editContactWidget",!1,!0);e.editContactWidget.showContact(null,null,!0);if(a)e.editContactWidget.email1Input.value=a})},displayNewDistListView:function(){this.selectTab("AddressList",function(a){a.newDistributionList()})},setLastReadMsg:function(a,b){this.lastReadMsg={folder:a,uid:b}},previewPaneToLastReadMsg:function(a){if(Settings.EnablePreviewPane&&Settings.PreviewPaneVisible&&a.previewPane&&this.lastReadMsg){var b=this.lastReadMsg.folder,e=this.lastReadMsg.uid;
a.model.currentFolder==b&&a.previewPane.uid==e?ws.reporting.report("Read Message -  Preview Pane","Mail"):a.model.currentFolder!=b?a.model.deselectAll():a.previewMessage(e,!1,!0,!0)}},openMessage:function(a,b,e){var e=ws.settings.allowPopups()&&(e||Settings.ReadInPopup),h=this.theMailModel.getUidData(b),h=ws.reporting.DL.startEvent(null!=h&&h[this.theMailModel.columns.Attachment]?e?"read_pop_att":"read_mail_att":e?"read_pop":"read_mail",b,{opData:b,op1:e?"popup":"inline"});this.trackdl("-WS.OMa",
b);this.rmreqid=h;e?this._openMessagePopup(a,b):setTimeout(g.hitch(this,"_openMessageInline",a,b),100);this.trackdl("-WS.OMz",b)},_openMessagePopup:function(a,b){this.trackdl("-WS._OMPa",b);window.openerContext={model:this.theMailModel,folder:a,uid:b,Settings:Settings,undoFeedbackPopup:g.hitch(this,"undoFeedbackPopup"),calendarDataUpdated:g.hitch(this,"calendarDataUpdated"),webSuite:ws.WebSuite};ws.WebSuite.lastReadPopUp=ws.io.openWindow(Config.BaseMailPagesURL+"DisplayMessage?ws_popup=true&ws_suite=true",
"","status=yes,resizable=yes,left=5,top=5,width=885,height=606",null,b);var e=ws.WebSuite.lastReadPopUp;try{e.attachEvent?e.attachEvent("onbeforeunload",g.hitch(this,"_onbeforeunload",b)):e.onbeforeunload=g.hitch(this,"_onbeforeunload",b)}catch(h){this.trackdl("-WS._OMPc",b)}this.trackdl("-WS._OMPz",b)},calendarDataUpdated:function(a){g.publish("CalendarViewModel/modelUpdated",[a])},_onbeforeunload:function(a){ws.reporting.DL.removeEvent(a)},_openMessageInline:function(a,b){this.trackdl("-WS._OMIa",
b);this.displayMessageBackTo="AddressList"==this.ViewWidget.selectedChildWidget.id?"AddressList":"messageList";this._ensureTabExists("displayMessage",g.hitch(this,function(e){e.displayMessage(a,b,g.hitch(this,function(){this.trackdl("-WS._OMIb",b);this.selectTab("displayMessage")}))}));this.trackdl("-WS._OMIz",b)},hideMessage:function(a,e,h,f){var k=this.displayMessageBackTo;this.selectTab(this.displayMessageBackTo,g.hitch(this,function(){if("messageList"==k&&(a||ws.reporting.report("Message List",
"Mail"),setTimeout(function(){var a=b.byId("messageList");-1!=e&&a.scrollIntoView(e)},0),h)){var l=b.byId("messageList");Settings.EnablePreviewPane&&Settings.PreviewPaneVisible&&(f?l.model.deselectAll():l.previewMessage(h,!1,!0,!0))}}))},setDispMessageSafe:function(a,b){if(!this.safeMsgMap)this.safeMsgMap={};this.safeMsgMap[a]||(this.safeMsgMap[a]=0);this.safeMsgMap[a]=b?this.safeMsgMap[a]|1:this.safeMsgMap[a]|2},isDispMessageSafe:function(a,b){var e=!1;this.safeMsgMap&&this.safeMsgMap[a]&&(e=b?1==
(this.safeMsgMap[a]&1):2==(this.safeMsgMap[a]&2));return e},undoFeedbackPopup:function(a,b,e,h,f){var k=null;switch(a){case "Spam":k=b.canUndo?g.hitch(this.theMailModel,"undoReportSpamMessages",b.responseUIDs):null;break;case "Move":k=b.canUndo&&h&&"string"==typeof h?g.hitch(this.theMailModel,"undoMoveMessages",b.responseUIDs,h,f):null;break;case "Delete":b.canUndo&&h&&g.isArray(h)&&(!Config.UseOMS&&(Config.EnableRestoreButton||Settings.ViewNewOld)?(h=h[0],k=g.hitch(this,"_restoreMessage",h)):b.responseUIDs&&
(k=g.hitch(this.theMailModel,"undoMoveMessages",b.responseUIDs,Config.DeletedItemsFolderName)));break;default:k=null}g.publish("WSFeedbackStart",[e,!0,k])},_restoreMessage:function(a){"string"==typeof a&&(a=[].concat(a));this.theMailModel.restoreMessages({uids:a,folder:Config.DeletedItemsFolderName,load:g.hitch(this,function(){this.theMailModel.refetchFolderIndex(this.theMailModel.currentFolder);g.publish("WSFeedbackStart",[Config.Strings.MessageRestored,!0])}),error:function(a){window.ws_ErrLgr&&
!a&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for theMailModel.restoreMessages-_restoreMessage file:WebSuite.js");ws.widget.Dialogs.ok(a||Config.Strings.ErrorRestoring)}})},composeMessage:function(a){this._composeMessage(a);g.publish("Hat/ComposeMessage")},_composeMessage:function(a){if(ws.settings.allowPopups()&&(a&&(a.ctrlKey||g.isMac&&a.metaKey)||Settings.ComposeInPopup))this.popupCompose(g.hitch(this,function(a){b.byId("AddressList")?a.reset(this.getContacts()):
a.reset()}));else{var e=!1,h=this.settingsWidget;h&&h.isShowing()&&(h.onExitSettings(null,!0,!0),e=!0);this.composeSrc="messagelist";this.selectTab("composeMessage",g.hitch(this,function(a){var h;if(b.byId("AddressList")){h=this.getContacts();if(ws.WebSuite.targetStationery)h.targetStationery=!0;a.reset(h);this.unselectContacts()}else{h={backToString:"setFolder",skipComposeBeacon:e};if(ws.WebSuite.targetStationery)h.targetStationery=!0;a.reset(h)}ws.WebSuite.targetStationery&&a.launchStationery(ws.WebSuite.targetStationery)}))}a&&
a.preventDefault()},setSelectedStationery:function(){},getCompose:function(a,b,e){(Settings.ComposeInPopup||e)&&ws.settings.allowPopups()?this.popupCompose(b):ws.lang.ensureLayersLoaded(g.hitch(this,function(){this.selectTab("composeMessage",g.hitch(this,function(e){this.composeSrc=a;b(e)}))}))},reuseComposeWindow:function(a,e){b.byId("composeMessage").addEmail(a,e)},isComposeOpen:function(){if("composeMessage"==this.getCurrentViewId()){var a=b.byId("composeMessage");return a.layoutWidget==a.stackWidget.selectedChildWidget}return!1},
getContacts:function(){var a={backToString:"setFolder"};if(b.byId("AddressList").model.getSelectedUids().length){for(var e=b.byId("AddressList"),h=e.model.getActiveAbList(),e=e.model.getOffsetsForUids(e.model.getSelectedUids()),f=null,k=f="",l=0;l<e.length;l++)f=h.getRecordAtOffset(e[l]),(f=f.email1||f.email2||f.composeValue||f.screenName||"")&&(k+=f+", ");if(k)a.to=k,a.isDirty=!0}return a},unselectContacts:function(){this.theAddressModel&&this.theAddressModel.deselectAll()},isComposeInTransition:function(){return this.isComposeOpen()&&
b.byId("composeMessage").inTransition},popupCompose:function(a){window.composeContext={model:this.theMailModel,callback:a};ws.io.openWindow(Config.BaseMailPagesURL+"ComposeMessage?ws_popup=true&ws_suite=true","","status=yes,resizable=yes,left=5,top=5,width=885,height=606")},onBeforeUnload:function(){try{for(var a=0;a<ws.io._childWindows.length;a++)if(ws.io._childWindows[a].CM){var b=ws.io._childWindows[a].CM.composeWidget.onBeforeUnload();if(b)return b}}catch(e){}return""},hideCompose:function(a,
e,h){this.composeCanceled=!0;"address"==this.composeSrc?this.selectTab("AddressList",function(){var e=b.byId("AddressList");e&&e.deSelectEmptyPane();a&&a();ws.reporting.skipBeaconReporting=!h;ws.reporting.report("Contact List","Addresses")}):"display"==this.composeSrc&&!e?this.selectTab("displayMessage",function(){a&&a();ws.reporting.report("Read Message - Inline","Mail")}):"calendar"==this.composeSrc?(ws.reporting.skipBeaconReporting=!h,this.Navigation.showCalendar(!0,a)):this.selectTab("messageList",
function(){a&&a();ws.reporting.skipBeaconReporting=!h;ws.reporting.report("Message List","Mail")});this.composeCanceled=!1;this.Navigation.updateNavCollapser(!0)},clearSearch:function(){this.Navigation.clearSearch()},goToPreClearTab:function(){"messageList"==this.lastSelectedTab&&this.theMailModel.setFolder(this.currentFolder);if("composeMessage"==this.lastSelectedTab)this.lastSelectedTab="messageList";this.lastSelectedTab&&this.selectTab(this.lastSelectedTab)},setFolderHistory:function(){this.lastSelectedTab=
this.getCurrentViewId();this.currentFolder=this.theMailModel.currentFolder},mailSearch:function(a,b){ws.reporting.DL.startEvent("search_mail","search_mail",{opData:"WS.MSa"});var e=this.getCurrentViewId();this.lastSelectedTab=e;"messageList"!=e&&"displayMessage"!=e&&this.theMailModel.setFolder(this.theMailModel.getInboxFolderName());this.currentFolder=this.theMailModel.currentFolder;this.trackdl("-WS.MSb","search_mail");this.theMailModel.search(b,a);this.trackdl("-WS.MSc","search_mail");this.selectTab("messageList",
function(){ws.reporting.report("Search Mail","Mail");ws.WebSuite.trackdl("-WS.MSd","search_mail")})},contactsSearch:function(a){this.currentFolder=this.theMailModel.currentFolder;this.lastSelectedTab=this.getCurrentViewId();this.Navigation.showContacts(a)},calendarSearch:function(a,e){var h=this.getCurrentViewId();if(this.theMailModel)this.currentFolder=this.theMailModel.currentFolder;this.lastSelectedTab=h;if(h=b.byId("calendarView")){if(h!=this.ViewWidget.selectedChildWidget)h.fromCalSearch=!0}else this.fromCalSearch=
!0;this.selectTab("calendarView",function(b){b.selectSearchViewWithArg(a,e)})},addToCalendar:function(a,b){this.theMailModel.getMessage({folder:a,uid:b,load:g.hitch(this,function(a){ws.WebSuite.createAddEditWidget(g.hitch(this,function(){var b=ws.html.getText(a.body);if(this.theCalendarModel.isModelFetchedOnce)this.addEditDialog.show(2,{summary:a.subject,notes:b});else{this.theCalendarModel.getData();var e=g.connect(this.addEditDialog,"update",g.hitch(this,function(){g.disconnect(e);this.addEditDialog.show(2,
{summary:a.subject,notes:b})}))}}))})})},repaintApplication:function(){var a=this.getCurrentViewId();if("calendarView"==a)b.byId("calendarView").repaint();else if("messageList"==a)this._inboxTypeUpdated?(this.displayFolder(this.theMailModel.getInboxFolderName()),this._inboxTypeUpdated=!1):!Settings.ViewNewOld&&("NewMail"==this.theMailModel.currentFolder||"OldMail"==this.theMailModel.currentFolder)?this.displayFolder(this.theMailModel.getInboxFolderName()):Settings.ViewNewOld&&"Inbox"==this.theMailModel.currentFolder&&
this.displayFolder(this.theMailModel.getInboxFolderName());else if("AddressList"==a)b.byId("AddressList").onResized()},inboxTypeUpdated:function(){this._inboxTypeUpdated=!0},editContact:function(a,e,h){ws.WebSuite.Navigation.searchActive(!1);var f=b.byId("AddressList");f&&f.editContactWidget?(f.clearSearch(),f.updateSearchInfo(),this.selectTab("AddressList",function(){f.editContact(a,e,h)})):this._ensureTabExists("AddressList",g.hitch(this,function(f){var k=b.byId("AddressList");k&&(k.clearSearch(),
k.updateSearchInfo());f.createEditContactWidget();this.selectTab("AddressList",function(){f.editContact(a,e,h)})}))},createDistList:function(){this.selectTab("AddressList",g.hitch(this,function(a){a.newDistributionList()}))},showContactDetails:function(a){this.Navigation.searchActive(!1);var e=b.byId("AddressList");e&&e.contactDetails?(e.clearSearch(),e.updateSearchInfo(),this.setupContactDetailsView(e,a)):this._ensureTabExists("AddressList",g.hitch(this,function(e){if(e=b.byId("AddressList"))e.clearSearch(),
e.updateSearchInfo(),this.setupContactDetailsView(e,a)}))},setupContactDetailsView:function(a,b){a.selectView("contactDetails",!1);setTimeout(g.hitch(this,"showContactDetailsView",a,b),0)},showContactDetailsView:function(a,b){this.selectTab("AddressList",function(){});a.showContactDetails(b)},editContactFromMessageList:function(a){ws.lang.ensureLayersLoaded(g.hitch(this,function(){this.theAddressModel.getContact({uid:a.uid,load:g.hitch(this,function(b){this.editContact(a.uid,b,!0)})})}))},editDistributionList:function(a){var e=
b.byId("AddressList");e&&e.distributionListWidget?this.selectTab("AddressList",function(){e.editDistributionList(a)}):this._ensureTabExists("AddressList",g.hitch(this,function(b){b.createDistributionList();this.selectTab("AddressList",function(){b.editDistributionList(a)})}))},sharedGroup:function(a){this.selectTab("AddressList",function(b){b.sharedGroup(a)})},selectCalendarApp:function(a){this._selectCalendarApp(a)},_selectCalendarApp:function(a){this.selectTab("calendarView",g.hitch(this,function(b){window._ws_theme.hideLoadingCurtain();
b.update(!0);a&&a()}))},parseAppQueryString:function(a){var b={app:null};if(a)if(a=a.toLowerCase(),"today"==a||"todaypage"==a)b.app="todayPage";else if("ab"==a||"abook"==a||"addresses"==a)b.app="AddressList";else if("calendar"==a||"cal"==a)b.app="calendarView";else if("displaymessage"==a||"display-message"==a||"dm"==a){var a=ws.io.getQueryParameter("folder")||this.theMailModel.getInboxFolderName(),e=ws.io.getQueryParameter("uid");if(a&&e)b.app="displaymessage",b.folder=a,b.uid=e}else if("composemessage"==
a||"compose-message"==a||"cm"==a)b.app="composemessage";else if("messagelist"==a||"mail"==a||"ml"==a)b.app="messageList",b.folder=ws.io.getQueryParameter("folder"),b.searchIn=ws.io.getQueryParameter("searchin"),b.query=ws.io.getQueryParameter("query");else if("billmanager"==a||"manilla"==a)b.app="manilla";return b},selectAppQueryString:function(a,b){if(a.app){var e=a.app;if("todayPage"==e)setTimeout(g.hitch(this,function(){this.selectTab(e,b)},0));else if("messageList"==e){var h=a.folder,f=this.theMailModel.getInboxFolderName(),
k=a.searchIn,l=a.query;h&&h!=f&&!l?(h!=f&&this.Navigation.displayFolder(h,ws.UserContext.ActiveScreenName),this.theMailModel.setFolder(h),this.selectTab("messageList",g.hitch(this,function(){b&&b()}))):l?(h=a.folder||f,k&&(k=k.toLowerCase()),k="subject"==k||"fromto"==k?k:"alltext",this.selectTab("messageList",g.hitch(this,function(a){a.displayFolder(h,l,k);b&&b()}))):this.selectTab("messageList",g.hitch(this,function(){b&&b()}))}else"displaymessage"==e?(f=this.theMailModel.getInboxFolderName(),this.selectTab("displayMessage",
g.hitch(this,function(){b&&b();a.folder!=f&&this.Navigation.displayFolder(a.folder,ws.UserContext.ActiveScreenName);this._openMessageInline(a.folder,a.uid)}))):"composemessage"==e?setTimeout(g.hitch(this,function(){this.composeSrc="messagelist";this.selectTab("composeMessage",g.hitch(this,function(a){b&&b();var e={to:1,cc:1,bcc:1,subject:1,body:1},h={backToString:"setFolder"},f=ws.io.getJsonFromQueryParams(),k;for(k in f){var l=k.toLowerCase();e[l]&&(h[l]=f[k])}if(ws.WebSuite.targetStationery)h.targetStationery=
!0;a.reset(h);ws.WebSuite.targetStationery&&a.launchStationery(ws.WebSuite.targetStationery)}))}),0):"calendarView"==e?setTimeout(g.hitch(this,function(){b&&b();this.Navigation.showCalendar(!0)}),0):"AddressList"==e?setTimeout(g.hitch(this,function(){this.selectTab(e,b)},0)):"manilla"==e&&setTimeout(g.hitch(this,function(){this.Navigation.selectApp(this.Navigation.APP_MANILLA)},0))}else b&&b()},selectTab:function(a,b,e){"displayMessage"==a&&this.trackdl("-WS.STa",this.rmreqid);this._tabSelected=!0;
"todayPage"==this.getCurrentViewId()&&"todayPage"!=a&&this.ViewWidget.selectedChildWidget.blockAds(!1);e?a==this.getCurrentViewId()&&"composeMessage"!=a?b&&b(this.ViewWidget.selectedChildWidget):this._ensureTabExists(a,b,!0):this.confirmClose(g.hitch(this,function(){a==this.getCurrentViewId()&&"composeMessage"!=a?b&&b(this.ViewWidget.selectedChildWidget):this._ensureTabExists(a,b,!0)}),a)},_ensureTabExists:function(a,b,e){this._currentTab=a;if("todayPage"==a){if(!this.TodayPage){var h={id:a,blockedAdIds:["HatAd",
"PanelAd"],mailModel:this.theMailModel};this.TodayPage=Config.EnableNewToday?new s(h):new q(h);this.ViewWidget.addChild(this.TodayPage)}e&&this.ViewWidget.selectChild(this.TodayPage);b&&b();this.showNotification(this.TodayPage)}else"messageList"==a?(this.trackdl("-WS._ETc",this.rmreqid),ws.lang.ensureLayersLoaded(g.hitch(this,function(){require(["ws/mail/MessageListView"],g.hitch(this,function(h){this.__ensureTabExists(a,b,e,h)}))}))):"AddressList"==a?(this.trackdl("-WS._ETc",this.rmreqid),ws.lang.ensureLayersLoaded(g.hitch(this,
function(){require(["ws/address/AddressListView"],g.hitch(this,function(h){this.__ensureTabExists(a,b,e,h)}))}))):"displayMessage"==a?(this.trackdl("-WS._ETc",this.rmreqid),ws.lang.ensureLayersLoadedExtra(g.hitch(this,function(){require(["ws/mail/DisplayMessageWidget"],g.hitch(this,function(h){this.__ensureTabExists(a,b,e,h)}))}),{layers:["DisplayMessage"]})):"composeMessage"==a?ws.lang.ensureLayersLoadedExtra(g.hitch(this,function(){require(["ws/mail/ComposeMessageWidget"],g.hitch(this,function(h){this.__ensureTabExists(a,
b,e,h)}))}),{layers:["ComposeMessage"]}):"calendarView"==a||"addCalendar"==a||"subscribeCalendar"==a||"editCalendar"==a?ws.lang.ensureLayersLoadedExtra(g.hitch(this,function(){var h;switch(a){case "calendarView":h="ws/calendar/CalendarViewWidget";break;case "addCalendar":h="ws/calendar/AddCalendar";break;case "subscribeCalendar":h="ws/calendar/SubscribeCalendar";break;case "editCalendar":h="ws/calendar/EditCalendar"}require([h],g.hitch(this,function(h){this.__ensureTabExists(a,b,e,h)}))}),{layers:["CalFull"]}):
ws.lang.ensureLayersLoaded(g.hitch(this,"__ensureTabExists",a,b,e))},__ensureTabExists:function(a,e,h,f){if(a!=this._currentTab&&h)"displayMessage"==a&&this.trackdl("-WS.__Ea",this.rmreqid);else{var k=b.byId(a);g.isFF&&"composeMessage"==a&&k&&(dijit.registry.byId("sendButton")&&dijit.registry.byId("sendButton").destroyRecursive(),k.toolbar&&k.toolbar.destroy(),this.ViewWidget.removeChild(k),k.destroyRecursive(),this.hashWidgets[a]&&(this.hashWidgets[a]=null),k=null);var l=!1;this.Navigation&&this.Navigation.mnSearch&&
(l=g.hasClass(this.Navigation.mnSearch,"mnSearchActive"));if(l&&this.Navigation.isMini)if("composeMessage"==a)this.Navigation.mnSearch.style.display="none";else if("messageList"==a)this.Navigation.mnSearch.style.display="block",k&&g.addClass(k.searchInfoPane.domNode,"searchInfoMini");var j=!0;!this.hashWidgets[a]&&!k?(this.hashWidgets[a]=(new Date).getTime(),h&&g.publish("WSFeedbackStart",[Config.Strings.Loading]),setTimeout(g.hitch(this,function(){try{var b={id:a};switch(a){case "messageList":k=
new f(b);k.setModel(this.theMailModel);k.getComposeCB=g.hitch(this,"getCompose","messagelist");k.openMessageCB=g.hitch(this,"openMessage");g.connect(k,"addContact",this,"displayNewContactView");g.connect(k,"editContact",this,"editContactFromMessageList");g.connect(k,"addToCalendar",this,"addToCalendar");Settings.ShowTodayAtSignIn||this.theMailModel.modelUpdated();break;case "displayMessage":this.trackdl("-WS.__Eb",this.rmreqid);b.model=this.theMailModel;b.backToListCB=g.hitch(this,"hideMessage");
b.getComposeCB=g.hitch(this,"getCompose","display");b.getAddEditWidgetCB=g.hitch(this,"getAddEditWidget");b.addEditDialog=this.addEditDialog;b.calendarModel=this.theCalendarModel;b.beaconSuffix="Inline";b.undoFeedbackCB=g.hitch(this,"undoFeedbackPopup");k=new f(b);break;case "composeMessage":b.model=this.theMailModel;b.cancelCB=g.hitch(this,"hideCompose");b.beaconSuffix="Inline";k=new f(b);break;case "AddressList":k=new f(b);k.setModel(this.theAddressModel);k.getComposeCB=g.hitch(this,"getCompose",
"address");break;case "calendarView":if(!ws.WebSuite.isSettingLoaded("cal")&&!this.theCalendarModel.isAnonymous){this.hashWidgets.calendarView=null;ws.settings.load({scope:"cal",load:g.hitch(this,"_ensureTabExists",a,e,h),error:function(){ws.widget.Dialogs.ok(Config.Strings.Cal_ServiceTemporarilyUnavailable)}});return}if(this.standaloneCalendar)b.standaloneCal=!0;k=new f(b);k.fromCalSearch=this.fromCalSearch;k.setModel(this.theCalendarModel);k.getAddEditWidgetCB=g.hitch(this,"getAddEditWidget");k.getComposeCB=
g.hitch(this,"getCompose","calendar");k.getEventQuickViewWidgetCB=g.hitch(this,"getEventQuickViewWidget");k.getQuickAddWidgetCB=g.hitch(this,"getQuickAddWidget");k.showCalendarIndexCB=g.hitch(k,"isUpcomingView");j=!1;break;case "addCalendar":k=new f(b);k.closeCB=g.hitch(this.Navigation,"showCalendar",!0);k.setModel(this.theCalendarModel);break;case "editCalendar":b.editCalendar=!0;k=new f(b);k.closeCB=g.hitch(this.Navigation,"showCalendar",!0);k.setModel(this.theCalendarModel);break;case "subscribeCalendar":b.editCalendar=
!1;k=new f(b);k.closeCB=g.hitch(this.Navigation,"showCalendar",!0);k.setModel(this.theCalendarModel);break;case "manilla":k=new x(b)}}catch(l){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.ProgErr,"Exception: create new tab: "+a+" WebSuite.js::__ensureTabExists",l.name+" "+l.message)}this.ViewWidget.addChild(k);h&&(this.updateSearchButton(a),this.ViewWidget.selectChild(k));e&&(this.trackdl("-WS.__Ec","displayMessage"==a?this.rmreqid:null),e(k));h&&(this.showNotification(k),j&&g.publish("WSFeedbackEnd",
[Config.Strings.Loading]))}),0)):k?(h&&(this.trackdl("-WS.__Ee","displayMessage"==a?this.rmreqid:null),this.updateSearchButton(a),this.ViewWidget.selectChild(k)),e&&(this.trackdl("-WS.__Ed","displayMessage"==a?this.rmreqid:null),e(k))):this.hashWidgets[a]&&3E3<(new Date).getTime()-this.hashWidgets[a]&&(this.trackdl("-WS.__Ef","displayMessage"==a?this.rmreqid:null),this.hashWidgets[a]=null)}},updateSearchButton:function(a){"calendarView"==a||"editCalendar"==a||"addCalendar"==a||"subscribeCalendar"==
a?Config.ShowCalendarSearchButton&&this.Navigation.setSearchScope("calendar",Config.Strings.Calendar):"AddressList"==a?this.Navigation.setSearchScope("contacts",Config.Strings.Contacts):this.Navigation.searchScope&&("calendar"==this.Navigation.searchScope||"contacts"==this.Navigation.searchScope)&&this.Navigation.clearSearch()},getAddEditWidget:function(a){this.addEditDialog?a&&a(this.addEditDialog):(g.publish("WSFeedbackStart",[Config.Strings.Loading]),setTimeout(g.hitch(this,"createAddEditWidget",
g.hitch(this,function(){a&&a(this.addEditDialog);g.publish("WSFeedbackEnd",[Config.Strings.Loading])})),10))},createAddEditWidget:function(a){ws.lang.ensureLayersLoadedExtra(g.hitch(this,function(){require(["ws/calendar/AddEventDialog"],g.hitch(this,function(b){this.addEditDialog=new b;this.addEditDialog.startup();this.addEditDialog.hide();this.addEditDialog.setModel(this.theCalendarModel);g.body().appendChild(this.addEditDialog.domNode);a&&a()}))}),{layers:["CalFull"]})},getEventQuickViewWidget:function(a){this.eventQuickViewWidget?
a&&a(this.eventQuickViewWidget):(g.publish("WSFeedbackStart",[Config.Strings.Loading]),setTimeout(g.hitch(this,"createEventQuickViewWidget",g.hitch(this,function(){a&&a(this.eventQuickViewWidget);g.publish("WSFeedbackEnd",[Config.Strings.Loading])})),0))},createEventQuickViewWidget:function(a){ws.lang.ensureLayersLoadedExtra(g.hitch(this,function(){require(["ws/calendar/EventQuickViewWidget"],g.hitch(this,function(b){var e={getAddEditWidgetCB:g.hitch(this,"getAddEditWidget")};this.eventQuickViewWidget=
new b(e);this.eventQuickViewWidget.startup();this.eventQuickViewWidget.setModel(this.theCalendarModel);g.body().appendChild(this.eventQuickViewWidget.domNode);a&&a()}))}),{layers:["CalFull"]})},getQuickAddWidget:function(a){this.quickAddWidget?a&&a(this.quickAddWidget):(g.publish("WSFeedbackStart",[Config.Strings.Loading]),setTimeout(g.hitch(this,"createQuickAddWidget",g.hitch(this,function(){a&&a(this.quickAddWidget);g.publish("WSFeedbackEnd",[Config.Strings.Loading])})),0))},createQuickAddWidget:function(a){ws.lang.ensureLayersLoadedExtra(g.hitch(this,
function(){require(["ws/calendar/QuickAdd"],g.hitch(this,function(b){var e={getAddEditWidgetCB:g.hitch(this,"getAddEditWidget")};this.quickAddWidget=new b(e);this.quickAddWidget.startup();this.quickAddWidget.setModel(this.theCalendarModel);g.body().appendChild(this.quickAddWidget.domNode);a&&a()}))}),{layers:["CalFull"]})},editCalendar:function(a){this._ensureTabExists("editCalendar",g.hitch(this,function(b){b.getCalId()==a?b.isShowing()||this.selectTab("editCalendar"):b.isShowing()?b.confirmSwitchEditCalendar(a):
(b.setCalId(a),this.selectTab("editCalendar"))}))},getCalendarView:function(){return b.byId("calendarView")},addCalendar:function(){this._ensureTabExists("addCalendar",g.hitch(this,function(){this.selectTab("addCalendar")}))},subscribeCalendar:function(){this._ensureTabExists("subscribeCalendar",g.hitch(this,function(){this.selectTab("subscribeCalendar")}))},showTodayPage:function(a){this._showTodayPage(a)},_showTodayPage:function(a){this.selectTab("todayPage",function(){a||ws.reporting.report("Today Page",
"Today")})},handleExpiredSession:function(a){ws.widget.Dialogs.ok(a,function(){if(Config.SessionExpiryURL)top.location=Config.SessionExpiryURL})},isCalendarHidden:function(){return"calendarView"!=this.getCurrentViewId()},confirmClose:function(a,b){var e=this.ViewWidget.selectedChildWidget;e&&e.confirmClose?e.confirmClose(a,b):a&&a()},openSettings:function(a,e){this.confirmClose(g.hitch(this,function(){g.publish("WSFeedbackStart",[Config.Strings.Loading]);ws.lang.ensureLayersLoadedExtra(g.hitch(this,
function(){require(["ws/settings/SettingsContainer"],g.hitch(this,function(h){var f=b.byId("composeMessage");if(f&&f.isShowing()&&(f.resetDirty(),this.selectTab("messageList",null,!0),g.isIE))f.domNode.style.display="block",f.domNode.style.display="none";var f=g.byId("appContent"),k=g.byId("ws_settings");if(!this.settingsWidget)this.settingsWidget=new h({id:"settingsContainer",settingsExitCallback:g.hitch(this,"exitSettings")}),k.appendChild(this.settingsWidget.domNode),this.settingsWidget.startup();
this.SidePanel&&this.SidePanel.hide();f.style.display="none";k.style.display="";this.layoutForSettings();h=a?a:"generalSettings";ws.CalSolo&&(h="calendarSettings");this.settingsWidget.loadAndShow(h,function(){g.publish("WSFeedbackEnd",[Config.Strings.Loading]);e&&e()});this.ViewWidget.selectedChildWidget?(this.ViewWidget.selectedChildWidget.hide(),this.ViewWidget.selectedChildWidget.onHide()):setTimeout(g.hitch(this,function(){this.ViewWidget.selectedChildWidget.hide();this.ViewWidget.selectedChildWidget.onHide()}),
0);g.publish("Settings/show")}))}),{layers:["Settings"]})}),"settings")},exitSettings:function(a){var e=this.settingsWidget;if(e&&e.isShowing()){if(this.ViewWidget.selectedChildWidget&&"messageList"==this.ViewWidget.selectedChildWidget.id){var h=b.byId("GeneralSettings");h&&h.EnablePreviewPane.checked!=Settings.EnablePreviewPane&&this.ViewWidget.selectedChildWidget.setPreviewPaneEnabled(h.EnablePreviewPane.checked)}e.hide();g.byId("ws_settings").style.display="none";e=g.byId("appContent");e.style.display=
"block";e.style.visibility="inherit";this.isComposeInTransition()?this.selectTab("messageList",g.hitch(this,function(a){var b=this.theMailModel.getInboxFolderName();a.displayFolder(b)})):!a&&this.ViewWidget.selectedChildWidget&&(this.ViewWidget.selectedChildWidget.show(),setTimeout(g.hitch(this,function(){this.ViewWidget.selectedChildWidget.onShow(!0)}),0));a="messageList"==(this.ViewWidget.selectedChildWidget?this.ViewWidget.selectedChildWidget.id:"")&&dijit.byId("messageList").isShowingEmptyFolderAd;
(!this.ViewWidget.selectedChildWidget||"todayPage"!=this.ViewWidget.selectedChildWidget.id&&!a)&&this.SidePanel&&this.SidePanel.show();this.repaintApplication();this.resize();(a=b.byId("composeMessage"))&&g.isIE&&a.resize();g.publish("Settings/hide")}},onKeyPress:function(a){var b=ws.html.isTargetAnInputElement(a),e=ws.html.isTargetALinkElement(a);if(65<=a.keyCode&&90>=a.keyCode)a.keyChar=String.fromCharCode(a.keyCode);if(Config.EnableKeyboardShortcuts&&a.keyChar&&g.isString(a.keyChar)&&!b&&!a.ctrlKey&&
!a.metaKey&&(a.altKey||g.isMac)&&!this.isModalOpen)switch(g.isMac&&(a=ws.html.fixKeyForMac(a)),a.keyChar.toLowerCase()){case Config.Strings.KeyWriteMail:this.composeMessage(a)}var h=!0;if((a.keyCode||a.charCode)&&b||a.keyCode==g.keys.ENTER&&e)h=!1;if(a.keyCode==g.keys.UP_ARROW||a.keyCode==g.keys.DOWN_ARROW||a.keyCode==g.keys.PAGE_UP||a.keyCode==g.keys.PAGE_DOWN||a.keyCode==g.keys.HOME||a.keyCode==g.keys.END)b||a.preventDefault();a.stopPropagation();h&&(g.publish("Suite/onKeyOnPress",[a]),this.processKeyPress(a))},
processKeyPress:function(){},msgSentFeedbackFromPopout:function(){g.publish("WSFeedbackStart",[Config.Strings.ComposeSentTitle,!0])},isAutoSpacingEnabled:0==Settings.ListSpacingType,getAutoSpacingType:function(){var a=this.viewportSize?this.viewportSize.h:f.getBox().h;return 500>=a?1:500<a&&600>=a?2:600<a&&700>=a?3:4},spamReasonUpdater:function(a,b,e,h){if(!h)return a;Settings.UserHash>=Config.SpamDispositionThreshold&&h.activeCachedList&&h.activeCachedList.PASpamFltrLvl&&"Off"===h.activeCachedList.PASpamFltrLvl&&
!b&&e&&(a="spamfltroff");return a},spamReasonShouldBeShown:function(a,b){var e=!1;a&&Settings.UserHash>=Config.SpamDispositionThreshold&&(0<=Config.SpamDispReasonsList.indexOf(a)&&b?e=!0:0<=Config.SpamOtherReasonsList.indexOf(a)&&!b&&Settings.EnableSpamDisposition&&(e=!0));return e},spamReasonCodes:",empty,none,url,keyword,denylist,permitlist,attach,nonlocal,pasf,sasf,notpik,nomail,userrule,usermts,aolmts".split(","),spmGetDetailFromCode:function(a){var b="none",e="",h=0;if("number"==typeof a)h=a;
else if("string"==typeof a){var f=a.indexOf(",");0<=f&&(h=a.substr(0,f),e=a.substr(f+1))}0<=h&&h<ws.WebSuite.spamReasonCodes.length&&(b=ws.WebSuite.spamReasonCodes[h]);return{reason:b,detail:e}},spmFltrFixIt:function(a,b,e){if("userrule"===a){var h=new A;h.loadFromRpc({load:function(a){for(var f=0;f<a.filterList.length;f++)if(a.filterList[f].filterName===e){h.clearCache();args={filterAction:"Delete",filterIDs:[a.filterList[f].filterId]};ws.io.rpc({action:"FilterAction",content:args,load:b.load,error:b.error});
break}},error:g.hitch(this,function(){callback&&callback()})})}else{var f={},k=!1,l=function(a,b){ws.settings.load({scope:"spam",load:function(){if(Settings.SpamSettingsAvailable){var e={PersonalAdaptiveSpamFilterLevel:1,IncomingMailControl:1,SenderBlockList:1,SenderAllowList:1,BlockMailWithAttachments:1,BlockedWordListEnabled:1,BlockedWordList:1,DeleteBlockedMail:1},h=!0,f;for(f in a)if(!e[f]){h=!1;break}h&&(g.mixin(window.Settings,a),ws.settings.save(a,b),k&&ws.WebSuite.theMailModel.activeCachedList.RefetchIndex())}else b.error&&
b.error()},error:function(a){b.error&&b.error(a)}})},j=function(a,b){if("object"==typeof a&&0<a.length){for(var e=RegExp(b,"i"),h=0;h<a.length;h++)if(0===a[h].search(e)&&a[h].length===b.length)return h;return-1}},m=!0;switch(a){case "spamfltroff":k=!0;f.PersonalAdaptiveSpamFilterLevel="Medium";break;case "keyword":m=!1;if(""!==e)Settings.BlockedWordList?(a=j(Settings.BlockedWordList,e),0<=a?(Settings.BlockedWordList.splice(a,1),f.BlockedWordList=Settings.BlockedWordList,l(f,b)):b.load()):ws.settings.load({scope:"spam",
load:g.hitch(this,function(){var a=j(Settings.BlockedWordList,e);0<=a?(Settings.BlockedWordList.splice(a,1),f.BlockedWordList=Settings.BlockedWordList,l(f,b)):b.load()}),error:function(a){args&&args.error&&args.error(a)}});break;case "attach":f.BlockMailWithAttachments=!1;break;case "permitlist":m=!1;if(""!==e&&Config.SupportsSeparateBlockAllowLists)Settings.SenderAllowList?-1==g.indexOf(Settings.SenderAllowList,e)?(Settings.SenderAllowList.push(e),f.SenderAllowList=Settings.SenderAllowList,l(f,b)):
b.load():ws.settings.load({scope:"spam",load:g.hitch(this,function(){-1==g.indexOf(Settings.SenderAllowList,e)?(Settings.SenderAllowList.push(e),f.SenderAllowList=Settings.SenderAllowList,l(f,b)):b.load()}),error:function(a){args&&args.error&&args.error(a)}});break;case "denylist":m=!1;if(""!==e)Settings.SenderBlockList?(a=g.indexOf(Settings.SenderBlockList,e),0<=a?(Settings.SenderBlockList.splice(a,1),f.SenderBlockList=Settings.SenderBlockList,l(f,b)):b.load()):ws.settings.load({scope:"spam",load:g.hitch(this,
function(){var a=g.indexOf(Settings.SenderBlockList,e);0<=a?(Settings.SenderBlockList.splice(a,1),f.SenderBlockList=Settings.SenderBlockList,l(f,b)):b.load()}),error:function(a){args&&args.error&&args.error(a)}});break;case "nonlocal":f.IncomingMailControl="AllowAll";break;case "notpik":f.IncomingMailControl="AllowAll";break;case "nomail":f.IncomingMailControl="AllowAll"}m&&l(f,b)}},showSpmDspnTip:function(a,b,e,h,k,l){var n,v,q,s=Config.Strings.dm_WhySpam,l="true"===l?!0:!1,b=Config.Strings["SD_"+
e+"Gen"];v="string"==typeof h&&h.length&&-1!=b.indexOf("{0}")?ws.string.substituteParams(b,h):b;q=Config.Strings["SD_"+e+"ActPrmy"];var w=g.hitch(this,function(b){"spamfltroff"==e?(s=Config.Strings.dm_WeThinkSpam,n="<div class='spDspTipTitle' style='margin:10px 0px'>"+s+"</div><div class='spDspTipBody' style='margin:10px 0px'>"+v+"</div><div class='spDspTipAction' style='margin:10px 0px'><span class='sdAction wsLink'>"+Config.Strings.SD_DontShowAgain+"</span></div>"):n="<div class='spDspTipTitle' style='margin:10px 0px'>"+
s+"</div><div class='spDspTipBody' style='margin:10px 0px'>"+v+"</div><div class='spDspTipAction' style='margin:10px 0px'><span class='sdAction wsLink'>"+q+"</span></div>";ws.WebSuite.spamDLreport(e,"h");this.sdTip?(g.removeClass(this.sdTip.balloonArrowNode,"bottom"),g.addClass(this.sdTip.balloonArrowNode,"top"),this.sdTip.offset={x:-139,y:28},this.sdTip.setContent(n),this.sdTip.positionOverNode=a,this.sdTip.tgtElId=a.id,this.sdTip.showTip()):(this.sdTip=new m({name:"sdTip",content:n,positionOverNode:a,
arrowPosition:"top",distanceArrowFromEdge:140,delayOnShow:0,offset:{x:-139,y:28},onClick:function(){},load:function(){}}),this.sdTip.tgtElId=a.id,g.body().appendChild(this.sdTip.domNode),this.sdTip.startup(),this.sdTip.showTip(),this.sdTip.closeButton.style.display="none",this.sdTip.domNode.onmouseover=function(){if(ws.WebSuite.sdTip.timeoutHide)clearTimeout(ws.WebSuite.sdTip.timeoutHide),ws.WebSuite.sdTip.timeoutHide=null},this.sdTip.domNode.onmouseout=function(a){j.isDescendant(9>g.isIE?window.event.toElement:
a.relatedTarget,this)||ws.WebSuite.sdTip.hide()});if(this.sdTip.domNode.clientHeight+g.position(a).y+28>f.getBox().h)g.removeClass(this.sdTip.balloonArrowNode,"top"),g.addClass(this.sdTip.balloonArrowNode,"bottom"),this.sdTip.offset={x:-139,y:-1*this.sdTip.domNode.clientHeight-12},this.sdTip.showTip();var w=g.query(".spDspTipAction .sdAction",this.sdTip.domNode);if(w.length)w[0].onclick=b?g.hitch(this,function(){ws.WebSuite.sdTip&&ws.WebSuite.sdTip.hide();ws.WebSuite.spamDLreport(e,"h",null,"v");
ws.WebSuite.openSettings("filterSettings")}):g.hitch(this,function(){if("spamfltroff"==e){g.addClass(dijit.byId("messageList").layoutWidget.domNode,"msgListHiddenSDicon");var a=dijit.byId("previewPane");if(a&&"undefined"!=typeof a.spamReasonBar)a.spamReasonBar.style.display="none",a.layout();ws.settings.saveNow({EnableSpamDisposition:!1});Settings.EnableSpamDisposition=!1;ws.WebSuite.sdTip&&ws.WebSuite.sdTip.hide()}else ws.WebSuite.spamDLreport(e,"h",null,"f"),this.spmFltrFixIt(e,{load:g.hitch(this,
function(){this.theMailModel.reportSpamMessages({checkUndo:l,uids:[k],isSpam:l,load:g.hitch(this,function(){var a;a="userrule"===e?Config.Strings.SD_fltrDelFdbk:Config.Strings.SD_stngChgdFdbk;ws.WebSuite.sdTip.hide();g.publish("WSFeedbackStart",[a,!0])}),error:function(a){window.ws_ErrLgr&&!a&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for model.reportSpamMessages-spamAction file:MessageListView.js");ws.widget.Dialogs.ok(a||Config.Strings.ReportSpamError)}})}),error:function(){}},
h)})});if("userrule"===e){this.isHandlingFltrSdTip=!0;var b=g.hitch(this,function(){this.msOutHandlingFltrSdTip||w();this.isHandlingFltrSdTip=!1}),o=g.hitch(this,function(){v=Config.Strings.SD_userruleUnclr;q=Config.Strings.SD_userruleActView;this.msOutHandlingFltrSdTip||w(!0);this.isHandlingFltrSdTip=!1});this.canFixBadFltr(h,b,o)}else w()},canFixBadFltr:function(a,b,e){var h=new A;h.loadFromRpc({load:g.hitch(h,function(h){for(var f=!1,k=!1,l=0;l<h.filterList.length;l++)h.filterList[l].filterName===
a&&(f&&(k=!0),f=!0);f&&!k?b():e()}),error:g.hitch(this,function(){callback&&callback()})},!0)},spamDLRepRsn:{userrule:"Filter",keyword:"BK",denylist:"BL",permitlist:"AL",attach:"BI",nonlocal:"MD",notpik:"NPIK",nomail:"BA"},spamDLreport:function(a,b,e,h){var f="Mail-SD-";"M"===b?(f+="Mail-SD-Multi-Pop-Multi","f"===h?f+="-Fix":"v"===h?f+="-View":"m"===h&&(f+="-NotSpam"),ws.reporting.reportDLAction(f)):a&&this.spamDLRepRsn[a]&&b&&1==b.length&&-1!="hspM".indexOf(b)&&(f="Mail-SD-"+this.spamDLRepRsn[a],
"h"===b?f+="-Hover":"s"===b?(f+="-Strip","userrule"===a&&"g"===e&&(f+="-Generic")):"p"===b&&(f+="-Pop","m"===e?f+="-Multi":"userrule"===a&&("s"===e?f+="-Single":"g"===e&&(f+="-Generic"))),"f"===h?f+="-Fix":"v"===h?f+="-View":"m"===h&&(f+="-NotSpam"),ws.reporting.reportDLAction(f))},SearchTestCellRangeSetUp:function(){if(!Config.SearchTestCellRanges){this.checkForTestEnableOverride();Config.SearchTestCellRanges=[];for(var a=Config.SearchTestCellSizeOverride?g.fromJson(Config.SearchTestCellSizeOverride):
{},b=Config.SearchTestCellHashPoint,e=Config.SearchTestStartIndex;e<Config.SearchTestStartIndex+Config.SearchTestNumCells;e++){var h="Cell=";if(e===Config.SearchTestCtrlNum1||e===Config.SearchTestCtrlNum2)h="SearchTest_ControlCell=";var h=h+e,f=a[e]?a[e]:Config.SearchTestCellSize;Config.SearchTestCellRanges[e]={a_Min:b,b_Max:b+f-1,dscrp:h};b+=f}}},testCellMinMax:function(a){Config.SearchTestCellRanges||this.SearchTestCellRangeSetUp();return Config.SearchTestCellRanges[a]},testCellMapFlag:function(a){return a<
Config.SearchTestStartIndex||a>=Config.SearchTestStartIndex+Config.SearchTestNumCells?"d":Config.SearchTestMap.split("")[a-Config.SearchTestStartIndex]},checkForTestEnableOverride:function(){var a=ws.io.getQueryParameter("_te");if(a&&"string"===typeof a&&(a=parseInt(a),!isNaN(a))){var b=this.testCellMapFlag(a);if(b==b.toUpperCase())Config.SearchTestForceNum=a}},isUsrInSrchTestCell:function(a,b){if(!Config.SearchTestEnabled||0>Config.SearchTestNumCells||ws.CalSolo||ws&&ws.WebSuite&&!ws.WebSuite.HatWidget)return!1;
this.checkForTestEnableOverride();if(!b&&(a==Config.SearchTestCtrlNum1||a==Config.SearchTestCtrlNum2))return!1;if(a<Config.SearchTestStartIndex||a>=Config.SearchTestStartIndex+Config.SearchTestNumCells)return window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.ProgErr,"Invalid Test Cell file:WebSuite.js"),!1;if(-1<Config.SearchTestForceNum)return a===Config.SearchTestForceNum?!0:!1;if("E"===this.testCellMapFlag(a).toUpperCase()){var e=this.testCellMinMax(a);return Settings.UserHash>=e.a_Min&&Settings.UserHash<=
e.b_Max?!0:!1}return!1},isUsrInSrchCtrlCell:function(){return this.isUsrInSrchTestCell(Config.SearchTestCtrlNum1,!0)?Config.SearchTestCtrlNum1:this.isUsrInSrchTestCell(Config.SearchTestCtrlNum2,!0)?Config.SearchTestCtrlNum2:-1},getSearchRprtSuffix:function(){var a=null;if(!Config.SearchTestEnabled||0>Config.SearchTestNumCells)return a;var b=this.isUsrInSrchCtrlCell();if(0<b)a="C"+b;else for(b=Config.SearchTestStartIndex;b<Config.SearchTestStartIndex+Config.SearchTestNumCells;b++)if(this.isUsrInSrchTestCell(b)){a=
"T"+b;break}return a},isUsrInTodayPageTest:function(a){var b=ws.io.getQueryParameter("_gt");if(b&&"string"===typeof b&&(b=parseInt(b),!isNaN(b)&&1==b))return!0;var b=Settings.UserHash,e=Config.ExpWelcomeMessageThreshold;return!a&&0<b&&b<=e||a&&b>e&&b<=2*e?!0:!1},testingOnlyInit:function(){this.theMailModel=new ws.mail.MailModel;this.theAddressModel=new ws.address.AddressModel;g.connect(this.theMailModel,"modelUpdated",this,"deferredInit");this.MessageListView=b.byId("messageList");this.MessageListView.setModel(this.theMailModel);
this.MessageListView.getComposeCB=g.hitch(this,"getCompose","messagelist");g.connect(this.MessageListView,"openMessage",this,"openMessage")},testScriptError:function(){ws.WebSuite.testScriptError1()},testScriptError1:function(){}};if("mail"!=_g_PageType)ws.CalSolo=ws.WebSuite})},"url:ws/widget/FTUTip.html":'<div class="FTUTip ${className}" data-dojo-attach-point="ftutip" data-dojo-attach-event="onclick: onClick" style="display:none">\n\t<div class="padBox" data-dojo-attach-point="padBox">\n\t\t<div class="message" data-dojo-attach-point="message"></div>\n\t\t<button class="mainSprite wsCloseBtn" data-dojo-attach-point="closeButton" data-dojo-attach-event="onclick: closeTip"></button>\n\t</div>\n\t<div data-dojo-attach-point="balloonArrowNode"></div>\n</div>\n',
"url:ws/suite/Navigation.css":"","dojox/grid/rows":function(){define("dojox/grid/rows",["dojo/_base/declare","dojo"],function(g){return g("dojox.grid.rows",null,{constructor:function(g){this.grid=g},linesToEms:2,defaultRowHeight:1,overRow:-2,getHeight:function(){return""},getDefaultHeightPx:function(){return 32},prepareStylingRow:function(g,f){return{index:g,node:f,odd:Boolean(g&1),selected:this.grid.selection.isSelected(g),over:this.isOver(g),customStyles:"",customClasses:"dojoxGrid-row"}},styleRowNode:function(g,
f){var a=this.prepareStylingRow(g,f);this.grid.onStyleRow(a);this.applyStyles(a)},applyStyles:function(g){with(g)node.className=customClasses,g=node.style.height,dojox.grid.setStyleText(node,customStyles+";"+(node._style||"")),node.style.height=g},updateStyles:function(g){this.grid.updateRowStyles(g)},setOverRow:function(g){var f=this.overRow;this.overRow=g;f!=this.overRow&&0<=f&&this.updateStyles(f);this.updateStyles(this.overRow)},isOver:function(g){return this.overRow==g}})})},"ws/widget/DefaultTextbox":function(){define("ws/widget/DefaultTextbox",
"dojo/_base/declare,dojo,dijit,dijit/_Widget,dijit/_TemplatedMixin,ws/html".split(","),function(g,j,f,a,b){return g([a,b],{templateString:"<input type='text' maxlength='${maxlength}' id='${id}' class='wsInput' size='${size}' tabindex='${tabindex}' style='width:${fieldWidth}' data-dojo-attach-point='textbox' data-dojo-attach-event='onblur:_onBlur,onfocus:_onFocus,onkeyup:_onKeyUp,onkeypress:_onKeyPress,onclick: onInputClick'>",value:"",origValue:"",defaultValue:"",doValueSelect:!1,clearableInputClassName:"",
size:50,fieldWidth:"",maxlength:255,tabindex:500,startup:function(){this.setValue(this.value);if(this.value)this.origValue=this.value},getValue:function(){return this.textbox.value==this.defaultValue?"":j.trim(this.textbox.value)},getOrigValue:function(){return this.origValue},setOrigValue:function(a){this.origValue=a},setValue:function(a,b){a=a||"";this.textbox.value=""==j.trim(a)&&!b?this.defaultValue:a;this.doValueSelect&&this.value==this.textbox.value&&setTimeout(j.hitch(this,function(){ws.html.selectInputText(this.textbox)}),
100);this._updateClass()},focus:function(){this.textbox.focus()},blur:function(){this.textbox.blur()},select:function(){this.textbox.select()},_onFocus:function(){if(this.textbox.value==this.defaultValue&&!this.doValueSelect)this.textbox.value="",this.textbox.focus();this._updateClass();this.onFocus()},onFocus:function(){},_onBlur:function(a){if(""==j.trim(this.textbox.value))this.textbox.value=this.defaultValue;this._updateClass();this.onBlur(a)},onBlur:function(){},onInputClick:function(){j.isMoz&&
this.domNode.focus()},_onKeyUp:function(a){ws.lang.setTimeout(j.hitch(this,"onChange",a),0)},onChange:function(){},_updateClass:function(){""!=this.defaultValue&&!this.doValueSelect&&j.toggleClass(this.textbox,"wsInputDefault",this.textbox.value==this.defaultValue)},_onKeyPress:function(a){var b=a.charCode||65<=a.keyCode&&90>=a.keyCode;this.textbox.value.length>=this.maxLength&&b&&a.preventDefault();this.onKeyPress(a)},onKeyPress:function(){}})})},"url:ws/suite/SgnInHstyDlg.css":"","ws/address/AllAddressModel":function(){define("ws/address/AllAddressModel",
"dojo/_base/declare,dojo,ws/address/AddressModel,ws/address/record,ws/io,ws/lang".split(","),function(g,j,f){return g([f],{indexName:"emailIndex",_setIndexTypes:function(){if(this.core){var a=this.core[this._abList];if(a)this.indexTypes=!0==Config.AddScreenNameToAutoComplete?[a.CONTACT_SNAME,a.CONTACT_EMAIL1,a.CONTACT_EMAIL2,a.DISTROLIST_ENTRY,a.SHAREDGROUP_ENTRY]:[a.CONTACT_EMAIL1,a.CONTACT_EMAIL2,a.DISTROLIST_ENTRY,a.SHAREDGROUP_ENTRY]}},getRow:function(a){var b=this._getFullIndex();if(this.indexTypes&&
b){var e=this.core[this._abList].getRecordAtOffset(b.offsets[a]);switch(this.indexTypes[b.fields[a]]){case this.core[this._abList].CONTACT_SNAME:e.composeValue=e.screenName;break;case this.core[this._abList].CONTACT_EMAIL1:e.composeValue=e.email1;break;case this.core[this._abList].CONTACT_EMAIL2:e.composeValue=e.email2}return e}return null},deleteAddresses:null,_removeAddressesLocal:null,toggleSelectRow:null,toggleSelectUid:null,selectRange:function(){return!1},selectAll:function(){return!1},deselectAll:null,
getSelectedUids:function(){return[]},isSelected:function(){return!1},isAllSelected:function(){return!1},isAllSelReal:function(){return!1},getRowForUid:null,getRowsForUids:null})})},"dojox/grid/data/Fields":function(){define("dojox/grid/data/Fields",["dojo/_base/declare","dojo","dojox/grid/data/Mixer","dojox/grid/data/Field"],function(g,j,f,a){return g("dojox.grid.data.Fields",f,{constructor:function(b){this.defaultValue=new (b?b:a)},indexOf:function(a){for(var e=0;e<this.values.length;e++){var h=
this.values[e];if(h&&h.key==a)return e}return-1}})})},"ws/calendar/EventsApp":function(){define("ws/calendar/EventsApp","dojo/_base/declare,dojo/text!ws/calendar/EventsApp.html,dojo/text!ws/calendar/EventsApp.css,dojo,dijit,dijit/_Widget,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,ws/Spinner,ws/calendar/CalendarViewModel,ws/widget/WSMenu,ws/widget/WSMenuItem,ws/widget/WSMenuSeparator".split(","),function(g,j,f,a,b,e,h,k,l,n,m,q,s){return g([e,h,k],{templateString:j,css:{templateString:f},
_earlyTemplatedStartup:!0,dateFormat:Config.Strings.Panel_EventPanel_DateFormat,timeFormat:Config.Strings.Panel_EventPanel_TimeFormat,dayofWeekFormat:Config.Strings.Panel_EventPanel_DayOfWeekFormat,numDays:90,isAnonymous:!1,_inited:!1,model:null,calendarNodes:{},startup:function(){this.currDate=new Date;this.connect(this.eventNode.domNode,"oncontextmenu","onContextMenu")},onMouseOut:function(){a.addClass(this.appTitleAddEv,"appTitleAddEv");a.removeClass(this.appTitleAddEv,"appTitleAddEvSel")},onMouseOver:function(){a.addClass(this.appTitleAddEv,
"appTitleAddEvSel");a.removeClass(this.appTitleAddEv,"appTitleAddEv")},setModel:function(a){this.model=a;this.connect(this.model,"modelUpdated","modelUpdated");this.connect(this.model,"requestUpdate","loadData")},init:function(){if(!this._inited){this.model||this.setModel(new n({modelType:"event"}));this.model.isModelFetchedOnce?this.modelUpdated():ws.lang.setTimeout(this,function(){if(!this.spinner)this.spinner=new l("AimSignIn",this.eventSpinner);this.spinner.spin();this.eventNode.hide();this.eventLoading.show();
this.loadData()},100);this._inited=!0;var b=ws.UserContext.Locale;("fr-fr"==b||"fr-ca"==b||"es-us"==b)&&a.addClass(this.layoutWidget.domNode,"l10n")}},onResized:function(){this.inherited(arguments);0==this.hasEventDaysCount&&this.toolbar.layout()},getDefaultEventArgs:function(){return{compType:"EVENT",calendars:!0,components:!0,index:!0,dayBucketIndex:!0,enums:!0,dtstart:null,dtend:null,sortBy:null,sortDir:null}},loadData:function(){var a=this.getDefaultEventArgs(),b=new Date;b.setHours(0);b.setMinutes(0);
b.setSeconds(0);this.calStartDate=b;this.calEndDate=ws.date.add(b,ws.date.dateParts.MONTH,3);a.dtstart=ws.date.formatISO8601(this.calStartDate);a.dtend=ws.date.formatISO8601(this.calEndDate);this.model.getData(a)},updateEventData:function(){this.eventLists=Array(this.numDays);ws.date.formatDateTime(this.currDate,Config.Strings.Panel_EventPanel_MonthFormat);this.hasEventDaysCount=0;for(var a=this.model.index,b=this.model.components,e=this.model.componentEnum,h=this.model.calendarEnum,f=this.currDate,
k=0;k<this.numDays;k++){var l=ws.date.formatDateTime(f,this.dateFormat);this.eventLists[k]={rawDate:f,date:l,dayList:[]};f=ws.date.add(f,ws.date.dateParts.DAY,1)}f=this.model.indexEnum;for(k=0;k<a.length;k++){var g=a[k],j=g[f.id],m=b[j];if(!(null==m||0!=m[e.compType])){var n=null,q=n=l=null,s=this.model.getComponentArgs(m);s.id=j;if(g[f.rid])s.rid=g[f.rid];j=this.model.calendars[m[e.calid]][h.writable];if(s.rid){s.start=g[f.start];s.end=g[f.end];if(m[e.recurEnd])s.recurEnd=ws.date.formatISO8601(m[e.recurEnd]);
n=new Date(g[f.start]);l=ws.date.formatDateTime(n,this.dateFormat);n=ws.date.formatDateTime(n,this.timeFormat)}else n=new Date(m[e.start]),l=ws.date.formatDateTime(n,this.dateFormat),n=ws.date.formatDateTime(n,this.timeFormat),q=m[e.end],s.start=m[e.start],s.end=m[e.end];g={startTimeFormatted:n,startTime:m[e.start],endTime:q,args:s,writeable:j};for(m=0;m<this.numDays;m++)if(l==this.eventLists[m].date){this.eventLists[m].dayList.push(g);this.hasEventDaysCount++;break}}}},modelUpdated:function(){if(this.model&&
this.model.isModelFetchedOnce){this.updateEventData();this.updateAppMenu();this.eventLoading.hide();var b=this.eventNode.domNode;if(0<this.hasEventDaysCount){this.appEventEmpty.hide();this.eventNode.show();for(var e=b.childNodes,h=e.length-1;0<=h;h--)a.destroy(e[h]);for(e=0;e<this.eventLists.length;e++)if(h=this.eventLists[e].dayList,0<h.length){this.eventLists[e].node=a.create("div",{className:"eRow dayRow",innerHTML:this.eventLists[e].rawDate==this.currDate?Config.Strings.Panel_EventPanel_Today:
this.eventLists[e].date},b);for(var f=0;f<h.length;f++){var k=h[f].startTimeFormatted;if(h[f].args.allDay)k=Config.Strings.AllDay;var l=a.create("div",{className:"eRow eventRow bgColor",evid:h[f].args.id,_day:e},b);a.create("span",{className:"eventTime",innerHTML:k},l);a.create("span",{className:"eventSummary",innerHTML:h[f].args.summary,title:h[f].args.summary},l)}}}else this.appEventEmpty.show(),this.eventNode.hide(),this.toolbar.layout();a.setSelectable(b,!1)}},getComponent:function(a,b){var e=
0,h=this.eventLists.length;b&&(e=b,h=b+1);for(;e<h;e++)for(var f=this.eventLists[e].dayList,k=0;k<f.length;k++)if(a==f[k].args.id)return f[k];return null},restoreApp:function(b){a.stopEvent(b);ws.WebSuite.Navigation.restoreApp()},calFullView:function(e){e&&a.stopEvent(e);ws.WebSuite.Navigation.searchActive(!1);ws.WebSuite.Navigation.showCalendar(!0,function(){b.byId("calendarView").backToList()})},addEvent:function(b){b&&a.stopEvent(b);ws.WebSuite.getAddEditWidget(a.hitch(this,function(a){null!=a&&
(a.setModel(this.model),a.show(0))}))},addEventPlus:function(a){this.addEvent(a);ws.reporting.reportDLAction("Mail-LeftNav-Events-QuickPlusNewEvent")},addEventBtn:function(a){this.addEvent(a);ws.reporting.reportDLAction("Mail-LeftNav-Events-EmptyAddNewEvent")},addEventMenu:function(a){this.addEvent(a);ws.reporting.reportDLAction("Mail-LeftNav-Events-QuickAddNewEvent")},viewEvent:function(b){a.stopEvent(b);var e=ws.widget.getEventTarget(b,"eRow","eventNode");if(a.hasClass(e,"dayRow")){d=null;for(b=
0;b<this.eventLists.length;b++)if(e==this.eventLists[b].node)d=this.eventLists[b].rawDate;d&&ws.WebSuite.selectTab("calendarView",function(a){a.selectDayView();a.setDate(d)})}else{var b=a.attr(e,"evid"),h=a.attr(e,"_day"),f=this.getComponent(b,+h);if(f){var k=a.clone(f.args);ws.WebSuite.getEventQuickViewWidget(a.hitch(this,function(a){a.setModel(this.model);a.initializeView(k,1==f.writeable,e,"right",this.model.calendars[k.calid][this.model.calendarEnum.sponsoredCalIconURL]);ws.reporting.reportDLAction("Mail-LeftNav-QuickViewEvent")}))}}},
updateAppMenu:function(){var b=this.model.getCalendarList(),e=this.model.calendarEnum;if(b&&e){if(this.appTitleMenu){var h=this.appTitleMenu.getChildren();a.forEach(h,a.hitch(this,function(a,b){4<b&&(this.appTitleMenu.removeChild(a),a.destroy())}))}else this.createAppMenu();for(h=0;h<b.length;h++){var f=b[h],k=f[e.id],l=f[e.displayName],g=f[e.selected],f="<div class='wsCalCB "+("wsCalCB_"+f[e.color].substring(1)+(g?" checked":" unchecked"))+"'></div><div class='text'>"+ws.string.escapeXml(l)+"</div>";
el=new q({caption:f,onClick:a.hitch(this,"toggleCalendarItem",k)});el._onClick=a.hitch(el,function(b){if(!this.disabled)this.onClick();a.stopEvent(b)});this.appTitleMenu.addChild(el);this.calendarNodes[k]=el}}},toggleCalendarItem:function(a){var b=this.model.calendarEnum,a=this.model.calendars[a],e=this.model.getCalendarArgs(a,!0);e.selected=!a[b.selected];e.search=this.model.searchStr;e.searchIn=null;e.sortBy=null;e.sortDir=null;e.ignoreCache=!1;this.model.saveCalendar(e)},createMenu:function(b,
e){var h=new m({id:b});a.forEach(e,function(a){a&&(a=new (a.dojoType?eval(a.dojoType):a.separator?s:q)(a),h.addChild(a))});a.body().appendChild(h.domNode);h.startup();return h},promptConfirmDelete:function(){var b=this.eventData;b.rid&&0<b.rid.length?ws.calendar.calutil.showConfirmRecurDialog("delete",a.hitch(this,function(a,e){a&&this.deleteEvent(b,e)})):ws.widget.Dialogs.ok(Config.Strings.RegEventMsg,a.hitch(this,function(a){a&&this.deleteEvent(b)}),!0)},deleteEvent:function(b,e){var h=this.model.getDefaultComponentArgs(!1);
h.id=b.id;if(b.rid)h.rid=b.rid;h.index=!0;e||(e="CHANGE_CURRENT");h.recurChangeMode=e;h.loadCallback=a.hitch(this,function(){a.publish("WSFeedbackStart",[Config.Strings.EventDeleted,!0])});this.model.deleteEvents(h)},createAppMenu:function(){this.appTitleMenu=this.createMenu("eventAppMenu",[{caption:Config.Strings.NewEvent,onClick:a.hitch(this,function(){this.addEventMenu()})},{caption:Config.Strings.AddCalendar,onClick:a.hitch(this,function(){ws.WebSuite.Navigation.selectApp(ws.WebSuite.Navigation.APP_ADDCALENDAR);
ws.reporting.reportDLAction("Mail-LeftNav-Events-QuickAddNewCalendar")})},{separator:!0},{caption:Config.Strings.EventAppFullTip,onClick:a.hitch(this,function(){this.calFullView();ws.reporting.reportDLAction("Mail-LeftNav-Events-QuickOpenCalendar")})},{separator:!0}])},appMenu:function(b){a.stopEvent(b);this.appTitleMenu||this.createAppMenu();this.appTitleMenu.open(this.appTitleLink)},createContextMenu:function(){var b=[{caption:Config.Strings.Edit,onClick:a.hitch(this,function(){this.eventData&&
ws.WebSuite.getAddEditWidget(a.hitch(this,function(a){a.setModel(this.model);a.show(1,this.eventData)}))})},{caption:Config.Strings.Delete,onClick:a.hitch(this,function(){this.promptConfirmDelete()})}];this.contextMenu=ws.widget.createMenu(b)},onContextMenu:function(b){a.stopEvent(b);var e=ws.widget.getEventTarget(b,"eventRow","eventNode");if(e){var h=a.attr(e,"_day");this.eventData=this.getComponent(a.attr(e,"evid"),+h).args;this.nodeData=e;this.contextMenu||this.createContextMenu();this.contextMenu.open(b.pageX,
b.pageY)}}})})},"dojo/parser":function(){define("require,./_base/kernel,./_base/lang,./_base/array,./_base/config,./_base/html,./_base/window,./_base/url,./_base/json,./aspect,./date/stamp,./Deferred,./has,./query,./on,./ready".split(","),function(g,j,f,a,b,e,h,k,l,n,m,q,s,o,u,p){function v(a){var b=a._nameCaseMap,e=a.prototype;if(!b||b._extendCnt<z){var b=a._nameCaseMap={},h;for(h in e)"_"!==h.charAt(0)&&(b[h.toLowerCase()]=h);b._extendCnt=z}return b}function w(a){var b=a.join();if(!x[b]){for(var e=
[],h=0,k=a.length;h<k;h++){var l=a[h];e[e.length]=x[l]=x[l]||f.getObject(l)||~l.indexOf("/")&&g(l)}a=e.shift();x[b]=e.length?a.createSubclass?a.createSubclass(e):a.extend.apply(a,e):a}return x[b]}var z=0;n.after(f,"extend",function(){z++},!0);var x={},A={_clearCache:function(){z++;x={}},_functionFromScript:function(b,e){var h="",f="",k=b.getAttribute(e+"args")||b.getAttribute("args"),l=b.getAttribute("with"),k=(k||"").split(/\s*,\s*/);l&&l.length&&a.forEach(l.split(/\s*,\s*/),function(a){h+="with("+
a+"){";f+="}"});return new Function(k,h+b.innerHTML+f)},instantiate:function(b,e,h){var e=e||{},h=h||{},f=(h.scope||j._scopeName)+"Type",k="data-"+(h.scope||j._scopeName)+"-",l=k+"type",g=k+"mixins",m=[];a.forEach(b,function(a){var b=f in e?e[f]:a.getAttribute(l)||a.getAttribute(f);if(b){var h=a.getAttribute(g),b=h?[b].concat(h.split(/\s*,\s*/)):[b];m.push({node:a,types:b})}});return this._instantiate(m,e,h)},_instantiate:function(b,e,h){b=a.map(b,function(a){var b=a.ctor||w(a.types);if(!b)throw Error("Unable to resolve constructor for: '"+
a.types.join()+"'");return this.construct(b,a.node,e,h,a.scripts,a.inherited)},this);!e._started&&!h.noStart&&a.forEach(b,function(a){"function"===typeof a.startup&&!a._started&&a.startup()});return b},construct:function(b,e,h,g,q,w){var B;var z=b&&b.prototype,g=g||{},p={};g.defaults&&f.mixin(p,g.defaults);w&&f.mixin(p,w);var A;s("dom-attributes-explicit")?A=e.attributes:s("dom-attributes-specified-flag")?A=a.filter(e.attributes,function(a){return a.specified}):(w=(/^input$|^img$/i.test(e.nodeName)?
e:e.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),A=a.map(w.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==e.nodeName&&"value"==a||"enctype"==b?e.getAttribute(b):e.getAttributeNode(b).value}}));var x=g.scope||j._scopeName,w="data-"+x+"-",F={};"dojo"!==x&&(F[w+"props"]="data-dojo-props",F[w+"type"]="data-dojo-type",F[w+"mixins"]="data-dojo-mixins",F[x+"type"]="dojoType",F[w+"id"]="data-dojo-id");
for(var x=0,D,H=[],N,M;D=A[x++];){var E=D.name,K=E.toLowerCase();D=D.value;switch(F[K]||K){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":M=D;break;case "data-dojo-id":case "jsid":N=D;break;case "data-dojo-attach-point":case "dojoattachpoint":p.dojoAttachPoint=D;break;case "data-dojo-attach-event":case "dojoattachevent":p.dojoAttachEvent=D;break;case "class":p["class"]=e.className;break;case "style":p.style=e.style&&e.style.cssText;break;default:if(E in
z||(E=v(b)[K]||E),E in z)switch(typeof z[E]){case "string":p[E]=D;break;case "number":p[E]=D.length?Number(D):NaN;break;case "boolean":p[E]="false"!=D.toLowerCase();break;case "function":p[E]=""===D||-1!=D.search(/[^\w\.]+/i)?new Function(D):f.getObject(D,!1)||new Function(D);H.push(E);break;default:K=z[E],p[E]=K&&"length"in K?D?D.split(/\s*,\s*/):[]:K instanceof Date?""==D?new Date(""):"now"==D?new Date:m.fromISOString(D):K instanceof k?j.baseUrl+D:l.fromJson(D)}else p[E]=D}}for(x=0;x<H.length;x++)A=
H[x].toLowerCase(),e.removeAttribute(A),e[A]=null;if(M)try{M=l.fromJson.call(g.propsThis,"{"+M+"}"),f.mixin(p,M)}catch(S){throw Error(S.toString()+" in data-dojo-props='"+M+"'");}f.mixin(p,h);q||(q=b&&(b._noScript||z._noScript)?[]:o("> script[type^='dojo/']",e));h=[];g=[];M=[];H=[];if(q)for(x=0;x<q.length;x++){var P=q[x];e.removeChild(P);A=P.getAttribute(w+"event")||P.getAttribute("event");F=P.getAttribute(w+"prop");E=P.getAttribute(w+"method");K=P.getAttribute(w+"advice");D=P.getAttribute("type");
P=this._functionFromScript(P,w);A?"dojo/connect"==D?h.push({method:A,func:P}):"dojo/on"==D?H.push({event:A,func:P}):p[A]=P:"dojo/aspect"==D?h.push({method:E,advice:K,func:P}):"dojo/watch"==D?M.push({prop:F,func:P}):g.push(P)}B=(q=b.markupFactory||z.markupFactory)?q(p,e,b):new b(p,e),b=B;N&&f.setObject(N,b);for(x=0;x<h.length;x++)n[h[x].advice||"after"](b,h[x].method,f.hitch(b,h[x].func),!0);for(x=0;x<g.length;x++)g[x].call(b);for(x=0;x<M.length;x++)b.watch(M[x].prop,M[x].func);for(x=0;x<H.length;x++)u(b,
H[x].event,H[x].func);return b},scan:function(b,e){function h(a){if(!a.inherited){a.inherited={};var b=a.node,e=h(a.parent),b={dir:b.getAttribute("dir")||e.dir,lang:b.getAttribute("lang")||e.lang,textDir:b.getAttribute(o)||e.textDir},f;for(f in b)b[f]&&(a.inherited[f]=b[f])}return a.inherited}var f=[],k=[],l={},m=(e.scope||j._scopeName)+"Type",n="data-"+(e.scope||j._scopeName)+"-",v=n+"type",o=n+"textdir",n=n+"mixins",u=b.firstChild,p=e.inherited;if(!p){var z=function(a,b){return a.getAttribute&&
a.getAttribute(b)||a.parentNode&&z(a.parentNode,b)},p={dir:z(b,"dir"),lang:z(b,"lang"),textDir:z(b,o)},x;for(x in p)p[x]||delete p[x]}for(var p={inherited:p},A,E;;)if(u)if(1!=u.nodeType)u=u.nextSibling;else if(A&&"script"==u.nodeName.toLowerCase())(K=u.getAttribute("type"))&&/^dojo\/\w/i.test(K)&&A.push(u),u=u.nextSibling;else if(E)u=u.nextSibling;else{var K=u.getAttribute(v)||u.getAttribute(m);x=u.firstChild;if(!K&&(!x||3==x.nodeType&&!x.nextSibling))u=u.nextSibling;else{E=null;if(K){var S=u.getAttribute(n);
A=S?[K].concat(S.split(/\s*,\s*/)):[K];try{E=w(A)}catch(P){}E||a.forEach(A,function(a){~a.indexOf("/")&&!l[a]&&(l[a]=!0,k[k.length]=a)});S=E&&!E.prototype._noScript?[]:null;p={types:A,ctor:E,parent:p,node:u,scripts:S};p.inherited=h(p);f.push(p)}else p={node:u,scripts:A,parent:p};u=x;A=S;E=E&&E.prototype.stopParser&&!e.template}}else{if(!p||!p.node)break;u=p.node.nextSibling;E=!1;p=p.parent;A=p.scripts}var R=new q;k.length?(s("dojo-debug-messages"),g(k,function(){R.resolve(a.filter(f,function(a){if(!a.ctor)try{a.ctor=
w(a.types)}catch(b){}for(var h=a.parent;h&&!h.types;)h=h.parent;var f=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(f&&f.stopParser&&!e.template);a.instantiate=!h||h.instantiate&&h.instantiateChildren;return a.instantiate}))})):R.resolve(f);return R.promise},_require:function(a){var a=l.fromJson("{"+a.innerHTML+"}"),b=[],e=[],h=new q,k;for(k in a)b.push(k),e.push(a[k]);g(e,function(){for(var a=0;a<b.length;a++)f.setObject(b[a],arguments[a]);h.resolve(arguments)});return h.promise},_scanAmd:function(a){var b=
new q,e=b.promise;b.resolve(!0);var h=this;o("script[type='dojo/require']",a).forEach(function(a){e=e.then(function(){return h._require(a)});a.parentNode.removeChild(a)});return e},parse:function(a,b){var k;!b&&a&&a.rootNode?(b=a,k=b.rootNode):a&&f.isObject(a)&&!("nodeType"in a)?b=a:k=a;k=k?e.byId(k):h.body();var b=b||{},l=b.template?{template:!0}:{},g=[],j=this,m=this._scanAmd(k,b).then(function(){return j.scan(k,b)}).then(function(a){return g=g.concat(j._instantiate(a,l,b))}).otherwise(function(a){throw a;
});f.mixin(g,m);return g}};j.parser=A;b.parseOnLoad&&p(100,A,"parse");return A})},"ws/address/AddressModel":function(){define("ws/address/AddressModel",["dojo/_base/declare","dojo","ws/address/record","ws/io","ws/lang"],function(g,j,f){var a=g(null,{DELIMITER_RECORD:"\u0001",DELIMITER_FIELD:"\u0002",constructor:function(a,b,f,l){this._data=a;this._compareData=a.toLowerCase();j.mixin(this,b);this.topContactsDL=null;this.topContactsEnabled=f;this.topContactsDLName=l;this.indices={};this.getIndex();
this._deletedRecordOffsets=[];this.undoItem=null;this.abHasDistroList=-1!=this._compareData.indexOf(this.DISTROLIST_ENTRY);this.getTopContactsInfo();this.topContactsIndex=this.getTopContactsIndex()},getRecordAtOffset:function(a){var a=a+1,b=this._data.indexOf(this.DELIMITER_RECORD,a),a=-1==b?this._data.substr(a):this._data.substr(a,b-a);return new f(this,a)},getOffsetOfUid:function(a){var b=this._data.indexOf(this.DELIMITER_RECORD+a+this.DELIMITER_FIELD);-1==b&&(b=this._data.indexOf(this.DELIMITER_RECORD+
a));return b},getUidOfOffset:function(a){return this._data.substr(a+1,this._data.indexOf(this.DELIMITER_FIELD,a)-a-1)},getIndex:function(a,b){a||(a="base");this.indices[a]||(this.indices[a]=b?this.buildTypedIndex(b):this.buildIndex());return this.indices[a]},buildIndex:function(){var a=0,b={offsets:[]};if(!this._data)return b;for(;-1!=a;)b.offsets.push(a),a=this._data.indexOf(this.DELIMITER_RECORD,a+1);return b},buildTypedIndex:function(a){for(var b=[],f=0;f<a.length;f++)b.push(this._getMatches("base",
null,this.DELIMITER_FIELD+a[f]+this.DELIMITER_FIELD));for(var l=0,f=0;f<b.length;f++)l+=b[f].offsets.length;for(var a={offsets:[],fields:[],typeIndex:a},g,m,q=j.map(b,function(){return 0});a.offsets.length<l;){g=-1;for(f=0;f<b.length;f++)if(q[f]<b[f].offsets.length&&(-1==g||b[f].offsets[q[f]]<g))g=b[f].offsets[q[f]],m=f;a.offsets.push(g);a.fields.push(m);q[m]+=1}return a},getTopContactsInfo:function(){if(this.abHasDistroList&&this.topContactsEnabled&&this.topContactsDLName){var a=this.getIndex();
if(a&&a.offsets&&0<a.offsets.length)for(var b=0;b<a.offsets.length;b++){var f=this.getRecordAtOffset(a.offsets[b]);if(f&&"d"==f.bType&&f.name==this.topContactsDLName){this.topContactsDL=f;this.topContactsDLOffset=a.offsets[b];break}}}},getTopContactsIndex:function(){var a={offsets:[]},b=this.getIndex();if(b&&this.topContactsDL)for(var f=0;f<b.offsets.length;f++){var l=this.getRecordAtOffset(b.offsets[f]);l&&this.isTopContact(l)&&a.offsets.push(b.offsets[f])}return a},isTopContact:function(a){if(!this.topContactsDL||
!a)return!1;if("c"==a.bType){if(a.name==this.topContactsDL.name)return!0;for(var b=this.topContactsDL.contactUids.split(","),f=0;f<b.length;f++)if(b[f]==a.uid)return!0}return!1},hasTopContacts:function(){return this.topContactsDL?!0:!1},getMatches:function(a,b,f,l){var f=f.toLowerCase(),l=(l?"":this.DELIMITER_FIELD)+f,l=this._getMatches(a,b,l),g=!1;if(this.abHasDistroList){a=this._getMatches(a,b,", "+f);for(b=0;b<a.offsets.length;b++){g=!1;for(f=0;f<l.offsets.length;f++)a.offsets[b]==l.offsets[f]&&
(g=!0);if(!g)l.offsets=l.offsets.concat(a.offsets),l.fields=l.fields.concat(a.fields)}}this._resortIndexWithTopContactsFirst(l);return l},getMatchesByFieldType:function(a,b,f,l){return this._getMatches(a,b,this.DELIMITER_FIELD+f+this.DELIMITER_FIELD+l.toLowerCase()+this.DELIMITER_FIELD)},setUpExcludeFields:function(){excludeList="CONTACT_CONTACTTYPE,CONTACT_PHONE1TYPE,CONTACT_PHONE2TYPE,CONTACT_PHONE3TYPE,CONTACT_PHONE4TYPE,CONTACT_PHONE5TYPE".split(",");this.excludeFields={};for(var a=0;a<excludeList.length;a++)"string"===
typeof this[excludeList[a]]&&(this.excludeFields[this.DELIMITER_FIELD+this[excludeList[a]]+this.DELIMITER_FIELD]=!0)},_getMatches:function(a,b,f){this.excludeFields||this.setUpExcludeFields();for(var a=this.getIndex(a||"base",b),b={offsets:[],fields:[]},l=a.offsets[0]-1,g=0,j=a.offsets.length;-1!=(l=this._compareData.indexOf(f,l+1));)if("string"===typeof f&&f.length&&2<=l&&this.excludeFields&&this.excludeFields[this._compareData.substr(l-2,3)])l+=f.length;else{for(;a.offsets[g]<l&&g<j;)g++;var q=
g-1,s=a.offsets[q],o=this._compareData.indexOf(this.DELIMITER_RECORD,s+1);if(!(-1!=o&&o<l)){if(0<f.indexOf(this.DISTROLIST_ENTRY)){for(var u=-1,p=l-2;0<=p;p--)if(this._compareData.charAt(p)==this.DELIMITER_FIELD){u=p;break}if("0"==this._compareData.substring(u+1,l))continue}if(a.fields){l=[];for(u=[];a.offsets[q]==s;){p=-1!=o?this._compareData.substring(s+1,o):this._compareData.substring(s+1);if(-1<p.indexOf(this.DISTROLIST_ENTRY,0)){var v=p.indexOf(this.DISTROLIST_NAME,0),w=p.indexOf(this.DELIMITER_FIELD,
v+2);if(-1==p.substring(v+1,w).indexOf(f))break}u.unshift(s);l.unshift(a.fields[q]);q--}b.offsets.push.apply(b.offsets,u);b.fields.push.apply(b.fields,l)}else b.offsets.push(s);if(g==j)break;l=a.offsets[g]}}this._removeOffsetsFromIndex(b,this._deletedRecordOffsets);this._resortIndexWithTopContactsFirst(b);return b},getRolodex:function(a,b,f){a=this.getIndex(a,b);if(a.rolodex&&this.rolodexIsCurrent)return a.rolodex;a.rolodex=[];for(var b={},l=0;l<ws.string.alphabet.length;l++)b[ws.string.alphabet.charAt(l)]=
-1;for(var g=l=0;l<a.offsets.length;){var j=a.offsets[l],q=l+1>=a.offsets.length?-1:a.offsets[l+1];if(j==q)l++;else{if(j=this._compareData.substring(j,-1==q?this._compareData.length:q))if(j=this._getNextOffsetForRolodexTypes(f,j),-1!=j.nextOffset)j=j.nextLetter,-1==b[j]&&(b[j]=g);l++;g=l}}for(l=0;l<ws.string.alphabet.length;l++)j=ws.string.alphabet.charAt(l),a.rolodex.push(b[j]);this.rolodexIsCurrent=!0;return a.rolodex},_getNextOffsetForRolodexTypes:function(a,b){var f=-1,l,g="",j=b.indexOf(this.CONTACT_SNAME);
-1==j&&(j=b.indexOf(this.CONTACT_EMAIL1));-1==j&&(j=b.indexOf(this.CONTACT_EMAIL2));-1==j&&(l=-1!=b.indexOf(this.DELIMITER_FIELD+this.DISTROLIST_NAME+this.DELIMITER_FIELD));if(l){var q=b.indexOf(this.DISTROLIST_COUNT)+2;"0"!=b.charAt(q)&&(q=this.DELIMITER_FIELD+this.DISTROLIST_NAME+this.DELIMITER_FIELD,f=b.indexOf(q),g=b.substring(f+q.length,f+q.length+1).toLowerCase())}else{a.primary&&(q=this.DELIMITER_FIELD+a.primary+this.DELIMITER_FIELD,f=b.indexOf(q));-1==f&&a.secondary&&(q=this.DELIMITER_FIELD+
a.secondary+this.DELIMITER_FIELD,f=b.indexOf(q));if(-1==f&&a.other.length)for(l=0;l<a.other.length;){q=this.DELIMITER_FIELD+a.other[l]+this.DELIMITER_FIELD;f=b.indexOf(q);if(-1<f)break;l++}-1!=f&&(g=b.substring(f+q.length,f+q.length+1).toLowerCase())}return{nextOffset:f,nextLetter:g}},deleteRecordsByOffset:function(a){for(var b in this.indices)this._removeOffsetsFromIndex(this.indices[b],a);if(this.topContactsDLOffset&&-1!=j.indexOf(a,this.topContactsDLOffset))this.topContactsDLOffset=this.topContactsDL=
this.topContactsIndex=null;this.topContactsIndex&&0<this.topContactsIndex.offsets.length&&this._removeOffsetsFromIndex(this.topContactsIndex,a);this._deletedRecordOffsets.push.apply(this._deletedRecordOffsets,a)},_resortIndexWithTopContactsFirst:function(a){if(a&&a.offsets&&a.offsets.length&&this.topContactsIndex&&this.topContactsIndex.offsets.length)for(var b=0,f=0;0<a.offsets.length&&f<a.offsets.length;){if(-1!=j.indexOf(this.topContactsIndex.offsets,a.offsets[f])){if(this.topContactsDL&&a.offsets[f]==
this.topContactsDLOffset){a.offsets.splice(f,1);a.fields&&0<a.fields.length&&a.fields.splice(f,1);continue}var l=a.offsets[f];a.offsets.splice(f,1);a.offsets.splice(b,0,l);a.fields&&0<a.fields.length&&(l=a.fields[f],a.fields.splice(f,1),a.fields.splice(b,0,l));b++}f++}},_removeOffsetsFromIndex:function(a,b){if(b.length)for(var f,l=0;l<b.length;l++)for(;-1!=(f=j.indexOf(a.offsets,b[l]));)a.offsets.splice(f,1),a.fields&&a.fields.splice(f,1)}}),b=g(null,{sortByTypes:"None,FirstLastNick,LastFirstNick,NickFirstLast,PreferredEmail,ScreenName,Email1,Email2,PreferredPhone,Cellular,Fax,HomePhone,Pager,WorkPhone,LastFirstEmailScreenNamePhone,FirstLastEmailScreenNamePhone".split(","),
sortByTypePrefMap:{FirstLastNick:"Name",LastFirstNick:"Name",NickFirstLast:"Name",PreferredEmail:"PreferredEmail",LastFirstEmailScreenNamePhone:"LastFirstEmailScreenNamePhone",FirstLastEmailScreenNamePhone:"FirstLastEmailScreenNamePhone"},sortDirectionTypes:["Ascending","Descending"],constructor:function(a){this.hash="";this.sortBy=Settings.AddressNameSortOrder?Settings.AddressNameSortOrder:Config.DefaultAddressNameSortOrder;this.oldSortBy=Config.DefaultAddressNameSortOrder;this.oldSortDirection=
this.sortDirection=this.sortDirectionTypes[0];this.errorState=this.loadDataInProgress=this.isSorted=!1;this.categories=null;this.initLoadFinished=!1;if(a&&a.loadData)ws.WebSuite&&ws.WebSuite.initialized&&!ws.WebSuite.deferredInitComplete?(this.waitForDeferredInit=!0,j.subscribe("WSDeferredInit",this,"deferredInit")):this.loadData();j.subscribe("SettingsChanged/General",this,j.hitch(this,"loadData",!0))},loadData:function(a){if(!this.waitForDeferredInit&&!this.loadDataInProgress){this.loadDataInProgress=
!0;if(a)this.sortBy=Settings.AddressNameSortOrder?Settings.AddressNameSortOrder:Config.DefaultAddressNameSortOrder;if("LastFirstNick"==this.sortBy)this.sortBy="LastFirstEmailScreenNamePhone";else if("LastFirstNick"==this.sortBy)this.sortBy="FirstLastEmailScreenNamePhone";if(this.sortBy!=this.oldSortBy||this.sortDirection!=this.oldSortDirection||this.isSorted||!a)this._autoCompleteContacts({hash:this.hash,sortBy:this.sortBy,sortDirection:this.sortDirection},!0),this.oldSortBy=this.sortBy,this.oldSortDirection=
this.sortDirection;else if(a)this.loadDataInProgress=!1}},sortData:function(a,b){if(a&&this.sortDirection&&!(!a in this.sortByTypePrefMap)){if("LastFirstNick"==this.sortBy)this.sortBy="LastFirstEmailScreenNamePhone";else if("FirstLastNick"==this.sortBy)this.sortBy="FirstLastEmailScreenNamePhone";if(this.sortBy!=a||this.sortDirection!=b)this.sortBy=a,this.sortDirection=b,this.isSorted=!0,this._autoCompleteContacts({sortBy:this.sortBy,sortDirection:this.sortDirection},!0);else if("FirstLastEmailScreenNamePhone"==
this.sortBy)this.isSorted=!0,j.publish("ws.address.AddressModel.coreUpdated",[!0])}},_autoCompleteContacts:function(b,h){var f={action:"AutoCompleteContacts",content:b?b:{},async:Settings.AsynchronousAddressBook?!0:!1,load:j.hitch(this,function(b){if("listString"in b){this.hash=b.hash;this.unorderedCategories=b.categories;this.userCategories=[];this.categories=[];for(var e=0,f=0;f<this.unorderedCategories.length;f++)switch(this.unorderedCategories[f]){case "Family":this.categories[0]="Family";break;
case "Friends":this.categories[1]="Friends";break;case "Co-Workers":this.categories[2]="Co-Workers";break;case "Auto-Added":this.categories[3]="Auto-Added";break;case "Uncategorized":this.categories[4]="Uncategorized";break;case "General":this.categories[5]="General";break;default:this.userCategories[e]=this.unorderedCategories[f],e++}for(e=0;e<this.userCategories.length;e++)this.categories.push(this.userCategories[e]);this.topContactsEnabled=b.tcenabled&&Config.TopContactsEnabled&&Settings.EnableTopContacts||
!1;this.topContactsDLName=b.tcname||"";this.loadDataInProgress=!1;this.initLoadFinished=!0;h?(this.abListCustomSort=new a(b.listString,b.listFields,this.topContactsEnabled,this.topContactsDLName),j.publish("ws.address.AddressModel.coreUpdated",[h]),this.coreUpdated(h)):(this.abList=new a(b.listString,b.listFields,this.topContactsEnabled,this.topContactsDLName),j.publish("ws.address.AddressModel.coreUpdated"),this.coreUpdated())}}),error:j.hitch(this,function(){this.loadDataInProgress=!1;if(!this.abList)this.errorState=
!0,j.publish("ws.address.AddressModel.loadError");this.initLoadFinished=!0})};ws.io.rpc(f)},coreUpdated:function(){},isLoading:function(){return!this.abList&&(this.waitForDeferredInit||this.loadDataInProgress)},deferredInit:function(){this.waitForDeferredInit=!1;this.loadData()}});return g("ws.address.AddressModel",null,{indexName:null,indexTypes:null,constructor:function(a){a=a||{};if(!this.core)ws.address.AddressModel.prototype.core=new b({loadData:Config.EnableAutoCompleteContactsOnStartUp});this._abList=
a.sortable?"abListCustomSort":"abList";this.filteredIndex={offsets:[],fields:[]};this.searchFilteredIndex={offsets:[],fields:[]};this.categoryFilteredIndex={offsets:[],fields:[]};this._isSortableListModel=a.sortable;this._isFullTextSearchable=a.fullTextSearchable;Config.EnableAutoCompleteContactsOnStartUp||a.fetchDataOnInit&&this.initData();this.selectedUids={};j.subscribe("ws.address.AddressModel.coreUpdated",this,"_coreUpdated");j.subscribe("ws.address.AddressModel.loadError",this,"modelUpdated");
j.subscribe("SettingsChanged/AddressNameDisplayFormat",j.hitch(this,function(){if(this.core[this._abList])this.core[this._abList].rolodexIsCurrent=!1}));this._setIndexTypes()},getActiveAbList:function(){return this.core?this.core[this._abList]:null},initData:function(){this.getActiveAbList()||this.core.loadData()},deferredInit:function(){this.core.deferredInit()},isLoading:function(){return this.core.isLoading()},isErrorState:function(){return this.core.errorState},_coreUpdated:function(a,b){if(this._isSortableListModel)this._abList=
"abListCustomSort",this._updateViews();else if(b)this._abList="abList",this._updateViews()},_updateViews:function(){this._setIndexTypes();!this.currentTextSearch&&!this.currentCategorySearch?this.modelUpdated(!0):(this.currentTextSearch&&this.search(this.currentTextSearch,!0),this.currentCategorySearch&&this.categoryFilter(this.currentCategorySearch,!0))},modelUpdated:function(){},change:function(){},getCategories:function(){return this.core.categories},getUnorderedCategories:function(){return this.core.unorderedCategories},
getCurrentCategorySearchString:function(){var a=null;if("undefined"==typeof this.currentCategorySearch)a=null;else if(null!==this.currentCategorySearch&&""!=this.currentCategorySearch&&null!=this.getCategories())try{a=this.getUnorderedCategories()[this.currentCategorySearch]}catch(b){a=null}return a},getRow:function(a){return this.core[this._abList].getRecordAtOffset(this.getOffsetForRow(a))},getSearchString:function(){return this.currentTextSearch},searchDLName:function(a){var b=null;if(!this.core||
!this.core[this._abList])return null;a&&(b=this.core[this._abList].getMatchesByFieldType(null,null,this.core[this._abList].DISTROLIST_NAME,a));for(var f=0;f<b.offsets.length;f++){var l=this.core[this._abList].getRecordAtOffset(b.offsets[f]);if("d"==l.bType&&l.name.toLowerCase()==a.toLowerCase())return l}return null},search:function(a,b){this.currentTextSearch=a;this.selectedUids={};if(this.core[this._abList]){if(null!=a)this.searchFilteredIndex=this.core[this._abList].getMatches(this.indexName,this.indexTypes,
a,this._isFullTextSearchable);this.handleFilters(b)}},categoryFilter:function(a,b){this.selectedUids={};this.currentCategorySearch=a=a.toString();if(this.core[this._abList]){if(a&&this.core[this._abList])this.categoryFilteredIndex=a==Config.Strings.TopContacts_DisplayName?this.core[this._abList].topContactsIndex:this.core[this._abList].getMatchesByFieldType(this.indexName,this.indexTypes,this.core[this._abList].CONTACT_CATEGORY,a);this.handleFilters(b)}},handleFilters:function(a){if(this.currentTextSearch&&
this.currentCategorySearch)this.filteredIndex={offsets:ws.lang.intersection(this.searchFilteredIndex.offsets,this.categoryFilteredIndex.offsets)};else if(this.currentTextSearch)this.filteredIndex=this.searchFilteredIndex;else if(this.currentCategorySearch)this.filteredIndex=this.categoryFilteredIndex;this.modelUpdated(a)},getRecordByUID:function(a){return this.getRow(this.getRowForUid(a))},getRecordByScreenName:function(a){if(this.core[this._abList])for(var b=this.core[this._abList].getMatchesByFieldType(null,
null,this.core[this._abList].CONTACT_SNAME,a),f=0;f<b.offsets.length;f++){var l=this.core[this._abList].getRecordAtOffset(b.offsets[f]);if(l.screenName.toLowerCase()==a.toLowerCase())return l}return null},getRecordByEmail:function(a){if(!a)return null;if(this.core[this._abList]){for(var b=this.core[this._abList].getMatchesByFieldType(null,null,this.core[this._abList].CONTACT_EMAIL1,a),f=0;f<b.offsets.length;f++){var l=this.core[this._abList].getRecordAtOffset(b.offsets[f]);if(l.email1&&l.email1.toLowerCase()==
a.toLowerCase())return l}b=this.core[this._abList].getMatchesByFieldType(null,null,this.core[this._abList].CONTACT_EMAIL2,a);for(f=0;f<b.offsets.length;f++)if(l=this.core[this._abList].getRecordAtOffset(b.offsets[f]),l.email2&&l.email2.toLowerCase()==a.toLowerCase())return l}return(a=ws.presence.parseEmailAddress(a))&&-1!=j.indexOf(Config.KnownDomains,a.domain)?this.getRecordByScreenName(a.name):null},clearRolodex:function(){var a=this.core[this._abList];if(a)a.rolodexIsCurrent=!1},getRolodex:function(){var a=
Settings.AddressNameSortOrder;if(this.core[this._abList]){var b={};b.primary=0==a.indexOf("First")?this.core[this._abList].CONTACT_FNAME:this.core[this._abList].CONTACT_LNAME;b.secondary=0==a.indexOf("First")?this.core[this._abList].CONTACT_LNAME:this.core[this._abList].CONTACT_FNAME;b.other=[];this.core[this._abList].CONTACT_NNAME&&b.other.push(this.core[this._abList].CONTACT_NNAME);this.core[this._abList].CONTACT_EMAIL1&&b.other.push(this.core[this._abList].CONTACT_EMAIL1);this.core[this._abList].EMAIL2&&
b.other.push(this.core[this._abList].CONTACT_EMAIL2);this.core[this._abList].CONTACT_SNAME&&b.other.push(this.core[this._abList].CONTACT_SNAME);return this.core[this._abList].getRolodex(this.indexName,this.indexTypes,b)}a=[];for(b=0;b<ws.string.alphabet.length;b++)a[b]=-1;return a},deleteAddresses:function(a){if("undefined"!=typeof a.rows)a.uids=this.getUidsForRows(a.rows);this._addressAction("Delete",a);this._removeAddressesLocal(a.uids)},getContact:function(a){a.uids=[a.uid.toString()];this._addressAction("GetContact",
a)},getDistributionList:function(a){a.uids=[a.uid.toString()];this._addressAction("GetDistributionList",a)},createOrModifyContact:function(a){a.uids=[a.uid.toString()];this._addressAction("CreateOrModifyContact",a);this.core.loadData()},createOrModifyDistributionList:function(a){a.uids=[a.uid.toString()];this._addressAction("CreateOrModifyDistributionList",a);this.core.loadData()},importContacts:function(a){this._addressAction("Import",a);this.core.loadData()},exportContacts:function(a){this._addressAction("Export",
a);this.core.loadData()},addAddressToTopContacts:function(a){this._addressAction("AddAddressToTopContacts",a);this.core.loadData()},addContactToTopContacts:function(a){a.uids=[a.uid.toString()];this._addressAction("AddContactToTopContacts",a);this.core.loadData()},addAddressToNegativeTopContacts:function(a){this._addressAction("AddAddressToNegativeTopContacts",a)},addContactToNegativeTopContacts:function(a){a.uids=[a.uid.toString()];this._addressAction("AddContactToNegativeTopContacts",a)},removeAddressFromTopContacts:function(a){this._addressAction("RemoveAddressFromTopContacts",
a);this.core.loadData()},removeContactFromTopContacts:function(a){a.uids=[a.uid.toString()];this._addressAction("RemoveContactFromTopContacts",a);this.core.loadData()},_addressAction:function(a,b){b.addressAction=a;var f=b.formNode;delete b.formNode;ws.io.rpc({action:"AddressAction",content:b,formNode:f,async:Settings.AsynchronousAddressBook?!0:!1,load:b.load,error:b.error})},_removeAddressesLocal:function(a){if(this.core[this._abList]){var b=this.getOffsetsForUids(a,this._abList);this.core[this._abList].deleteRecordsByOffset(b);
"abListCustomSort"==this._abList&&this.core.abList?(b=this.getOffsetsForUids(a,"abList"),this.core.abList.deleteRecordsByOffset(b)):"abList"==this._abList&&this.core.abListCustomSort&&(b=this.getOffsetsForUids(a,"abListCustomSort"),this.core.abListCustomSort.deleteRecordsByOffset(b));j.forEach(a,function(a){a in this.selectedUids&&delete this.selectedUids[a]},this);this.core.abListCustomSort?j.publish("ws.address.AddressModel.coreUpdated",[!0]):j.publish("ws.address.AddressModel.coreUpdated");this.rolodexIsCurrent=
!1}},undoDeletedItem:function(){var a=this.getUndoItem();if(a)a.uid=0,"composeValue"in a?(a.contactUids=j.map(a.contacts,function(a){return a.uid}),a.error=function(){},this.createOrModifyDistributionList(a)):(a.error=function(){},this.createOrModifyContact(a)),this.setUndoItem()},setUndoItem:function(a){this.core.undoItem=a?a:null},getUndoItem:function(){return this.core.undoItem},_setIndexTypes:function(){},_getFullIndex:function(){return this.currentTextSearch||this.currentCategorySearch?this.filteredIndex:
this.core[this._abList]?this.core[this._abList].getIndex(this.indexName,this.indexTypes):{offsets:[],fields:[]}},_getOffsetIndex:function(){return this._getFullIndex().offsets},getOffsetForRow:function(a){return this._getOffsetIndex()[a]},getOffsetsForUids:function(a,b){for(var f=[],l=b?b:this._abList,g=0;g<a.length;g++)f.push(this.core[l].getOffsetOfUid(a[g]));return f},getUidForRow:function(a){return this.core[this._abList].getRecordAtOffset(this._getOffsetIndex()[a]).uid},getRowForUid:function(a){a=
this.core[this._abList].getOffsetOfUid(a);return-1!=a?j.indexOf(this._getOffsetIndex(),a):-1},getUidsForRows:function(a){var b=[];if(this.core[this._abList])for(var f=0;f<a.length;f++)b.push(this.getUidForRow(a[f]));return b},getRowsForUids:function(a){var b=[];if(this.core[this._abList])for(var f=0;f<a.length;f++)b.push(this.getRowForUid(a[f]));return b},getRowCount:function(){return this._getOffsetIndex().length},toggleSelectRow:function(a,b){this.core[this._abList]&&this.toggleSelectUid(this.getUidForRow(a),
b)},toggleSelectUid:function(a,b){(b="undefined"==typeof b?!this.isSelected(a):b)?this.selectedUids[a]=!0:delete this.selectedUids[a];this.change(this.getRowForUid(a))},selectRange:function(a,b,f){for(;a<=b;a++)this.toggleSelectRow(a,f);return!0},selectAll:function(){this.selectedUids={};for(var a=this._getOffsetIndex(),b=0;b<a.length;b++)this.selectedUids[this.core[this._abList].getUidOfOffset(a[b])]=!0;this.modelUpdated();return!0},deselectAll:function(){this.selectedUids={};this.modelUpdated()},
getSelectedUids:function(){var a=[],b;for(b in this.selectedUids)a.push(b);return a},isSelected:function(a){return a in this.selectedUids},isAllInViewSelected:function(){return this.isAllSelected()},isAllSelected:function(){var a=this.getSelectedUids();return 0<a.length&&this._getOffsetIndex().length==a.length},isAllSelReal:function(){return this.isAllSelected()},isAnySelected:function(){return!ws.lang.isEmptyObject(this.selectedUids)},isTopContact:function(a){return this.core[this._abList].isTopContact(this.core[this._abList].getRecordAtOffset(this._getOffsetIndex()[a]))},
isUidTopContact:function(a){return this.core[this._abList].isTopContact(this.getRecordByUID(a))},topContactsEnabled:function(){return this.core&&this.core[this._abList]&&this.core[this._abList].topContactsEnabled?!0:!1},hasTopContacts:function(){return!this.topContactsEnabled()?!1:this.core[this._abList].hasTopContacts()},onMainWindowClosed:function(){ws.address.AddressModel.prototype.core=new ws.address.AddressModelCore({loadData:Config.EnableAutoCompleteContactsOnStartUp});ws.address.AddressModel.prototype.core.deferredInit()}})})},
"dojo/date/stamp":function(){define("dojo/date/stamp",["../_base/lang","../_base/array"],function(g,j){var f={};g.setObject("dojo.date.stamp",f);f.fromISOString=function(a,b){if(!f._isoRegExp)f._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;var e=f._isoRegExp.exec(a),h=null;if(e){e.shift();e[1]&&e[1]--;e[6]&&(e[6]*=1E3);b&&(b=new Date(b),j.forEach(j.map("FullYear,Month,Date,Hours,Minutes,Seconds,Milliseconds".split(","),function(a){return b["get"+
a]()}),function(a,b){e[b]=e[b]||a}));h=new Date(e[0]||1970,e[1]||0,e[2]||1,e[3]||0,e[4]||0,e[5]||0,e[6]||0);100>e[0]&&h.setFullYear(e[0]||1970);var k=0,l=e[7]&&e[7].charAt(0);"Z"!=l&&(k=60*(e[8]||0)+(Number(e[9])||0),"-"!=l&&(k*=-1));l&&(k-=h.getTimezoneOffset());k&&h.setTime(h.getTime()+6E4*k)}return h};f.toISOString=function(a,b){var e=function(a){return 10>a?"0"+a:a},b=b||{},h=[],f=b.zulu?"getUTC":"get",l="";"time"!=b.selector&&(l=a[f+"FullYear"](),l=["0000".substr((l+"").length)+l,e(a[f+"Month"]()+
1),e(a[f+"Date"]())].join("-"));h.push(l);if("date"!=b.selector){l=[e(a[f+"Hours"]()),e(a[f+"Minutes"]()),e(a[f+"Seconds"]())].join(":");f=a[f+"Milliseconds"]();b.milliseconds&&(l+="."+(100>f?"0":"")+e(f));if(b.zulu)l+="Z";else if("time"!=b.selector)var f=a.getTimezoneOffset(),g=Math.abs(f),l=l+((0<f?"-":"+")+e(Math.floor(g/60))+":"+e(g%60));h.push(l)}return h.join("T")};return f})},"dojo/mouse":function(){define("dojo/mouse",["./_base/kernel","./on","./has","./dom","./_base/window"],function(g,j,
f,a,b){function e(b,f){var l=function(e,l){return j(e,b,function(b){if(f)return f(b,l);if(!a.isDescendant(b.relatedTarget,e))return l.call(this,b)})};l.bubble=function(a){return e(b,function(b,e){var f=a(b.target),h=b.relatedTarget;if(f&&f!=(h&&1==h.nodeType&&a(h)))return e.call(f,b)})};return l}f.add("dom-quirks",b.doc&&"BackCompat"==b.doc.compatMode);f.add("events-mouseenter",b.doc&&"onmouseenter"in b.doc.createElement("div"));f.add("events-mousewheel",b.doc&&"onmousewheel"in b.doc);b=f("dom-quirks")&&
f("ie")||!f("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(a,b){return a.button&b},isLeft:function(a){return a.button&1},isMiddle:function(a){return a.button&4},isRight:function(a){return a.button&2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(a,b){return a.button==b},isLeft:function(a){return 0==a.button},isMiddle:function(a){return 1==a.button},isRight:function(a){return 2==a.button}};g.mouseButtons=b;g=f("events-mousewheel")?"mousewheel":function(a,b){return j(a,"DOMMouseScroll",
function(a){a.wheelDelta=-a.detail;b.call(this,a)})};return{_eventHandler:e,enter:e("mouseover"),leave:e("mouseout"),wheel:g,isLeft:b.isLeft,isMiddle:b.isMiddle,isRight:b.isRight}})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(g,j,f,a){return g("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(a){var e=this._attrPairNames;return e[a]?e[a]:e[a]={s:"_"+a+"Setter",g:"_"+a+"Getter"}},postscript:function(a){a&&this.set(a)},_get:function(a,
e){return"function"===typeof this[e.g]?this[e.g]():this[a]},get:function(a){return this._get(a,this._getAttrNames(a))},set:function(b,e){if("object"===typeof b){for(var f in b)b.hasOwnProperty(f)&&"_watchCallbacks"!=f&&this.set(f,b[f]);return this}f=this._getAttrNames(b);var k=this._get(b,f);f=this[f.s];var l;"function"===typeof f?l=f.apply(this,Array.prototype.slice.call(arguments,1)):this[b]=e;if(this._watchCallbacks){var g=this;a(l,function(){g._watchCallbacks(b,k,e)})}return this},_changeAttrValue:function(a,
e){var f=this.get(a);this[a]=e;this._watchCallbacks&&this._watchCallbacks(a,f,e);return this},watch:function(a,e){var h=this._watchCallbacks;if(!h)var k=this,h=this._watchCallbacks=function(a,b,e,f){var l=function(f){if(f)for(var f=f.slice(),h=0,l=f.length;h<l;h++)f[h].call(k,a,b,e)};l(h["_"+a]);f||l(h["*"])};!e&&"function"===typeof a?(e=a,a="*"):a="_"+a;var l=h[a];"object"!==typeof l&&(l=h[a]=[]);l.push(e);var g={};g.unwatch=g.remove=function(){var a=f.indexOf(l,e);-1<a&&l.splice(a,1)};return g}})})},
"dijit/layout/SplitContainer":function(){define("dijit/layout/SplitContainer","dojo/_base/array,dojo/cookie,dojo/_base/declare,dojo/dom,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/_base/event,dojo/_base/kernel,dojo/_base/lang,dojo/on,dojo/sniff,../registry,../_WidgetBase,./_LayoutWidget".split(","),function(g,j,f,a,b,e,h,k,l,n,m,q,s,o,u,p){f=f("dijit.layout.SplitContainer",p,{constructor:function(){n.deprecated("dijit.layout.SplitContainer is deprecated","use BorderContainer with splitter instead",
2)},activeSizing:!1,sizerWidth:7,orientation:"horizontal",persist:!0,baseClass:"dijitSplitContainer",postMixInProperties:function(){this.inherited("postMixInProperties",arguments);this.isHorizontal="horizontal"==this.orientation},postCreate:function(){this.inherited(arguments);this.sizers=[];if(s("mozilla"))this.domNode.style.overflow="-moz-scrollbars-none";if("object"==typeof this.sizerWidth)try{this.sizerWidth=parseInt(this.sizerWidth.toString())}catch(b){this.sizerWidth=7}var e=this.ownerDocument.createElement("div");
this.virtualSizer=e;e.style.position="relative";e.style.zIndex=10;e.className=this.isHorizontal?"dijitSplitContainerVirtualSizerH":"dijitSplitContainerVirtualSizerV";this.domNode.appendChild(e);a.setSelectable(e,!1)},destroy:function(){delete this.virtualSizer;if(this._ownconnects)for(var a;a=this._ownconnects.pop();)a.remove();this.inherited(arguments)},startup:function(){this._started||(g.forEach(this.getChildren(),function(a,b,e){this._setupChild(a);b<e.length-1&&this._addSizer()},this),this.persist&&
this._restoreState(),this.inherited(arguments))},_setupChild:function(a){this.inherited(arguments);a.domNode.style.position="absolute";b.add(a.domNode,"dijitSplitPane")},_onSizerMouseDown:function(a){if(a.target.id){for(var b=0;b<this.sizers.length&&!(this.sizers[b].id==a.target.id);b++);b<this.sizers.length&&this.beginSizing(a,b)}},_addSizer:function(b){var b=void 0===b?this.sizers.length:b,e=this.ownerDocument.createElement("div");e.id=o.getUniqueId("dijit_layout_SplitterContainer_Splitter");this.sizers.splice(b,
0,e);this.domNode.appendChild(e);e.className=this.isHorizontal?"dijitSplitContainerSizerH":"dijitSplitContainerSizerV";b=this.ownerDocument.createElement("div");b.className="thumb";e.appendChild(b);this.connect(e,"onmousedown","_onSizerMouseDown");a.setSelectable(e,!1)},removeChild:function(a){if(this.sizers.length){var b=g.indexOf(this.getChildren(),a);-1!=b&&(b==this.sizers.length&&b--,e.destroy(this.sizers[b]),this.sizers.splice(b,1))}this.inherited(arguments);this._started&&this.layout()},addChild:function(a,
b){this.inherited(arguments);this._started&&(1<this.getChildren().length&&this._addSizer(b),this.layout())},layout:function(){this.paneWidth=this._contentBox.w;this.paneHeight=this._contentBox.h;var a=this.getChildren();if(a.length){var b=this.isHorizontal?this.paneWidth:this.paneHeight;1<a.length&&(b-=this.sizerWidth*(a.length-1));var e=0;g.forEach(a,function(a){e+=a.sizeShare});var f=b/e,h=0;g.forEach(a.slice(0,a.length-1),function(a){var b=Math.round(f*a.sizeShare);a.sizeActual=b;h+=b});a[a.length-
1].sizeActual=b-h;this._checkSizes();var k=0,l=a[0].sizeActual;this._movePanel(a[0],k,l);a[0].position=k;k+=l;this.sizers&&g.some(a.slice(1),function(a,b){if(!this.sizers[b])return!0;this._moveSlider(this.sizers[b],k,this.sizerWidth);this.sizers[b].position=k;k+=this.sizerWidth;l=a.sizeActual;this._movePanel(a,k,l);a.position=k;k+=l},this)}},_movePanel:function(a,b,e){this.isHorizontal?(a.domNode.style.left=b+"px",a.domNode.style.top=0,b={w:e,h:this.paneHeight}):(a.domNode.style.left=0,a.domNode.style.top=
b+"px",b={w:this.paneWidth,h:e});a.resize?a.resize(b):h.setMarginBox(a.domNode,b)},_moveSlider:function(a,b,e){this.isHorizontal?(a.style.left=b+"px",a.style.top=0,h.setMarginBox(a,{w:e,h:this.paneHeight})):(a.style.left=0,a.style.top=b+"px",h.setMarginBox(a,{w:this.paneWidth,h:e}))},_growPane:function(a,b){if(0<a&&b.sizeActual>b.sizeMin)b.sizeActual-b.sizeMin>a?(b.sizeActual-=a,a=0):(a-=b.sizeActual-b.sizeMin,b.sizeActual=b.sizeMin);return a},_checkSizes:function(){var a=0,b=0,e=this.getChildren();
g.forEach(e,function(e){b+=e.sizeActual;a+=e.sizeMin});if(a<=b){var f=0;g.forEach(e,function(a){if(a.sizeActual<a.sizeMin)f+=a.sizeMin-a.sizeActual,a.sizeActual=a.sizeMin});0<f&&(e=this.isDraggingLeft?e.reverse():e,g.forEach(e,function(a){f=this._growPane(f,a)},this))}else g.forEach(e,function(e){e.sizeActual=Math.round(b*(e.sizeMin/a))})},beginSizing:function(a,b){var f=this.getChildren();this.paneBefore=f[b];this.paneAfter=f[b+1];this.paneBefore.sizeBeforeDrag=this.paneBefore.sizeActual;this.paneAfter.sizeBeforeDrag=
this.paneAfter.sizeActual;this.paneAfter.positionBeforeDrag=this.paneAfter.position;this.isSizing=!0;this.sizingSplitter=this.sizers[b];this.sizingSplitter.positionBeforeDrag=k.get(this.sizingSplitter,this.isHorizontal?"left":"top");this.cover?this.cover.style.zIndex=5:this.cover=e.create("div",{style:{position:"absolute",zIndex:5,top:0,left:0,width:"100%",height:"100%"}},this.domNode);this.sizingSplitter.style.zIndex=6;this.startPoint=this.lastPoint=this.isHorizontal?a.pageX:a.pageY;this.maxDelta=
this.paneAfter.sizeActual-this.paneAfter.sizeMin;this.minDelta=-1*(this.paneBefore.sizeActual-this.paneBefore.sizeMin);this.activeSizing||this._showSizingLine();this._ownconnects=[q(this.ownerDocument.documentElement,"mousemove",m.hitch(this,"changeSizing")),q(this.ownerDocument.documentElement,"mouseup",m.hitch(this,"endSizing"))];l.stop(a)},changeSizing:function(a){if(this.isSizing){this.lastPoint=this.isHorizontal?a.pageX:a.pageY;var b=Math.max(Math.min(this.lastPoint-this.startPoint,this.maxDelta),
this.minDelta);this.activeSizing?this._updateSize(b):this._moveSizingLine(b);l.stop(a)}},endSizing:function(){if(this.isSizing){if(this.cover)this.cover.style.zIndex=-1;this.activeSizing||this._hideSizingLine();this._updateSize(Math.max(Math.min(this.lastPoint-this.startPoint,this.maxDelta),this.minDelta));this.isSizing=!1;this.persist&&this._saveState(this);for(var a;a=this._ownconnects.pop();)a.remove()}},_updateSize:function(a){this.paneBefore.sizeActual=this.paneBefore.sizeBeforeDrag+a;this.paneAfter.position=
this.paneAfter.positionBeforeDrag+a;this.paneAfter.sizeActual=this.paneAfter.sizeBeforeDrag-a;g.forEach(this.getChildren(),function(a){a.sizeShare=a.sizeActual});this._started&&this.layout()},_showSizingLine:function(){this._moveSizingLine(0);h.setMarginBox(this.virtualSizer,this.isHorizontal?{w:this.sizerWidth,h:this.paneHeight}:{w:this.paneWidth,h:this.sizerWidth});this.virtualSizer.style.display="block"},_hideSizingLine:function(){this.virtualSizer.style.display="none"},_moveSizingLine:function(a){k.set(this.virtualSizer,
this.isHorizontal?"left":"top",a+this.sizingSplitter.positionBeforeDrag+"px")},_getCookieName:function(a){return this.id+"_"+a},_restoreState:function(){g.forEach(this.getChildren(),function(a,b){var e=this._getCookieName(b);if(e=j(e))if(e=parseInt(e),"number"==typeof e)a.sizeShare=e},this)},_saveState:function(){this.persist&&g.forEach(this.getChildren(),function(a,b){j(this._getCookieName(b),a.sizeShare,{expires:365})},this)}});f.ChildWidgetProperties={sizeMin:10,sizeShare:10};m.extend(u,f.ChildWidgetProperties);
return f})},"ws/widget/WSModalPane":function(){define("ws/widget/WSModalPane","dojo/_base/declare,dojo/text!ws/widget/WSModalPane.css,dojo,dijit,dojo/window,dijit/_Widget".split(","),function(g,j,f,a,b,e){return g([e],{css:{templateString:j},destroyOnClose:!0,bg0pacity:0.6,bgZIndex:998,backgroundColor:"#000",startup:function(){this.createBG();f.isIE?setTimeout(f.hitch(this,function(){this.checkSize()}),0):this.checkSize()},createBG:function(){if(!this.bg)this.bg=f.create("div",{style:{position:"absolute",
left:0,top:0,height:"100%",width:"100%",zIndex:this.bgZIndex,backgroundColor:this.backgroundColor,opacity:this.bg0pacity}}),this.bgShowing=!1;if(!this.bgShowing)f.body().appendChild(this.bg),this.bgShowing=!0,this.bg.id=this.id+"bg",this.bgIframe=new a.BackgroundIframe(this.bg)},checkSize:function(){if(this.domNode&&"none"!=this.domNode.style.display){var a=b.getBox();this.domNode.style.height="auto";this.mb=f._getMarginSize(this.domNode);var e=(a.w-this.mb.w)/2,l=(a.h-this.mb.h)/2;10>l?(this.domNode.style.overflow=
"auto",this.domNode.style.height=Math.max(a.h-20,0)+"px",l=10):this.domNode.style.overflow="";this.domNode.style.left=e+"px";this.domNode.style.top=l+"px";this.bg.style.width=Math.max(a.w,0)+"px";this.bg.style.height=Math.max(a.h,0)+"px";setTimeout(f.hitch(this,function(){if(this.domNode)this.domNode.style.visibility="visible"}),0)}},show:function(){(!this.domNode.parentNode||!(this.domNode.parentNode.tagName&&"body"==this.domNode.parentNode.tagName.toLowerCase()))&&f.body().appendChild(this.domNode);
this.inherited(arguments);this.createBG();this.checkSize();this.domNode.style.visibility="visible";this.connect(window,"onresize","checkSize");this._onShow();f.publish("popup/open",[]);ws.WebSuite.isModalOpen=!0;this.domNode.focus()},hide:function(){this.bgIframe&&this.bgIframe.destroy();this.bg&&f._destroyElement(this.bg);this.bgShowing=!1;this.destroyOnClose?this.destroyRecursive():this.inherited(arguments);ws.WebSuite.isModalOpen=!1;f.isIE&&window.focus()}})})},"url:ws/address/PeopleApp.css":"",
"dojo/Evented":function(){define("dojo/Evented",["./aspect","./on"],function(g,j){function f(){}var a=g.after;f.prototype={on:function(b,e){return j.parse(this,b,e,function(b,f){return a(b,"on"+f,e,!0)})},emit:function(a,e){var f=[this];f.push.apply(f,arguments);return j.emit.apply(j,f)}};return f})},"ws/widget/Splitter":function(){define("ws/widget/Splitter","dojo/_base/declare,dojo/text!ws/widget/Splitter.css,dojo,dijit,dojo/window,dijit/_Widget,ws/html".split(","),function(g,j,f,a,b,e){return g([e],
{css:{templateString:j},orientation:"left",splitterWidth:1,splitterMargin:3,minWidth:0,maxWidth:400,prefWidth:0,collapseThreshhold:0,collapsable:!1,isCollapsed:!1,expandTitle:"",collapseTitle:"",startup:function(){this.isOrientationRight=!1;this.startY=this.startX=0;this.bounds=this.resizeNodeSize=this.resizeNode=this.size=null;this.domNode.style.position="absolute";this.domNode.className="wsSplitter "+this.orientation;f.marginBox(this.domNode,{w:this.splitterWidth+2*this.splitterMargin});this.visibleNode=
f.create("div",{className:"separator",style:{height:"100%",width:this.splitterWidth+"px",position:"absolute",left:this.splitterMargin+"px"}},this.domNode);if(this.collapsable)this.collapseNode=f.create("div",{className:"collapseButton",style:{position:"absolute",zIndex:this.domNode.style.zIndex+1}},this.domNode),this.connect(this.collapseNode,"onmousedown","onCollapse");this.setCursor();this.connect(this.domNode,"onmousedown","onMouseDown");this.connect(this.domNode,"onmousemove","setCursor")},addSizerFunc:function(a){this.sizerFunc=
a},addClickFunc:function(a){this.clickFunc=a},setCursor:function(){this.isDisabled?this.domNode.style.cursor="auto":"right"==this.orientation?(this.isOrientationRight=!0,this.domNode.style.cursor=9>f.isIE?"e-resize":"ew-resize"):(this.isOrientationRight=!1,this.domNode.style.cursor=9>f.isIE?"w-resize":"ew-resize")},setHeight:function(a){this.domNode.style.height=a+"px";this.visibleNode.style.height=a+"px"},isLeftMouseDown:function(a){return a&&"undefined"!=typeof a.which&&1==a.which||a&&"undefined"!=
typeof a.button&&1==a.button?!0:!1},onMouseDown:function(a){if(!this.isDisabled){this.startTime=+new Date;this.startPoint=a.pageX;this.startX=parseInt(this.domNode.offsetLeft)+this.splitterMargin;this.startY=parseInt(this.domNode.offsetTop);this.size={width:this.splitterWidth,height:f._getMarginSize(this.domNode).h};var b=null;if(this.isOrientationRight)for(b=this.domNode.nextSibling;b&&1!=b.nodeType;)b=b.nextSibling;else for(b=this.domNode.previousSibling;b&&1!=b.nodeType;)b=b.previousSibling;this.resizeNode=
b;this.resizeNodeSize={width:f._getMarginSize(this.resizeNode).w,height:f._getMarginSize(this.resizeNode).h};var e=b=0;this.isOrientationRight?(e=parseInt(this.domNode.offsetLeft)+this.size.width,e+=this.resizeNodeSize.width,b=e-this.maxWidth-this.size.width,e=e-this.minWidth-this.size.width):(e=parseInt(this.resizeNode.offsetLeft),b=e+this.minWidth,e+=this.maxWidth);this.bounds={minLeft:b,maxLeft:e};this.backdrop&&f._destroyElement(this.backdrop);b=ws.WebSuite.viewportSize;this.backdrop=f.create("div",
{className:"wsSplitterBackdrop",style:{width:b.w-2+"px",height:b.h-2+"px",zIndex:2099,cursor:this.domNode.style.cursor}},f.body());this.backdrop.tabIndex=-1;this.backdrop.focus();this.domNode.style.zIndex=2098;this.docHandles=[f.connect(this.backdrop,"onmousemove",this,"onMouseMove"),f.connect(this.backdrop,"onmouseup",this,"onMouseUp")];f.stopEvent(a)}},onCollapse:function(a){if(!this.isDisabled){this.killCapturedEvent(a);if(this.isCollapsed){this.isCollapsed=!1;a=b.getBox().w-this.minWidth;if(0>=
this.prefWidth)this.prefWidth=this.minWidth;var e=b.getBox().w-this.prefWidth;if(0>=e||e>a)e=a;this.domNode.style.left=e+"px";if(""!=this.collapseTitle&&this.collapseNode)this.collapseNode.title=this.collapseTitle}else{this.isCollapsed=!0;this.startX=parseInt(this.domNode.offsetLeft)+this.splitterMargin;this.startY=parseInt(this.domNode.offsetTop);this.size={width:f._getMarginSize(this.domNode).w-this.splitterMargin,height:f._getMarginSize(this.domNode).h};if(this.isOrientationRight){for(a=this.domNode.nextSibling;a&&
1!=a.nodeType;)a=a.nextSibling;this.resizeNode=a;this.resizeNodeSize={width:f._getMarginSize(this.resizeNode).w,height:f._getMarginSize(this.resizeNode).h}}a=b.getBox().w;f.isSafari&&(a-=5);this.domNode.style.left=a+"px";if(""!=this.expandTitle&&this.collapseNode)this.collapseNode.title=this.expandTitle}f.toggleClass(this.collapseNode,"collapsed",this.isCollapsed);this.resize(!this.isCollapsed);f.publish("Splitter/collapse",[{id:this.id,isCollapsed:this.isCollapsed}]);this._onCollapseCalled=!0}},
onMouseUp:function(a){if(!this.isDisabled)this.lastTime=+new Date,this.lastPoint=a.pageX,f.forEach(this.docHandles,f.disconnect),this.docHandles=[],document.body.style.cursor="",f._destroyElement(this.backdrop),this.backdrop=null,this.isClick()&&this.clickFunc?this.clickFunc():this._onCollapseCalled?this._onCollapseCalled=!1:this.resize(),f.stopEvent(a)},onMouseMove:function(a){if(!this._onCollapseCalled)if(this.isLeftMouseDown(a)){ws.html.clearSelection();this.killCapturedEvent(a);var b=a.pageX;
if(this.isOrientationRight){if(b>this.bounds.maxLeft-this.collapseThreshhold)b=this.bounds.maxLeft;if(b>this.bounds.maxLeft)b=this.bounds.maxLeft;if(b<this.bounds.minLeft)b=this.bounds.minLeft}else if(this.sizerFunc)b=this.sizerFunc(b);else{if(b<this.bounds.minLeft+this.collapseThreshhold)b=this.bounds.minLeft;if(b<this.bounds.minLeft)b=this.bounds.minLeft;if(b>this.bounds.maxLeft)b=this.bounds.maxLeft}this.domNode.style.left=b-this.splitterMargin+"px";f.stopEvent(a)}else this.onMouseUp(a)},isClick:function(){var a=
this.lastTime-this.startTime;return 4>Math.abs(this.startPoint-this.lastPoint)&&1E3>a},killCapturedEvent:function(a){this.isLeftMouseDown(a)&&a&&f.stopEvent(a)},resize:function(a){var e=!1;if(this.isOrientationRight){e=this.startX+this.size.width+this.resizeNodeSize.width-(parseInt(this.domNode.offsetLeft)+this.size.width+this.splitterMargin);if(6==f.isIE)this.resizeNode.style.right="-1px";f.marginBox(this.resizeNode,{w:e})}else e=parseInt(this.resizeNode.offsetLeft),e=parseInt(this.domNode.offsetLeft)+
this.splitterMargin-e,e<this.minWidth?ws.WebSuite.Navigation.isMini||ws.WebSuite.Navigation.toggleNav("splitDrag"):(ws.WebSuite.Navigation.isMini&&ws.WebSuite.Navigation.toggleNav("splitDrag"),f.marginBox(this.resizeNode,{w:e}));e=0>=e?!0:!1;this.resizeNode.style.display=e?"none":"";this.domNode.style.zIndex="";if(!e&&!a){a=parseInt(this.domNode.style.left);e=f._getMarginSize(this.domNode).w;a=b.getBox().w-a-e;if(a<this.minWidth)a=this.minWidth;f.publish("Splitter/resize",[{id:this.domNode.id,width:a+
"px"}])}},cancel:function(){f.forEach(this.docHandles,f.disconnect);this.docHandles=[];f._destroyElement(this.backdrop);this.backdrop=null;this.domNode.style.left=this.startX+"px";this.domNode.style.zIndex=""},enableSizing:function(a){this.isDisabled=!a;this.setCursor()}})})},"dijit/_base/window":function(){define("dijit/_base/window",["dojo/window","../main"],function(g,j){j.getDocumentWindow=function(f){return g.get(f)}})},"dojox/grid/edit":function(){define("dojox/grid/edit",["dojo/_base/declare",
"dojo"],function(g,j){return g("dojox.grid.edit",null,{constructor:function(f){this.grid=f;this.connections=[];j.isIE&&this.connections.push(j.connect(document.body,"onfocus",j.hitch(this,"_boomerangFocus")))},info:{},destroy:function(){j.forEach(this.connections,function(f){j.disconnect(f)})},cellFocus:function(f,a){this.grid.singleClickEdit||this.isEditRow(a)?this.setEditCell(f,a):this.apply();(this.isEditing()||f&&(f.editor||0).alwaysOn)&&this._focusEditor(f,a)},rowClick:function(f){this.isEditing()&&
!this.isEditRow(f.rowIndex)&&this.apply()},styleRow:function(f){f.index==this.info.rowIndex&&(f.customClasses+=" dojoxGrid-row-editing")},dispatchEvent:function(f){var a=f.cell;return(a=a&&a.editor)&&a.dispatchEvent(f.dispatch,f)},isEditing:function(){return void 0!==this.info.rowIndex},isEditCell:function(f,a){return this.info.rowIndex===f&&this.info.cell.index==a},isEditRow:function(f){return this.info.rowIndex===f},setEditCell:function(f,a){this.isEditCell(a,f.index)||this.start(f,a,this.isEditRow(a)||
f.editor)},_focusEditor:function(f,a){dojox.grid.fire(f.editor,"focus",[a])},focusEditor:function(){this.isEditing()&&this._focusEditor(this.info.cell,this.info.rowIndex)},_boomerangWindow:500,_shouldCatchBoomerang:function(){return this._catchBoomerang>(new Date).getTime()},_boomerangFocus:function(){if(this._shouldCatchBoomerang())this.grid.focus.focusGrid(),this.focusEditor(),this._catchBoomerang=0},_doCatchBoomerang:function(){if(j.isIE)this._catchBoomerang=(new Date).getTime()+this._boomerangWindow},
start:function(f,a,b){this.grid.beginUpdate();this.editorApply();this.isEditing()&&!this.isEditRow(a)&&(this.applyRowEdit(),this.grid.updateRow(a));b?(this.info={cell:f,rowIndex:a},this.grid.doStartEdit(f,a),this.grid.updateRow(a)):this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._focusEditor(f,a);this._doCatchBoomerang()},_editorDo:function(f){var a=this.info.cell;a&&a.editor&&a.editor[f](this.info.rowIndex)},editorApply:function(){this._editorDo("apply")},editorCancel:function(){this._editorDo("cancel")},
applyCellEdit:function(f,a,b){this.grid.doApplyCellEdit(f,b,a.fieldIndex)},applyRowEdit:function(){this.grid.doApplyEdit(this.info.rowIndex)},apply:function(){if(this.isEditing())this.grid.beginUpdate(),this.editorApply(),this.applyRowEdit(),this.info={},this.grid.endUpdate(),this.grid.focus.focusGrid(),this._doCatchBoomerang()},cancel:function(){if(this.isEditing())this.grid.beginUpdate(),this.editorCancel(),this.info={},this.grid.endUpdate(),this.grid.focus.focusGrid(),this._doCatchBoomerang()},
save:function(f,a){var b=this.info.cell;this.isEditRow(f)&&(!a||b.view==a)&&b.editor&&b.editor.save(b,this.info.rowIndex)},restore:function(f,a){var b=this.info.cell;this.isEditRow(a)&&b.view==f&&b.editor&&b.editor.restore(b,this.info.rowIndex)}})})},"url:ws/widget/SearchAutoComplete.html":'<div class="SearchAutoComplete wsMenu ${className}" data-dojo-attach-point="choices"></div>\n',"url:ws/widget/WSModalPane.css":"","url:ws/calendar/TodoApp.css":"","dojo/promise/instrumentation":function(){define(["./tracer",
"../has","../_base/lang","../_base/array"],function(g,j,f,a){function b(a,b){b&&b.stack&&b.stack.split("\n").slice(1).join("\n").replace(/^\s+/," ")}function e(a,e,f,h){e||b(a,f,h)}function h(b,e,f,h){e?a.some(l,function(a,e){if(a.error===b)return l.splice(e,1),!0}):a.some(l,function(a){return a.error===b})||l.push({error:b,rejection:f,deferred:h,timestamp:(new Date).getTime()});n||(n=setTimeout(k,m))}function k(){var e=(new Date).getTime(),f=e-m;l=a.filter(l,function(a){return a.timestamp<f?(b(a.error,
a.rejection,a.deferred),!1):!0});n=l.length?setTimeout(k,l[0].timestamp+m-e):!1}var l=[],n=!1,m=1E3;return function(a){var b=j("config-useDeferredInstrumentation");if(b){g.on("resolved",f.hitch(console,"log","resolved"));g.on("rejected",f.hitch(console,"log","rejected"));g.on("progress",f.hitch(console,"log","progress"));var k=[];"string"===typeof b&&(k=b.split(","),b=k.shift());if("report-rejections"===b)a.instrumentRejected=e;else if("report-unhandled-rejections"===b||!0===b||1===b)a.instrumentRejected=
h,m=parseInt(k[0],10)||m;else throw Error("Unsupported instrumentation usage <"+b+">");}}})},"ws/UserContext":function(){define("ws/UserContext",["dojo"],function(){ws.UserContext={isLoaded:!1,init:function(){if(!this.isLoaded&&window.Settings)this.populate(window.Settings),this.isLoaded=!0},populate:function(g){this.UserAddress=g.ActiveUserEmailAddress||"";this.ActiveScreenName=g.ActiveUserScreenName||"";this.UserUID=g.UserUID||"";this.UserName=g.UserName||"";this.UserScreenName=g.UserScreenName||
"";this.ParentalControls=g.ParentalControls||"N";this.BID=g.BID||"";this.Brandi=g.Brandi||"";this.AOLCreateDate=g.AOLCreateDate||"";this.PriceIndex=g.PriceIndex||"";this.ClientVersion=g.ClientVersion||"";this.ConnectionType=g.ConnectionType||"";this.MasterAccountHash=g.MasterAccountHash||"";this.SubAccountHash=g.SubAccountHash||"";this.ScreenNameHash=g.ScreenNameHash||"";this.OmnitureCampaign=g.OmnitureCampaign||"";this.MailboxType=g.MailboxType||"";this.Age=g.Age||"";this.Zip=g.Zip||"";this.UserGender=
g.UserGender||"";this.UserFirstName=g.UserFirstName||"";this.UserLastName=g.UserLastName||"";this.Locale=g.Locale||"";this.SessionId=g.SessionID||""}};ws.UserContext.init()})},"ws/bubbleConfig":function(){define("ws/bubbleConfig",["dojo","dijit"],function(g){ws.bubbleConfig={welcomeDialogIsShown:!1,openedPinId:"MiniMods",openIfLastPinId:"OptionsTheme",openedPinNeeded:!1,canShowOtherBubbles:!1,pinBubblesEnabled:!1,bmLoaded:!1,inSetting:!1,historyList:[],bubbleHistory:null,requestedPins:{},allConfigedPins:null,
pinGroupMap:null,init:function(){this.loadHistory();g.subscribe("Settings/show",g.hitch(this,function(){this.inSetting=!0;ws.bubbleConfig.hidePinBubble("NewImTextBtns",!0);ws.bubbleConfig.hidePinBubble("MiniMods",!0);ws.bubbleConfig.hidePinBubble("CustomizeMenu",!0);ws.bubbleConfig.hidePinBubble("Manilla1",!0);ws.bubbleConfig.hidePinBubble("Stationery",!0)}));g.subscribe("Settings/hide",g.hitch(this,function(){this.inSetting=!1;setTimeout(g.hitch(this,function(){ws.bubbleConfig.showPinBubble("NewImTextBtns",
null,!0);ws.bubbleConfig.showPinBubble("MiniMods",null,!0);ws.bubbleConfig.showPinBubble("Manilla1",null,!0)}),500)}))},isShowable:function(j){return-1==g.indexOf(this.historyList,j)},hasBeenSeen:function(j){return-1!=g.indexOf(this.historyList,j)},allPinsSeen:function(g){if((g=g||this.allConfigedPins)&&g.length)for(var f=0;f<g.length;f++)if(!this.hasBeenSeen(g[f]))return!1;return!0},isLastSeenPin:function(j){var f=!1;if(-1!=g.indexOf(this.allConfigedPins,j)&&!this.hasBeenSeen(j))for(var a=this.allConfigedPins,
f=!0,b=0;b<a.length;b++){var e=a[b];if(j!=e&&!this.hasBeenSeen(e)){f=!1;break}}return f},setAllPinsHistory:function(j,f){var a=f||this.allConfigedPins;if(a&&a.length)for(var b=0;b<a.length;b++){var e=a[b],h=g.indexOf(this.historyList,e);-1==h?j||this.historyList.push(e):j&&this.historyList.splice(h,1)}},showPinBubble:function(g,f,a){var b=null;this.requestedPins[g]||(this.requestedPins[g]={node:null});b=f?this.requestedPins[g].node=f:this.requestedPins[g].node;if(a)this.requestedPins[g].couldBeShowing=
!0;this.pinBubblesEnabled&&ws.widget.bubbleManager&&!this.hasBeenSeen(g)&&this.requestedPins[g].couldBeShowing&&ws.widget.bubbleManager.showPinBubble(g,b)},hidePinBubble:function(g,f){this.requestedPins[g]||(this.requestedPins[g]={});if(f)this.requestedPins[g].couldBeShowing=!1;this.pinBubblesEnabled&&ws.widget.bubbleManager&&ws.widget.bubbleManager.hidePinBubble(g)},getOptionMenuLabel:function(){return this.allPinsSeen()?Config.Strings.PinBubble_ShowQT:Config.Strings.PinBubble_HideQT},loadHistory:function(){this.bubbleHistory=
{};if("string"==typeof Settings.SeenFTUTips&&Settings.SeenFTUTips)this.bubbleHistory=g.fromJson(Settings.SeenFTUTips);if(this.bubbleHistory&&this.bubbleHistory.SeenFTUTips)this.historyList=this.bubbleHistory.SeenFTUTips.split(",")},saveHistory:function(){this.bubbleHistory.SeenFTUTips=this.historyList.join(",");ws.settings.saveNow({SeenFTUTips:this.bubbleHistory})},saveAsSeen:function(j){-1==g.indexOf(this.historyList,j)&&this.historyList.push(j);this.saveHistory()},checkPinBubblesEnable:function(){this.pinGroupMap=
{};this.allConfigedPins=[];var g=this.canShowOtherBubbles=!1,f=!1;if(Config.BubblePinsEnabled)for(var a in Config.BubblePins)if(Config.BubblePins.hasOwnProperty(a)&&Config.BubblePins[a].group)f=Config.BubblePins[a].group,this.allConfigedPins.push(a),this.pinGroupMap[f]||(this.pinGroupMap[f]=[]),this.pinGroupMap[f].push(a),f=!0;if(f){a=!1;for(var b in this.pinGroupMap)this.pinGroupMap.hasOwnProperty(b)&&(this.bubbleHistory[b]?this.allPinsSeen(this.pinGroupMap[b])||(this.bubbleHistory[b].timesSeen>=
Config.BubblePinsExpireLogins?(g=!0,this.setAllPinsHistory(!1,this.pinGroupMap[b])):(this.bubbleHistory[b].timesSeen++,a=!0),Math.floor((new Date).getTime()/6E4)-this.bubbleHistory[b].firstSeenTime>=Config.BubblePinsExpireMinutes&&(g=!0,this.setAllPinsHistory(!1,this.pinGroupMap[b]))):(this.bubbleHistory[b]={firstSeenTime:Math.floor((new Date).getTime()/6E4),timesSeen:1},a=!0));(g||a)&&this.saveHistory();if(this.allPinsSeen()){if(this.pinBubblesEnabled=!1,this.canShowOtherBubbles=!0,g)this.loadBubbleManager(function(){ws.widget.bubbleManager&&
ws.widget.bubbleManager.showAllPinsClosedBubble()}),this.canShowOtherBubbles=!1}else this.pinBubblesEnabled=!0,this.canShowOtherBubbles=!1}else this.canShowOtherBubbles=!0},resetPinPref:function(){if(this.allConfigedPins){var j=this.allPinsSeen();this.setAllPinsHistory(j);if(j){ws.reporting.reportDLAction("Mail-Options-ShowQuickTips");this.pinBubblesEnabled=!0;for(var f in this.pinGroupMap)this.pinGroupMap.hasOwnProperty(f)&&(this.bubbleHistory[f]={firstSeenTime:Math.floor((new Date).getTime()/6E4),
timesSeen:1});this.loadBubbleManager(g.hitch(this,this.showRequestedPins))}else{ws.reporting.reportDLAction("Mail-Options-HideQuickTips");for(var a in this.requestedPins)this.requestedPins.hasOwnProperty(a)&&this.hidePinBubble(a);this.pinBubblesEnabled=!1}ws.widget.bubbleManager&&ws.widget.bubbleManager.allClosedBubble&&ws.widget.bubbleManager.allClosedBubble.hide(0);this.saveHistory()}},showRequestedPins:function(){for(var g in this.requestedPins)this.requestedPins.hasOwnProperty(g)&&this.showPinBubble(g)},
loadBubbleManager:function(j){this.bmLoaded?j&&j():ws.WebSuite.ensureStartupPromoLayer(g.hitch(this,function(){require(["ws/widget/BubbleManager"],g.hitch(this,function(){this.bmLoaded=!0;ws.widget.bubbleManager.setUp();j&&j()}))}))},checkForBubblePins:function(){this.checkPinBubblesEnable();this.pinBubblesEnabled&&this.loadBubbleManager(g.hitch(this,this.showRequestedPins))},openFirstBubble:function(g){if((!this.welcomeDialogIsShown||g)&&this.pinBubblesEnabled)this.bmLoaded?(g=ws.widget.bubbleManager.getPinByName(this.openedPinId))?
g.expandTip():this.openedPinNeeded=!0:this.openedPinNeeded=!0}};ws.bubbleConfig.init()})},"dojo/hccss":function(){define("require,./_base/config,./dom-class,./dom-style,./has,./ready,./_base/window".split(","),function(g,j,f,a,b,e,h){b.add("highcontrast",function(){var e=h.doc.createElement("div");e.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("+(j.blankGif||g.toUrl("./resources/blank.gif"))+");";h.body().appendChild(e);
var f=a.getComputedStyle(e),n=f.backgroundImage,f=f.borderTopColor==f.borderRightColor||n&&("none"==n||"url(invalid-url:)"==n);8>=b("ie")?e.outerHTML="":h.body().removeChild(e);return f});e(90,function(){b("highcontrast")&&f.add(h.body(),"dj_a11y")});return b})},"url:ws/widget/Button.css":"","ws/calendar/CNavigation":function(){define("ws/calendar/CNavigation","dojo/_base/declare,dojo/text!ws/calendar/CNavigation.html,dojo/text!ws/calendar/CNavigation.css,dojo,dijit,dijit/registry,dijit/_Widget,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,ws/dnd/NavigationDropTarget,ws/widget/CalendarColorPickerMenuItem,ws/calendar/EditCalendar,ws/calendar/TodoApp,ws/browser,ws/dom,ws/html,ws/io,ws/lang,ws/string,ws/widget/Dialogs,ws/widget/WSMenu,ws/widget/WSToolbar,ws/widget/WSDatePicker".split(","),
function(g,j,f,a,b,e,h,k,l,n,m,q){return g([h,k,l],{templateString:j,css:{templateString:f},_earlyTemplatedStartup:!0,searchScope:"alltext",searchFieldColor:"#000000",navCollapserHidden:!1,APP_MAIL:0,APP_CALENDAR:1,APP_CONTACTS:2,APP_TODAY:3,APP_FEEDS:4,APP_SETTINGS:5,APP_ADDCALENDAR:6,APP_EDITCALENDAR:7,DRAGTYPES_MAIL:[],DRAGTYPES_CALENDAR:[0,1,2],DRAGTYPES_CONTACTS:[],startup:function(){this.selectedApp=null;this.calendarNodes={};this.dropTargets={};this.disableHover=!1;this.showCalendarIndexCB=
null;a.connect(this.navDatePicker,"selectDateConnect",this,"setDate");a.subscribe("dragStart",this,function(){this.disableHover=!0});a.subscribe("dragEnd",this,function(){this.disableHover=!1});a.subscribe("ws_view-selectChild",this,"hiliteCurrentApp");this.defineMenus();ws.WebSuite.theCalendarModel.isAnonymous?a.byId("todoApp").style.display="none":e.byId("todoApp").init();a.connect(this.searchField,"onfocus",this,"onFocusSearchField");a.connect(this.searchField,"onblur",this,"onBlurSearchField");
this.clearSearchField();this.updateNavCollapser()},updateNavCollapser:function(){a.query(".navCollapser").style("display","none")},setDate:function(a){ws.CalSolo.getCalendarView().setDate(a)},onResized:function(){this.inherited(arguments);var b=a._getMarginSize(this.domNode).w,e=this.mainPane.domNode.scrollHeight!=this.mainPane.domNode.clientHeight?20:0;a.query(".text span",this.calendarContainer).forEach(function(a){a.style.width=Math.max(b-e-53,0)+"px"})},selectApp:function(a){if(a!=this.selectedApp){(this.selectedApp==
this.APP_CALENDAR||this.selectedApp==this.APP_ADDCALENDAR||this.selectedApp==this.APP_EDITCALENDAR)&&a!=this.APP_ADDCALENDAR&&a!=this.APP_EDITCALENDAR&&this.showCalendar(!1);switch(a){case this.APP_CALENDAR:this.showCalendar(!0);break;case this.APP_EDITCALENDAR:this.showEditCalendar();break;case this.APP_ADDCALENDAR:this.showAddCalendar()}this.onResized()}},hiliteCurrentApp:function(){switch(e.byId("ws_view").selectedChildWidget.id){case "soloCalendarView":this.selectedApp=this.APP_CALENDAR;break;
case "addCalendar":case "editCalendar":case "subscribeCalendar":this.selectedApp=this.APP_CALENDAR;break;default:this.selectedApp=this.APP_CALENDAR}this.currentHiliteNode&&a.removeClass(this.currentHiliteNode,"navItemCurrent")},searchActive:function(){},setCalendarModel:function(b){this.calendarModel=b;b.isAnonymous||a.connect(b,"modelUpdated",this,"updateCalendarList");a.connect(b,"searchUpdated",a.hitch(this,"modelUpdated","calendar"))},updateCalendarList:function(){var b=this.calendarModel.getCalendarList(),
e=this.calendarModel.calendarEnum;if(b&&e){for(var f={},h=0;h<b.length;h++){var k=b[h],l=k[e.id],g=k[e.calType],j=k[e.color],m=k[e.subscribeURL],q=m&&0<m.length,C=k[e.writable]&&!q,I=(0==g||1==g)&&!q?this.myCalendarsNode:this.subCalendarsNode,J=k[e.displayName],L=k[e.selected];if(m=this.calendarNodes[l]){if(k=m.childNodes[0],a.removeClass(k),a.addClass(k,"wsCalCB  wsCalCB_"+j.substring(1)+(L?" checked":" unchecked")),k=m.childNodes[1].childNodes[0],m=ws.string.escapeXml(J),k.innerHTML!=m)k.innerHTML=
m}else m=document.createElement("div"),m.className="navItem calendarNavItem",a.connect(m,"onmouseover",a.hitch(this,this.onMouseOverCalItem,m)),a.connect(m,"onmouseout",a.hitch(this,this.onMouseOutCalItem,m)),I.appendChild(m),j='<div class="wsCalCB '+("wsCalCB_"+j.substring(1)+(L?" checked":" unchecked"))+'"></div><div class="text"><span>'+ws.string.escapeXml(J)+"</span></div>",m.innerHTML=j,j=a.query(".wsCalCB",m)[0],a.connect(j,"onclick",a.hitch(this,this.toggleCalendarItem,l)),L=a.query(".text",
m)[0],a.connect(L,"onclick",a.hitch(this,this.toggleCalendarItem,l,j)),g={type:"Calendar",calId:l,displayName:J,showShare:Config.EnableCalendarSharingTab&&2>g&&!q,showPublish:Config.EnableCalendarPublishTab&&2>g&&!q,showAddEvent:C,showDelete:0!=g},J=document.createElement("span"),J.className="ctrl wsQuickAction",J.style.display="none",a.connect(J,"onclick",a.hitch(this,"onQuickActionMenu",g,J)),m.appendChild(J),a.connect(m,"oncontextmenu",a.hitch(this,"onContextMenu",g)),k[e.writable]&&new n(m,this.DRAGTYPES_CALENDAR,
this,l),this.calendarNodes[l]=m;this.subCalendarsNode.childNodes&&0<this.subCalendarsNode.childNodes&&a.place("<div class='wsSeparator'></div>",this.subCalendarsNode,"before");f[l]=!0}for(l in this.calendarNodes)l in f||(a._destroyElement(this.calendarNodes[l]),delete this.calendarNodes[l]);this.onResized()}},showCalendar:function(b){b?(a.addClass(this.calendarContainer,"navTile24 navItemHover"),this.calendarContainer.style.display="",ws.CalSolo.selectCalendarApp()):this.calendarContainer.style.display=
"none"},hideCalendar:function(){if(this.calendarContainer)this.calendarContainer.style.display="none"},modifyNavDatePicker:function(){this.navDatePicker.displayForPublicView()},displayForPublicView:function(){this.calendarContainer.style.display="none";this.navDatePicker.displayForPublicView()},editCalendar:function(b,f){var h=e.byId("editCalendar");if(!h)h=new q({id:"editCalendar",editCalendar:!0}),h.closeCB=a.hitch(this,"showCalendar",!0),h.setModel(ws.CalSolo.theCalendarModel),ws.CalSolo.ViewWidget.addChild(h);
h.getCalId()!=b?h.isShowing()?h.confirmSwitchEditCalendar(b):(h.setCalId(b),this.selectApp(this.APP_EDITCALENDAR)):h.isShowing()||this.selectApp(this.APP_EDITCALENDAR);f&&f.stopPropagation()},showAddCalendar:function(){ws.CalSolo.selectTab("addCalendar");this.calendarContainer.style.display=""},showEditCalendar:function(){ws.CalSolo.selectTab("editCalendar")},addCalendar:function(a){this.selectApp(this.APP_ADDCALENDAR);a.stopPropagation()},selectCalendar:function(a){a=this.calendarModel.calendars[a];
if(!a[this.calendarModel.calendarEnum.selected]){var b=!1;this.showCalendarIndexCB&&(b=this.showCalendarIndexCB());a=this.calendarModel.getCalendarArgs(a,b);a.selected=!0;this.calendarModel.saveCalendar(a)}},selectThisCalendarOnly:function(a){var b=this.calendarModel.calendarEnum,e=null,f=!0,h;for(h in this.calendarModel.calendars){var k=this.calendarModel.calendars[h];h==a?(k[b.selected]||(f=!1),e=this.calendarModel.getCalendarArgs(k,!1),e.selected=!0,e.selectThisOnly=!0):k[b.selected]&&(f=!1)}e&&
!f&&this.calendarModel.saveCalendar(e)},toggleCalendarItem:function(b,e,f){if(!f)f=e,e=f.target;var h=a.hasClass(e,"checked");a.toggleClass(e,"checked");e=!h;h=this.calendarModel.calendars[b];b=!1;this.showCalendarIndexCB&&(b=this.showCalendarIndexCB());h=this.calendarModel.getCalendarArgs(h,b);h.selected=e;if(b)h.search=this.calendarModel.searchStr,h.searchIn=null,h.sortBy=null,h.sortDir=null,h.ignoreCache=!1;if(e)a.publish("WSFeedbackStart",[Config.Strings.Loading]),h.loadCallback=function(){a.publish("WSFeedbackEnd",
[Config.Strings.Loading])},h.errorCallback=function(){a.publish("WSFeedbackEnd",[Config.Strings.Loading])};this.calendarModel.saveCalendar(h);f.stopPropagation()},deleteCalendar:function(b,e){var f=this.calendarModel.calendarEnum,h=this.calendarModel.calendars,k=!1;if(h&&f){var h=h[b],l=h[f.calType],k=null!=h?h[f.worldReadable]:!1;!k&&2!=l&&(k=h[f.readWriteList],k=h[f.readOnlyList]||k)}ws.widget.Dialogs.okCancel(k?Config.Strings.ConfirmCalDeleteShared:Config.Strings.ConfirmCalDelete,a.hitch(this,
function(f){f&&(a.publish("WSFeedbackStart",[Config.Strings.Loading]),this.calendarModel.deleteCalendar({calid:b,displayName:e,components:!1,index:!1,enums:!1,dayBucketIndex:!1,loadCallback:function(){a.publish("WSFeedbackStart",[ws.string.substituteParams(Config.Strings.CalendarDeleted,e),!0])},errorCallback:function(){a.publish("WSFeedbackEnd",[Config.Strings.Loading])}}),a.publish("EditCalendar/Delete"))}))},makeCalendarPublic:function(b,e){a.publish("WSFeedbackStart",[Config.Strings.Loading]);
var f=this.calendarModel.calendars[b],h=this.calendarModel.calendarEnum,k=this.showCalendarIndexCB?this.showCalendarIndexCB():!1,k=this.calendarModel.getCalendarArgs(f,k),f=f[h.ticket],f=null!=f&&0<f.length,l=k.worldReadable&&!f;k.worldReadable=!0;if(f)k.ticket="";k.loadCallback=function(){a.publish("WSFeedbackEnd",[Config.Strings.Loading]);var f=ws.string.substituteParams(l?Config.Strings.AlreadyPublic:Config.Strings.MakePublicSuccess,e);a.publish("WSFeedbackStart",[f,!0,function(){var a=ws.calendar.calutil.getPublicCalendarURL(b,
null),f=ws.string.substituteParams(Config.Strings.PubCalEmailSubject,e),h=ws.string.substituteParams("<a href='{0}'>{1}</a>",a,e),k=(ws.string.substituteParams(Config.Strings.PubCalEmailBody,h,ws.UserContext.ActiveScreenName)+"<small>"+ws.string.substituteParams(Config.Strings.PubCalEmailFooter,a)+"</small>").replace(/\\n/g,"<br>");ws.CalSolo.popupCompose(function(a){a.reset({subject:f,body:k,dontAddSignature:!0,isDirty:!0})})},null,Config.Strings.ShareLink])};k.errorCallback=function(){ws.widget.Dialogs.ok(Config.Strings.CalErrorSavingCal);
a.publish("WSFeedbackEnd",[Config.Strings.Loading])};this.calendarModel.saveCalendar(k)},setCalendarColor:function(a,b){var e=this.calendarModel.calendars[a],f=this.showCalendarIndexCB?this.showCalendarIndexCB():!1,e=this.calendarModel.getCalendarArgs(e,f);e.color=b;this.calendarModel.saveCalendar(e)},onWhenDotComClick:function(){ws.io.openWindow(Config.WhenDotComClickURL)},onMouseOverItem:function(b){this.disableHover||(a.addClass(b,"navTile24 navItemHover"),a.query(".ctrl",b).style("display",""))},
onMouseOutItem:function(b){if(!this.disableHover){a.removeClass(b,"navTile24 navItemHover");var e=a.query(".ctrl",b);if(0<e.length)e[0].style.display="none",a.query(".text .unseen",b).style("display","")}},onMouseOverCalItem:function(b){this.disableHover||a.query(".ctrl",b).style("display","")},onMouseOutCalItem:function(b){this.disableHover||a.query(".ctrl",b).forEach(function(a){if(a!=this.activeQuickActionButton)a.style.display="none"},this)},handleRightClickAction:function(b,e){var f=this.rightClickMenuArgs;
switch(b){case "goToCalendar":this.selectApp(this.APP_CALENDAR);break;case "addCalendar":this.selectApp(this.APP_ADDCALENDAR);break;case "newEvent":ws.CalSolo.getAddEditWidget(a.hitch(this,function(a){a.show();f.calId&&a.calendarMenu.selectCalendar(f.calId)}));break;case "selectThisCalendar":this.selectCalendar(f.calId);break;case "selectThisCalendarOnly":this.selectThisCalendarOnly(f.calId);break;case "shareCalendar":case "editCalendar":this.editCalendar(f.calId);break;case "deleteCalendar":this.deleteCalendar(f.calId,
f.displayName);break;case "makeCalendarPublic":this.makeCalendarPublic(f.calId,f.displayName);break;case "setCalendarColor":this.setCalendarColor(f.calId,e)}this.rightClickMenuArgs=null},defineMenus:function(){this.rightClickMenuDefinition={CalendarHead:[{caption:Config.Strings.GoToCalendar,onClick:a.hitch(this,"handleRightClickAction","goToCalendar")},{separator:!0},{caption:Config.Strings.AddCalendar,onClick:a.hitch(this,"handleRightClickAction","addCalendar")},{caption:Config.Strings.NewEventBtn,
onClick:a.hitch(this,"handleRightClickAction","newEvent")}],Calendar:[{caption:Config.Strings.AddEventBtn,onClick:a.hitch(this,"handleRightClickAction","newEvent")},{caption:Config.Strings.ShowThisCalendarOnly,onClick:a.hitch(this,"handleRightClickAction","selectThisCalendarOnly")},{separator:!0},{caption:Config.Strings.Edit,onClick:a.hitch(this,"handleRightClickAction","editCalendar")},{caption:Config.Strings.ShareThisCalendar,onClick:a.hitch(this,"handleRightClickAction","shareCalendar")},{caption:Config.Strings.MakePublic,
onClick:a.hitch(this,"handleRightClickAction","makeCalendarPublic")},{caption:Config.Strings.Delete,onClick:a.hitch(this,"handleRightClickAction","deleteCalendar")},{separator:!0},{dojoType:m,onClick:a.hitch(this,"handleRightClickAction","setCalendarColor")}]}},createRightClickMenu:function(b){var e=this.rightClickMenuDefinition[b];if(e)return this.rightClickMenu[b]=ws.widget.createMenu(e),a.connect(this.rightClickMenu[b],"close",this,"onCloseMenu"),this.rightClickMenu[b]},getRightClickMenu:function(a){if(!this.rightClickMenu)this.rightClickMenu=
{};if(this.rightClickMenuDefinition[a]){var b=this.rightClickMenu[a];b||(b=this.createRightClickMenu(a));return b}},updateRightClickMenu:function(a){var b=this.rightClickMenuArgs,e=a.getChildren();if(a==this.rightClickMenu.Calendar){e[0].setShowing(b.showAddEvent);e[4].setShowing(b.showShare);e[5].setShowing(b.showPublish);e[6].setShowing(b.showDelete);var a=this.calendarModel.getCalendarList(),f=this.calendarModel.calendarEnum,b=ws.lang.findByProp(a,f.id,b.calId);e[8]&&e[8].setCurrentColor(a[b][f.color])}},
onQuickActionMenu:function(b,e){ws.lang.ensureLayersLoaded(a.hitch(this,"_onContextMenu",b,-1,-1,e));this.activeQuickActionButton=e},onContextMenu:function(b,e){a.stopEvent(e);ws.lang.ensureLayersLoaded(a.hitch(this,"_onContextMenu",b,e.pageX,e.pageY,e.target))},_onContextMenu:function(a,b,e,f){var h=a.type,k=this.getRightClickMenu(h);if(k)k.isShowing()&&k.close(),this.rightClickMenuArgs=a,k=this.getRightClickMenu(h),this.updateRightClickMenu(k),0<=b?k.open(b,e,f):k.open(f)},onCloseMenu:function(){if(this.activeQuickActionButton)this.activeQuickActionButton.style.display=
"none",this.activeQuickActionButton=null},toggleTwisty:function(b,e,f){b?(f.style.display="",a.removeClass(e,"twistyClosed"),a.addClass(e,"twistyOpen")):(f.style.display="none",a.removeClass(e,"twistyOpen"),a.addClass(e,"twistyClosed"))},setSearchScope:function(){},getSearchGhostText:function(){return Config.Strings.SearchCalendar},searchApp:function(){this.isSearchField()?ws.widget.Dialogs.ok(Config.Strings.SearchFieldEmpty):this.searchCalendar(this.searchScope)},searchCalendar:function(b){this.searchCalendarCB&&
""!=this.searchField.style.color&&this.searchCalendarCB(b,a.trim(this.searchField.value))},onFocusSearchField:function(){if(this.isSearchField())this.searchField.value="";this.searchField.style.color=this.searchFieldColor},isSearchField:function(){return""==this.searchField.style.color||""==a.trim(this.searchField.value)?!0:!1},clearSearchField:function(){this.searchField.value="";this.resetSearchField()},resetSearchField:function(){if(""==this.searchField.value)this.searchField.style.color="",this.searchField.value=
this.getSearchGhostText()},onBlurSearchField:function(){this.resetSearchField()},onKeyPressSearchField:function(b){b.keyCode==a.keys.ENTER&&(this.searchApp(),b.preventDefault())},modelUpdated:function(a){this.searchStrUpdated(a)},searchStrUpdated:function(a){var b=null;"calendar"==a&&null!=this.calendarModel&&(b=this.calendarModel.getSearchString());null==b&&(b="");if(this.searchField.value!=b&&(this.searchField.value=b,a=!1,""!=this.searchField.value&&(a=!0),this.resetSearchField(),a))this.searchField.style.color=
this.searchFieldColor},onMouseOverSearchBtn:function(){a.addClass(this.searchBtn,"goSearchHover")},onMouseOutSearchBtn:function(){a.removeClass(this.searchBtn,"goSearchHover")}})})},"ws/dnd/DropTarget":function(){define("ws/dnd/DropTarget",["dojo/_base/declare"],function(g){return g(null,{constructor:function(){this.acceptedTypes=[]},acceptsType:function(g){return-1==dojo.indexOf(this.acceptedTypes,"*")&&-1==dojo.indexOf(this.acceptedTypes,g)?!1:!0},accepts:function(g){if(-1==dojo.indexOf(this.acceptedTypes,
"*"))for(var f=0;f<g.length;f++)if(-1==dojo.indexOf(this.acceptedTypes,g[f].type))return!1;return!0},unregister:function(){ws.dnd.dragManager.unregisterDropTarget(this)},onDragOver:function(){},onDragOut:function(){},onDragMove:function(){},onDropStart:function(){},onDrop:function(){},onDropEnd:function(){}})})},"url:ws/suite/NewToday.css":"","ws/reporting":function(){define("ws/reporting","dojo,dojo/window,dojo/_base/lang,dojo/request/iframe,ws/string,ws/UserContext,ws/io".split(","),function(g,
j,f,a){f.setObject("ws.reporting",{skipBeaconReporting:!1,opinionFeedbackUrl:null,report:function(a,e,f,k){if(this.skipBeaconReporting)this.skipBeaconReporting=!1;else{var l=!1;try{_ws_isOpenerWS()&&opener.ws&&opener.ws.reporting?opener.ws.reporting.report(a,e,f,k):l=!0}catch(g){l=!0}l&&(ws.reporting._comscore.report(a,e),ws.reporting._omniture.report(a,e,f,k),ws.reporting.IVW_de_reporting.report(),ws.reporting._akamaiedge.report(a,e));ws.reporting.lastPageName=a}},reportAction:function(a){var e=
!1;try{_ws_isOpenerWS()&&opener.ws&&opener.ws.reporting?opener.ws.reporting.reportAction(a):e=!0}catch(f){e=!0}e&&ws.reporting._omniture.reportAction(a)},reportDLAction:function(a){var e=!1;try{_ws_isOpenerWS()&&opener.ws&&opener.ws.reporting?opener.ws.reporting.reportDLAction(a):e=!0}catch(f){e=!0}e&&window._ws_reporting_aolDLbeacon&&window._ws_reporting_aolDLbeacon.reportAction(a)},makeFeedbackUrl:function(a){var e=a;0<a.indexOf("{0}")?e=ws.string.substituteParams(a,Config.FeedbackProdctSid):(e=
0<e.indexOf("?")?e+"&":e+"?",e+="sid="+Config.FeedbackProdctSid);var a="",f=window.location.href,f=0>f.indexOf("?")?f+("?g="+Settings.UserName):f+("&g="+Settings.UserName),a=a+("&referer="+encodeURIComponent(f));Config.EnableOmnitureReporting&&(a+="&ch="+Config.ReportingChannel);this.opinionFeedbackUrl=e+a},getFeedbackUrl:function(){return this.opinionFeedbackUrl},openOnlineOpinion:function(){var a=(screen.height-485)/2-100,e=(screen.width-740)/2;window.open(this.opinionFeedbackUrl,"feedback","width=740,height=485,screenX="+
e+",screenY="+a+",top="+a+",left="+e+",resizable=yes,copyhistory=yes,scrollbars=no");return!1}});ws.reporting._omniture={pageReportDone:!1,pendingReportActions:[],omnitureDepartment:"Standard",report:function(a,e,f,k){Config.EnableOmnitureReporting&&setTimeout(g.hitch(this,"doReport",a,e,f,k),100)},reportAction:function(a){Config.EnableOmnitureReporting&&Config.EnableCustomLinkTracking&&setTimeout(g.hitch(this,"doReportAction",a),100)},doReport:function(a,e,f,k){try{if(this.iframe){var l=this.getProps(a,
e,k),j=this.iframe.contentWindow,m=j.s_265||j.s;if(j.s_265&&(0<Config.OmnitureJsUrl.indexOf("OmniUniH.js")||0<Config.OmnitureJsUrl.indexOf("OmniUniHInt.js")))m.mmxgo=!0,m.mmxcustom=ws.reporting._comscore.getBeaconURL(a,!1),m.mmxtitle=a;g.mixin(m,l,f||{});m.t();this.pageReportDone=!0;if(g.isMoz&&!this.fixedThrobber)setTimeout(function(){ws.reporting._omniture.iframe.contentWindow.stop()},5E3),this.fixedThrobber=!0}else this.initialize(a,e)}catch(q){}},doReportAction:function(a,e){if(this.omnitureScriptLoaded()&&
this.pageReportDone){if(this.pendingReportActions){for(var f=0;f<this.pendingReportActions.length;f++)setTimeout(g.hitch(this,"__doReportAction",this.pendingReportActions[f]),300);this.pendingReportActions=null}!0!==e&&this.__doReportAction(a)}else!0!==e&&this.pendingReportActions.push(a),setTimeout(g.hitch(this,"doReportAction",null,!0),1E3)},__doReportAction:function(a){if(!this.accountForCustomLink)this.accountForCustomLink=Config.ReportingCustomLinkAccount?Config.ReportingCustomLinkAccount:Config.ReportMailSuiteOnlyInCustomLink?
this.getAccount().split(",")[0]:this.getAccount();var e=this.iframe.contentWindow,f=e.s_265||e.s,e=e.s_gi(this.accountForCustomLink,0,1);f.linkTrackVars="None";f.linkTrackEvents="None";f.tl(g.body(),"o",a);if(!f.pageName)f.pageName=Config.ReportingPrefix+" : Initial View";e.sa(this.accountForCustomLink)},getAccount:function(){return Config.ClientReportingAccount&&-1!=navigator.userAgent.indexOf("AOL")?Config.ClientReportingAccount:Config.ReportingAccount},getClientType:function(){return-1!=navigator.userAgent.indexOf("AOL")?
"client":"portal"},getProps:function(a,e,f){a={pfxID:Config.ReportingPrefix,pageName:a,channel:Config.ReportingChannel,prop1:Config.ReportingDepartment,prop2:Config.Codename+"-SSL",prop8:ws.UserContext.ConnectionType,prop10:Config.ClientVersion,prop12:ws.reporting._comscore.getBeaconURL(a,!1),prop13:"authenticated",prop16:""};f&&(a.pageName+=" - "+f);if(Config.ReportLocale)a["prop"+Config.ReportLocale]=Config.PageLocale;if(Config.ReportAccountCreateTime)a["prop"+Config.ReportAccountCreateTime]=ws.UserContext.AOLCreateDate;
if(Config.ReportScreenName)a["prop"+Config.ReportScreenName]=ws.UserContext.ScreenNameHash;Config.ReportUIVariant&&(a["prop"+Config.ReportUIVariant]=Config.ReportUIVariantValue||Config.UIVariant);Config.ReportClientType&&(a["prop"+Config.ReportClientType]=this.getClientType());if(Config.ReportBrandi)a["prop"+Config.ReportBrandi]=ws.UserContext.Brandi;if(Config.ReportHatChannel)a.hatChannel=Config.ReportHatChannel;if(ws.UserContext.OmnitureCampaign&&Config.ReportCampaign&&!this.reportedCampaign){f=
ws.UserContext.OmnitureCampaign.split("=");if("ncid"==f[0])a.campaign=a.eVar18=a.eVar19=f[1];else if("icid"==f[0])a.eVar16=f[1];this.reportedCampaign=!0}else a.campaign=a.eVar16=a.eVar18=a.eVar19=null;(f=ws.WebSuite&&ws.WebSuite.getSearchRprtSuffix?ws.WebSuite.getSearchRprtSuffix():null)&&(a.eVar14="Mail-ST-"+f);f=ws.io.getQueryParameter("s_chn");Config.AolComTestReporting&&f&&("wm_c1AOL"==f?a.eVar7="Mail-Test-c1AOL":"wm_c2AOL"==f&&(a.eVar7="Mail-Test-c2AOL"));return a},initialize:function(b,e){this.initialPageName=
b;this.initialTabName=e;this.iframe=a.create("wsReporting","ws.reporting._omniture.onIframeLoaded();",Config.EmptyFileURL)},onIframeLoaded:function(){if(!this.iframeWritten){this.iframeWritten=!0;var b=a.doc(this.iframe),e=ws.string.substituteParams("<script>var s_account = '{account}';<\/script><img name='{imgid}' id='{imgid}' src='{spacer}'><script src='{scripturl}'><\/script>",{account:this.getAccount(),imgid:"s_i_"+this.getAccount().split(",")[0],spacer:Config.SpacerImageURL,scripturl:Config.OmnitureJsUrl});
b.write(e);b.close();this.watchForScriptLoaded()}},watchForScriptLoaded:function(){this.omnitureScriptLoaded()?this.report(this.initialPageName,this.initialTabName):setTimeout(g.hitch(this,"watchForScriptLoaded"),100)},omnitureScriptLoaded:function(){if(this.iframe){var a=this.iframe.contentWindow;return a.s_dc||a.s_265||a.s}return!1}};ws.reporting._comscore={report:function(a){Config.EnableComscoreReporting&&setTimeout(g.hitch(this,"doReport",a),100)},doReport:function(a){if(!this.img)this.img=g.create("img",
{width:1,height:1},g.body());this.img.src=this.getBeaconURL(a,!0)},getBeaconURL:function(a,e){var f=a.replace(/\W/g,""),f=Config.BaseBeaconURL+"Beacon"+f+".htm";e&&(f+="?rnd="+Math.random());return f}};ws.reporting.IVW_de_reporting={initializeFinished:!1,iframeWritten:!1,report:function(){Config.IVW_de_reporting&&setTimeout(g.hitch(this,"doReport"),100)},doReport:function(){try{this.iframe?this.initializeFinished&&this.__doReport():this.initialize()}catch(a){}},__doReport:function(){this.IVWScriptLoaded()&&
this.iframe.contentWindow.iom.c({st:"aolsvc",cp:"1webmail",sv:"ke",co:"kommentar",mg:"yes"},1)},initialize:function(){this.iframe=a.create("wsIVWReporting","ws.reporting.IVW_de_reporting.onIframeLoaded();",Config.EmptyFileURL)},onIframeLoaded:function(){if(!this.iframeWritten){this.iframeWritten=!0;var b=a.doc(this.iframe);b.write('<script type="text/javascript" src="https://script.ioam.de/iam.js"><\/script>');b.close();this.watchForScriptLoaded()}},watchForScriptLoaded:function(){this.IVWScriptLoaded()?
(this.initializeFinished=!0,this.__doReport()):setTimeout(g.hitch(this,"watchForScriptLoaded"),100)},IVWScriptLoaded:function(){if(this.iframe){var a=this.iframe.contentWindow;return!(!a||!a.iom||!a.iom.c)}return!1}};ws.reporting._akamaiedge={beaconFired:!1,report:function(a,e){if(Config.AkamaiEdgeBeaconURL&&!this.beaconFired)setTimeout(g.hitch(this,"doReport",a,e),100),setTimeout(g.hitch(this,"doReport",a,e),Config.AkamaiEdgeBeaconURL_interval+100),this.beaconFired=!0},doReport:function(){if(!this.img)this.img=
g.create("img",{width:1,height:1},g.body());this.img.src=ws.string.substituteParams(Config.AkamaiEdgeBeaconURL,{random:Math.random()})}};ws.reporting.DL={fields:{reqID:"",requestID:"",sessionID:"",SN:"",opName:"",opTime:"",opResult:"",opData:"",op1:"",errType:"",errCode:"",connSpeed:"",comSpeed:"",msgCount:"",msgSize:"",startTime:"",state:"",testName:""},timeoutTable:null,reqCounts:{load_mail:0,read_mail:0,read_mail_att:0,send_mail:0,send_mail_att:0,list_folder:0,search_mail:0,read_pop:0,read_pop_att:0,
send_pop:0,send_pop_att:0},dlcookies:{cons:"",coms:""},lookupTable:{},speedChecked:!1,MIN_THRESHOLD_MILLIS:1E3,MAX_LEN:512,lastreqid:null,_computerSpeed:0,_connectionSpeed:0,_imgList:[{name:"speeddetect4k.jpg",size:4},{name:"speeddetect32k.jpg",size:32},{name:"speeddetect252k.jpg",size:252}],_hashIt:function(a){var e,f,k,l,g;f=a?a.length:0;for(e=0,k=f,l=f^255;e<f;e++)g=l>>>27,l=l<<5^k>>>27,k=k<<5^g^a.charCodeAt(e);return 2*(l>>>1)+(l&1)+":"+(2*(k>>>1)+(k&1))},_getDigest:function(){var a=new Date,
e=a.toString(),f=0;do e+=this._digest=this._hashIt(e),f++;while(500>new Date-a);return f},_checkConnectionSpeed:function(a){var e=this,f=e._img=new Image;f.onload=function(){var f=(new Date).getTime()-e._imagedownloadBegin;1E3>f&&a<e._imgList.length-1?setTimeout(function(){e._checkConnectionSpeed(a+1)},500):(0<f?(1E3<f&&(f-=100),e._connectionSpeed=(1E4*e._imgList[a].size/(1024*f)).toFixed(3)):e._connectionSpeed=0,0!=e._connectionSpeed&&e._setSpeedInCookie(e._connectionSpeed,e._computerSpeed))};e._imagedownloadBegin=
(new Date).getTime();f.src=Config.SpeedDetectURL+e._imgList[a].name},measureConnectionAndMachineSpeed:function(){var a=this;setTimeout(function(){a._computerSpeed=a._getDigest();a._checkConnectionSpeed(0)},1E3)},isEnabled:function(){return Config&&Config.DataLayerBeaconURL&&Settings&&Settings.UserHash>=Config.DLReportingThreshold?!0:!1},initFields:function(a){for(var e in this.fields)a[e]=this.fields[e];a.testName=Config.TestName;if(Settings)a.SN=Settings.UserScreenName||"",a.sessionID=Settings.SessionID||
"";0==this._connectionSpeed&&this._getSpeedFromCookie();if(Config.SpeedTimingEnabled&&!this.speedChecked&&0==this._connectionSpeed)this.speedChecked=!0,e=Config.SpeedTimingDelayMillis||3E4,setTimeout(g.hitch(this,"measureConnectionAndMachineSpeed"),e);a.comSpeed=this._computerSpeed||"";a.connSpeed=this._connectionSpeed||"";a.state="new"},setData:function(a,e){if(!this.isEnabled())return"error:disabled";var f=this.lookupTable[a];if(!f)return"error:no id "+a;for(var k in e)if(null!=this.fields[k]&&
void 0!=this.fields[k])f[k]=e[k];else return"error:invalid field "+k;return"success"},_setSpeedInCookie:function(a,e){if(0!=this._connectionSpeed)this.dlcookies.cons=a,this.dlcookies.coms=e,ws.io._setObjectCookie(this.dlcookies,"DataLayer",null,"/",Config.DLCookieLifeInDays)},_getSpeedFromCookie:function(){if(0==this._connectionSpeed){var a=ws.io._getObjectCookie("DataLayer","=");if(a)this.dlcookies=a,this._connectionSpeed=this.dlcookies.cons||0,this._computerSpeed=this.dlcookies.coms||0}},_getTimeout:function(a){if(!this.timeoutTable)this.timeoutTable=
{load_mail:Config.DLTimeoutLoadMail.split(","),read_mail:Config.DLTimeoutReadMail.split(","),read_mail_att:Config.DLTimeoutReadMailAtt.split(","),send_mail:Config.DLTimeoutSendMail.split(","),send_mail_att:Config.DLTimeoutSendMailAtt.split(","),read_pop:Config.DLTimeoutReadPop.split(","),read_pop_att:Config.DLTimeoutReadPopAtt.split(","),send_pop:Config.DLTimeoutSendPop.split(","),send_pop_att:Config.DLTimeoutSendPopAtt.split(","),list_folder:Config.DLTimeoutListFolder.split(","),search_mail:Config.DLTimeoutSearchMail.split(",")};
if(a=this.timeoutTable[a]){var e=this._connectionSpeed,f=0;0.128<e&&1>=e?f=1:1<e&&(f=2);return a[f]?a[f]:Config.DLTimeoutMillis}return Config.DLTimeoutMillis},startEvent:function(a,e,f,k){if(!this.isEnabled())return null;var e=e||a,l=this.lookupTable[e];l?"timerID"in l&&clearTimeout(l.timerID):l={};var j=this._getTimeout(a);this.initFields(l);l.reqID=e;l.opName=encodeURIComponent(a);l.startTime=new Date;this.lookupTable[e]=l;if(null!=f&&"success"!=this.setData(e,f))return null;null!=k&&(j=k);if(0<
j){if(j<this.MIN_THRESHOLD_MILLIS)j=this.MIN_THRESHOLD_MILLIS;l.timerID=setTimeout(g.hitch(this,"endEvent",e,null,!0),j)}return this.lastreqid=e},endEvent:function(a,e,f){if(!this.isEnabled())return"error:disabled";if(null==a)return"null reqID";var k=this.lookupTable[a];if(k){"timerID"in k&&(clearTimeout(k.timerID),delete k.timerID);null!=e&&this.setData(a,e);if(f)k.opResult="timeout",k.opTime=this._getTimeout(k.opName);else{if(""==k.opTime)k.opTime=new Date-k.startTime;e=k.opName;if(k.opTime<Config.DLSendDiagThresholdMillis)k.opData=
"read_mail"==e||"read_mail_att"==e||"read_pop"==e||"read_pop_att"==e||"list_folder"==e?k.reqID:"";else if("load_mail"==e)k.opData=ws.bootstrap.lmdata}k.requestID=this.reqCounts[k.opName]++;e="";for(key in k)"reqID"!=key&&"startTime"!=key&&"state"!=key&&(e+="&"+key+"="+encodeURIComponent(k[key]));if("load_mail"==k.opName)try{var l=j.getBox(),e=e+("&bsize="+l.w+"x"+l.h),e=e+("&ssize="+screen.width+"x"+screen.height)}catch(g){}this.report(k,e);k.state="deleted";delete this.lookupTable[a]}else return"error:failed to get id "+
a;return"success"},append:function(a,e){if("load_mail"!=e){if(null==e||""==e)e=this.lastreqid;var f=this.lookupTable[e];if(f&&"deleted"!=f.state){var k=(new Date).getTime()-f.startTime.getTime();f.opData.length<this.MAX_LEN&&(f.opData+=a+k,f.opData.length>this.MAX_LEN&&(f.opData+=".."))}}},hasEvent:function(a){var e=this.lookupTable[a];return e&&e.reqID==a},removeEvent:function(a){var e=this.lookupTable[a];if(e)"timerID"in e&&(clearTimeout(e.timerID),delete e.timerID),e.state="deleted",delete this.lookupTable[a]},
createAndSendEvent:function(a,e,f){return!this.isEnabled()?"error:disabled":(a=this.startEvent(a,e,f,0))?this.endEvent(a):"error:startEvent failed"},report:function(a,e){this.isEnabled()&&setTimeout(g.hitch(this,"doReport",e),g.isFF&&"load_mail"==a.opName?300:100)},doReport:function(a){if(!this.img)this.img=g.create("img",{width:1,height:1},g.body());var e=(new Date).getTime();this.img.src=ws.string.substituteParams(Config.DataLayerBeaconURL,{time:e,host:window.location.hostname,appver:Config.Codename,
custom:a})}}})},"dojo/aspect":function(){define("dojo/aspect",[],function(){function g(b,e,f,h){var g=b[e],j="around"==e,o;if(j){var u=f(function(){return g.advice(this,arguments)});o={remove:function(){u&&(u=b=f=null)},advice:function(a,b){return u?u.apply(a,b):g.advice(a,b)}}}else o={remove:function(){if(o.advice){var a=o.previous,h=o.next;if(!h&&!a)delete b[e];else if(a?a.next=h:b[e]=h,h)h.previous=a;b=f=o.advice=null}},id:a++,advice:f,receiveArguments:h};if(g&&!j)if("after"==e){for(;g.next&&(g=
g.next););g.next=o;o.previous=g}else{if("before"==e)b[e]=o,o.next=g,g.previous=o}else b[e]=o;return o}function j(b){return function(e,h,j,q){var s=e[h],o;if(!s||s.target!=e){e[h]=o=function(){for(var b=a,e=arguments,h=o.before;h;)e=h.advice.apply(this,e)||e,h=h.next;if(o.around)var k=o.around.advice(this,e);for(h=o.after;h&&h.id<b;){if(h.receiveArguments)var l=h.advice.apply(this,e),k=l===f?k:l;else k=h.advice.call(this,k,e);h=h.next}return k};if(s)o.around={advice:function(a,b){return s.apply(a,
b)}};o.target=e}e=g(o||s,b,j,q);j=null;return e}}var f,a=0,b=j("after"),e=j("before"),h=j("around");return{before:e,around:h,after:b}})},"dojo/_base/window":function(){define("dojo/_base/window",["./kernel","./lang","../sniff"],function(g,j,f){var a={global:g.global,doc:this.document||null,body:function(a){a=a||g.doc;return a.body||a.getElementsByTagName("body")[0]},setContext:function(b,e){g.global=a.global=b;g.doc=a.doc=e},withGlobal:function(b,e,f,k){var l=g.global;try{return g.global=a.global=
b,a.withDoc.call(null,b.document,e,f,k)}finally{g.global=a.global=l}},withDoc:function(b,e,h,k){var l=a.doc,j=f("quirks"),m=f("ie"),q,s,o;try{g.doc=a.doc=b;g.isQuirks=f.add("quirks","BackCompat"==g.doc.compatMode,!0,!0);if(f("ie")&&(o=b.parentWindow)&&o.navigator)q=parseFloat(o.navigator.appVersion.split("MSIE ")[1])||void 0,(s=b.documentMode)&&5!=s&&Math.floor(q)!=s&&(q=s),g.isIE=f.add("ie",q,!0,!0);h&&"string"==typeof e&&(e=h[e]);return e.apply(h,k||[])}finally{g.doc=a.doc=l,g.isQuirks=f.add("quirks",
j,!0,!0),g.isIE=f.add("ie",m,!0,!0)}}};j.mixin(g,a);return a})},"url:ws/suite/TodayPage.css":"","dijit/main":function(){define("dijit/main",["dojo/_base/kernel"],function(g){return g.dijit})},"dojo/NodeList-dom":function(){define("./_base/kernel,./query,./_base/array,./_base/lang,./dom-class,./dom-construct,./dom-geometry,./dom-attr,./dom-style".split(","),function(g,j,f,a,b,e,h,k,l){function n(a){return function(b,e,f){return 2==arguments.length?a["string"==typeof e?"get":"set"](b,e):a.set(b,e,f)}}
var m=function(a){return 1==a.length&&"string"==typeof a[0]},q=function(a){var b=a.parentNode;b&&b.removeChild(a)},s=j.NodeList,o=s._adaptWithCondition,u=s._adaptAsForEach,p=s._adaptAsMap;a.extend(s,{_normalize:function(b,f){var h=!0===b.parse;if("string"==typeof b.template)var k=b.templateFunc||g.string&&g.string.substitute,b=k?k(b.template,b):b;k=typeof b;"string"==k||"number"==k?(b=e.toDom(b,f&&f.ownerDocument),b=11==b.nodeType?a._toArray(b.childNodes):[b]):a.isArrayLike(b)?a.isArray(b)||(b=a._toArray(b)):
b=[b];if(h)b._runParse=!0;return b},_cloneNode:function(a){return a.cloneNode(!0)},_place:function(a,b,f,h){if(!(1!=b.nodeType&&"only"==f))for(var k,l=a.length,j=l-1;0<=j;j--){var m=h?this._cloneNode(a[j]):a[j];if(a._runParse&&g.parser&&g.parser.parse){k||(k=b.ownerDocument.createElement("div"));k.appendChild(m);g.parser.parse(k);for(m=k.firstChild;k.firstChild;)k.removeChild(k.firstChild)}j==l-1?e.place(m,b,f):b.parentNode.insertBefore(m,b);b=m}},position:p(h.position),attr:o(n(k),m),style:o(n(l),
m),addClass:u(b.add),removeClass:u(b.remove),toggleClass:u(b.toggle),replaceClass:u(b.replace),empty:u(e.empty),removeAttr:u(k.remove),marginBox:p(h.getMarginBox),place:function(a,b){var f=j(a)[0];return this.forEach(function(a){e.place(a,f,b)})},orphan:function(a){return(a?j._filterResult(this,a):this).forEach(q)},adopt:function(a,b){return j(a).place(this[0],b)._stash(this)},query:function(a){if(!a)return this;var b=new s;this.map(function(e){j(a,e).forEach(function(a){void 0!==a&&b.push(a)})});
return b._stash(this)},filter:function(a){var b=arguments,e=this,h=0;if("string"==typeof a){e=j._filterResult(this,b[0]);if(1==b.length)return e._stash(this);h=1}return this._wrap(f.filter(e,b[h],b[h+1]),this)},addContent:function(a,b){for(var a=this._normalize(a,this[0]),e=0,f;f=this[e];e++)this._place(a,f,b,0<e);return this}});return s})},"url:ws/calendar/EventsApp.html":'<div class="appNode appEvent">\n\t<div data-dojo-type="dijit/layout/BorderContainer" data-dojo-attach-point="layoutWidget" class="layoutWidget">\n\t\t<div class="mainSprite appTitleBar" data-dojo-type="ws/widget/Pane" data-dojo-props="region:\'top\'">\n\t\t\t<div class="appTitleLink" data-dojo-attach-point="appTitleLink" data-dojo-attach-event="onclick: appMenu"><span class="appTitle">${NavEvents}</span><img src="${spacer}" class="mainSprite appTitleArrow"></div>\n\t\t\t<ul>\n\t\t\t\t<li class="mainSprite appTitleClose" data-dojo-attach-event="onclick: restoreApp" style="display:none;"></li>\n\t\t\t\t<li class="mainSprite appTitleAddEv" data-dojo-attach-event="onclick: addEventPlus,onmouseout: onMouseOut,onmouseover: onMouseOver" data-dojo-attach-point="appTitleAddEv"></li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class="eventNode" data-dojo-type="ws/widget/Pane" data-dojo-attach-point="eventNode" data-dojo-attach-event="onClick: viewEvent" data-dojo-props="region:\'center\'"></div>\n\t\t<div class="eventLoading" data-dojo-type="ws/widget/Pane" data-dojo-attach-point="eventLoading" data-dojo-props="region:\'center\'">\n\t\t\t<div class="eventSpinner" data-dojo-attach-point="eventSpinner"></div>\n\t\t\t<div class="eventLoadingMsg">${Loading}</div>\n\t\t</div>\n\t\t<div data-dojo-attach-point="appEventEmpty" class="appEventEmpty" data-dojo-type="ws/widget/Pane" data-dojo-props="region:\'center\'" style="display:none;">\n\t\t\t<div class="appEventEmptyMsg">${EventAppEmpty}</div>\n\t\t\t<div data-dojo-attach-point="toolbar" data-dojo-type="ws/widget/WSToolbar" vizType="Bare">\n\t\t\t\t<div data-dojo-type="ws/widget/Pane" data-dojo-props="toolbarPosition: \'center\'">\n\t\t\t\t\t<div data-dojo-type="ws/widget/Button" data-dojo-attach-event="onClick: addEventBtn">${EventAppEmptyBtn}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\t\t\t\t\n\n',
"dojox/grid/_grid/GridView":function(){define("dojox/grid/_grid/GridView","dojo/_base/declare,dojo,dijit/_Widget,dijit/_Templated,dojox/grid/contentBuilder,dojox/grid/headerBuilder".split(","),function(g,j,f,a,b,e){return g("dojox.grid._grid.GridView",[f,a],{defaultWidth:"18em",viewWidth:"",templateString:'<div class="dojoxGrid-view"><div class="dojoxGrid-header" dojoAttachPoint="headerNode"><div style="width: 9000em"><div dojoAttachPoint="headerContentNode"></div></div></div><input type="checkbox" class="dojoxGrid-hidden-focus" dojoAttachPoint="hiddenFocusNode" /><input type="checkbox" class="dojoxGrid-hidden-focus" /><div class="dojoxGrid-scrollbox" dojoAttachPoint="scrollboxNode"><div class="dojoxGrid-content" dojoAttachPoint="contentNode" hidefocus="hidefocus"></div></div></div>',
themeable:!1,classTag:"dojoxGrid",marginBottom:0,rowPad:2,postMixInProperties:function(){this.rowNodes=[]},postCreate:function(){j.connect(this.scrollboxNode,"onscroll",j.hitch(this,"doscroll"));dojox.grid.funnelEvents(this.contentNode,this,"doContentEvent",["mouseover","mouseout","click","dblclick","contextmenu"]);dojox.grid.funnelEvents(this.headerNode,this,"doHeaderEvent","dblclick,mouseover,mouseout,mousemove,mousedown,click,contextmenu".split(","));this.content=new b(this);this.header=new e(this)},
destroy:function(){dojox.grid.removeNode(this.headerNode);this.inherited("destroy",arguments)},focus:function(){j.isSafari||j.isOpera?this.hiddenFocusNode.focus():this.scrollboxNode.focus()},setStructure:function(a){a=this.structure=a;this.viewWidth=a.width&&j.isNumber(a.width)?a.width+"em":a.width||this.viewWidth;this.onBeforeRow=a.onBeforeRow;if(this.noscroll=a.noscroll)this.scrollboxNode.style.overflow="hidden";this.testFlexCells();this.updateStructure()},testFlexCells:function(){this.flexCells=
!1;for(var a=0,b;b=this.structure.rows[a];a++)for(var e=0,f;f=b[e];e++)f.view=this,this.flexCells=this.flexCells||f.isFlex();return this.flexCells},updateStructure:function(){this.header.update();this.content.update()},getScrollbarWidth:function(){return this.noscroll?0:dojox.grid.getScrollbarWidth()},getColumnsWidth:function(){return this.headerContentNode.firstChild.offsetWidth},getWidth:function(){return this.viewWidth||this.getColumnsWidth()+this.getScrollbarWidth()+"px"},getContentWidth:function(){return Math.max(0,
j._getContentBox(this.domNode).w-this.getScrollbarWidth())+"px"},render:function(){this.scrollboxNode.style.height="";this.renderHeader()},renderHeader:function(){this.headerContentNode.innerHTML=this.header.generateHtml(this._getHeaderContent);if(0<this.headerContentNode.childNodes.length&&0<=this.grid.getSortIndex()){var a=this.grid.getSortIndex(),b=this.headerContentNode.childNodes[0].childNodes[0].childNodes[0].childNodes;b[a-1]&&j.addClass(b[a-1],"dojoxGrid-sort-col-prevSibling");b[a]&&j.addClass(b[a],
"dojoxGrid-sort-col")}},_getHeaderContent:function(a){var b=a.name||a.grid.getCellName(a);return a.index!=a.grid.getSortIndex()?b:['<div class="',0<a.grid.sortInfo?"dojoxGrid-sort-down":"dojoxGrid-sort-up",'">',b,"</div>"].join("")},resize:function(){this.resizeHeight();this.resizeWidth()},hasScrollbar:function(){return this.scrollboxNode.clientHeight!=this.scrollboxNode.offsetHeight},resizeHeight:function(){if(!this.grid.autoHeight){var a=this.domNode.clientHeight;this.hasScrollbar()||(a-=dojox.grid.getScrollbarWidth());
dojox.grid.setStyleHeightPx(this.scrollboxNode,a)}},resizeWidth:function(){if(this.flexCells)this.contentWidth=this.getContentWidth(),this.headerContentNode.firstChild.style.width=this.contentWidth;var a=this.scrollboxNode.offsetWidth-this.getScrollbarWidth(),a=Math.max(a,this.getColumnsWidth())+"px";with(this.contentNode)style.width="",style.width=a},setSize:function(a,b){with(this.domNode.style)a&&(width=a),height=0<=b?b+"px":"";with(this.headerNode.style)a&&(width=a)},renderRow:function(a,b){var e=
this.createRowNode(a);this.buildRow(a,e,b);this.grid.edit.restore(this,a);return e},createRowNode:function(a){var b=document.createElement("div");b.className=this.classTag+"-row";b[dojox.grid.rowIndexTag]=a;return this.rowNodes[a]=b},buildRow:function(a,b){this.buildRowContent(a,b);this.styleRow(a,b)},buildRowContent:function(a,b){b.innerHTML=this.content.generateHtml(a,a);if(this.flexCells)b.firstChild.style.width=this.contentWidth},rowRemoved:function(a){this.grid.edit.save(this,a);delete this.rowNodes[a]},
getRowNode:function(a){return this.rowNodes[a]},getCellNode:function(a,b){var e=this.getRowNode(a);if(e)return this.content.getCellNode(e,b)},styleRow:function(a,b){b._style=dojox.grid.getStyleText(b);this.styleRowNode(a,b)},styleRowNode:function(a,b){b&&this.doStyleRowNode(a,b)},doStyleRowNode:function(a,b){this.grid.styleRowNode(a,b)},updateRow:function(a){var b=this.getRowNode(a);if(b)b.style.height="",this.buildRow(a,b);return b},updateRowStyles:function(a){this.styleRowNode(a,this.getRowNode(a))},
lastTop:0,doscroll:function(){this.headerNode.scrollLeft=this.scrollboxNode.scrollLeft;var a=this.scrollboxNode.scrollTop;a!=this.lastTop&&this.grid.scrollTo(a)},setScrollTop:function(a){this.lastTop=a;this.scrollboxNode.scrollTop=a;return this.scrollboxNode.scrollTop},doContentEvent:function(a){if(this.content.decorateEvent(a))this.grid.onContentEvent(a)},doHeaderEvent:function(a){if(j.isMac&&j.isFF&&"mousedown"==a.type&&2==a.button)a.type="contextmenu";if(this.header.decorateEvent(a))this.grid.onHeaderEvent(a)},
dispatchContentEvent:function(a){return this.content.dispatchEvent(a)},dispatchHeaderEvent:function(a){return this.header.dispatchEvent(a)},setColWidth:function(a,b){this.grid.setCellWidth(a,b+"px")},update:function(){var a=this.scrollboxNode.scrollLeft;this.content.update();this.grid.update();this.scrollboxNode.scrollLeft=a}})})},"dojo/_base/event":function(){define("dojo/_base/event",["./kernel","../on","../has","../dom-geometry"],function(g,j,f,a){if(j._fixEvent){var b=j._fixEvent;j._fixEvent=
function(e,f){(e=b(e,f))&&a.normalizeEvent(e);return e}}var e={fix:function(a,b){return j._fixEvent?j._fixEvent(a,b):a},stop:function(a){f("dom-addeventlistener")||a&&a.preventDefault?(a.preventDefault(),a.stopPropagation()):(a=a||window.event,a.cancelBubble=!0,j._preventDefault.call(a))}};g.fixEvent=e.fix;g.stopEvent=e.stop;return e})},"dojo/errors/create":function(){define(["../_base/lang"],function(g){return function(j,f,a,b){var a=a||Error,e=function(b){if(a===Error){Error.captureStackTrace&&
Error.captureStackTrace(this,e);var k=Error.call(this,b),l;for(l in k)k.hasOwnProperty(l)&&(this[l]=k[l]);this.message=b;this.stack=k.stack}else a.apply(this,arguments);f&&f.apply(this,arguments)};e.prototype=g.delegate(a.prototype,b);e.prototype.name=j;return e.prototype.constructor=e}})},"dijit/_OnDijitClickMixin":function(){define("dijit/_OnDijitClickMixin","dojo/on,dojo/_base/array,dojo/keys,dojo/_base/declare,dojo/has,dojo/_base/unload,dojo/_base/window,./a11yclick".split(","),function(g,j,f,
a,b,e,h,k){g=a("dijit._OnDijitClickMixin",null,{connect:function(a,b,e){return this.inherited(arguments,[a,"ondijitclick"==b?k:b,e])}});g.a11yclick=k;return g})},"dojox/grid/focus":function(){define("dojox/grid/focus",["dojo/_base/declare","dojo"],function(g,j){return g("dojox.grid.focus",null,{constructor:function(f){this.grid=f;this.cell=null;this.rowIndex=-1;j.connect(this.grid.domNode,"onfocus",this,"doFocus")},tabbingOut:!1,focusClass:"dojoxGrid-cell-focus",focusView:null,initFocusView:function(){this.focusView=
this.grid.views.getFirstScrollingView()},isFocusCell:function(f,a){return this.cell==f&&this.rowIndex==a},isLastFocusCell:function(){return this.rowIndex==this.grid.rowCount-1&&this.cell.index==this.grid.layout.cellCount-1},isFirstFocusCell:function(){return 0==this.rowIndex&&0==this.cell.index},isNoFocusCell:function(){return 0>this.rowIndex||!this.cell},_focusifyCellNode:function(f){var a=this.cell&&this.cell.getNode(this.rowIndex);if(a){j.toggleClass(a,this.focusClass,f);this.scrollIntoView();
try{this.grid.edit.isEditing()||dojox.grid.fire(a,"focus")}catch(b){}}},scrollIntoView:function(){if(this.cell){var f=this.cell,a=f.view.scrollboxNode,b=a.clientWidth,e=a.scrollLeft,h=a.scrollTop,k=a.clientHeight,l=f.getNode(this.rowIndex),f=f.view.getRowNode(this.rowIndex),g=this.grid.scroller.findScrollTop(this.rowIndex);if(l.offsetLeft+l.offsetWidth>e+b)a.scrollLeft=l.offsetLeft+l.offsetWidth-b;else if(l.offsetLeft<e)a.scrollLeft=l.offsetLeft;g+f.offsetHeight>h+k?this.grid.setScrollTop(g+f.offsetHeight-
k):g<h&&this.grid.setScrollTop(g)}},styleRow:function(f){f.index==this.rowIndex&&this._focusifyCellNode(!0)},setFocusIndex:function(f,a){this.setFocusCell(this.grid.getCell(a),f)},setFocusCell:function(f,a){if(f&&!this.isFocusCell(f,a))this.tabbingOut=!1,this.focusGrid(),this._focusifyCellNode(!1),this.cell=f,this.rowIndex=a,this._focusifyCellNode(!0);if(j.isOpera)setTimeout(j.hitch(this.grid,"onCellFocus",this.cell,this.rowIndex),1);else this.grid.onCellFocus(this.cell,this.rowIndex)},next:function(){var f=
this.rowIndex,a=this.cell.index+1,b=this.grid.layout.cellCount-1,e=this.grid.rowCount-1;a>b&&(a=0,f++);f>e&&(a=b,f=e);this.setFocusIndex(f,a)},previous:function(){var f=this.rowIndex||0,a=(this.cell.index||0)-1;0>a&&(a=this.grid.layout.cellCount-1,f--);0>f&&(a=f=0);this.setFocusIndex(f,a)},move:function(f,a){var b=this.grid.layout.cellCount-1,e=this.rowIndex,h=this.cell.index,k=Math.min(this.grid.rowCount-1,Math.max(0,e+f)),b=Math.min(b,Math.max(0,h+a));this.setFocusIndex(k,b);f&&this.grid.updateRow(e)},
previousKey:function(f){this.isFirstFocusCell()?this.tabOut(this.grid.domNode):(j.stopEvent(f),this.previous())},nextKey:function(f){this.isLastFocusCell()?this.tabOut(this.grid.lastFocusNode):(j.stopEvent(f),this.next())},tabOut:function(f){this.tabbingOut=!0;f.focus()},focusGrid:function(){dojox.grid.fire(this.focusView,"focus");this._focusifyCellNode(!0)},doFocus:function(f){if(!(f&&f.target!=f.currentTarget))!this.tabbingOut&&this.isNoFocusCell()&&this.setFocusIndex(0,0),this.tabbingOut=!1}})})},
"ws/mail/MailFilterModel":function(){define("ws/mail/MailFilterModel",["dojo/_base/declare","dojo","dijit","ws/io"],function(g,j){return g(null,{filterId:-1,priority:-1,filterName:"",from:"",to:"",cc:"",bcc:"",subject:"",messageContains:"",filterType:"",moveToFolder:"",tagName:"",filterAlertOnlineAIM:!1,filterAlertDevice:!1,filterAlertDeviceId:-1,deviceNumber:"",setFilter:function(f,a){this.priority=a;this.filterId=f.filterId;this.filterName=f.filterName;this.from=f.from;this.to=f.to;this.cc=f.cc;
this.bcc=f.bcc;this.subject=f.subject;this.messageContains=f.messageContains;this.filterType=f.filterType;for(var b=0;b<f.actionList.length;b++){var e=f.actionList[b];switch(e.type){case "FOLDER":this.moveToFolder=e.folder;break;case "ALERTS":this.filterAlertOnlineAIM=e.online;this.filterAlertDevice=e.device;this.filterAlertDeviceId=e.deviceId;this.deviceNumber=e.deviceNumber;break;case "TAG":this.tagName=e.tagName}}},createFilter:function(f){j.mixin(f,this);this._filterAction("Create",f)},deleteFilter:function(f){j.mixin(f,
this);this._filterAction("Delete",f)},modifyFilter:function(f){j.mixin(f,this);this._filterAction("Modify",f)},_filterAction:function(f,a){this.clearCache();a.filterAction=f;ws.io.rpc({action:"FilterAction",content:a,load:a.load,error:a.error})},clearCache:function(){var f=function(a){if(a._g_ws_MailFilterCache)try{delete a._g_ws_MailFilterCache}catch(b){}a._g_ws_MailFilterCache=null};f(window);window._ws_isOpenerWS()&&f(window.opener)}})})},"dojo/selector/acme":function(){define(["../dom","../sniff",
"../_base/array","../_base/lang","../_base/window"],function(g,j,f,a,b){var e=a.trim,h=f.forEach,k="BackCompat"==b.doc.compatMode,l=!1,n=function(){return!0},m=function(a){for(var a=0<=">~+".indexOf(a.slice(-1))?a+" * ":a+" ",b=function(b,f){return e(a.slice(b,f))},f=[],h=-1,k=-1,g=-1,j=-1,m=-1,n=-1,q=-1,s,v="",w="",o,p=0,u=a.length,z=null,x=null,A=function(){if(0<=n)z.id=b(n,p).replace(/\\/g,""),n=-1;if(0<=q){var a=q==p?null:b(q,p);z[0>">~+".indexOf(a)?"tag":"oper"]=a;q=-1}0<=m&&(z.classes.push(b(m+
1,p).replace(/\\/g,"")),m=-1)};v=w,w=a.charAt(p),p<u;p++)if("\\"!=v)if(z||(o=p,z={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return l?this.otag:this.tag}},q=p),s)w==s&&(s=null);else if("'"==w||'"'==w)s=w;else if(0<=h)if("]"==w){x.attr?x.matchFor=b(g||h+1,p):x.attr=b(h+1,p);if((h=x.matchFor)&&('"'==h.charAt(0)||"'"==h.charAt(0)))x.matchFor=h.slice(1,-1);if(x.matchFor)x.matchFor=x.matchFor.replace(/\\/g,"");z.attrs.push(x);x=null;h=g=-1}else{if("="==w)g=0<=
"|~^$*".indexOf(v)?v:"",x.type=g+w,x.attr=b(h+1,p-g.length),g=p+1}else if(0<=k){if(")"==w){if(0<=j)x.value=b(k+1,p);j=k=-1}}else if("#"==w)A(),n=p+1;else if("."==w)A(),m=p;else if(":"==w)A(),j=p;else if("["==w)A(),h=p,x={};else if("("==w)0<=j&&(x={name:b(j+1,p),value:null},z.pseudos.push(x)),k=p;else if(" "==w&&v!=w){A();0<=j&&z.pseudos.push({name:b(j+1,p)});z.loops=z.pseudos.length||z.attrs.length||z.classes.length;z.oquery=z.query=b(o,p);z.otag=z.tag=z.oper?null:z.tag||"*";if(z.tag)z.tag=z.tag.toUpperCase();
if(f.length&&f[f.length-1].oper)z.infixOper=f.pop(),z.query=z.infixOper.query+" "+z.query;f.push(z);z=null}return f},q=function(a,b){return!a?b:!b?a:function(){return a.apply(window,arguments)&&b.apply(window,arguments)}},s=function(a,b){var e=b||[];a&&e.push(a);return e},o=function(a){return 1==a.nodeType},u=function(a,b){return!a?"":"class"==b?a.className||"":"for"==b?a.htmlFor||"":"style"==b?a.style.cssText||"":(l?a.getAttribute(b):a.getAttribute(b,2))||""},p={"*=":function(a,b){return function(e){return 0<=
u(e,a).indexOf(b)}},"^=":function(a,b){return function(e){return 0==u(e,a).indexOf(b)}},"$=":function(a,b){return function(e){var e=" "+u(e,a),f=e.lastIndexOf(b);return-1<f&&f==e.length-b.length}},"~=":function(a,b){var e=" "+b+" ";return function(b){return 0<=(" "+u(b,a)+" ").indexOf(e)}},"|=":function(a,b){var e=b+"-";return function(f){f=u(f,a);return f==b||0==f.indexOf(e)}},"=":function(a,b){return function(e){return u(e,a)==b}}},v="undefined"==typeof b.doc.firstChild.nextElementSibling,w=!v?
"nextElementSibling":"nextSibling",z=!v?"previousElementSibling":"previousSibling",x=v?o:n,A=function(a){for(;a=a[z];)if(x(a))return!1;return!0},B=function(a){for(;a=a[w];)if(x(a))return!1;return!0},C=function(a){var b=a.parentNode,b=7!=b.nodeType?b:b.nextSibling,e=0,f=b.children||b.childNodes,h=a._i||a.getAttribute("_i")||-1,k=b._l||("undefined"!==typeof b.getAttribute?b.getAttribute("_l"):-1);if(!f)return-1;f=f.length;if(k==f&&0<=h&&0<=k)return h;j("ie")&&"undefined"!==typeof b.setAttribute?b.setAttribute("_l",
f):b._l=f;h=-1;for(b=b.firstElementChild||b.firstChild;b;b=b[w])if(x(b))j("ie")?b.setAttribute("_i",++e):b._i=++e,a===b&&(h=e);return h},I=function(a){return!(C(a)%2)},J=function(a){return C(a)%2},L={checked:function(){return function(a){return!!("checked"in a?a.checked:a.selected)}},disabled:function(){return function(a){return a.disabled}},enabled:function(){return function(a){return!a.disabled}},"first-child":function(){return A},"last-child":function(){return B},"only-child":function(){return function(a){return A(a)&&
B(a)}},empty:function(){return function(a){for(var b=a.childNodes,a=a.childNodes.length-1;0<=a;a--){var e=b[a].nodeType;if(1===e||3==e)return!1}return!0}},contains:function(a,b){var e=b.charAt(0);if('"'==e||"'"==e)b=b.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(b)}},not:function(a,b){var e=m(b)[0],f={el:1};if("*"!=e.tag)f.tag=1;if(!e.classes.length)f.classes=1;var h=O(e,f);return function(a){return!h(a)}},"nth-child":function(a,b){var e=parseInt;if("odd"==b)return J;if("even"==b)return I;
if(-1!=b.indexOf("n")){var f=b.split("n",2),h=f[0]?"-"==f[0]?-1:e(f[0]):1,k=f[1]?e(f[1]):0,l=0,g=-1;0<h?0>k?k=k%h&&h+k%h:0<k&&(k>=h&&(l=k-k%h),k%=h):0>h&&(h*=-1,0<k&&(g=k,k%=h));if(0<h)return function(a){a=C(a);return a>=l&&(0>g||a<=g)&&a%h==k};b=k}var j=e(b);return function(a){return C(a)==j}}},U=9>j("ie")||9==j("ie")&&j("quirks")?function(a){var b=a.toLowerCase();"class"==b&&(a="className");return function(e){return l?e.getAttribute(a):e[a]||e[b]}}:function(a){return function(b){return b&&b.getAttribute&&
b.hasAttribute(a)}},O=function(a,b){if(!a)return n;var b=b||{},e=null;"el"in b||(e=q(e,o));"tag"in b||"*"!=a.tag&&(e=q(e,function(b){return b&&(l?b.tagName:b.tagName.toUpperCase())==a.getTag()}));"classes"in b||h(a.classes,function(a,b){var f=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");e=q(e,function(a){return f.test(a.className)});e.count=b});"pseudos"in b||h(a.pseudos,function(a){var b=a.name;L[b]&&(e=q(e,L[b](b,a.value)))});"attrs"in b||h(a.attrs,function(a){var b,f=a.attr;a.type&&p[a.type]?b=p[a.type](f,
a.matchFor):f.length&&(b=U(f));b&&(e=q(e,b))});"id"in b||a.id&&(e=q(e,function(b){return!!b&&b.id==a.id}));e||"default"in b||(e=n);return e},V=function(a){return function(b,e,f){for(;b=b[w];)if(!v||o(b)){(!f||X(b,f))&&a(b)&&e.push(b);break}return e}},$=function(a){return function(b,e,f){for(b=b[w];b;){if(x(b)){if(f&&!X(b,f))break;a(b)&&e.push(b)}b=b[w]}return e}},G=function(a){a=a||n;return function(b,e,f){for(var h=0,k=b.children||b.childNodes;b=k[h++];)x(b)&&(!f||X(b,f))&&a(b,h)&&e.push(b);return e}},
F={},D=function(a){var e=F[a.query];if(e)return e;var f=a.infixOper,f=f?f.oper:"",h=O(a,{el:1}),l="*"==a.tag,j=b.doc.getElementsByClassName;if(f){j={el:1};if(l)j.tag=1;h=O(a,j);"+"==f?e=V(h):"~"==f?e=$(h):">"==f&&(e=G(h))}else if(a.id)h=!a.loops&&l?n:O(a,{el:1,id:1}),e=function(b,e){var f=g.byId(a.id,b.ownerDocument||b);if(f&&h(f)){if(9==b.nodeType)return s(f,e);for(var k=f.parentNode;k&&!(k==b);)k=k.parentNode;if(k)return s(f,e)}};else if(j&&/\{\s*\[native code\]\s*\}/.test(""+j)&&a.classes.length&&
!k)var h=O(a,{el:1,classes:1,id:1}),m=a.classes.join(" "),e=function(a,b,e){for(var b=s(0,b),f,k=0,l=a.getElementsByClassName(m);f=l[k++];)h(f,a)&&X(f,e)&&b.push(f);return b};else!l&&!a.loops?e=function(b,e,f){for(var e=s(0,e),h=0,k=a.getTag(),k=k?b.getElementsByTagName(k):[];b=k[h++];)X(b,f)&&e.push(b);return e}:(h=O(a,{el:1,tag:1,id:1}),e=function(b,e,f){for(var e=s(0,e),k,l=0,g=(k=a.getTag())?b.getElementsByTagName(k):[];k=g[l++];)h(k,b)&&X(k,f)&&e.push(k);return e});return F[a.query]=e},H={},
N={},M=function(a){var b=m(e(a));if(1==b.length){var f=D(b[0]);return function(a){if(a=f(a,[]))a.nozip=!0;return a}}return function(a){for(var a=s(a),e,f,h=b.length,k,l,g=0;g<h;g++){l=[];e=b[g];f=a.length-1;if(0<f)k={},l.nozip=!0;f=D(e);for(var j=0;e=a[j];j++)f(e,l,k);if(!l.length)break;a=l}return l}},E=j("ie")?"commentStrip":"nozip",K=!!b.doc.querySelectorAll,S=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,P=function(a,b,e,f){return e?(b?b+" ":"")+e+(f?" "+f:""):a},R=/([^[]*)([^\]]*])?/g,W=function(a,
b,e){return b.replace(S,P)+(e||"")},T=function(a,b){a=a.replace(R,W);if(K){var e=N[a];if(e&&!b)return e}if(e=H[a])return e;var e=a.charAt(0),f=-1==a.indexOf(" ");0<=a.indexOf("#")&&f&&(b=!0);if(K&&!b&&-1==">~+".indexOf(e)&&(!j("ie")||-1==a.indexOf(":"))&&!(k&&0<=a.indexOf("."))&&-1==a.indexOf(":contains")&&-1==a.indexOf(":checked")&&-1==a.indexOf("|=")){var h=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return N[a]=function(b){try{if(!(9==b.nodeType||f))throw"";var e=b.querySelectorAll(h);e[E]=
!0;return e}catch(k){return T(a,!0)(b)}}}var l=a.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return H[a]=2>l.length?M(a):function(a){for(var b=0,e=[],f;f=l[b++];)e=e.concat(M(f)(a));return e}},Q=0,ka=j("ie")?function(a){return l?a.getAttribute("_uid")||a.setAttribute("_uid",++Q)||Q:a.uniqueID}:function(a){return a._uid||(a._uid=++Q)},X=function(a,b){if(!b)return 1;var e=ka(a);return!b[e]?b[e]=1:0},fa=function(a){if(a&&a.nozip)return a;var b=[];if(!a||!a.length)return b;a[0]&&b.push(a[0]);
if(2>a.length)return b;Q++;var e,f;if(j("ie")&&l){var h=Q+"";a[0].setAttribute("_zipIdx",h);for(e=1;f=a[e];e++)a[e].getAttribute("_zipIdx")!=h&&b.push(f),f.setAttribute("_zipIdx",h)}else if(j("ie")&&a.commentStrip)try{for(e=1;f=a[e];e++)o(f)&&b.push(f)}catch(k){}else{a[0]&&(a[0]._zipIdx=Q);for(e=1;f=a[e];e++)a[e]._zipIdx!=Q&&b.push(f),f._zipIdx=Q}return b},ba=function(a,e){e=e||b.doc;l="div"===(e.ownerDocument||e).createElement("div").tagName;var f=T(a)(e);return f&&f.nozip?f:fa(f)};ba.filter=function(a,
b,e){for(var h=[],k=m(b),k=1==k.length&&!/[^\w#\.]/.test(b)?O(k[0]):function(a){return-1!=f.indexOf(ba(b,g.byId(e)),a)},l=0,j;j=a[l];l++)k(j)&&h.push(j);return h};return ba})},"url:ws/widget/SingleLineNotification.html":'<div class="SingleLineNotification">\n\t<div class="alertBar">\n\t\t<span class="alertLeft"><img class="mainSprite slnAlertIcon" src="${spacer}"><span data-dojo-attach-point="alertTxt">${NotificationHeadsUp}</span></span><span class="barRight" data-dojo-attach-point="msg"></span>\n\t</div>\n\t<img src="${spacer}" class="mainSprite closeBtn" data-dojo-attach-point="closeBtn" data-dojo-attach-event="onclick:close">\n</div>\n',
"dojox/grid/data/Dynamic":function(){define("dojox/grid/data/Dynamic",["dojo/_base/declare","dojo","dojox/grid/data/Table"],function(g,j,f){g=g("dojox.grid.data.Dynamic",f,{constructor:function(){this.page=[];this.pages=[]},page:null,pages:null,rowsPerPage:100,requests:0,bop:-1,eop:-1,clearData:function(){this.pages=[];this.bop=this.eop=-1;this.setData([])},getRowCount:function(){return this.count},getColCount:function(){return this.fields.count()},setRowCount:function(a){this.count=a;this.change()},
requestsPending:function(){},rowToPage:function(a){return this.rowsPerPage?Math.floor(a/this.rowsPerPage):a},pageToRow:function(a){return this.rowsPerPage?this.rowsPerPage*a:a},requestRows:function(){},rowsProvided:function(){this.requests--;0==this.requests&&this.requestsPending(!1)},requestPage:function(a){var a=this.pageToRow(a),b=Math.min(this.rowsPerPage,this.count-a);0<b&&(this.requests++,this.requestsPending(!0),setTimeout(j.hitch(this,"requestRows",a,b),1))},needPage:function(a){this.pages[a]||
(this.pages[a]=!0,this.requestPage(a))},preparePage:function(a){if(a<this.bop||a>=this.eop)a=this.rowToPage(a),this.needPage(a),this.bop=a*this.rowsPerPage,this.eop=this.bop+(this.rowsPerPage||this.count)},isRowLoaded:function(a){return Boolean(this.data[a])},removePages:function(a){for(var b=0,e;void 0!=(e=a[b]);b++)this.pages[this.rowToPage(e)]=!1;this.bop=this.eop=-1},remove:function(a){this.removePages(a);dojox.grid.data.Table.prototype.remove.apply(this,arguments)},getRow:function(a){var b=this.data[a];
b||this.preparePage(a);return b},getDatum:function(a,b){var e=this.getRow(a);return e?e[b]:this.fields.get(b).na},setDatum:function(a,b,e){var f=this.getRow(b);f&&(f[e]=a,this.datumChange(a,b,e))},canSort:function(){return!1}});dojox.grid.data.dynamic=dojox.grid.data.Dyanamic;return g})},"ws/idleMonitor":function(){define("ws/idleMonitor",["dojo/_base/declare","dojo"],function(g,j){return g(null,{_events:[[window,"scroll"],[window,"resize"],[document,"mousemove"],[document,"keydown"]],_lastUserActionTime:new Date,
_debug:!1,_checkInterval:1E4,_minIdleTime:Config.StandardMinIdleTimeForRefresh,_maxRefreshDelay:Config.StandardMaxTimeForRefresh,constructor:function(f){this._debug=f;this._initObservers();this._startTimers();j.subscribe("IdleMonitor/activityDetected",this,"activityDetected")},activityDetected:function(){this._lastUserActionTime=new Date},_initObservers:function(){j.forEach(this._events,function(f){j.connect(f[0],f[1],j.hitch(this,"activityDetected"))},this)},_getIdleSeconds:function(){return(new Date-
this._lastUserActionTime)/1E3},_startTimers:function(){setInterval(j.hitch(this,function(){this._getIdleSeconds()>this._minIdleTime&&(this._debug&&alert("About to reload!  Idle time exceeded "+this._minIdleTime),window.location.reload())}),this._checkInterval);setTimeout(j.hitch(this,function(){this._debug&&alert("About to reload!  MaxRefreshDelay exceeded "+this._maxRefreshDelay);window.location.reload()}),1E3*this._maxRefreshDelay)}})})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array",
"./dom"],function(g,j,f){function a(a){if("string"==typeof a||a instanceof String){if(a&&!e.test(a))return h[0]=a,h;a=a.split(e);a.length&&!a[0]&&a.shift();a.length&&!a[a.length-1]&&a.pop();return a}return!a?[]:j.filter(a,function(a){return a})}var b,e=/\s+/,h=[""],k={};return b={contains:function(a,b){return 0<=(" "+f.byId(a).className+" ").indexOf(" "+b+" ")},add:function(b,e){var b=f.byId(b),e=a(e),h=b.className,k,h=h?" "+h+" ":" ";k=h.length;for(var g=0,j=e.length,u;g<j;++g)(u=e[g])&&0>h.indexOf(" "+
u+" ")&&(h+=u+" ");k<h.length&&(b.className=h.substr(1,h.length-2))},remove:function(b,e){var b=f.byId(b),h;if(void 0!==e){e=a(e);h=" "+b.className+" ";for(var k=0,j=e.length;k<j;++k)h=h.replace(" "+e[k]+" "," ");h=g.trim(h)}else h="";b.className!=h&&(b.className=h)},replace:function(a,e,h){a=f.byId(a);k.className=a.className;b.remove(k,h);b.add(k,e);a.className!==k.className&&(a.className=k.className)},toggle:function(e,h,k){e=f.byId(e);if(void 0===k)for(var h=a(h),g=0,j=h.length,o;g<j;++g)o=h[g],
b[b.contains(e,o)?"remove":"add"](e,o);else b[k?"add":"remove"](e,h);return k}}})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(g,j,f){g._name="browser";j.mixin(g,{isBrowser:!0,isFF:f("ff"),isIE:f("ie"),isKhtml:f("khtml"),isWebKit:f("webkit"),isMozilla:f("mozilla"),isMoz:f("mozilla"),isOpera:f("opera"),isSafari:f("safari"),isChrome:f("chrome"),isMac:f("mac"),isIos:f("ios"),isAndroid:f("android"),isWii:f("wii"),isQuirks:f("quirks"),isAir:f("air")});g.locale=g.locale||
(f("ie")?navigator.userLanguage:navigator.language).toLowerCase();return f})},"url:ws/widget/FTUTip.css":"","dojo/has":function(){define(["require","module"],function(g){var j=g.has||function(){};j.add("dom-addeventlistener",!!document.addEventListener);j.add("touch","ontouchstart"in document||0<window.navigator.msMaxTouchPoints);j.add("device-width",screen.availWidth||innerWidth);g=document.createElement("form");j.add("dom-attributes-explicit",0==g.attributes.length);j.add("dom-attributes-specified-flag",
0<g.attributes.length&&40>g.attributes.length);j.clearElement=function(f){f.innerHTML="";return f};j.normalize=function(f,a){var b=f.match(/[\?:]|[^:\?]*/g),e=0,h=function(a){var f=b[e++];if(":"==f)return 0;if("?"==b[e++]){if(!a&&j(f))return h();h(!0);return h(a)}return f||0};return(f=h())&&a(f)};j.load=function(f,a,b){f?a([f],b):b()};return j})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(g,j){g.cookie=function(f,a,b){var e=document.cookie,h;if(1==arguments.length)h=(h=
e.match(RegExp("(?:^|; )"+j.escapeString(f)+"=([^;]*)")))?decodeURIComponent(h[1]):void 0;else{b=b||{};e=b.expires;if("number"==typeof e){var k=new Date;k.setTime(k.getTime()+864E5*e);e=b.expires=k}if(e&&e.toUTCString)b.expires=e.toUTCString();var a=encodeURIComponent(a),e=f+"="+a,g;for(g in b)e+="; "+g,k=b[g],!0!==k&&(e+="="+k);document.cookie=e}return h};g.cookie.isSupported=function(){if(!("cookieEnabled"in navigator))this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==
this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1});return navigator.cookieEnabled};return g.cookie})},"dojox/grid/scroller/base":function(){define("dojox/grid/scroller/base",["dojo/_base/declare","dojo"],function(g,j){return g("dojox.grid.scroller.base",null,{constructor:function(){this.pageHeights=[];this.stack=[]},rowCount:0,defaultRowHeight:10,keepRows:100,contentNode:null,scrollboxNode:null,defaultPageHeight:0,keepPages:10,pageCount:0,windowHeight:0,firstVisibleRow:0,
lastVisibleRow:0,page:0,pageTop:0,init:function(f,a,b){switch(arguments.length){case 3:this.rowsPerPage=b;case 2:this.keepRows=a;case 1:this.rowCount=f}this.defaultPageHeight=this.defaultRowHeight*this.rowsPerPage;this.pageCount=Math.ceil(this.rowCount/this.rowsPerPage);this.keepPages=Math.max(Math.ceil(this.keepRows/this.rowsPerPage),2);this.invalidate();if(this.scrollboxNode)this.scrollboxNode.scrollTop=0,this.scroll(0),this.scrollboxNode.onscroll=j.hitch(this,"onscroll")},invalidate:function(){this.invalidateNodes();
this.pageHeights=[];this.height=this.pageCount?(this.pageCount-1)*this.defaultPageHeight+this.calcLastPageHeight():0;this.resize()},updateRowCount:function(f){this.invalidateNodes();this.rowCount=f;oldPageCount=this.pageCount;this.pageCount=Math.ceil(this.rowCount/this.rowsPerPage);if(this.pageCount<oldPageCount)for(f=oldPageCount-1;f>=this.pageCount;f--)this.height-=this.getPageHeight(f),delete this.pageHeights[f];else this.pageCount>oldPageCount&&(this.height+=this.defaultPageHeight*(this.pageCount-
oldPageCount-1)+this.calcLastPageHeight());this.resize()},pageExists:function(){},measurePage:function(){},positionPage:function(){},repositionPages:function(){},installPage:function(){},preparePage:function(){},renderPage:function(){},removePage:function(){},pacify:function(){},pacifying:!1,pacifyTicks:200,setPacifying:function(f){if(this.pacifying!=f)this.pacifying=f,this.pacify(this.pacifying)},startPacify:function(){this.startPacifyTicks=(new Date).getTime()},doPacify:function(){var f=(new Date).getTime()-
this.startPacifyTicks>this.pacifyTicks;this.setPacifying(!0);this.startPacify();return f},endPacify:function(){this.setPacifying(!1)},resize:function(){if(this.scrollboxNode)this.windowHeight=this.scrollboxNode.clientHeight;dojox.grid.setStyleHeightPx(this.contentNode,this.height)},calcLastPageHeight:function(){if(!this.pageCount)return 0;var f=(this.rowCount%this.rowsPerPage||this.rowsPerPage)*this.defaultRowHeight;return this.pageHeights[this.pageCount-1]=f},updateContentHeight:function(f){this.height+=
f;this.resize()},updatePageHeight:function(f){if(this.pageExists(f)){var a=this.getPageHeight(f),b=this.measurePage(f)||a;if((this.pageHeights[f]=b)&&a!=b)this.updateContentHeight(b-a),this.repositionPages(f)}},rowHeightChanged:function(f){this.updatePageHeight(Math.floor(f/this.rowsPerPage))},invalidateNodes:function(){for(;this.stack.length;)this.destroyPage(this.popPage())},createPageNode:function(){var f=document.createElement("div");f.style.position="absolute";f.style.left="0";return f},getPageHeight:function(f){f=
this.pageHeights[f];return void 0!==f?f:this.defaultPageHeight},pushPage:function(f){return this.stack.push(f)},popPage:function(){return this.stack.shift()},findPage:function(f){for(var a=0,b=0,e=0;a<this.pageCount&&!(e=this.getPageHeight(a),b+e>=f);a++,b+=e);this.page=a;this.pageTop=b},buildPage:function(f,a,b){this.preparePage(f,a);this.positionPage(f,b);this.installPage(f);this.renderPage(f);this.pushPage(f)},needPage:function(f,a){var b=this.getPageHeight(f),e=b;this.pageExists(f)?this.positionPage(f,
a):(this.buildPage(f,this.keepPages&&this.stack.length>=this.keepPages,a),b=this.measurePage(f)||b,(this.pageHeights[f]=b)&&e!=b&&this.updateContentHeight(b-e));return b},onscroll:function(){this.scroll(this.scrollboxNode.scrollTop)},scroll:function(f){this.startPacify();this.findPage(f);for(var a=this.height,b=this.getScrollBottom(f),e=this.page,h=this.pageTop;e<this.pageCount&&(0>b||h<b);e++)h+=this.needPage(e,h);this.firstVisibleRow=this.getFirstVisibleRow(this.page,this.pageTop,f);this.lastVisibleRow=
this.getLastVisibleRow(e-1,h,b);a!=this.height&&this.repositionPages(e-1);this.endPacify()},getScrollBottom:function(f){return 0<=this.windowHeight?f+this.windowHeight:-1},processNodeEvent:function(f,a){for(var b=f.target;b&&b!=a&&b.parentNode&&b.parentNode.parentNode!=a;)b=b.parentNode;if(!b||!b.parentNode||b.parentNode.parentNode!=a)return!1;f.topRowIndex=b.parentNode.pageIndex*this.rowsPerPage;f.rowIndex=f.topRowIndex+dojox.grid.indexInParent(b);f.rowTarget=b;return!0},processEvent:function(f){return this.processNodeEvent(f,
this.contentNode)},dummy:0})})},"ws/widget/DropDownButton":function(){define("ws/widget/DropDownButton","dojo/_base/declare,dojo,dijit,ws/widget/Button,ws/widget/DropDownBase,ws/html".split(","),function(g,j,f,a,b){return g([a,b],{showArrow:!0,dyn:!1,startup:function(){this.inherited(arguments);j.addClass(this.domNode,"DropDownButton");""!=this.size&&j.addClass(this.domNode,"DropDownButton"+this.size)},enableArrow:function(a){this.showArrow=a;this.arrowNode.style.display=a?"":"none";this.showArrowBorder&&
j.toggleClass(this.arrowNode,"btnSplitArrow",a);j.toggleClass(this.domNode,"DropDownButton",a)},resize:function(){if(this.dyn)this.domNode.style.width=j.marginBox(this.containerNode).w+"px"},isArrowEnabled:function(){return this.showArrow},updateMenu:function(){this.inherited(arguments);this.menu.padding=[0,-1]}})})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(g){return g.cache})},"ws/address/PeoplePicker":function(){define("ws/address/PeoplePicker","dojo/_base/declare,dojo/text!ws/address/PeoplePicker.html,dojo/text!ws/address/PeoplePicker.css,dojo,dijit,ws/widget/ListView,ws/address/PeoplePickerGridModel,dijit/layout/BorderContainer,ws/address/AddressModel,ws/string,ws/widget/Pane,ws/widget/popup,ws/widget/util".split(","),
function(g,j,f,a,b,e,h){return g([e],{templateString:j,css:{templateString:f},wrapperModelClass:h,showHeader:!1,highlightRow:0,rowHeight:20,autosizeColumnId:"NameAndEmail",initView:function(){this.columns=[{id:"NameAndEmail",width:"75px"}];this.inherited(arguments);this.subscribe("Suite/onKeyOnPress","onKeyPress")},showHighlight:function(b){a.toggleClass(this.grid.domNode,"showHighlight",b)},handleCellClick:function(a){if(a=this.model.getRow(a.rowIndex))this.onContactSelected(a)},onContactSelected:function(){},
searchAndOpen:function(b,e){this.highlightRow=0;this.model.search(b);if(this.model.isLoading()){this.showRolodex(!1);if(!b)this.showRolodexHandle=a.connect(this.model,"modelUpdated",a.hitch(this,function(){this.showRolodex(!b);this.onResized();a.disconnect(this.showRolodexHandle);this.showRolodexHandle=null}));ws.widget.popup({popup:this,around:e,padding:this.padding||[0,-1]})}else{if(0==this.model.getRowCount()){ws.widget.popup.close(this);return}this.isShowing()||(this.showRolodex(!b),ws.widget.popup({popup:this,
around:e,padding:this.padding||[0,-1]}),this.scrollToRow(0))}if(a.isMac&&a.isMoz)this.domNode.style.overflow="auto",ws.lang.setTimeout(this,function(){this.domNode.style.overflow=""},0)},move:function(e,f){b.placeOnScreenAroundElement(this.popupNode,e,{BL:"TL",TL:"BL"});if(f){var h=a.coords(this.popupNode);if(f.offsetHeight)this.popupNode.style.top=h.t+f.offsetHeight+"px";if(f.offsetWidth)this.popupNode.style.left=h.l+f.offsetWidth+"px"}},close:function(){ws.widget.popup.close(this)},onOpen:function(){this.onResized()},
onClose:function(){},showRolodex:function(b){this.rolodexPane.setShowing(b);if(b){if(!this.rolodexBuilt){var e=Array(ws.string.alphabet.length);ucLetters=ws.string.alphabet.toUpperCase();for(b=0;b<ws.string.alphabet.length;b++)e.push('<span class="wsLink">'+ucLetters.charAt(b)+"</span>");this.rolodexPane.domNode.innerHTML=e.join("");this.connect(this.rolodexPane.domNode,"onclick",a.hitch(this,"scrollToLetter"));this.rolodexBuilt=!0}e=a.query("span",this.domNode);for(b=0;b<ws.string.alphabet.length;b++)a.toggleClass(e[b],
"ppLinkDisabled",-1==this.model.getRolodex()[b])}},scrollToLetter:function(a){if(a.target&&(a=a.target.innerHTML)&&1==a.length)if(a=ws.string.alphabet.indexOf(a.toLowerCase()),a=this.model.getRolodex()[a],-1!=a){this.grid.focus.setFocusIndex(a,0);this.scrollToRow(a);var b=this.grid.rows.overRow;this.grid.rows.setOverRow(a);this.onMouseOutRow({rowIndex:b});this.onMouseOverRow({rowIndex:a})}},processKeyPress:function(b){if(!this.isShowing())return!1;var e=!0;switch(b.keyCode){case a.keys.TAB:case a.keys.ENTER:this.onContactSelected(this.model.getRow(this.highlightRow));
break;case a.keys.DOWN_ARROW:this.setHighlightRow(this.highlightRow+1,!0);break;case a.keys.UP_ARROW:this.setHighlightRow(this.highlightRow-1,!1);break;case a.keys.ESCAPE:ws.widget.popup.close(this);break;default:e=!1}e&&b.preventDefault();return e},setHighlightRow:function(a,b){0>a?a=0:a>=this.model.getRowCount()&&(a=this.model.getRowCount()-1);this.highlightRow=a;var e=this.grid.views.views[0];if(e.getCellNode(this.highlightRow,0)){var f=!1;if(b){var h=Math.floor((e.scrollboxNode.scrollTop+this.grid.scroller.windowHeight)/
this.rowHeight-1);this.highlightRow>h&&(f=!0)}else h=Math.floor(e.scrollboxNode.scrollTop/this.rowHeight+1),this.highlightRow<h&&(f=!0);f&&this.scrollOnKeyPress(b?e.scrollboxNode.scrollTop+this.rowHeight:e.scrollboxNode.scrollTop-this.rowHeight)}this.model.modelUpdated()},getRowClasses:function(a){var b=this.inherited(arguments);a==this.highlightRow&&b.push("row-highlight");this.model.isTopContact(a)&&b.push("row-top-contact");return b},getHighlightedContact:function(){return 0<this.model.getRowCount()?
this.model.getRow(0):null},onKeyPress:function(a){this.isShowing()&&this._onKeyPress(a)},onEnterKeyPress:function(a){this.onContactSelected(this.model.getRow(a))},onOtherKeyPress:function(b){if(Config.EnableKeyboardShortcuts)switch(b.keyCode){case a.keys.ESCAPE:ws.widget.popup.close(this)}}})})},"url:ws/suite/SidePanel.html":'<div class="SidePanel navTile24">\n\t<div data-dojo-type="dijit/layout/BorderContainer" data-dojo-attach-point="layoutWidget" class="layoutWidget">\n\t\t<div data-dojo-type="dijit/layout/StackContainer" data-dojo-props="region:\'center\'" data-dojo-attach-point="panelStack" style="overflow:hidden;">\n\t\t\t<div data-dojo-type="ws/widget/ContainerPane" data-dojo-attach-point="towerAd" style="overflow:hidden;width:100%;"></div>\n\t\t\t<div data-dojo-type="ws/widget/ContainerPane" data-dojo-attach-point="stationery" style="height:100%;width:100%"></div>\n\t\t</div>\n\t\t<div data-dojo-type="ws/widget/Pane" data-dojo-props="region:\'bottom\'" data-dojo-attach-point="copyrightDIV" class="CopyRightDiv"></div>\n\t</div>\n</div>\n',
"url:ws/address/PeoplePicker.css":"","dijit/_base/popup":function(){define("dijit/_base/popup",["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(g,j,f){var a=f._createWrapper;f._createWrapper=function(b){b.declaredClass||(b={_popupWrapper:b.parentNode&&g.contains(b.parentNode,"dijitPopup")?b.parentNode:null,domNode:b,destroy:function(){},ownerDocument:b.ownerDocument,ownerDocumentBody:j.body(b.ownerDocument)});return a.call(this,b)};var b=f.open;f.open=function(a){if(a.orient&&
"string"!=typeof a.orient&&!("length"in a.orient)){var f=[],k;for(k in a.orient)f.push({aroundCorner:k,corner:a.orient[k]});a.orient=f}return b.call(this,a)};return f})},"dojo/request/util":function(){define("dojo/request/util","exports,../errors/RequestError,../errors/CancelError,../Deferred,../io-query,../_base/array,../_base/lang,../promise/Promise".split(","),function(g,j,f,a,b,e,h,k){function l(a){return m(a)}function n(a){return a.data||a.text}g.deepCopy=function(a,b){for(var e in b){var f=
a[e],h=b[e];f!==h&&(f&&"object"===typeof f&&h&&"object"===typeof h?g.deepCopy(f,h):a[e]=h)}return a};g.deepCreate=function(a,b){var b=b||{},e=h.delegate(a),f,k;for(f in a)(k=a[f])&&"object"===typeof k&&(e[f]=g.deepCreate(k,b[f]));return g.deepCopy(e,b)};var m=Object.freeze||function(a){return a};g.deferred=function(b,e,o,u,p,v){var w=new a(function(a){e&&e(w,b);return!a||!(a instanceof j)&&!(a instanceof f)?new f("Request canceled",b):a});w.response=b;w.isValid=o;w.isReady=u;w.handleResponse=p;o=
w.then(l).otherwise(function(a){a.response=b;throw a;});g.notify&&o.then(h.hitch(g.notify,"emit","load"),h.hitch(g.notify,"emit","error"));var u=o.then(n),p=new k,z;for(z in u)u.hasOwnProperty(z)&&(p[z]=u[z]);p.response=o;m(p);v&&w.then(function(a){v.call(w,a)},function(a){v.call(w,b,a)});w.promise=p;w.then=p.then;return w};g.addCommonMethods=function(a,b){e.forEach(b||["GET","POST","PUT","DELETE"],function(b){a[("DELETE"===b?"DEL":b).toLowerCase()]=function(e,f){f=h.delegate(f||{});f.method=b;return a(e,
f)}})};g.parseArgs=function(a,e,f){var h=e.data,k=e.query;if(h&&!f&&"object"===typeof h)e.data=b.objectToQuery(h);k?("object"===typeof k&&(k=b.objectToQuery(k)),e.preventCache&&(k+=(k?"&":"")+"request.preventCache="+ +new Date)):e.preventCache&&(k="request.preventCache="+ +new Date);a&&k&&(a+=(~a.indexOf("?")?"&":"?")+k);return{url:a,options:e,getHeader:function(){return null}}};g.checkStatus=function(a){a=a||0;return 200<=a&&300>a||304===a||1223===a||!a}})},"ws/io":function(){define("ws/io","dojo,dojo/_base/lang,dojo/cookie,dojo/request/registry,dojo/request/iframe,dojo/window".split(","),
function(g,j,f,a,b,e){j.setObject("ws.io",{inflightPrevPaneReq:[],pendingDeferreds:[],rpcsInProgress:!1,calRpcToken:null,rpcHelper:function(a,b){g.isArray(a)||(a=[a]);for(var f=0;f<a.length;f++){var j=!0;try{if(a[f].formNode&&"undefined"!=typeof a[f].formNode&&ws.io.formHasFile(a[f].formNode)&&e.get(a[f].formNode.ownerDocument)!=window)e.get(a[f].formNode.ownerDocument).ws.io.rpc(a[f]);else if(j=!1,ws.io.rpcRequests.push(a[f]),a[f].isPreviewPane){for(var m=0;m<ws.io.inflightPrevPaneReq.length;m++)try{ws.io.inflightPrevPaneReq[m].cancel()}catch(q){}ws.io.inflightPrevPaneReq=
[]}}catch(s){j&&ws.io.rpcRequests.push(a[f])}}g.forEach(this.pendingDeferreds,g.hitch(this,function(a,b){if(a&&a.rDfd&&a.rDfd.response&&a.rDfd.isResolved()){var e=a.rDfd.response;e.data=e.text=e.xhr=null;a.rDfd=null;this.pendingDeferreds.splice(b,1)}}));setTimeout(g.hitch(ws.io,"rpcIssueRequests",b),0)},rpc:function(a){return ws.io.rpcHelper(a,!1)},rpcAnonymous:function(a){return ws.io.rpcHelper(a,!0)},canConsolidate:function(a,b){var e=a.content,f=b.content;return e.messageAction==f.messageAction&&
e.folder==f.folder&&e.destFolder==f.destFolder&&e.isSpam==f.isSpam&&e.checkUndo==f.checkUndo&&e.screenName==f.screenName?!0:!1},addToArray:function(a,b){for(var e=0;e<b.length;e++)a.push(b[e]);return a},addToHashtable:function(a,b){for(var e in b)null==a[e]&&(a[e]=[]),a[e]=this.addToArray(a[e],b[e]);return a},reportRpcError:function(a,b){ws.io.rpc({action:"ReportRpcError",content:{error:a,rpc:b}})},getL7Id:function(){var a="0",b=f("L7Id");null!=b&&(a=b);return a},getUserUid:function(){return Settings.UserUID},
trackdl:function(a,b){isNaN(b)?b&&b.content&&b.content.uid&&ws.reporting&&ws.reporting.DL&&ws.reporting.DL.append&&ws.reporting.DL.append(a,b.content.uid):ws.reporting&&ws.reporting.DL&&ws.reporting.DL.append&&ws.reporting.DL.append(a,b)},rpcIssueRequests:function(a){if(ws.io.rpcRequests&&0!=ws.io.rpcRequests.length){for(var b=[],e=[],f=[],j=0;j<ws.io.rpcRequests.length;j++)ws.io.rpcRequests[j].async?e.push(ws.io.rpcRequests[j]):ws.io.rpcRequests[j].isCalendar?f.push(ws.io.rpcRequests[j]):b.push(ws.io.rpcRequests[j]);
ws.io.rpcRequests=[];0<b.length&&ws.io.doRpcIssueRequests(b,a,!1,!1);if(0<f.length)!this.calRpcToken&&!a?this.tokenPending?(ws.io.rpcRequests=f,setTimeout(g.hitch(ws.io,"rpcIssueRequests",a),100)):this.getOpenAuthTokenForCal(f,a):ws.io.doRpcIssueRequests(f,a,!1,!0);0<e.length&&ws.io.doRpcIssueRequests(e,a,!0,!1)}},getOpenAuthTokenForCal:function(a,b){this.tokenPending=!0;ws.io.rpc({action:"GetOpenAuthToken",load:g.hitch(this,function(e){this.tokenPending=!1;e&&e.isSuccess?(this.calRpcToken=e.token_a,
a&&0<a.length&&ws.io.doRpcIssueRequests(a,b,!1,!0)):(window.ws_ErrLgr&&!err&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for tokenRpc file:CalendarViewModel.js"),ws.widget.Dialogs.ok(Config.Strings.Cal_ServiceTemporarilyUnavailable))}),error:g.hitch(this,function(){this.tokenPending=!1;window.ws_ErrLgr&&!err&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for tokenRpc file:CalendarViewModel.js");ws.widget.Dialogs.ok(Config.Strings.Cal_ServiceTemporarilyUnavailable)})})},
doRpcIssueRequests:function(e,f,l,j){for(var m=ws.io.getUserUid(),l=[],q={},s=null,o=null,u=!0,p=0,p=0;p<e.length;p++)switch(e[p].action){case "GetMessageList":e[p].canConsolidate?(s&&s.load&&s.load(),s=e[p]):l.push(e[p]);break;case "MessageAction":"delete"==e[p].content.messageAction?u?(o=e[p],q=this.addToHashtable(q,o.content.uids),u=!1):this.canConsolidate(o,e[p])?q=this.addToHashtable(q,e[p].content.uids):l.push(e[p]):l.push(e[p]);break;default:l.push(e[p])}if(null!=o)o.content.uids=q,l.push(o);
null!=s&&l.push(s);if(0!=l.length){for(var v=[],q=null,w=!0,o=[],u=[],z=s=0,x=null,p=0;p<l.length;p++){if(!l[p].content)l[p].content={};l[p].content.action=l[p].action;z=l[p].content.timeout;o.push(l[p].action);("SendMessage"==l[p].action||"SaveMessage"==l[p].action)&&l[p].mk&&u.push(l[p].mk);"GetMessage"==l[p].action&&(x=l[p]);try{for(var A in l[p].content)("undefined"==typeof l[p].content[A]||null==l[p].content[A])&&delete l[p].content[A]}catch(B){"GetMessage"==l[p].action&&ws.io.trackdl("-IO.DRa",
l[p])}"GetMessage"==l[p].action&&ws.io.trackdl("-IO.DRb",l[p]);v.push(l[p].content);if(l[p].formNode)q=l[p].formNode;l[p].automatic||(w=!1);z&&z>s&&(s=z)}z=null;try{z=g.isIE?ws.lang.stringifyToJSON(v):g.toJson(v)}catch(C){x&&ws.io.trackdl("-IO.DRc",x)}if("undefined"==typeof z||null==z)if(x&&ws.io.trackdl("-IO.DRd",x),window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.AjaxErr,"null or undefined request param from dojo.toJson (requestContents type): "+typeof v+", file:io.js"),window.JSON&&window.JSON.stringify){z=
null;try{x&&ws.io.trackdl("-IO.DRe",x),z=JSON.stringify(v)}catch(I){x&&ws.io.trackdl("-IO.DRf",x)}if("undefined"==typeof z||null==z)x&&ws.io.trackdl("-IO.DRg",x),window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.AjaxErr,"null or undefined request param from JSON.stringify, file:io.js")}p=(v=q&&ws.io.formHasFile(q))?b.post:a.post;A=v?31E4:18E4;var J=window.console&&window.console.firebug;if(ws_ErrLgr&&ws_ErrLgr.config.AllEnabled&&ws_ErrLgr.config.WinOnErrEnabled){var L;L=1==o.length?o[0]:o.length+
":"+o.join("-").substr(0,30);ws_ErrLgr.addRPCtrace(L)}x&&ws.io.trackdl("-IO.DRh",x);if(v&&!this.firstIframeTransDone)this.primeIframeTransport(m,e,f);else{ws.io.rpcsInProgress=!0;e=j?f?Config.BaseCalAnonRpcURL:Config.BaseCalRpcURL:Config.BaseRpcPagesURL;w={requests:z,automatic:w};if(j&&!f)w.oa=this.calRpcToken;var f=e+"?transport="+(v?"iframe":"xmlhttp")+(f?"":"&user="+m)+"&r="+Math.random()+"&a="+o.join("-")+(0<u.length?"&m="+u.join("-"):"")+(J?"&firebug=true":"")+"&l="+ws.io.getL7Id(),U={method:"POST",
handleAs:j?"javascript":"json",timeout:s>A?s:A,reqsArg:l,data:w,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},form:q};(f=p(f,U).then(function(a){try{for(var b=U.reqsArg,e=0;e<b.length;e++){var f=!1;if(a&&"xml"!=typeof a&&a[e])if("GetMessage"==b[e].action&&ws.io.trackdl("-IO.IRa",b[e]),a[e].isSuccess){if("GetMessage"==b[e].action&&ws.io.trackdl("-IO.IRb",b[e]),b[e].load)try{if("GetMessage"==b[e].action&&ws.io.trackdl("-IO.IRc",b[e]),!b[e].isPreviewPane||b[e].isPreviewPane&&
"function"==typeof b[e].load)"GetMessage"==b[e].action&&ws.io.trackdl("-IO.IRs",b[e]),b[e].load(a[e])}catch(h){"GetMessage"==b[e].action&&ws.io.trackdl("-IO.IRr",b[e]),window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.AjaxErr,"Exception:"+h+": in RPC(AJAX) LOAD func(success), action: "+b[e].action||"null, file:io.js")}}else if(a[e].redirectUrl){top.location=a[e].redirectUrl;"GetMessage"==b[e].action&&ws.io.trackdl("-IO.IRd",b[e]);break}else if(a[e].fatalError){top.location=a[e].errorUrl;"GetMessage"==
b[e].action&&ws.io.trackdl("-IO.IRe",b[e]);break}else if(a[e].needAuthentication&&j)b[e].error();else if(a[e].needAuthentication||a[e].isSessionExpired){g.publish("NotifyExpiredSession");"GetMessage"==b[e].action&&ws.io.trackdl("-IO.IRf",b[e]);ws.lang.ensureLayersLoaded(function(){ws.widget.Dialogs.ok(a[e].msg,function(){if(window.gIsAPopupInvocation&&!window.isWindowStandAlone){if(b[e]&&b[e].error&&b[e].action)try{a&&a[e]&&b[e].error(a[e].error?a[e].error:null,!1,"ajax: auth-err-popup")}catch(f){window.ws_ErrLgr&&
ws_ErrLgr.logError(ws_ErrLgr.cat.AjaxErr,"Exception in RPC(AJAX) LOAD func(Error handler for no auth), action: "+b[e].action+", file:io.js")}}else if(a[e].loginUrl)top.location=a[e].loginUrl;else if(Config.SessionExpiryURL)top.location=Config.SessionExpiryURL})});break}else f=!0,"GetMessage"==b[e].action&&ws.io.trackdl("-IO.IRh",b[e]);else f=!0,"GetMessage"==b[e].action&&ws.io.trackdl("-IO.IRi",b[e]);if(f&&b[e]&&b[e].error&&b[e].action)try{a&&a[e]?("GetMessage"==b[e].action&&ws.io.trackdl("-IO.IRj",
b[e]),b[e].error(a[e].error?a[e].error:null,!1,a[e].errCode?a[e].errCode:null),"ReportRpcError"!=b[e].action&&a[e].isSuccess&&(setTimeout(g.hitch(ws.io,"reportRpcError",a[e].error,b[e].action),500),"GetMessage"==b[e].action&&ws.io.trackdl("-IO.IRk",b[e]))):(b[e].error(null,!0,"ajax: no-data-param",null),window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.AjaxErr,"RPC(AJAX) LOAD func(no data), action: "+b[e].action+", file:io.js"),"GetMessage"==b[e].action&&ws.io.trackdl("-IO.IRl",b[e]))}catch(k){window.ws_ErrLgr&&
ws_ErrLgr.logError(ws_ErrLgr.cat.AjaxErr,"Exception in RPC(AJAX) LOAD func(isError), action: "+b[e].action+", file:io.js"),"GetMessage"==b[e].action&&ws.io.trackdl("-IO.IRm",b[e])}}}finally{if(ws.io.rpcsInProgress)ws.io.rpcsInProgress=!1,g.publish("ws.io.rpcsInProgress/done")}},function(a){try{var b=U.reqsArg;if(a&&a.dojoType&&"cancel"==a.dojoType)for(var e=0;e<b.length;e++){if(b[e].cancel){"GetMessage"==b[e].action&&ws.io.trackdl("-IO.IRn",b[e]);b[e].cancel();try{ws.reporting.DL.removeEvent(b[e].content.uid)}catch(f){"GetMessage"==
b[e].action&&ws.io.trackdl("-IO.IRo",b[e])}}}else for(var h=a&&a.name?a.name+" - ":"",h=h+(a&&a.message?a.message:""),e=0;e<b.length;e++)if(b[e].error)try{b[e].error(Config.Strings.GenericError,!0,"ajax: "+h,null),window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.AjaxErr,"ERROR func(timeout/io err) RPC(AJAX) for action: "+b[e].action+" file:io.js",h),"GetMessage"==b[e].action&&ws.io.trackdl("-IO.IRp",b[e])}catch(k){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.AjaxErr,"Exception in ERROR func RPC(AJAX) file:io.js",
h),"GetMessage"==b[e].action&&ws.io.trackdl("-IO.IRq",b[e])}}finally{if(ws.io.rpcsInProgress)ws.io.rpcsInProgress=!1,g.publish("ws.io.rpcsInProgress/done")}}))&&ws.io.pendingDeferreds.push(f);m=!0;for(p=0;p<l.length;p++)if(!l[p].isPreviewPane){m=!1;break}m&&ws.io.inflightPrevPaneReq.push(f)}}},rpcRequests:[],formHasFile:function(a){for(var a=a.getElementsByTagName("input"),b=0;b<a.length;b++)if("file"==a[b].getAttribute("type")&&a[b].value)return!0;return!1},primeIframeTransport:function(a,e,f){if(!this.firstIframeTransDone){this.firstIframeTransDone=
!0;var j=[{action:"DoNothingRPC",content:{action:"DoNothingRPC"}}],m="";try{m=g.isIE?ws.lang.stringifyToJSON(j):g.toJson(j)}catch(q){}emptyForm=document.createElement("form");emptyForm.method="post";emptyForm.enctype="multipart/form-data";ws.io.rpcsInProgress=!0;a=Config.BaseRpcPagesURL+"?user="+a+"&transport=iframe&r="+Math.random()+"&a=DoNothingRPC&l="+ws.io.getL7Id();b.post(a,{method:"POST",handleAs:"json",timeout:3E3,reqsArg:j,data:{requests:m,automatic:!1},form:emptyForm}).then(function(){ws.io.rpcsInProgress=
!1;ws.io.rpcRequests=e;ws.io.rpcIssueRequests(f)},function(){ws.io.rpcsInProgress=!1;ws.io.rpcRequests=e;ws.io.rpcIssueRequests(f)})}},getObjectCookie:function(a){return this._getObjectCookie(a,":")},_getObjectCookie:function(a,b){var e=null,g=f(a);if(g)for(var e={},g=g.split("&"),j=0;j<g.length;j++){var q=g[j].split(b);if(1<q.length){var s=q[1];isNaN(s)&&(s=unescape(q[1]));e[unescape(q[0])]=s}}return e},_setObjectCookie:function(a,b,e,g,j){var q="",s;for(s in a)q+=(0<q.length?"&":"")+s+"="+a[s];
a={};if(e)a.domain=e;if(g)a.path=g;if(j)a.expires=j;f(b,"",a);f(b,q,a)},openWindow:function(a,b,e,f,j){"undefined"==typeof e&&(e="status=yes,resizable=yes,menubar=yes,scrollbars=yes,location=yes,toolbar=yes");var q=window.open(a,b,e),b=!1;if(0==a.indexOf("http")&&0!=a.indexOf("http://"+document.domain))b=null!=q,j&&ws.io.trackdl("-IO.OWb",j);else try{b=!0}catch(s){j&&ws.io.trackdl("-IO.OWc",j)}j&&ws.io.trackdl("-IO.OW"+(b?"s":"f"),j);if(!b)return ws.lang.ensureLayersLoaded(function(){ws.widget.Dialogs.ok(Config.Strings.PopupBlocked)}),
j&&ws.io.trackdl("-IO.OWd",j),null;f||(ws.io._childWindows.push(q),g.addOnWindowUnload(function(){try{q.onMainWindowClosed()}catch(a){j&&ws.io.trackdl("-IO.OWe",j)}}));ws.io.openingWindow=!0;setTimeout(function(){ws.io.openingWindow=!1},1E3);j&&ws.io.trackdl("-IO.OWz",j);return q},closeWindow:function(){if(_ws_isOpenerWS()&&opener.ws&&opener.ws.io&&opener.ws.io._childWindows&&opener.ws.io._childWindows.length)for(var a=opener.ws.io._childWindows,b=0;b<a.length;b++)if(a[b]==window){a.splice(b,1);break}ws.io.closeWindowInProgress=
!0;window.close()},_childWindows:[],_notifyChildWindowsOfClose:function(){g.forEach(ws.io._childWindows,function(a){try{a.onMainWindowClosed()}catch(b){}})},getQueryParameter:function(a,b,e){b=b||null;e=e||document.location.search;a=e.match(RegExp(a+"=([^&]*)"));null!=a&&(b=a[1])&&(b=decodeURIComponent(b.replace(/\+/g," ")));return b},decodeURIComponentAndEscapeDQuote:function(a){a=decodeURIComponent(a.replace(/\+/g," "));-1!=a.indexOf('"')&&(a=a.replace(/\"/g,'\\"'),a=a.replace(/\\\\\"/g,'\\"'));
return a},getJsonFromQueryParams:function(a){var b=null,a=a||document.location.search;if(!a)return null;for(var a=a.replace(/^\?/,"").split("&"),e=0;e<a.length;e++){var f=a[e].split("=");if(2==f.length){var g=this.decodeURIComponentAndEscapeDQuote(f[0]),f=this.decodeURIComponentAndEscapeDQuote(f[1]);null==b&&(b={});b[g]=f}}return b}})})},"url:ws/suite/Footer.html":'<div class="footer_container">\n\t<span class="feedback" data-dojo-attach-point="feedback" style="display:none">\n\t\t<span class="feedbackBox">\n\t\t\t<div class="progressNode" data-dojo-attach-point="progressNode"></div>\n\t\t\t<img src="${spacer}" class="mainSprite persistentIcon" data-dojo-attach-point="persistentIcon">\n\t\t\t<span data-dojo-attach-point="feedbackTextNode" class="feedbackSpan"></span>\n\t\t\t&nbsp;<a href="#" data-dojo-attach-point="undoLink" class="wsLink undoLink">${Undo}</a>\n\t\t</span>\n\t</span>\n</div>',
"ws/widget/FTUTip":function(){define("ws/widget/FTUTip","dojo/_base/declare,dojo/text!ws/widget/FTUTip.html,dojo/text!ws/widget/FTUTip.css,dojo,dijit,dijit/_Widget,dijit/_TemplatedMixin".split(","),function(g,j,f,a,b,e,h){return g([e,h],{templateString:j,css:{templateString:f},name:"",content:"",delayOnShow:10,className:"",dimensions:{w:264,h:null},positionOverNode:document.body,offset:{x:0,y:0},arrowPosition:"right",distanceArrowFromEdge:10,saveAsSeenOnClose:!0,startup:function(){this.positionOverNode&&
this.connect(window,"onresize","placeOnScreen");this.message.style.width=this.dimensions.w+"px";if(this.dimensions.height)this.message.style.height=this.dimensions.h+"px";if(this.domNode&&null!=this.balloonArrowNode)a.addClass(this.balloonArrowNode,"mainSprite balloonArrow "+this.arrowPosition),"right"==this.arrowPosition||"left"==this.arrowPosition?this.balloonArrowNode.style.top=this.distanceArrowFromEdge+"px":this.balloonArrowNode.style.left=this.distanceArrowFromEdge+"px";if(this.message)this.message.innerHTML=
this.content,a.forEach(a.query("a",this.message),function(b){a.addClass(b,"wsLink")});this.load&&this.load(this)},setContent:function(b){this.content=b;if(this.message)this.message.innerHTML=this.content,a.forEach(a.query("a",this.message),function(b){a.addClass(b,"wsLink")})},placeOnScreen:function(){if(this.positionOverNode){if(this.tgtElId&&document.getElementById(this.tgtElId)!==this.positionOverNode)this.positionOverNode=document.getElementById(this.tgtElId);var e=a.position(this.positionOverNode);
b.placeOnScreen(this.domNode,{x:this.offset.x+e.x,y:this.offset.y+e.y},["TL"])}},showTip:function(){0<this.delayOnShow?setTimeout(a.hitch(this,function(){this.domNode.style.display="";this.placeOnScreen()}),this.delayOnShow):(this.domNode.style.display="",this.placeOnScreen())},onClick:function(a){"A"==a.target.tagName&&this.closeTip()},closeTip:function(){this.saveAsSeenOnClose&&ws.bubbleConfig.saveAsSeen(this.name);this.destroy()},isExisting:function(){return this.domNode}})})},"dojo/_base/url":function(){define(["./kernel"],
function(g){var j=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,f=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,a=function(){for(var b=arguments,e=[b[0]],h=1;h<b.length;h++)if(b[h]){var g=new a(b[h]+""),e=new a(e[0]+"");if(""==g.path&&!g.scheme&&!g.authority&&!g.query){if(null!=g.fragment)e.fragment=g.fragment;g=e}else if(!g.scheme&&(g.scheme=e.scheme,!g.authority&&(g.authority=e.authority,"/"!=g.path.charAt(0)))){for(var e=(e.path.substring(0,e.path.lastIndexOf("/")+
1)+g.path).split("/"),l=0;l<e.length;l++)"."==e[l]?l==e.length-1?e[l]="":(e.splice(l,1),l--):0<l&&!(1==l&&""==e[0])&&".."==e[l]&&".."!=e[l-1]&&(l==e.length-1?(e.splice(l,1),e[l-1]=""):(e.splice(l-1,2),l-=2));g.path=e.join("/")}e=[];g.scheme&&e.push(g.scheme,":");g.authority&&e.push("//",g.authority);e.push(g.path);g.query&&e.push("?",g.query);g.fragment&&e.push("#",g.fragment)}this.uri=e.join("");b=this.uri.match(j);this.scheme=b[2]||(b[1]?"":null);this.authority=b[4]||(b[3]?"":null);this.path=b[5];
this.query=b[7]||(b[6]?"":null);this.fragment=b[9]||(b[8]?"":null);if(null!=this.authority)b=this.authority.match(f),this.user=b[3]||null,this.password=b[4]||null,this.host=b[6]||b[7],this.port=b[9]||null};a.prototype.toString=function(){return this.uri};return g._Url=a})},"dojox/grid/cell":function(){define("dojox/grid/cell",["dojo/_base/declare","dojo"],function(g,j){return g("dojox.grid.cell",null,{styles:"",constructor:function(f){j.mixin(this,f);if(this.editor)this.editor=new this.editor(this)},
format:function(f){var a,b=this.grid.edit.info,e=this.get?this.get(f):this.value;return this.editor&&(this.editor.alwaysOn||b.rowIndex==f&&b.cell==this)?this.editor.format(e,f):(a=this.formatter)?a.call(this,e,f):e},getNode:function(f){return this.view.getCellNode(f,this.index)},isFlex:function(){var f=this.unitWidth;return f&&("auto"==f||"%"==f.slice(-1))},applyEdit:function(f,a){this.grid.edit.applyCellEdit(f,this,a)},cancelEdit:function(f){this.grid.doCancelEdit(f)},_onEditBlur:function(f){this.grid.edit.isEditCell(f,
this.index)&&this.grid.edit.apply()},registerOnBlur:function(f,a){this.commitOnBlur&&j.connect(f,"onblur",function(){setTimeout(j.hitch(this,"_onEditBlur",a),250)})}})})},"dojox/grid/Builder":function(){define("dojox/grid/Builder",["dojo/_base/declare","dojo"],function(g,j){dojox.grid.rowIndexTag="gridRowIndex";return g("dojox.grid.Builder",null,{constructor:function(f){this.view=f;this.grid=f.grid},view:null,_table:'<table class="dojoxGrid-row-table" border="0" cellspacing="0" cellpadding="0">',
generateCellMarkup:function(f,a,b,e){var h=[],e=e?['<th tabIndex="-1"']:['<td tabIndex="-1"'];f.colSpan&&e.push(' colspan="',f.colSpan,'"');f.rowSpan&&e.push(' rowspan="',f.rowSpan,'"');e.push(' class="dojoxGrid-cell ');f.classes&&e.push(f.classes," ");b&&e.push(b," ");h.push(e.join(""));h.push("");e=['" idx="',f.index,'" style="'];e.push(f.styles,a||"");f.unitWidth&&e.push("width:",f.unitWidth,";");h.push(e.join(""));h.push("");e=['"'];f.attrs&&e.push(" ",f.attrs);e.push(">");h.push(e.join(""));
h.push("");h.push("</td>");return h},isCellNode:function(f){return Boolean(f&&f.getAttribute&&f.getAttribute("idx"))},getCellNodeIndex:function(f){return f?Number(f.getAttribute("idx")):-1},getCellNode:function(f,a){for(var b=0,e;e=dojox.grid.getTr(f.firstChild,b);b++)for(var h=0,g;g=e.cells[h];h++)if(this.getCellNodeIndex(g)==a)return g},findCellTarget:function(f,a){for(var b=f;b&&!this.isCellNode(b)&&b!=a;)b=b.parentNode;return b!=a?b:null},baseDecorateEvent:function(f){f.dispatch="do"+f.type;f.grid=
this.grid;f.sourceView=this.view;f.cellNode=this.findCellTarget(f.target,f.rowNode);f.cellIndex=this.getCellNodeIndex(f.cellNode);f.cell=0<=f.cellIndex?this.grid.getCell(f.cellIndex):null},findTarget:function(f,a){for(var b=f;b&&!(a in b)&&b!=this.domNode;)b=b.parentNode;return b!=this.domNode?b:null},findRowTarget:function(f){return this.findTarget(f,dojox.grid.rowIndexTag)},isIntraNodeEvent:function(f){try{return f.cellNode&&f.relatedTarget&&j.isDescendant(f.relatedTarget,f.cellNode)}catch(a){return!1}},
isIntraRowEvent:function(f){try{var a=f.relatedTarget&&this.findRowTarget(f.relatedTarget);return!a&&-1==f.rowIndex||a&&f.rowIndex==a.gridRowIndex}catch(b){return!1}},dispatchEvent:function(f){if(f.dispatch in this)return this[f.dispatch](f)},domouseover:function(f){if(f.cellNode&&f.cellNode!=this.lastOverCellNode)this.lastOverCellNode=f.cellNode,this.grid.onMouseOver(f);this.grid.onMouseOverRow(f)},domouseout:function(f){if(f.cellNode&&f.cellNode==this.lastOverCellNode&&!this.isIntraNodeEvent(f,
this.lastOverCellNode)&&(this.lastOverCellNode=null,this.grid.onMouseOut(f),!this.isIntraRowEvent(f)))this.grid.onMouseOutRow(f)}})})},"dojox/grid/tableMap":function(){define("dojox/grid/tableMap",["dojo/_base/declare","dojo"],function(g){return g("dojox.grid.tableMap",null,{constructor:function(g){this.mapRows(g)},map:null,mapRows:function(g){if(g.length){this.map=[];for(var f=0,a;g[f];f++)this.map[f]=[];for(f=0;a=g[f];f++)for(var b=0,e=0,h,k;h=a[b];b++){for(;this.map[f][e];)e++;this.map[f][e]={c:b,
r:f};k=h.rowSpan||1;h=h.colSpan||1;for(var l=0;l<k;l++)for(var n=0;n<h;n++)this.map[f+l][e+n]=this.map[f][e];e+=h}}},dumpMap:function(){for(var g=0,f;f=this.map[g];g++)for(var a=0;f[a];a++);},getMapCoords:function(g,f){for(var a=0,b;b=this.map[a];a++)for(var e=0,h;h=b[e];e++)if(h.c==f&&h.r==g)return{j:a,i:e};return{j:-1,i:-1}},getNode:function(g,f,a){return(g=g&&g.rows[f])&&g.cells[a]},_findOverlappingNodes:function(g,f,a){for(var b=[],f=this.getMapCoords(f,a),e=this.map[f.j],a=0;e=this.map[a];a++)if(a!=
f.j)with(e[f.i])(e=this.getNode(g,r,c))&&b.push(e);return b},findOverlappingNodes:function(g){return this._findOverlappingNodes(dojox.grid.findTable(g),dojox.grid.getTrIndex(g.parentNode),dojox.grid.getTdIndex(g))}})})},"ws/widget/ModalNotification":function(){define("ws/widget/ModalNotification",["dojo","ws/widget/WSToolbar","ws/widget/iframeModalPane","ws/widget/Button","ws/widget/Dialogs"],function(g,j,f,a){ws.widget.ModalNotification={iframePane:null,startup:function(b){this.iframePane=new f({scrolling:"no"});
g.body().appendChild(this.iframePane.domNode);g.query("iframe",this.iframePane.domNode);var e=g.isIE?50:76;this.iframePane.show(b.url,b.box,{w:g.isIE?30:50,h:b.closeButton?e+38:e});if(b.closeButton){e=new j({vizType:"Bare"});g.query(".modalContainer",this.iframePane.domNode)[0].appendChild(e.domNode);e.startup();var h=new a({toolbarPosition:"center",size:"Large"});h.setLabel(b.closeButtonText);h.onClick=g.hitch(this,function(){this.iframePane.hide()});h.startup();e.addToolbarItem(h);e.layout()}ws.WebSuite.startupDlgDone=
!0;g.publish("popup/open",[])}}})},"dojo/domReady":function(){define(["./has"],function(g){function j(b){h?b(a):k.push(b)}var f=this,a=document,b={loaded:1,complete:1},e="string"!=typeof a.readyState,h=!!b[a.readyState];if(e)a.readyState="loading";if(!h){var k=[],l=[],n=function(g){g=g||f.event;if(!(h||"readystatechange"==g.type&&!b[a.readyState])){h=1;if(e)a.readyState="complete";for(;k.length;)k.shift()(a)}},m=function(a,b){a.addEventListener(b,n,!1);k.push(function(){a.removeEventListener(b,n,
!1)})};if(!g("dom-addeventlistener")){var m=function(a,b){b="on"+b;a.attachEvent(b,n);k.push(function(){a.detachEvent(b,n)})},q=a.createElement("div");try{q.doScroll&&null===f.frameElement&&l.push(function(){try{return q.doScroll("left"),1}catch(a){}})}catch(s){}}m(a,"DOMContentLoaded");m(f,"load");"onreadystatechange"in a?m(a,"readystatechange"):e||l.push(function(){return b[a.readyState]});if(l.length){var o=function(){if(!h){for(var a=l.length;a--;)if(l[a]()){n("poller");return}setTimeout(o,30)}};
o()}}j.load=function(a,b,e){j(e)};return j})},"dojo/text":function(){define(["./_base/kernel","require","./has","./_base/xhr"],function(g,j,f,a){var b;b=function(b,e,f){a("GET",{url:b,sync:!!e,load:f,headers:g.config.textPluginHeaders||{}})};var e={},h=function(a){if(a){var a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,""),b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}else a="";return a},k={},l={};g.cache=function(a,f,g){var k;"string"==typeof a?/\//.test(a)?
(k=a,g=f):k=j.toUrl(a.replace(/\./g,"/")+(f?"/"+f:"")):(k=a+"",g=f);a=void 0!=g&&"string"!=typeof g?g.value:g;g=g&&g.sanitize;if("string"==typeof a)return e[k]=a,g?h(a):a;if(null===a)return delete e[k],null;k in e||b(k,!0,function(a){e[k]=a});return g?h(e[k]):e[k]};return{dynamic:!0,normalize:function(a,b){var e=a.split("!"),f=e[0];return(/^\./.test(f)?b(f):f)+(e[1]?"!"+e[1]:"")},load:function(a,f,g){var a=a.split("!"),j=1<a.length,o=a[0],u=f.toUrl(a[0]),a="url:"+u,p=k,v=function(a){g(j?h(a):a)};
o in e?p=e[o]:a in f.cache?p=f.cache[a]:u in e&&(p=e[u]);if(p===k)if(l[u])l[u].push(v);else{var w=l[u]=[v];b(u,!f.async,function(a){e[o]=e[u]=a;for(var b=0;b<w.length;)w[b++](a);delete l[u]})}else v(p)}}})},"dojo/dom":function(){define(["./sniff","./_base/lang","./_base/window"],function(g,j,f){if(7>=g("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(a){}var b={};b.byId=g("ie")?function(a,b){if("string"!=typeof a)return a;var g=b||f.doc;if(!g||!g.getElementById)return null;var l=
a&&g.getElementById(a);if(l&&(l.attributes.id.value==a||l.id==a))return l;g=g.all[a];if(!g||g.nodeName)g=[g];for(var j=0;l=g[j++];)if(l.attributes&&l.attributes.id&&l.attributes.id.value==a||l.id==a)return l}:function(a,b){return("string"==typeof a?(b||f.doc).getElementById(a):a)||null};b.isDescendant=function(a,f){try{a=b.byId(a);for(f=b.byId(f);a;){if(a==f)return!0;a=a.parentNode}}catch(g){}return!1};b.setSelectable=function(a,f){a=b.byId(a);if(g("mozilla"))a.style.MozUserSelect=f?"":"none";else if(g("khtml")||
g("webkit"))a.style.KhtmlUserSelect=f?"auto":"none";else if(g("ie"))for(var k=a.unselectable=f?"":"on",l=a.getElementsByTagName("*"),j=0,m=l.length;j<m;++j)l.item(j).unselectable=k};return b})},"dojox/grid/data/Model":function(){define("dojox/grid/data/Model",["dojo/_base/declare","dojo","dojox/grid/data/Fields"],function(g,j,f){return g("dojox.grid.data.Model",null,{constructor:function(a,b){this.observers=[];this.fields=new f;a&&this.fields.set(a);this.setData(b)},count:0,updating:0,observer:function(a,
b){this.observers.push({o:a,p:b||"model"})},notObserver:function(a){for(var b=0,e;e=this.observers[b];b++)if(e.o==a){this.observers.splice(b,1);break}},notify:function(a,b){if(!this.isUpdating())for(var e=b||[],f=0,g,l;l=this.observers[f];f++)g=l.p+a,l=l.o,g in l&&l[g].apply(l,e)},clear:function(){this.fields.clear();this.clearData()},beginUpdate:function(){this.updating++},endUpdate:function(){this.updating&&this.updating--},isUpdating:function(){return Boolean(this.updating)},clearData:function(){this.setData(null)},
change:function(){this.notify("Change",arguments)},insertion:function(){this.notify("Insertion",arguments);this.notify("Change",arguments)},removal:function(){this.notify("Removal",arguments);this.notify("Change",arguments)},insert:function(a){if(!this._insert.apply(this,arguments))return!1;this.insertion.apply(this,j._toArray(arguments,1));return!0},remove:function(a){if(!this._remove.apply(this,arguments))return!1;this.removal.apply(this,arguments);return!0},canSort:function(){return null!=this.sort},
makeComparator:function(a){for(var b,e,f=null,g=a.length-1;0<=g;g--)b=a[g],e=Math.abs(b)-1,0<=e&&(e=this.fields.get(e),f=this.generateComparator(e.compare,e.key,0<b,f));return f},sort:null,dummy:0})})},"ws/widget/ListView":function(){define("ws/widget/ListView","dojo/_base/declare,dojo/text!ws/widget/ListView.css,dojo,dijit,dijit/registry,dijit/_Widget,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,dojox/grid/Grid,dojox/grid/drag,ws/html,ws/string,ws/widget/Dialogs,ws/widget/util".split(","),
function(g,j,f,a,b,e,h,k){dojox.grid._grid.GridView.prototype.hasScrollbar=function(){return!0};dojox.grid._grid.GridView.prototype._doscroll=dojox.grid._grid.GridView.prototype.doscroll;dojox.grid._grid.GridView.prototype.doscroll=function(a){window.clearTimeout(this.scrollTimeout);var b=f.isWebKit?800:400;this.scrollTimeout=ws.lang.setTimeout(f.hitch(this,"_doscroll"),b,a)};f.extend(dojox.grid.Grid,{onMoveColumn:function(){},onEndDragColumn:function(){},onKeyDown:function(){}});f.mixin(dojox.grid,
{arrayMove:function(a,b,e){var f=a[b];a.splice(b,1);dojox.grid.arrayInsert(a,e<b?e:e-1,f)},moveIndex:function(a,b,e){return a==b?e-(a<e):a-(a>b)+(a>=e)}});f.extend(dojox.grid.headerBuilder,{endResizeColumn:function(a){this.grid&&this.grid.ownerListView&&(this.grid.ownerListView.checkColumnSizes(a.index),this.grid.ownerListView.onHeaderColumnChange())},beginMoveColumn:function(a){f.stopEvent(a);if(a.cellNode&&a.cellNode.parentNode){var b={headerNode:a.cellNode.parentNode,colIndex:a.cellIndex,cellNode:a.cellNode,
rowLeft:f.position(this.grid.views.views[0].headerNode,!0).x},e=f.hitch(this,"startDragColumn",b),h=f.hitch(this,"doDragColumn",b),b=f.hitch(this,"endDragColumn",b);dojox.grid.drag.start(a.cellNode.parentNode,h,b,a,e)}},startDragColumn:function(a){this.moving=!0;this.cols=this.grid.views.views[0].structure.cells[0];a.cellNode.style.backgroundColor="#ddd";a.headerNode.style.cursor="move"},doDragColumn:function(a,b){var e=this.findColumnByX(a.colIndex,b.clientX-a.rowLeft);if(0<=e&&e!=a.colIndex)this.moveColumn(a.colIndex,
e),a.colIndex=e},endDragColumn:function(a){a.headerNode.style.cursor="";a.cellNode.style.backgroundColor="";this.moving=!1;this.grid.onEndDragColumn()},findColumnByX:function(a,b){for(var e=0,f=0,h;e<this.cols.length;e++)if(h=parseInt(this.cols[e].width)){if(f+h>b)return h/=2,e>a?f+h<b?e:a:f+h>b?e:a;f+=h+6}return-1},moveColumn:function(a,b){var e=b>a?1:0,h=b+e,g=f.query(".dojoxGrid-cell",this.grid.views.views[0].headerContentNode);if(g.length-1>b)g[0].parentNode.insertBefore(g[a],g[h]),dojox.grid.arrayMove(this.cols,
a,h),this.grid.onMoveColumn(a,h,e),e=this.grid.getSortIndex(),g=0>this.grid.sortInfo,e=dojox.grid.moveIndex(e,a,h),this.grid.sortInfo=g?-e:e+1},domousemove:function(a){var b=this.overRightResizeArea(a)?9>f.isIE?"e-resize":"ew-resize":this.overLeftResizeArea(a)?9>f.isIE?"w-resize":"ew-resize":"";b&&!this.canResize(a)&&(b="default");var e=0<=a.cellIndex&&this.grid.views.views[0].structure.cells[0][a.cellIndex];!b&&e&&this.grid.model.canSort(a.cellIndex+1)&&(b="pointer");a.sourceView.headerNode.style.cursor=
b||""},overLeftResizeArea:function(a){var b=9<=f.isIE?a.offsetX:a.cellX;return 0<a.cellIndex&&b<this.overResizeWidth&&this.prepareLeftResize(a)},overRightResizeArea:function(a){var b=9<=f.isIE?a.offsetX:a.cellX;return a.cellNode&&b>=a.cellNode.offsetWidth-this.overResizeWidth},domousedown:function(a){dojox.grid.drag.dragging||((this.overRightResizeArea(a)||this.overLeftResizeArea(a))&&this.canResize(a)?this.beginColumnResize(a):this.beginMoveColumn(a))}});return g([e,h,k],{_earlyTemplatedStartup:!0,
speedUp:!1,wrapperModelClass:null,fixedRowHeight:!0,cellWidthPad:16,quickActionCol:3,showHeader:!0,dragType:null,preventFixColumns:!1,pinMenu:-1,css:{templateString:j},setModel:function(a){if(a!==this.model)this.model=a,this.gridModel=this.wrapperModelClass?new this.wrapperModelClass(null,null,this.model):this.model,this.initView()},initView:function(){f.toggleClass(this.domNode,"listViewFixedRowHeight",this.fixedRowHeight);var a=this.grid;this.grid.ownerListView=this;this.updateColumns();a.onCellClick=
f.hitch(this,"onCellClick");a.onStyleRow=f.hitch(this,"onStyleRow");a.onHeaderCellClick=f.hitch(this,"onHeaderCellClick");this.initHoverControl();f.connect(a,"onMoveColumn",this,"onMoveColumn");f.connect(a,"onEndDragColumn",this,"onEndMoveColumn");f.connect(a,"onHeaderContextMenu",this,"onHeaderContextMenu");this.initDrag();f.connect(a,"buildViews",this,"initDrag");this.grid.domNode.onfocus=null;f.connect(this.gridModel,"modelUpdated",f.hitch(this,function(){this.gridModel.allChange();this.updateHeader();
this.updateZeroRowsView();this.updateToolbarState()}));a.fastScroll=!1;a.setModel(this.gridModel);this.updateZeroRowsView();this.updateToolbarState();b.byId(this.grid.domNode.parentNode.getAttribute("widgetId")).onResized=f.hitch(this,function(){this.grid.resize();this.autosizeColumns()})},onResized:function(){if(this.stackWidget&&this.stackWidget.resize)this.stackWidget.resize();else if(this.layoutWidget)this.domNode.style.overflow="hidden",this.layoutWidget.resize(f.contentBox(this.domNode))},updateGrid:function(){this.autosizeColumns();
this.updateHeader();this.grid.update()},toggleSelectRow:function(a){this.model.toggleSelectRow(a);this.lastSelectRow=a;this.updateHeader();this.updateToolbarState()},onCellClick:function(a){var b="Select"in this.gridModel.columns,e=this.model.getCurrentRow?this.model.getCurrentRow():-1;if(b&&a.shiftKey){if(-1!=e)this.model.toggleSelectRow(e,!0),this.lastSelectRow=e;if(this.model.selectRange&&"lastSelectRow"in this){var b="ON"==this.gridModel.getDatum(this.lastSelectRow,this.gridModel.columns.Select)[0],
e=Math.min(this.lastSelectRow,a.rowIndex),h=Math.max(this.lastSelectRow,a.rowIndex);this.model.selectRange(e,h,b,f.hitch(this,function(){this.lastSelectRow=a.rowIndex;this.updateHeader();this.updateToolbarState()}))}else this.model.toggleSelectRow(a.rowIndex),this.lastSelectRow=a.rowIndex,this.updateHeader(),this.updateToolbarState()}else if(b&&(f.isMac?a.metaKey:a.ctrlKey))-1!=e&&this.model.toggleSelectRow(e,!0),this.toggleSelectRow(a.rowIndex);else switch(a.cellIndex){case this.gridModel.columns.Select:this.toggleSelectRow(a.rowIndex);
break;case this.gridModel.columns.Hover:this.handleHoverControlClick(a);break;default:this.handleCellClick(a)}},handleCellClick:function(){},updateToolbarState:function(){},onHeaderContextMenu:function(){},onHeaderColumnChange:function(){},initDrag:function(){this.dragSource&&this.dragSource.unregister();this.dragType&&ws.lang.ensureLayersLoadedSoon(f.hitch(this,function(){require(["ws/dnd/GridDragSource"],f.hitch(this,function(a){this.dragSource=new a(this.grid.views.views[0].contentNode,this.dragType,
this)}))}))},scrollToRow:function(a){this.grid.views.views[0].scrollboxNode.scrollTop=this.grid.scroller.findScrollTop(a)},onStyleRow:function(a){if(!this.disableHover)a.customClasses=-1!=this.pinMenu?a.customClasses+(a.index==this.pinMenu?" dojoxGrid-row-over":""):a.customClasses+(a.over?" dojoxGrid-row-over":"");a.customClasses+=" "+this.getRowClasses(a.index).join(" ")},getRowClasses:function(a){var b=[];"Select"in this.gridModel.columns&&"ON"==this.gridModel.getDatum(a,this.gridModel.columns.Select)[0]&&
b.push("row-selected");this.model.isCurrentRow&&this.model.isCurrentRow(a)&&b.push("row-current");return b},initHoverControl:function(){this.gridModel.getHoverColumnCB=f.hitch(this,"getHoverColumn");f.connect(this.grid,"onMouseOverRow",f.hitch(this,"onMouseOverRow"));f.connect(this.grid,"onMouseOutRow",f.hitch(this,"onMouseOutRow"));f.connect(document.body,"onmouseover",f.hitch(this,"handleMouseOverNotRow"));this.rightClickMenuDefinition&&f.connect(this.grid,"onRowContextMenu",this,"onContextMenu");
this.disableHover=!1;f.subscribe("dragStart",this,function(){this.disableHover=!0});f.subscribe("dragEnd",this,function(){this.disableHover=!1})},getHoverColumn:function(a,b){var e=this.getQuickActionMenu(!0),e=e&&e.isShowing()?this.quickActionRow:this.grid.rows.overRow;return a==e&&!this.disableHover&&-1==this.pinMenu?b?b+this.hoverColumnHtml:this.hoverColumnHtml:b?b:""},_overRow:-1,onMouseOverRow:function(a){if(a.rowIndex!=this._overRow&&"Hover"in this.gridModel.columns)-1!=this._overRow&&this.grid.updateRow(this._overRow),
this._overRow=a.rowIndex,this.grid.updateRow(a.rowIndex)},handleMouseOverNotRow:function(a){if("none"!=this.domNode.style.display){if(f.isIE){if(null==a.target.parentNode)return;for(var b=this.grid.views.views[0].scrollboxNode,a=a.target;a;){if(11==a.nodeType||a==b)return;a=a.parentNode}}else if(a.rowNode)return;b=this.grid.rows.overRow;-1<b&&(this.grid.rows.setOverRow(-1),this.onMouseOutRow({rowIndex:b}))}},onMouseOutRow:function(a){if("Hover"in this.gridModel.columns)this._overRow=-1,this.grid.updateRow(a.rowIndex)},
onMouseMove:function(a){var b=!0;if(f.isIE){if("undefined"==typeof this._lastMouseX)this._lastMouseX=a.pageX,this._lastMouseY=a.pageY;b=0!=a.pageX-this._lastMouseX&&0!=a.pageY-this._lastMouseY?!0:!1}if(b)this.grid.onMouseOverRow=this._origMouseOverRow,f.disconnect(this._mouseMoveConnect),this._mouseMoveConnect=null,this._lastMouseX=this._lastMouseY=void 0},getQuickActionMenu:function(a){if(this.quickActionMenu)return this.quickActionMenu;if(a)return null;this.createQuickActionMenu();return this.quickActionMenu},
getRightClickMenu:function(a){if(!this.rightClickMenu&&!a)this.rightClickMenu=ws.widget.createMenu(this.rightClickMenuDefinition),f.connect(this.rightClickMenu,"onClose",this,"OnCloseContextMenu");return this.rightClickMenu},handleHoverControlClick:function(a){if(f.hasClass(a.target,"quickActionHover")){var b=this.getQuickActionMenu();b.isShowing()&&this.quickActionRow==a.rowIndex?b.close():(this.quickActionRow=a.rowIndex,this.updateQuickActionMenu(b),b.open(a.target),this.selectOnlyQuickActionRow())}},
onContextMenu:function(a){f.stopEvent(a);var b=this.getRightClickMenu();b.isShowing()&&b.close();this.quickActionRow=this.pinMenu=a.rowIndex;this.updateRightClickMenu(b);b.open(a.pageX,a.pageY);this.selectOnlyQuickActionRow()},OnCloseContextMenu:function(){var a=this.pinMenu;this.pinMenu=-1;this.grid.updateRow(a)},selectOnlyQuickActionRow:function(){this.model.isAnySelected&&this.model.isAnySelected()&&(this.model.deselectAll(),this.model.toggleSelectRow(this.quickActionRow))},createQuickActionMenu:function(){this.quickActionMenu=
ws.widget.createMenu(this.quickActionMenuDefinition);f.connect("after",this.quickActionMenu,"close",f.hitch(this,function(){this.grid.update(this.quickActionRow,this.gridModel.columns.Hover)}));return this.quickActionMenu},updateQuickActionMenu:function(){},createRightClickMenu:function(){},onHeaderCellClick:function(a){this.gridModel&&a.cell.index==this.gridModel.columns.Select&&this.model.selectAll?this.model.isAllInViewSelected()?this.model.deselectAll():this.model.selectAll():this.grid.setSortIndex(a.cell.index);
ws.widget.popup.closeAllPopups()},updateHeader:function(){if(this.showHeader&&this.gridModel&&"Select"in this.gridModel.columns){var a;this.model.isAllInViewSelected?a=this.model.isAllInViewSelected():(a=this.model&&this.model.isAllSelReal(),this.model&&this.model.getSearchString&&null!=this.model.getSearchString()&&this.model.getRowCount()==ws.lang.getPropCount(this.model.selectedUids)&&(a=!0));this.grid.views.views[0].structure.rows[0][this.gridModel.columns.Select].name="<div class='gridIcon "+
(a?"ws_image_chkOnIcon":"ws_image_chkOffIcon")+"'></div>";this.grid.views.views[0].renderHeader()}else this.grid.headerNode.style.display="none"},updateZeroRowsView:function(){var a=0==this.gridModel.getRowCount(),b=this.model.isLoading&&this.model.isLoading(),e=this.model.isErrorState&&this.model.isErrorState();if(a||b||e){if(!this.zeroRowsNode){this.zeroRowsNode=document.createElement("div");this.zeroRowsNode.className="loading";this.grid.domNode.appendChild(this.zeroRowsNode);ws&&ws.WebSuite&&
ws.WebSuite.SidePanel&&ws.WebSuite.SidePanel.setupAdScroll(this.zeroRowsNode);var h=document.createElement("div");h.style.position="relative";h.style.paddingTop="27px";h.innerHTML="<table><tr><td valign='center'><div class='lmsg' style='display:none'></div><div class='emsg' style='display:none'></div><div class='zmsg' style='display:none'></div></td></tr></table>";this.zeroRowsNode.innerHTML="";this.zeroRowsNode.appendChild(h);var h=f.query(".zmsg",this.zeroRowsNode)[0],g=this.getZeroRowsMessage();
"string"===typeof g?h.innerHTML=g:h.appendChild(g);this.postCreateZeroRowsMessage()}if(b&&"none"!=this.domNode.style.display)this.lastLoadingMsg=this.getLoadingMessage(),f.publish("WSFeedbackStart",[this.lastLoadingMsg]);f.query(".emsg",this.zeroRowsNode)[0].innerHTML=this.getErrorMessage();this.setupZeroRowsMessage(b,e)}!b&&this.lastLoadingMsg&&f.publish("WSFeedbackEnd",[this.lastLoadingMsg]);if("boolean"!=typeof this.lastShowZeroRow||this.lastShowZeroRow!==a)this.grid.headerNode.style.display=a?
"none":"block",this.grid.viewsNode.style.display=a?"none":"block",this.zeroRowsNode&&(ws.html.setShowing(this.zeroRowsNode,a),this.onResized());this.lastShowZeroRow=a},getLoadingMessage:function(){return Config.Strings.Loading},getErrorMessage:function(){return Config.Strings.Error},getZeroRowsMessage:function(){return Config.Strings.NoMatchesFound},postCreateZeroRowsMessage:function(){},setupZeroRowsMessage:function(a,b){var e=f.query(".lmsg",this.zeroRowsNode)[0],h=f.query(".emsg",this.zeroRowsNode)[0],
g=f.query(".zmsg",this.zeroRowsNode)[0];ws.html.setShowing(e,!1);ws.html.setShowing(h,!1);ws.html.setShowing(g,!1);a?ws.html.setShowing(e,!0):b?ws.html.setShowing(h,!0):(ws.html.setShowing(g,!0),this.beforeShowZeroRowsMessage(a,b))},beforeShowZeroRowsMessage:function(){},baseSprites:{chkBox:{NONE:"",ON:"ckonCol",OFF:"ckoffCol"}},getColMinMax:function(a){var b={min:50,max:0};if(this.columnDefaults){a=this.columnDefaults[a];if(a.min)b.min=a.min;if(a.max)b.max=a.max}return b},limitMinMax:function(a,
b){var e=b;if(b<a.min)e=a.min;else if(b>a.max)e=a.max;return e},autosizeColumns:function(a,b){var e=this.gridModel.columns[this.autosizeColumnId],h=this.grid.views.views[0];if(0<=e){var g=f.contentBox(this.grid.domNode).w-(a?0:18);if(!(0>g)){for(var k=h.structure.rows[0],j=this.getColMinMax(k[e].id),p=this.cellWidthPad,v=0;v<k.length;v++){var w=k[v];w.index!=e&&!w.hidden&&(g-=parseInt(w.unitWidth)+p)}g-=p+(b?b:0);if(g<j.min)g=j.min;k=0;if(j.max)k=j.max,this.autoWidthSizedTo&&(k=this.autoWidthSizedTo-
p);if(k&&g>k)g=k,this.autosizeColumnWidth=0;g!=this.autosizeColumnWidth&&h.setColWidth(e,g);this.autosizeColumnWidth=g;h.update()}}else h.update()},checkColumnSizes:function(a){var b=this.gridModel.columns[this.autosizeColumnId];if(0<=b){for(var e=f.contentBox(this.grid.domNode).w-18,h=this.grid.views.views[0],g=h.structure.rows[0],k=this.cellWidthPad,j=this.getColMinMax(g[b].id),p=g[a],v=this.getColMinMax(p.id),w=0;w<g.length;w++){var z=g[w];z.index!=b&&!z.hidden&&(e=z.index==a?e-this.limitMinMax(v,
parseInt(z.unitWidth)+k):e-(parseInt(z.unitWidth)+k))}e-=k;w=Math.max(j.min,e);p=parseInt(p.unitWidth)+k;g=parseInt(g[b].unitWidth)+k;a==b?p>e?(h.setColWidth(b,w),this.autoWidthSizedTo=w):p<j.min?(h.setColWidth(b,j.min),this.autoWidthSizedTo=j.min):this.autoWidthSizedTo=p:(v=this.limitMinMax(v,p),v!=p&&h.setColWidth(a,v),g>e&&(w=this.limitMinMax(j,e),h.setColWidth(b,w)));h.update()}},onMoveColumn:function(a,b){var e=f.hitch(this,function(a){var b=f.filter(this.columns,function(a){return!a.hidden});
return a>=b.length?this.columns.length:f.indexOf(this.columns,b[a])}),a=e(a),b=e(b);dojox.grid.arrayMove(this.columns,a,b);for(e=0;e<this.columns.length;e++)this.gridModel.columns[this.columns[e].id]=e},onEndMoveColumn:function(){this.updateColumns();this.onHeaderColumnChange()},_onKeyPress:function(a){if(this.isShowing()){var b=!1,e=this.grid,h=e.views.views[0],g=this.model.getCurrentRow?this.model.getCurrentRow():-1;if(-1==g)g=e.rows.overRow;var k=-1,j=this.gridModel.getRowCount(),p=Math.floor(e.scroller.pageHeights[0]/
Math.min(j,e.scroller.rowsPerPage)),v=this.grid.views.views[0].scrollboxNode.offsetHeight,w=!1;if(Config.EnableKeyboardShortcuts&&a.keyChar&&f.isString(a.keyChar)&&!a.ctrlKey&&!a.altKey&&!a.metaKey){if(0<=g)switch(a.keyChar.toLowerCase()){case Config.Strings.KeyListToggleCheckItem:this.toggleSelectRow(g);b=!0;break;case Config.Strings.KeyListOpenQuickActionMenu:ws.lang.ensureLayersLoaded(f.hitch(this,function(){var a=this.getQuickActionMenu(!1);a&&a.isShowing()&&this.quickActionRow!=g&&a.close();
var b=h.getCellNode(g,this.quickActionCol);if(b){this.quickActionRow=g;this.updateQuickActionMenu(a);for(var e=null,k=0;k<b.childNodes.length;k++)if(f.hasClass(b.childNodes[k],"quickActionHover")){e=b.childNodes[k];break}e&&a.open(e);this.selectOnlyQuickActionRow()}})),b=!0}}else if(Config.EnableKeyboardShortcuts){if(ws.widget.popup.isAnyPopupOpen())return;var z=a.keyCode;if(f.isMac&&a.metaKey)if(a.keyCode==f.keys.UP_ARROW)z=f.keys.PAGE_UP;else if(a.keyCode==f.keys.DOWN_ARROW)z=f.keys.PAGE_DOWN;else if(a.keyCode==
f.keys.LEFT_ARROW)z=f.keys.HOME;else if(a.keyCode==f.keys.RIGHT_ARROW)z=f.keys.END;switch(z){case f.keys.UP_ARROW:0>g&&(g=Math.floor((h.scrollboxNode.scrollTop+this.grid.scroller.windowHeight)/p));1<=g&&(k=g-1);w=b=!0;break;case f.keys.DOWN_ARROW:0>g&&(g=Math.floor(h.scrollboxNode.scrollTop/p));g+1<j&&(k=g+1);w=b=!0;break;case f.keys.LEFT_ARROW:case f.keys.RIGHT_ARROW:this.toggleSelectRow(g);break;case f.keys.PAGE_UP:0>g&&(g=Math.min(this.grid.scroller.lastVisibleRow,j-1));k=this.grid.scroller.firstVisibleRow;
if(g==k||g==k+1)k=g-Math.floor(v/p),k=Math.max(0,k);w=b=!0;break;case f.keys.PAGE_DOWN:if(0>g)g=this.grid.scroller.firstVisibleRow;k=this.grid.scroller.lastVisibleRow;if(g==k||g==k-1)k=g+Math.floor(v/p);k=Math.min(k,j-1);w=b=!0;break;case f.keys.HOME:k=0;w=b=!0;break;case f.keys.END:k=j-1;w=b=!0;break;case f.keys.DELETE:p=[];f.isFunction(this.model.getSelectedUids)?p=this.model.getSelectedUids():f.isFunction(this.gridModel.getSelectedUids)&&(p=this.gridModel.getSelectedUids());if(p.length)this.onDelKeyPress(p);
else if(0<=g)this.onDelKeyPress(g);b=!0;break;case f.keys.BACKSPACE:if(f.isMac){p=[];f.isFunction(this.model.getSelectedUids)?p=this.model.getSelectedUids():f.isFunction(this.gridModel.getSelectedUids)&&(p=this.gridModel.getSelectedUids());if(p.length)this.onDelKeyPress(p);else if(0<=g)this.onDelKeyPress(g);b=!0}break;case f.keys.ENTER:if(0<=g)this.onEnterKeyPress(g);b=!0}}if(-1!=k){if(-1!=(this.model.getCurrentRow?this.model.getCurrentRow():-1)){if(p=e.rows.overRow,e.rows.setOverRow(-1),this.onMouseOutRow({rowIndex:p}),
this.setCurrentRow(k),!this._mouseMoveConnect){if(!this._origMouseOverRow)this._origMouseOverRow=this.grid.onMouseOverRow;this.grid.onMouseOverRow=function(){};this._mouseMoveConnect=f.connect(f.doc.documentElement,"onmousemove",this,"onMouseMove")}}else this.clearMouseHandler(),p=e.rows.overRow,e.rows.setOverRow(k),this.onMouseOutRow({rowIndex:p}),this.onMouseOverRow({rowIndex:k});w&&this.scrollIntoView(k)}if(b)a.preventDefault();else this.onOtherKeyPress(a,g)}},setCurrentRow:function(){},scrollOnKeyPress:function(a){this.clearMouseHandler();
this.grid.views.views[0].scrollboxNode.scrollTop=a},clearMouseHandler:function(){if(!this._origMouseOverRow)this._origMouseOverRow=this.grid.onMouseOverRow;if(!this._origMouseOutRow)this._origMouseOutRow=this.grid.onMouseOutRow;this.grid.onMouseOverRow=function(){};this.grid.onMouseOutRow=function(){};ws.lang.setTimeout(this,"restoreMouseHandler",150)},restoreMouseHandler:function(){this.grid.onMouseOverRow=this._origMouseOverRow;this.grid.onMouseOutRow=this._origMouseOutRow},scrollIntoView:function(a){if(!(0>
a)){var b=this.grid.scroller,e=this.grid.views.views[0].scrollboxNode,f=Math.floor(b.pageHeights[0]/Math.min(this.gridModel.getRowCount(),b.rowsPerPage)),b=Math.floor(e.offsetHeight/f),e=Math.floor(e.scrollTop/f),f=-1;e>a?f=a:e+b<=a&&(f=a-b+1);-1!=f&&(this.clearMouseHandler(),this.scrollToRow(f))}},onEnterKeyPress:function(){},onDelKeyPress:function(){},onOtherKeyPress:function(){},toggleColumn:function(a,b){var e=!1;if("RESET"==a)e=!0,this.autoWidthSizedTo=0,this.initColumns(!0),this.grid.setSortIndex(Math.abs(this.defSort),
0<=this.defSort);else{var f=this.columns[ws.lang.findByProp(this.columns,"id",a)];"undefined"==typeof b&&(e=!0,b=!f.hidden);f.hidden=b}this.updateColumns();if(e)this.onHeaderColumnChange(null,"RESET"==a)},updateColumns:function(){for(var a=0,b=0;b<this.columns.length;b++){var e=this.columns[b];e.hidden?this.gridModel.columns[e.id]=-1:(this.gridModel.columns[e.id]=a,a++)}a=f.filter(this.columns,function(a){return!a.hidden});if(0!=this.grid.sortInfo&&this.grid.views.views[0]){e=f.query("th.dojoxGrid-cell",
this.grid.headerNode);for(b=0;b<e.length;b++){var h=e[b];if(h.children&&0<h.children.length&&-1!=h.children[0].className.indexOf("dojoxGrid-sort")){this.grid.sortInfo=(0>this.grid.sortInfo?-1:1)*(b+1);break}}}this.grid.setStructure([{cells:[a]}]);this.autosizeColumnWidth=0;this.autosizeColumns()},formatSprite:function(a,b){if(b){var e=b.sort&&b[1]||"",b=b.sort&&b[0]||b,f=a&&a[b]?a[b]:null;return f?ws.string.substituteParams("<div class='gridIcon %{0}' title='%{1}'></div>",f,e):""}}})})},"dojo/keys":function(){define("dojo/keys",
["./_base/kernel","./sniff"],function(g,j){return g.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:j("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,
NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:j("mac")&&!j("air")?j("safari")?91:224:17}})},"dojo/uacss":function(){define("dojo/uacss",["./dom-geometry","./_base/lang","./ready","./sniff","./_base/window"],function(g,j,f,a,b){var e=b.doc.documentElement,b=a("ie"),h=a("opera"),
k=Math.floor,l=a("ff"),n=g.boxModel.replace(/-/,""),h={dj_quirks:a("quirks"),dj_opera:h,dj_khtml:a("khtml"),dj_webkit:a("webkit"),dj_safari:a("safari"),dj_chrome:a("chrome"),dj_gecko:a("mozilla")};if(b)h.dj_ie=!0,h["dj_ie"+k(b)]=!0,h.dj_iequirks=a("quirks");l&&(h["dj_ff"+k(l)]=!0);h["dj_"+n]=!0;var m="",q;for(q in h)h[q]&&(m+=q+" ");e.className=j.trim(e.className+" "+m);f(90,function(){if(!g.isBodyLtr()){var a="dj_rtl dijitRtl "+m.replace(/ /g,"-rtl ");e.className=j.trim(e.className+" "+a+"dj_rtl dijitRtl "+
m.replace(/ /g,"-rtl "))}});return a})},"dojox/grid/data/Rows":function(){define("dojox/grid/data/Rows",["dojo/_base/declare","dojo","dojox/grid/data/Model"],function(g,j,f){return g("dojox.grid.data.Rows",f,{allChange:function(){this.notify("AllChange",arguments);this.notify("Change",arguments)},rowChange:function(){this.notify("RowChange",arguments)},datumChange:function(){this.notify("DatumChange",arguments)},beginModifyRow:function(a){this.cache[a]||(this.cache[a]=this.copyRow(a))},endModifyRow:function(a){var b=
this.cache[a];if(b){var e=this.getRow(a);dojox.grid.arrayCompare(b,e)||this.update(b,e,a);delete this.cache[a]}},cancelModifyRow:function(a){var b=this.cache[a];b&&(this.setRow(b,a),delete this.cache[a])},generateComparator:function(a,b,e,f){return function(g,l){var j=a(g[b],l[b]);return j?e?j:-j:f&&f(g,l)}}})})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(g,j){var f={};j.setObject("dojo.string",f);f.rep=function(a,b){if(0>=b||!a)return"";for(var e=[];;){b&1&&e.push(a);
if(!(b>>=1))break;a+=a}return e.join("")};f.pad=function(a,b,e,h){e||(e="0");a=""+a;b=f.rep(e,Math.ceil((b-a.length)/e.length));return h?a+b:b+a};f.substitute=function(a,b,e,f){f=f||g.global;e=e?j.hitch(f,e):function(a){return a};return a.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(a,g,n){a=j.getObject(g,!1,b);n&&(a=j.getObject(n,!1,f).call(f,a,g));return e(a,g).toString()})};f.trim=String.prototype.trim?j.trim:function(a){for(var a=a.replace(/^\s+/,""),b=a.length-1;0<=b;b--)if(/\S/.test(a.charAt(b))){a=
a.substring(0,b+1);break}return a};return f})},"ws/lang":function(){define("ws/lang",["dojo/_base/lang","dojo/_base/array","dojo/_base/kernel","ws/reporting","dojo/NodeList-manipulate"],function(g,j,f){g.setObject("ws.lang",{undefinedOrNull:function(a){return"undefined"==typeof a||null==a?!0:!1},shallowCopy:function(a,b){var e,f;if(null===a)return null;if(ws.lang.isArray(a)){f=[];for(e=0;e<a.length;e++){var k=a[e];"undefined"==typeof k&&(k=null);f[e]=b?ws.lang.shallowCopy(k,b):k}}else if(g.isObject(a))for(e in f=
{},a)"undefined"==typeof f[e]&&(k=a[e],"undefined"==typeof k&&(k=null),f[e]=b?ws.lang.shallowCopy(k,b):k);else f=a;return f},setTimeout:function(a,b){var e=window,f=2;g.isFunction(a)||(e=a,a=b,b=arguments[2],f++);g.isString(a)&&(a=e[a]);for(var k=[];f<arguments.length;f++)k.push(arguments[f]);return window.setTimeout(function(){a.apply(e,k)},b)},trackdl:function(a,b){ws.reporting&&ws.reporting.DL&&ws.reporting.DL.append&&ws.reporting.DL.append(a,b)},isArray:function(a){return a.push&&a.splice&&a.join},
isEmptyObject:function(a){for(var b in a)return!1;return!0},getPropCount:function(a){var b=0,e;for(e in a)a.hasOwnProperty(e)&&b++;return b},difference:function(a,b){for(var e=[],f=0;f<a.length;f++)-1==j.indexOf(b,a[f])&&e.push(a[f]);return e},intersection:function(a,b){return j.filter(a,function(a){return-1!=j.indexOf(b,a)})},findByProp:function(a,b,e){for(var f=0;f<a.length;f++)if(a[f][b]==e)return f;return-1},defer:function(a,b,e,f){this._deferTimeouts[f]&&clearTimeout(this._deferTimeouts[f]);
this._deferTimeouts[f]=setTimeout(g.hitch(a,b),e)},_deferTimeouts:{},ensureLayersLoadedExtra:function(a,b){if(!window.layersToLoad)window.layersToLoad=["dojo2","MessageList"];if(b&&b.layers)window.layersToLoad=window.layersToLoad.concat(b.layers);this.ensureLayersLoaded(a)},ensureLayersLoaded:function(a){a&&this.layersLoadedCallbacks.push(a);if(!this.loadingLayers){this.loadingLayers=!0;if(!window.layersToLoad)window.layersToLoad=["dojo2","MessageList"];if((a=window.layersToLoad.shift())&&dojoConfig.isCustom)require(["release/"+
a],g.hitch(this,function(){this.loadingLayers=!1;this.ensureLayersLoaded()}));else{this.loadingLayers=!1;a=this.layersLoadedCallbacks;this.layersLoadedCallbacks=[];for(var b=0;b<a.length;b++)f.addOnLoad(a[b])}}},ensureLayersLoadedSoon:function(a){setTimeout(g.hitch(this,function(){setTimeout(g.hitch(this,"ensureLayersLoaded",a),1E3)}),0)},layersLoadedCallbacks:[],decode:function(a){if(!a)return a;for(var b="",e=0,f=c1=c2=0;e<a.length;)f=a.charCodeAt(e),128>f?(b+=String.fromCharCode(f),e++):191<f&&
224>f?(c2=a.charCodeAt(e+1),b+=String.fromCharCode((f&31)<<6|c2&63),e+=2):(c2=a.charCodeAt(e+1),c3=a.charCodeAt(e+2),b+=String.fromCharCode((f&15)<<12|(c2&63)<<6|c3&63),e+=3);return b},isEmptyArray:function(a){return a&&0<a.length?!1:!0},encode:function(a){for(var a=a.replace(/\r\n/g,"\n"),b="",e=0;e<a.length;e++){var f=a.charCodeAt(e);128>f?b+=String.fromCharCode(f):(127<f&&2048>f?b+=String.fromCharCode(f>>6|192):(b+=String.fromCharCode(f>>12|224),b+=String.fromCharCode(f>>6&63|128)),b+=String.fromCharCode(f&
63|128))}return b},randomArray:function(a){return a.sort(function(){return Math.round(Math.random())-0.5})},stringifyToJSON:function(a,b,e){function f(a){return('"'+a.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")}function g(a,j,q){b&&(a=b(q,a));var s;s=typeof a;if("number"==s)return isFinite(a)?a+"":"null";if("boolean"==s)return a+"";if(null===a)return"null";if("string"==typeof a)return f(a);if("function"==
s||"undefined"==s)return l;if(a instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(b,e,f){b=a["getUTC"+e]()+(f?1:0);return 10>b?"0"+b:b});if(a.valueOf()!==a)return g(a.valueOf(),j,q);var o=e?j+e:"",u=e?" ":"",p=e?"\n":"";if(a&&a.push&&a.splice&&a.join){for(var u=a.length,v=[],q=0;q<u;q++)s=g(a[q],o,q),"string"!=typeof s&&(s="null"),v.push(p+o+s);return"["+v.join(",")+p+j+"]"}v=[];for(q in a){var w;if(a.hasOwnProperty(q)){if("number"==
typeof q)w='"'+q+'"';else if("string"==typeof q)w=f(q);else continue;s=g(a[q],o,q);"string"==typeof s&&v.push(p+o+w+":"+u+s)}}return"{"+v.join(",")+p+j+"}"}var l;"string"==typeof b&&(e=b,b=null);return g(a,"","")}})})},"dijit/a11yclick":function(){define("dijit/a11yclick","dojo/on,dojo/_base/array,dojo/keys,dojo/_base/declare,dojo/has,dojo/_base/unload,dojo/_base/window".split(","),function(g,j,f,a,b,e,h){function k(a){return(a.keyCode===f.ENTER||a.keyCode===f.SPACE)&&!a.ctrlKey&&!a.shiftKey&&!a.altKey&&
!a.metaKey}var l=null;b("dom-addeventlistener")?h.doc.addEventListener("keydown",function(a){l=a.target},!0):function(){var a=function(a){l=a.srcElement};h.doc.attachEvent("onkeydown",a);e.addOnWindowUnload(function(){h.doc.detachEvent("onkeydown",a)})}();return function(a,e){if(/input|button/i.test(a.nodeName))return g(a,"click",e);var f=[g(a,"keydown",function(a){if(k(a))l=a.target,a.preventDefault()}),g(a,"keyup",function(a){k(a)&&a.target==l&&(l=null,g.emit(a.target,"click",{cancelable:!0,bubbles:!0}))}),
g(a,"click",function(a){e.call(this,a)})];if(b("touch")){var h;f.push(g(a,"touchend",function(a){var b=a.target;h=setTimeout(function(){h=null;g.emit(b,"click",{cancelable:!0,bubbles:!0})},600)}),g(a,"click",function(){h&&clearTimeout(h)}))}return{remove:function(){j.forEach(f,function(a){a.remove()});h&&(clearTimeout(h),h=null)}}}})},"url:ws/widget/Splitter.css":"","dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../selector/_loader"],function(g,j,
f,a){function b(a){var b=k[a.options.handleAs];a.data=b?b(a):a.data||a.text;return a}a.add("activex","undefined"!==typeof ActiveXObject);a.add("dom-parser",function(a){return"DOMParser"in a});var e;if(a("activex")){var h=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"];e=function(b){var e=b.data;e&&a("dom-qsa2.1")&&!e.querySelectorAll&&a("dom-parser")&&(e=(new DOMParser).parseFromString(b.text,"application/xml"));if(!e||!e.documentElement){var g=b.text;
f.some(h,function(a){try{var b=new ActiveXObject(a);b.async=!1;b.loadXML(g);e=b}catch(f){return!1}return!0})}return e}}var k={javascript:function(a){return j.eval(a.text||"")},json:function(a){return g.parse(a.text||null)},xml:e};b.register=function(a,b){k[a]=b};return b})},"dojo/date":function(){define(["./has","./_base/lang"],function(g,j){var f={};f.getDaysInMonth=function(a){var b=a.getMonth(),e=[31,28,31,30,31,30,31,31,30,31,30,31];return 1==b&&f.isLeapYear(a)?29:e[b]};f.isLeapYear=function(a){a=
a.getFullYear();return!(a%400)||!(a%4)&&!!(a%100)};f.getTimezoneName=function(a){var b=a.toString(),e="",f=b.indexOf("(");if(-1<f)e=b.substring(++f,b.indexOf(")"));else if(f=/([A-Z\/]+) \d{4}$/,b=b.match(f))e=b[1];else if(b=a.toLocaleString(),f=/ ([A-Z\/]+)$/,b=b.match(f))e=b[1];return"AM"==e||"PM"==e?"":e};f.compare=function(a,b,e){a=new Date(+a);b=new Date(+(b||new Date));"date"==e?(a.setHours(0,0,0,0),b.setHours(0,0,0,0)):"time"==e&&(a.setFullYear(0,0,0),b.setFullYear(0,0,0));return a>b?1:a<b?
-1:0};f.add=function(a,b,e){var f=new Date(+a),g=!1,l="Date";switch(b){case "day":break;case "weekday":var j;(b=e%5)?j=parseInt(e/5):(b=0<e?5:-5,j=0<e?(e-5)/5:(e+5)/5);var m=a.getDay(),q=0;6==m&&0<e?q=1:0==m&&0>e&&(q=-1);m+=b;if(0==m||6==m)q=0<e?2:-2;e=7*j+b+q;break;case "year":l="FullYear";g=!0;break;case "week":e*=7;break;case "quarter":e*=3;case "month":g=!0;l="Month";break;default:l="UTC"+b.charAt(0).toUpperCase()+b.substring(1)+"s"}if(l)f["set"+l](f["get"+l]()+e);g&&f.getDate()<a.getDate()&&
f.setDate(0);return f};f.difference=function(a,b,e){var b=b||new Date,e=e||"day",h=b.getFullYear()-a.getFullYear(),g=1;switch(e){case "quarter":a=a.getMonth();b=b.getMonth();a=Math.floor(a/3)+1;b=Math.floor(b/3)+1;g=b+4*h-a;break;case "weekday":h=Math.round(f.difference(a,b,"day"));e=parseInt(f.difference(a,b,"week"));if(0==h%7)h=5*e;else{var g=0,l=a.getDay(),j=b.getDay(),e=parseInt(h/7),b=h%7,a=new Date(a);a.setDate(a.getDate()+7*e);a=a.getDay();if(0<h)switch(!0){case 6==l:g=-1;break;case 0==l:g=
0;break;case 6==j:g=-1;break;case 0==j:g=-2;break;case 5<a+b:g=-2}else if(0>h)switch(!0){case 6==l:g=0;break;case 0==l:g=1;break;case 6==j:g=2;break;case 0==j:g=1;break;case 0>a+b:g=2}h=h+g-2*e}g=h;break;case "year":g=h;break;case "month":g=b.getMonth()-a.getMonth()+12*h;break;case "week":g=parseInt(f.difference(a,b,"day")/7);break;case "day":g/=24;case "hour":g/=60;case "minute":g/=60;case "second":g/=1E3;case "millisecond":g*=b.getTime()-a.getTime()}return Math.round(g)};j.mixin(j.getObject("dojo.date",
!0),f);return f})},"ws/widget/Advertisement":function(){define("ws/widget/Advertisement","dojo/_base/declare,dojo,dijit,dijit/_Widget,ws/browser,ws/html,ws/string,ws/settings".split(","),function(g,j,f,a){return g("ws.widget.Advertisement",[a],{adConfig:null,adtype:"",location:"",lastRotateTime:0,blocked:!1,hatRevenueBlocked:!1,isHatAd:!1,screen:"large",adsDiv:null,adFeedBackDiv:null,adFeedBackDivAdded:!1,alreadyShownAds:!1,hasAdContent:!1,currentMagic:"0",waitOnRpcsInProgress:!1,multiSize:!1,checkForHiddenB4Rotate:!1,
networkIdSet:!1,adId:null,adDivSetup:null,startup:function(a){j.subscribe("ws.io.rpcsInProgress/done",j.hitch(this,function(){if(this.waitOnRpcsInProgress)this.waitOnRpcsInProgress=!1,ws.lang.setTimeout(this,"rotate",500,!1)}));j.subscribe("Settings/show",j.hitch(this,function(){this.allAdsHidden=!0}));j.subscribe("Settings/hide",j.hitch(this,function(){this.allAdsHidden=!1}));j.subscribe("DspMsgSlideShow/start",j.hitch(this,function(){this.allAdsHidden=!0}));j.subscribe("DspMsgSlideShow/end",j.hitch(this,
function(){this.allAdsHidden=!1}));this.setAdConfig(a)},resetAdConfig:function(){j.removeClass(this.domNode,"adFrameDiv"+this.adConfig.location);if(this.onDocClk)j.disconnect(this.onDocClk),this.onDocClk=null;if(this.adsDiv)this.adsDiv.innerHTML="";this.adConfig=null;this.location=this.adtype="";this.lastRotateTime=0;this.isHatAd=this.hatRevenueBlocked=this.blocked=!1;this.screen="large";this.adFeedBackDiv=null;this.alreadyShownAds=this.adFeedBackDivAdded=!1;this.hasAdContent=!1;this.currentMagic=
"0";this.networkIdSet=this.checkForHiddenB4Rotate=this.multiSize=this.waitOnRpcsInProgress=!1;this.adDivSetup=this.adId=null},setAdConfig:function(a,e,h,g,l){this.adtype=e||this.adtype;this.blocked=h||this.blocked;this.checkForHiddenB4Rotate=g||this.checkForHiddenB4Rotate;this.adDivSetup=l||this.adDivSetup;this.screen=1E3>screen.width?"small":"large";if(Config.AdInfo&&(this.adConfig=Config.AdInfo[this.adtype+"_"+this.screen]||Config.AdInfo[this.adtype+"_all"]))this.currentMagic=this.adConfig.magic;
if(this.enabled()){if(null!=this.adConfig.size.match(/^[0-9]/))this.multiSize=!0;if("0"!=this.adConfig.sslMagic)this.currentMagic=this.adConfig.sslMagic;j.addClass(this.domNode,"adFrameDiv adFrameDiv"+this.adConfig.location);this.multiSize?(this.domNode.style.width="auto",this.domNode.style.height="auto"):(this.domNode.style.width=this.adConfig.iframeWidth+"px",this.domNode.style.height=this.adConfig.iframeHeight+"px");if(0!=this.adConfig.interval)this.onDocClk=ws.browser.addDocumentOnClick(this,
"onDocumentClick");this.isHatAd&&this.hatRevenueBlock(f.byId("HatWidget").hatAdsAreBlocked());if(!a)this.started=!0,this.rotateSoon()}else this.domNode.style.display="none"},getAdId:function(){return this.adId},setAdId:function(a){this.adId=a},isHidden:function(){return this.domNode&&"none"==this.domNode.style.display},hideAd:function(a){var e="none"==this.domNode.style.display;if(!(e&&a||!e&&!a))this.domNode.style.display=a?"none":"block"},block:function(a,e){this.pause(a,!0,e)},pause:function(a,
e,f){if(this.enabled())if(this.blocked=a,Config.EnableInPageIFrameAds&&!this.adConfig.url)try{a||this.hatRevenueBlocked?(this.hasAdContent=!1,2==window._g_WS_adsWrapperLoadingState&&this.adsDiv&&window.adsHideDiv(this.adsDiv)):(2==window._g_WS_adsWrapperLoadingState&&this.adsDiv&&window.adsShowDiv(this.adsDiv),this.rotate(f))}catch(g){}else if(a||this.hatRevenueBlocked){this.hasAdContent=!1;if(e)this.domNode.innerHTML="";this.createdIframe=!1;this.lastRotateTime=0}else this.rotate(f)},hatRevenueBlock:function(a){if(a)this.domNode.style.display=
"none";else if(this.enabled())this.domNode.style.display="block";var e=this.hatRevenueBlocked!=a;this.hatRevenueBlocked=a;e&&this.block(this.blocked)},enabled:function(){return(this.adConfig?!0:!1)&&"0"!=this.currentMagic&&!(Settings.SkipAds&&this.adConfig.skip)},addAdFeedBack:function(a){this.adFeedBackDiv=document.createElement("div");this.adFeedBackDiv.style.position="relative";this.adFeedBackDiv.style.paddingTop="5px";var e=document.createElement("a");this.adFeedBackDiv.appendChild(e);e.appendChild(document.createTextNode(Config.Strings.AdFeedback));
e.href=a;e.target="_blank";if(this.adsDiv&&!this.adFeedBackDivAdded)this.adFeedBackDivAdded=!0,this.domNode.appendChild(this.adFeedBackDiv)},makeAdsWrpperCalls:function(){if(!this.adsDiv){var a=document.createElement("div");a.style.position="relative";a.id=this.id+"AdsDiv";this.domNode.appendChild(a);this.adsDiv=a;if(this.adFeedBackDiv&&!this.adFeedBackDivAdded)this.adFeedBackDivAdded=!0,this.domNode.appendChild(this.adFeedBackDiv)}2==window._g_WS_adsWrapperLoadingState?this.__makeAdsWrpperCalls():
_ws.makeAdsWrpperCalls(this.id,j.hitch(this,this.__makeAdsWrpperCalls))},__makeAdsWrpperCalls:function(){try{if(!this.networkIdSet&&Config.adServerNetworkID)this.networkIdSet=!0,adSetNetId(Config.adServerNetworkID);this.hasAdContent=!0;this.alreadyShownAds?this.adsDiv&&window.adsReloadAd(this.adsDiv):(this.adsDiv&&(this.multiSize?window.htmlAdWHDyn(this.currentMagic,this.adConfig.size,"IFRAME",this.adsDiv):window.htmlAdWH(this.currentMagic.split(":")[0],this.adConfig.iframeWidth,this.adConfig.iframeHeight,
"IFRAME",this.adsDiv),this.adDivSetup&&this.adDivSetup(this.adsDiv)),this.alreadyShownAds=!0)}catch(a){}},checkParentNodeForHidden:function(){if(this.domNode){var a=!1,e=this.domNode,f=!1;do{if("none"===e.style.display||j.hasClass(e,"dijitHidden")){a=!0;break}e.parentNode&&e.parentNode.style?e=e.parentNode:f=!0}while(!f);return a}},rotate:function(a){if(this.enabled()&&!this.blocked&&!this.hatRevenueBlocked){if("mlsidebar1"==this.adConfig.name||"mlsidebar2"==this.adConfig.name||"displaymessagetext"==
this.adConfig.name){var e=ws.WebSuite.settingsWidget;if(e&&e.isShowing())return}else if("sendconfirm"==this.adConfig.name||"sendconfirmtext"==this.adConfig.name){if((e=ws.WebSuite.getCurrentViewId())&&"composeMessage"!=e){this.block(!0);return}if("composeMessage"==e&&(e=ws.WebSuite.ViewWidget.selectedChildWidget,e.stackWidget.selectedChildWidget==e.layoutWidget)){this.block(!0);return}}if(Config.PauseAdRotateComposeIE&&j.isIE)if(-1!=this.adConfig.name.indexOf("sidepanel")){if((e=ws.WebSuite.getCurrentViewId())&&
"composeMessage"==e)if((e=ws.WebSuite.ViewWidget.selectedChildWidget)&&e.stackWidget&&e.layoutWidget&&e.stackWidget.selectedChildWidget==e.layoutWidget&&this.hasAdContent)return}else if("displaymessage"==this.adConfig.name&&(e=window.DM)&&e.composeWidget&&e.notebook&&e.notebook.selectedChildWidget&&e.composeWidget==e.notebook.selectedChildWidget&&this.hasAdContent)return;if(!(this.checkForHiddenB4Rotate&&this.checkParentNodeForHidden()||this.allAdsHidden))if(e=(new Date).getTime(),!(e-this.lastRotateTime<
1E3*this.adConfig.interval)||a){this.lastRotateTime=e;if(0==this.adConfig.interval)this.blocked=!0;a="about:blank";if("Yhoo"==Config.adServerType)this.adConfig.url=ws.string.substituteParams("%{base}?name=%{name}&screen=%{screen}",{base:Config.adPageURL,name:this.adtype,screen:this.screen});if(!this.createdIframe&&(!Config.EnableInPageIFrameAds||this.adConfig.url))this.domNode.innerHTML=ws.string.substituteParams("<iframe src=\"about:blank\" name='%{name}' style='width:%{width}; height:%{height}; background-color:transparent' marginwidth='0' marginheight='0' hspace='0' vspace='0' frameborder='0' scrolling='no' allowTransparency='true'></iframe>",
{name:this.id+"frame",width:this.multiSize?"100%":this.adConfig.iframeWidth+"px",height:this.multiSize?"100%":this.adConfig.iframeHeight+"px"}),this.createdIframe=!0;if("displaymessagetext"==this.adConfig.title)this.currentMagic=Settings.DisplayMessageTextAdMagic;if("0"!=this.currentMagic)if(this.adConfig.url)a=""+Math.random(),a=parseInt(a.substr(2),10),a=ws.string.substituteParams(this.adConfig.url,a);else if(Config.EnableInPageIFrameAds)this.makeAdsWrpperCalls();else if(e=Config.AdsWrapperJsURL.lastIndexOf("/"))a=
Config.AdsWrapperJsURL.substr(0,e+1),a+=ws.string.substituteParams("adsLoader.html?mn={0}&w={1}&h={2}&awu={3}",this.currentMagic,this.adConfig.iframeWidth,this.adConfig.iframeHeight,encodeURIComponent(a)),this.multiSize&&(a+="&ms="+encodeURIComponent(this.adConfig.size));if(this.createdIframe)this.hasAdContent=!0,ws.html.recreateIframe(this.domNode,a);if(!Config.EnableInPageIFrameAds&&Config.EnableTacoda&&!this.tacodaInitiated)a=document.createElement("div"),this.domNode.appendChild(a),a.innerHTML=
'<iframe title="" width="1px" height="1px" frameborder=0 border=0 marginwidth=0 marginheight=0 scrolling="no"></iframe>',ws.html.recreateIframe(a,Config.SameDomainScriptsURL+Config.TacodaTagFile),ws.widget.Advertisement.prototype.tacodaInitiated=!0;if("K"==ws.UserContext.ParentalControls){if(!this.kolImgAdded){var a="sidepanel"==this.adConfig.name?"22px":"0px",e=document.createElement("div"),f=document.createElement("img");f.src=Config.BaseResourcesURL+"images/AdBug.gif";e.appendChild(f);with(f.style)position=
"absolute",bottom=a,right="0px";this.domNode.appendChild(e);this.kolImgAdded=e}this.kolImgAdded.style.display="messagelist"==this.adtype?"none":"block"}}}},onDocumentClick:function(){setTimeout(j.hitch(this,function(){ws.io.openingWindow||this.rotateSoon(!0)}),100)},rotateSoon:function(a){ws.io.rpcsInProgress?this.waitOnRpcsInProgress=!0:ws.lang.setTimeout(this,"rotate",1900,!1,a)},uninitialize:function(){this.onDocClk&&j.disconnect(this.onDocClk);this.adConfig=null}})})},"dijit/Destroyable":function(){define("dijit/Destroyable",
["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(g,j,f){return f("dijit.Destroyable",null,{destroy:function(){this._destroyed=!0},own:function(){g.forEach(arguments,function(a){var b="destroyRecursive"in a?"destroyRecursive":"destroy"in a?"destroy":"remove",e=j.before(this,"destroy",function(e){a[b](e)}),f=j.after(a,b,function(){e.remove();f.remove()},!0)},this);return arguments}})})},"url:ws/suite/InforOfferDialog.html":'<div class="WSModalPane inforOfferDlg">\n\t<div class="WSModalPaneInner">\n\t\t<img src="${spacer}" class="mainSprite wsCloseBtn" data-dojo-attach-event="onclick:hideDlg">\n\t\t<div class="modalContainer">\n\t\t\t<div class="content" data-dojo-attach-point="content">\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n',
"url:ws/suite/Hat.css":"","ws/widget/iframeModalPane":function(){define("ws/widget/iframeModalPane","dojo/_base/declare,dojo,dijit,ws/widget/WSModalPane,dijit/_TemplatedMixin,ws/widget/popup".split(","),function(g,j,f,a,b){return g([a,b],{destroyOnClose:!0,templateString:'<div class="WSModalPane"><div class="WSModalPaneInner">\t<div class="mainSprite wsCloseBtn" data-dojo-attach-event="onclick: onCancel"></div>\t\t<div class="modalContainer">\t\t\t<iframe frameborder="0" scrolling="${scrolling}" data-dojo-attach-point="iframeNode" style="clear:both;display:block"></iframe>\t\t</div>\t</div></div>',
pluginId:null,scrolling:"yes",show:function(a,b,f){f||(f={w:64,h:76});ws.widget.popup.closeAllPopups();this.iframeNode.src=a;j.marginBox(this.domNode,{w:b.w+f.w,h:b.h+f.h});j.marginBox(this.iframeNode,{w:b.w,h:b.h});this.inherited(arguments)},onCancel:function(){this.hide()},hide:function(){ws.widget.popup.close(this);this.inherited(arguments);ws.widget.Dialogs.iframePane=null}})})},"ws/widget/GenericDialog":function(){define("ws/widget/GenericDialog","dojo/_base/declare,dojo,dijit,ws/widget/WSModalPane,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,ws/widget/Button,ws/widget/popup,ws/widget/WSToolbar".split(","),
function(g,j,f,a,b,e,h){return g([a,b,e],{destroyOnClose:!1,templateString:'<div class="WSModalPane">\t<div class="WSModalPaneInner">\t\t<img data-dojo-attach-point="wsCloseBtn" src="${spacer}" class="mainSprite wsCloseBtn" data-dojo-attach-event="onclick: hide">\t\t<div data-dojo-attach-point="modCon" class="modalContainer">\t\t\t<div data-dojo-attach-point="textNode"></div>\t\t\t<div data-dojo-attach-point="toolbar" dojoType="ws/widget/WSToolbar" vizType="Bare"></div>\t\t\t<div data-dojo-attach-point="footerNode" style="font-size:0;"></div>\t\t</div>\t\t<img data-dojo-attach-point="alertIcon" src="${spacer}" class="mainLargeIcon dialogAlertIcon">       <input data-dojo-attach-point="focusInput" type="text" style="position:absolute;left:-2000px" />\t</div></div>',
show:function(a,b,e,f){f=f||{};this.wsCloseBtn.style.display=f.newCancel?"":"none";ws.widget.popup.ignoreClicks(!0);j.isString(a)?(a=a.replace(/\\x22/g,"&quot;").replace(/\\n/g,"<br>").replace(/\\x2f/g,"/"),this.textNode.innerHTML=a):"undefined"==typeof a?this.textNode.innerHTML=Config.Strings.ErrorUnspecified:this.textNode.appendChild(a);if(f.footerHtml&&j.isString(f.footerHtml))f.footerHtml=f.footerHtml.replace(/\\x22/g,"&quot;").replace(/\\n/g,"<br>").replace(/\\x2f/g,"/"),this.footerNode.innerHTML=
f.footerHtml;else if(f.footerHtml)this.footerNode.appendChild(f.footerHtml);else for(;this.footerNode.hasChildNodes();)this.footerNode.removeChild(this.footerNode.firstChild);this.callback=e;this.textNode.style.cssText=f&&f.textNodeStyle?f.textNodeStyle:"padding: 8px 0px 30px 0px;font-weight:bold;";if(f&&f.toolbarStyle)this.toolbar.style.cssText=f.toolbarStyle;this.domNode.style.width=(f.width||300)+"px";this.inherited(arguments);this.setupButtons(b,f);if(f&&f.alertIcon){if(this.modCon.style.paddingLeft=
"93px",this.alertIcon)this.alertIcon.style.display=""}else if(this.modCon.style.paddingLeft="20px",this.alertIcon)this.alertIcon.style.display="none";j.isIE&&this.toolbar.layout();j.publish("popup/open",[])},focus:function(){this.focusInput.focus()},setupButtons:function(a,b){this.ensureButtonsExist(a.length,b);for(var e=0;e<a.length;e++){var f=this.buttons[e];f.show();f.setLabel(a[e]);f.setType("");f.IsEqualsLabel(Config.Strings.Cancel)?f.setType("Bare"):b&&b.btnArgs&&b.btnArgs.length&&b.btnArgs[e]&&
b.btnArgs[e].type&&(b.btnArgs[e].subType?f.setType(b.btnArgs[e].type,b.btnArgs[e].subType):f.setType(b.btnArgs[e].type))}for(e=a.length;e<this.buttons.length;e++)this.buttons[e].show();this.toolbar.layout();for(e=a.length;e<this.buttons.length;e++)this.buttons[e].hide()},ensureButtonsExist:function(a,b){if(!this.buttons)this.buttons=[];for(var e,f=this.buttons.length;f<a;f++)e={toolbarPosition:"right"},b.btnArgs&&b.btnArgs[f]&&j.mixin(e,b.btnArgs[f]),e=new h(e),e.onClick=j.hitch(this,"onButtonClick",
f),this.toolbar.addToolbarItem(e),this.buttons.push(e),e.startup()},onButtonClick:function(a){this.hide();ws.widget.popup.ignoreClicks(!1);this.callback&&this.callback(a)}})})},"dijit/WidgetSet":function(){define("dijit/WidgetSet",["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","./registry"],function(g,j,f,a){var b=j("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0},add:function(a){if(this._hash[a.id])throw Error("Tried to register widget with id=="+a.id+" but that id is already registered");
this._hash[a.id]=a;this.length++},remove:function(a){this._hash[a]&&(delete this._hash[a],this.length--)},forEach:function(a,b){var b=b||f.global,g=0,j;for(j in this._hash)a.call(b,this._hash[j],g++,this._hash);return this},filter:function(a,h){var h=h||f.global,g=new b,j=0,n;for(n in this._hash){var m=this._hash[n];a.call(h,m,j++,this._hash)&&g.add(m)}return g},byId:function(a){return this._hash[a]},byClass:function(a){var f=new b,g,j;for(g in this._hash)j=this._hash[g],j.declaredClass==a&&f.add(j);
return f},toArray:function(){var a=[],b;for(b in this._hash)a.push(this._hash[b]);return a},map:function(a,b){return g.map(this.toArray(),a,b)},every:function(a,b){var b=b||f.global,g=0,j;for(j in this._hash)if(!a.call(b,this._hash[j],g++,this._hash))return!1;return!0},some:function(a,b){var b=b||f.global,g=0,j;for(j in this._hash)if(a.call(b,this._hash[j],g++,this._hash))return!0;return!1}});g.forEach("forEach,filter,byClass,map,every,some".split(","),function(e){a[e]=b.prototype[e]});return b})},
"url:ws/suite/Navigation.html":'<div class="WSNavigation navTile24">\n\t<div data-dojo-type="ws/widget/WSSplitContainer" data-dojo-attach-point="splitContainer" sizerWidth="10" orientation="vertical" persist="false">\n\t\t<div data-dojo-type="dijit/layout/BorderContainer" data-dojo-attach-point="layoutWidget" class="folderPane">\n\t\t\t<div data-dojo-props="region:\'top\'" data-dojo-type="ws/widget/Pane" class="controlsPane">\n\t\t\t\t<ul class="controlsPaneBtns" data-dojo-attach-point="controlsPaneBtns">\n\t\t\t\t\t<li class="cp-compose mainSprite" data-dojo-attach-event="onclick:composeMessage">\n\t\t\t\t\t\t<div class="unselectable cpBtn" data-dojo-attach-point="composeBtn" data-dojo-attach-event="onmouseenter:onmouseoverCP,onmouseleave:onmouseoutCP,onmousedown:onmousedownCP,onmouseup:onmouseupCP">\n\t\t\t\t\t\t\t<div class="icon"></div>\n\t\t\t\t\t\t\t<div class="label">${Email}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="cp-chat mainSprite" data-dojo-attach-point="composeIMBtn" data-dojo-attach-event="onclick:composeIM">\n\t\t\t\t\t\t<div class="unselectable cpBtn" data-title="${NavMenuIM}" data-dojo-attach-event="onmouseenter:onmouseoverCP,onmouseleave:onmouseoutCP,onmousedown:onmousedownCP,onmouseup:onmouseupCP">\n\t\t\t\t\t\t\t<div class="icon"></div>\n\t\t\t\t\t\t\t<div class="label">${IMshort}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="cp-sms mainSprite" data-dojo-attach-point="composeSMSBtn" data-dojo-attach-event="onclick:composeSMS">\n\t\t\t\t\t\t<div class="unselectable cpBtn" data-title="${NavMenuText}" data-dojo-attach-event="onmouseenter:onmouseoverCP,onmouseleave:onmouseoutCP,onmousedown:onmousedownCP,onmouseup:onmouseupCP">\n\t\t\t\t\t\t\t<div class="icon"></div>\n\t\t\t\t\t\t\t<div class="label">${Text_Message}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="cp-refresh mainSprite" data-dojo-attach-event="onclick:checkMail">\n\t\t\t\t\t\t<div class="unselectable cpBtn" data-title="${CheckMailButton}" data-dojo-attach-event="onmouseenter:onmouseoverCP,onmouseleave:onmouseoutCP,onmousedown:onmousedownCP,onmouseup:onmouseupCP">\n\t\t\t\t\t\t\t<div class="icon"></div>\n\t\t\t\t\t\t\t<div class="label">${CheckMailButtonLabel}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div data-dojo-props="region:\'center\'" data-dojo-type="ws/widget/Pane" class="mainPane" data-dojo-attach-point="mainPane">\n\t\t\t\t<div data-dojo-type="ws/widget/Pane" data-dojo-attach-point="searchAreaPane" class="searchPane">\n\t\t\t\t\t<div class="searchInputDiv" data-dojo-attach-point="searchArea">\n\t\t\t\t\t\t<div class="wsTinyArrow" data-dojo-attach-point="searchDropDown" data-dojo-attach-event="onclick: openSearchMenu"></div>\n\t\t\t\t\t\t<input class="wsInput searchInput" type="text" data-dojo-attach-point="searchField" data-dojo-attach-event="onkeyup: onKeyPressSearchField" />\n\t\t\t\t\t\t<div class="goSearch" data-dojo-attach-point="searchBtn" data-dojo-attach-event="onclick: searchApp"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div data-dojo-attach-point="todayItemCntr" class="todayItemCntr">\n\t\t\t\t\t<div data-dojo-attach-point="todayItem" class="navItem navItemToday">\n\t\t\t\t\t\t<div class="icon iconTodayOnAOL"></div>\n\t\t\t\t\t\t<div class="text">${TodayOnAOL}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<\!-- Mail --\>\n\t\t\t\t<\!-- there are placeholder folder nodes here --\>\n\t\t\t\t<div data-dojo-attach-point="sysFoldersNode">\n\t\t\t\t\t<div class="navItem navTempNode">\n\t\t\t\t\t\t<div class="icon iconInbox" thefn="Inbox"></div>\n\t\t\t\t\t\t<div class="text">\n\t\t\t\t\t\t\t<span id="inboxNode">${Folder_Inbox}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="navItem navTempNode">\n\t\t\t\t\t\t<div class="icon iconDrafts" thefn="Drafts"></div>\n\t\t\t\t\t\t<div class="text">\n\t\t\t\t\t\t\t<span>${Folder_Drafts}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="navItem navTempNode">\n\t\t\t\t\t\t<div class="icon iconSent" thefn="Sent">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="text">\n\t\t\t\t\t\t\t<span>${Folder_Sent}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="navItem navTempNode">\n\t\t\t\t\t\t<div class="icon iconSpam" thefn="Spam"></div>\n\t\t\t\t\t\t<div class="text">\n\t\t\t\t\t\t\t<span>${Folder_Spam}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="navItem navTempNode">\n\t\t\t\t\t\t<div class="icon iconDeleted" thefn="Deleted"></div>\n\t\t\t\t\t\t<div class="text">\n\t\t\t\t\t\t\t<span>${Folder_Deleted}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="quotaWarning" data-dojo-attach-point="quotaWarningContainer" style="display: none;">\n\t\t\t\t\t<div class="mainSprite wsCloseBtn" data-dojo-attach-event="onclick: closeQuotaWarning"></div>\n\t\t\t\t\t<span data-dojo-attach-point="quotaWarningTextNode"></span>\n\t\t\t\t</div>\n\n\t\t\t\t<\!-- Contacts --\>\n\t\t\t\t<div data-dojo-attach-point="contactsItem" class="navItem">\n\t\t\t\t\t<div class="icon iconContacts"></div>\n\t\t\t\t\t<div class="text">${NavContacts}</div>\n\t\t\t\t</div>\n\n\t\t\t\t<\!-- Calendar --\>\n\t\t\t\t<div data-dojo-attach-point="calendarItem" class="navItem">\n\t\t\t\t\t<div class="icon iconCalendar"></div>\n\t\t\t\t\t<div class="text">${NavCalendar}</div>\n\t\t\t\t</div>\n\n\t\t\t\t<\!-- Manilla --\>\n\t\t\t\t<div data-dojo-attach-point="manillaItem" class="navItem">\n\t\t\t\t\t<div class="icon iconManilla"></div>\n\t\t\t\t\t<div class="text"><span>${NavManilla}</span><div class="unseen" style="display:none"></div></div>\n\t\t\t\t</div>\n\n\t\t\t\t<\!-- My Folders --\>\n\t\t\t\t<div data-dojo-attach-point="myFoldersItem" data-dojo-attach-event="onclick: toggleMyFolders" class="navItem myFoldersItem">\n\t\t\t\t\t<div class="icon iconToggle"></div>\n\t\t\t\t\t<div class="text myFolderText">${NavMyFolders}</div>\n\t\t\t\t\t<span data-dojo-attach-event="onclick: showCreateFolder" class="ctrl wsLink wsSmallAddButton" style="display:none" title="${NavAdd}"></span>\n\t\t\t\t</div>\n\t\t\t\t<div data-dojo-attach-point="myFoldersContainer" style="display:none" class="myFoldersContainer">\n\t\t\t\t\t<div data-dojo-attach-point="myFoldersNode" style="overflow:hidden"></div>\n\t\t\t\t\t<div data-dojo-attach-point="createFolderNode" class="createFolder" style="display:none">\n\t\t\t\t\t\t<div class="wsInput createFolderPad">\n\t\t\t\t\t\t\t<input type="text" data-dojo-attach-event="onkeypress: onCreateFolderKeyPress" data-dojo-attach-point="createFolderInput" maxlength="${folderMaxLen}" />\n\t\t\t\t\t\t\t<div data-dojo-attach-event="onclick: createFolder" class="wsLargeAdd"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t</div>\n\t\t<div class="appsPane" data-dojo-type="dijit/layout/BorderContainer" data-dojo-attach-point="appsPane" sizeMin="30">\n\t\t\t<div class="appsToolbar" data-dojo-props="region:\'top\'" data-dojo-type="ws/widget/Pane">\n\t\t\t\t<ul class="apBtns">\n\t\t\t\t\t<li class="ap-aim" data-dojo-attach-point="apAimBtn" data-dojo-attach-event="onclick:selectAimApp">\n\t\t\t\t\t\t<div class="mainSprite apBtn" data-title="${MiniNavTipAim}" data-dojo-attach-event="onmouseenter:onmouseoverAP,onmouseleave:onmouseoutAP,onmousedown:onmousedownAP,onmouseup:onmouseupAP">\n\t\t\t\t\t\t\t<div class="mainSprite icon"></div>\n                            <div class="border"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="ap-contact" data-dojo-attach-event="onclick:selectContactApp" data-dojo-attach-point="apContactBtn">\n\t\t\t\t\t\t<div class="mainSprite apBtn" data-title="${MiniNavTipPeople}" data-dojo-attach-event="onmouseenter:onmouseoverAP,onmouseleave:onmouseoutAP,onmousedown:onmousedownAP,onmouseup:onmouseupAP">\n\t\t\t\t\t\t\t<div class="mainSprite icon"></div>\n                            <div class="border"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="ap-event" data-dojo-attach-point="apEventBtn" data-dojo-attach-event="onclick:selectEventApp">\n\t\t\t\t\t\t<div class="mainSprite apBtn" data-title="${MiniNavTipEvents}" data-dojo-attach-event="onmouseenter:onmouseoverAP,onmouseleave:onmouseoutAP,onmousedown:onmousedownAP,onmouseup:onmouseupAP">\n\t\t\t\t\t\t\t<div class="mainSprite icon"></div>\n                            <div class="border"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="ap-todo" data-dojo-attach-point="apTodoBtn" data-dojo-attach-event="onclick:selectTodoApp">\n\t\t\t\t\t\t<div class="mainSprite apBtn" data-title="${MiniNavTipTodos}" data-dojo-attach-event="onmouseenter:onmouseoverAP,onmouseleave:onmouseoutAP,onmousedown:onmousedownAP,onmouseup:onmouseupAP">\n\t\t\t\t\t\t\t<div class="mainSprite icon"></div>\n                            <div class="border"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class="appStack" data-dojo-attach-point="appStack" data-dojo-props="region:\'center\'" data-dojo-type="dijit/layout/StackContainer">\n\t\t\t\t<div id="aimApp" class="appAim" data-dojo-type="dijit/layout/BorderContainer">\n\t\t\t\t\t<div class="appNode" data-dojo-type="ws/widget/Pane" data-dojo-props="region:\'top\'">\n\t\t\t\t\t\t<div class="appTitleBar mainSprite">\n\t\t\t\t\t\t\t<img class="mainSprite AIMTitleLogo" src="${spacer}">\n\t\t\t\t\t\t\t<div data-dojo-type="ws/widget/DropDownButton" data-dojo-attach-point="presenceDisplay" class="presence" style="display: none;">\n\t\t\t\t\t\t\t\t<div id="presenceIcon" class="status-online"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li class="mainSprite appTitleClose" data-dojo-attach-event="onclick:restoreApp" style="display:none"></li>\n\t\t\t\t\t\t\t\t<li class="mainSprite appTitleSearch" data-dojo-attach-point="aimSearchBtn" data-dojo-attach-event="onclick: searchAIM,onmouseout: onAimMouseOut,onmouseover: onAimMouseOver" ></li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\t\t\t\n\t\t\t\t\t<div class="aimSignIn" data-dojo-type="ws/widget/Pane" data-dojo-attach-point="aimSignIn" data-dojo-props="region:\'center\'">\n\t\t\t\t\t\t<div data-dojo-type="ws/widget/Button" data-dojo-attach-point="aimSignInBtn" data-dojo-attach-event="onClick: AIMSignIn" data-dojo-props="toolbarPosition: \'center\'">${Label_Signin}</div>\n\t\t\t\t\t\t<div data-dojo-type="ws/widget/Checkbox" data-dojo-attach-point="aimAutoSignInBtn" data-dojo-attach-event="onClick: clkAutoSignIn" data-dojo-props="toolbarPosition: \'center\'"></div>\n\t\t\t\t\t\t<div class="fbPromo" data-dojo-attach-point="fbPromo">\n\t\t\t\t\t\t\t<div class="mainSprite fbIcon"></div>\n\t\t\t\t\t\t\t<div class="fbMsg">${AimAppFBPromoMsg}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="aimErrorNode" data-dojo-attach-point="aimErrorNode" style="display:none">\n\t\t\t\t\t\t\t<div class="mainSprite errorIcon"></div>\n\t\t\t\t\t\t\t<div class="errorMsg" data-dojo-attach-point="aimErrorMsg"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="aimLoading" data-dojo-type="ws/widget/Pane" data-dojo-attach-point="aimLoading" data-dojo-props="region:\'center\'">\n\t\t\t\t\t\t<div class="aimSpinner" data-dojo-attach-point="aimSpinner"></div>\n\t\t\t\t\t\t<div class="aimLoadingMsg">${AimAppLoading}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div id="contactApp" data-dojo-type="ws/address/PeopleApp"></div>\n\t\t\t\t<div id="eventApp" data-dojo-type="ws/calendar/EventsApp"></div>\n\t\t\t\t<div id="todoApp" data-dojo-type="ws/calendar/TodoApp"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class="navToolbar" data-dojo-attach-point="navToolbar">\n\t\t<div class="mainSprite cpNavItem" data-dojo-attach-event="onclick:composeMessage,onmouseenter:onmouseoverMNC,onmouseleave:onmouseoutMNC">\n\t\t\t<div class="icon cp-compose"></div>\n\t\t\t<div class="label">${Email}</div>\n\t\t</div>\n\t\t<div class="mnScrollCont" data-dojo-attach-point="mnScrollCont">\n\t\t\t<div class="mnScroller" data-dojo-attach-point="mnMailDiv">\n\t\t\t\t<div class="shNavItem" data-dojo-attach-point="shNavItem" data-title="${MiniNavTipSearch}" data-dojo-attach-event="onclick:miniNavSearch,onmouseenter:onmouseoverMNS,onmouseleave:onmouseoutMNS">\n\t\t\t\t\t<div class="icon iconSearch"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="navItem mnToday" data-dojo-attach-point="mnToday" data-title="${MiniNavTipToday}" data-dojo-attach-event="onmouseenter:onmouseoverMN,onmouseleave:onmouseoutMN">\n\t\t\t\t\t<div class="icon iconTodayOnAOL"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="mnSysFolders" data-dojo-attach-point="mnSysFolders"></div>\n\t\t\t\t<div class="navItem mnContacts" data-dojo-attach-point="mnContacts" data-title="${MiniNavTipContacts}" data-dojo-attach-event="onmouseenter:onmouseoverMN,onmouseleave:onmouseoutMN">\n\t\t\t\t\t<div class="icon iconContacts"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="navItem mnCalendar" data-dojo-attach-point="mnCalendar" data-title="${MiniNavTipCalendar}" data-dojo-attach-event="onmouseenter:onmouseoverMN,onmouseleave:onmouseoutMN">\n\t\t\t\t\t<div class="icon iconCalendar"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="navItem mnManilla" data-dojo-attach-point="mnManilla" data-title="${NavManilla}" data-dojo-attach-event="onmouseenter:onmouseoverMN,onmouseleave:onmouseoutMN">\n\t\t\t\t\t<div class="icon iconManilla"></div>\n\t\t\t\t\t<div class="mnUnseen" style="display:none"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="navItem mnFolders" data-dojo-attach-point="mnFolders" data-title="${MiniNavTipFolders}" data-dojo-attach-event="onmouseenter:onmouseoverMN,onmouseleave:onmouseoutMN">\n\t\t\t\t\t<div class="icon iconPersonal"></div>\n\t\t\t\t\t<div class="mnUnseen" style="display:none"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="mnAppsDiv" data-dojo-attach-point="mnAppsDiv">\n\t\t\t\t<div class="mnSeparator"></div>\n\t\t\t\t<div class="navItem aimApp" data-title="${MiniNavTipAim}" data-dojo-attach-event="onmouseenter:onmouseoverMN,onmouseleave:onmouseoutMN">\n\t\t\t\t\t<div class="icon iconAIM"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="navItem contactApp" data-title="${MiniNavTipPeople}" data-dojo-attach-event="onmouseenter:onmouseoverMN,onmouseleave:onmouseoutMN">\n\t\t\t\t\t<div class="icon iconPeople"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="navItem eventApp" data-title="${MiniNavTipEvents}" data-dojo-attach-event="onmouseenter:onmouseoverMN,onmouseleave:onmouseoutMN">\n\t\t\t\t\t<div class="icon iconEvents"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="navItem todoApp" data-title="${MiniNavTipTodos}" data-dojo-attach-event="onmouseenter:onmouseoverMN,onmouseleave:onmouseoutMN">\n\t\t\t\t\t<div class="icon iconToDos"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="mnScUp" data-dojo-attach-event="onmousedown:onmnScrollUp,onmouseup:onmnScrollEnd"><div class="mainSprite mnScrollUp"></div></div>\n\t\t<div class="mnScDn" data-dojo-attach-event="onmousedown:onmnScrollDn,onmouseup:onmnScrollEnd"><div class="mainSprite mnScrollDn"></div></div>\n\t</div>\n</div>',
"ws/suite/TodayPage":function(){define("ws/suite/TodayPage","dojo/_base/declare,dojo/text!ws/suite/TodayPage.html,dojo/text!ws/suite/TodayPage.css,dojo,dijit,dijit/_Widget,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,dijit/layout/BorderContainer,ws/date,ws/html,ws/io,ws/string,ws/widget/Pane,ws/widget/SingleLineNotification,dojo/io/iframe,ws/widget/BuddyIcon".split(","),function(g,j,f,a,b,e,h,k){return g([e,h,k],{templateString:j,css:{templateString:f},themeColorsDone:!1,hasIframeInited:!1,
startup:function(){if(!this._started){this._started=!0;this.iframe=a.byId("todayIframe");if("about:blank"==this.iframe.src)this.iframe.style.display="";var b=null;Config.ShowWeatherInToday&&Config.WeatherURL?(ws.html.setShowing(this.weather,!0),b=ws.string.substituteParams(Config.WeatherURL,ws.UserContext.Zip)):ws.html.setShowing(this.clock,!0);var e=a.hitch(this,function(){this.hasIframeInited=!0;a.io.iframe.setSrc(this.iframe,this._getTodayUrl(),!0);b&&a.io.iframe.setSrc(this.weatherIframe,this._getWeatherUrl(),
!0)});Config.EnableThemes&&window._ws_theme&&!window._ws_theme.initialThemeLoaded?window._ws_theme.todayPageCallbackFunc=e:e();this.connect(this.mailModel,"modelUpdated","updateMailCount");this.subscribe("Theme/Change","updateTodayPageIframes");this.subscribe("locationZipUpdated","updateWeatherLocation");this.subscribe("MegaMenuOpen",function(){if(!this.iframeClickCatcher)this.iframeClickCatcher=document.createElement("div"),document.body.appendChild(this.iframeClickCatcher);var b=a.position(this.iframe);
a.style(this.iframeClickCatcher,{position:"absolute",backgroundColor:"#fff",opacity:0,width:b.w+"px",height:b.h+"px",top:b.y+"px",left:b.x+"px",visibility:"visible",zIndex:1900})});this.subscribe("MegaMenuClose",function(){a.style(this.iframeClickCatcher,{visibility:"hidden",zIndex:0})})}},targetIframe:function(){if(Config.WelcomePageURL)this.iframe=ws.html.recreateIframe(this.iframePane.domNode,this._getTodayUrl());Config.ShowWeatherInToday&&Config.WeatherURL&&this.weatherIframe&&this.updateWeatherLocation()},
onHide:function(){this.iframe=ws.html.recreateIframe(this.iframePane.domNode);this.iframe.style.display="none";a.publish("Today/hide");if(ws.WebSuite.isRecordTimingData&&0==ws.WebSuite.todayPageUnloaded)ws.WebSuite.todayPageUnloaded=new Date;if(this.clockTimer)clearInterval(this.clockTimer),this.clockTimer=null},onShow:function(){this.inherited(arguments);"none"==this.iframe.style.display?this.targetIframe():this.iframe.style.display="";if(!Config.ShowWeatherInToday&&(this.updateClock(),!this.clockTimer))this.clockTimer=
setInterval(a.hitch(this,this.updateClock),2E4);this.updateMailCount();if(ws.WebSuite.isRecordTimingData&&0==ws.WebSuite.todayPageLoaded)ws.WebSuite.todayPageLoaded=new Date;a.publish("Today/show");if(!this.mailCountUpdataCtr)this.mailCountUpdataCtr=a.connect(this.mailModel,"modelUpdated",this,"updateMailCount")},blockAds:function(){},updateMailCount:function(){if("none"!=this.domNode.style.display&&this.mailModel){var a=this.mailModel.getFolderByName(this.mailModel.getInboxFolderName()),b="",e=this.mailCount,
f=this.errMsgNode,h=this.mailCountNode;if(a)a=a.unseenCount,b=ws.string.substituteParams(Config.Strings[0==a?"MessageCountNone":1==a?"MessageCountSingular":"MessageCountPlural"],a);else if(this.mailModel.isLoading())b=Config.Strings.Loading;else if(this.mailModel.isErrorState()){this.mailModel.getErrorObj();b=Config.Strings.TodayPageErrNotAvailable;if(this.mailModel.isNetErrorState())b=Config.Strings.TodayPageNetworkErr;b+="<br><span>"+Config.Strings.TodayPageErrLoginAgain+"</span>";h=e=this.errMsgNode;
f=this.mailCount}h.innerHTML=b;ws.html.setShowing(e,!0);ws.html.setShowing(f,!1)}},onClickMailCount:function(){ws.WebSuite.displayFolder(this.mailModel.getInboxFolderName())},_getTodayUrl:function(){var a=Config.WelcomePageURL;if(ws.WebSuite.isUsrInTodayPageTest(!1))a=Config.ExpWelcomeMessage;Config.EnableThemes&&(a+=(0<a.indexOf("?")?"&":"?")+this._getThemeColor(!1,!0));window._g_WS_WebFont&&window._g_WS_WebFont.fontMode&&(a+=(0<a.indexOf("?")?"&":"?")+"fontCss="+window._g_WS_WebFont.webFontsMap[window._g_WS_WebFont.fontMode]);
a+=(0<a.indexOf("?")?"&":"?")+"ssl=true";ws.WebSuite.isUsrInTodayPageTest(!0)?a+="&tc=0":ws.WebSuite.isUsrInTodayPageTest(!1)&&(a+="&tc=1");return a},_getWeatherUrl:function(){var a="";Config.ShowWeatherInToday&&Config.WeatherURL&&(a=ws.string.substituteParams(Config.WeatherURL,ws.UserContext.Zip),Config.EnableThemes&&(a+=(0<a.indexOf("?")?"&":"?")+this._getThemeColor(!0,!1)),window._g_WS_WebFont&&window._g_WS_WebFont.fontMode&&(a+=(0<a.indexOf("?")?"&":"?")+"fontCss="+window._g_WS_WebFont.webFontsMap[window._g_WS_WebFont.fontMode]),
a+=(0<a.indexOf("?")?"&":"?")+"ssl=true");return a},updateClock:function(){this.dateNode.innerHTML=ws.date.formatDateTime(new Date,Config.Strings.CalYboxDateFormat2);ws.date.amAbb="<span class='ampm'>"+Config.Strings.Date_am+"</span>";ws.date.pmAbb="<span class='ampm'>"+Config.Strings.Date_pm+"</span>";this.timeNode.innerHTML=ws.date.formatTime(new Date,Config.Strings.CalTimeFormatRange1);ws.date.amAbb=Config.Strings.Date_am;ws.date.pmAbb=Config.Strings.Date_pm},updateWeatherLocation:function(){if(Config.ShowWeatherInToday&&
Config.WeatherURL)this.weather.innerHTML='<iframe src="about:blank" width="100%" height="100%" frameborder=0 border=0 marginwidth=0 marginheight=0 scrolling="no" align="top" allowTransparency="true"></iframe>',this.weatherIframe=ws.html.recreateIframe(this.weather,this._getWeatherUrl())},updateTodayPageIframes:function(){"none"!=this.iframe.style.display&&this.hasIframeInited&&this.targetIframe()},_getThemeColor:function(a,b){var e="tcb=39a4d1&tcad=116f96&tca=7cb311",f=window._ws_theme.getThemeColorQueryString(a,
b);f||(a&&(e="tca=7cb311&tcad=588428"),b&&(e="tcb=39a4d1&tca=7cb311"),f=e);ws.WebSuite.isUsrInSrchTestCell(23)&&(f=f.replace(/tca=[0-9a-fA-F]+/,""));return f}})})},"ws/address/PeoplePickerGridModel":function(){define("ws/address/PeoplePickerGridModel",["dojo/_base/declare","dojo","dojox/grid/data/Dynamic","dojox/grid/Grid","ws/string"],function(g,j,f){return g([f],{columns:{NameAndEmail:0},modelUpdated:function(){},constructor:function(a,b,e){this.model=e;j.connect(this.model,"modelUpdated",this,
"modelUpdated")},getDatum:function(a,b){var e=this.model.getRow(a);if(null==e)return"Contact Error";switch(b){case this.columns.NameAndEmail:var f="c"==e.bType||"s"==e.bType?e.composeValue:1==e.count?Config.Strings.OneAddress:ws.string.substituteParams(Config.Strings.NAddresses,e.count);return"<span>"+ws.string.escapeXml(e.name)+"</span> "+f}},getRowCount:function(){return this.model.getRowCount()}})})},"url:ws/widget/SearchAutoComplete.css":"","dojo/ready":function(){define("dojo/ready",["./_base/kernel",
"./has","require","./domReady","./_base/lang"],function(g,j,f,a,b){var e=0,h,k=[],l=0,n=function(){if(e&&!l&&k.length){l=1;var a=k.shift();try{a()}finally{l=0}l=0;k.length&&h(n)}};f.on&&f.on("idle",n);h=function(){(f.idle?f.idle():1)&&n()};var j=g.ready=g.addOnLoad=function(a,e,f){var j=b._toArray(arguments);"number"!=typeof a?(f=e,e=a,a=1E3):j.shift();f=f?b.hitch.apply(g,j):function(){e()};f.priority=a;for(j=0;j<k.length&&a>=k[j].priority;j++);k.splice(j,0,f);h()},m=g.config.addOnLoad;if(m)j[b.isArray(m)?
"apply":"call"](g,m);g.config.parseOnLoad&&!g.isAsync&&j(99,function(){g.parser||(g.deprecated("Add explicit require(['dojo/parser']);","","2.0"),f(["dojo/parser"]))});a(function(){e=1;g._postLoad=g.config.afterOnLoad=!0;k.length&&h(n)});return j})},"dojo/_base/Deferred":function(){define("./kernel,../Deferred,../promise/Promise,../errors/CancelError,../has,./lang,../when".split(","),function(g,j,f,a,b,e,h){var k=function(){},l=Object.freeze||function(){},n=g.Deferred=function(h){function g(a){if(u)throw Error("This deferred has already been resolved");
o=a;u=!0;s()}function s(){for(var a;!a&&w;){var f=w;w=w.next;if(a=f.progress==k)u=!1;var h=p?f.error:f.resolved;b("config-useDeferredInstrumentation")&&p&&j.instrumentRejected&&j.instrumentRejected(o,!!h);if(h)try{var g=h(o);g&&"function"===typeof g.then?g.then(e.hitch(f.deferred,"resolve"),e.hitch(f.deferred,"reject"),e.hitch(f.deferred,"progress")):(h=a&&void 0===g,a&&!h&&(p=g instanceof Error),f.deferred[h&&p?"reject":"resolve"](h?o:g))}catch(l){f.deferred.reject(l)}else p?f.deferred.reject(o):
f.deferred.resolve(o)}}var o,u,p,v,w,z=this.promise=new f;this.resolve=this.callback=function(a){this.fired=0;this.results=[a,null];g(a)};this.reject=this.errback=function(a){p=!0;this.fired=1;b("config-useDeferredInstrumentation")&&j.instrumentRejected&&j.instrumentRejected(a,!!w);g(a);this.results=[null,a]};this.progress=function(a){for(var b=w;b;){var e=b.progress;e&&e(a);b=b.next}};this.addCallbacks=function(a,b){this.then(a,b,k);return this};z.then=this.then=function(a,b,e){var f=e==k?this:new n(z.cancel),
a={resolved:a,error:b,progress:e,deferred:f};w?v=v.next=a:w=v=a;u&&s();return f.promise};var x=this;z.cancel=this.cancel=function(){if(!u){var b=h&&h(x);if(!u)b instanceof Error||(b=new a(b)),b.log=!1,x.reject(b)}};l(z)};e.extend(n,{addCallback:function(a){return this.addCallbacks(e.hitch.apply(g,arguments))},addErrback:function(a){return this.addCallbacks(null,e.hitch.apply(g,arguments))},addBoth:function(a){var b=e.hitch.apply(g,arguments);return this.addCallbacks(b,b)},fired:-1});n.when=g.when=
h;return n})},"ws/widget/ClearableTextbox":function(){define("ws/widget/ClearableTextbox",["dojo/_base/declare","dojo","dijit","ws/widget/DefaultTextbox","ws/html"],function(g,j,f,a){return g([a],{templateString:"<div class='clearTextbox'><input type='text' maxlength='${maxlength}' class='wsInput ${clearableInputClassName}' tabindex='${tabindex}' data-dojo-attach-point='textbox' data-dojo-attach-event='onblur:_onBlur,onfocus:_onFocus,onkeyup:_onKeyUp'><img data-dojo-attach-point='clearButton' data-dojo-attach-event='onclick:clear' src='${spacer}' class='mainSprite wsHotClearButton' style='display:none;'></div>",
_onKeyUp:function(a){this.inherited(arguments);ws.html.setShowing(this.clearButton,!!this.getValue())},clear:function(){this.setValue("");this._onKeyUp()}})})},"dijit/typematic":function(){define("dijit/typematic","dojo/_base/array,dojo/_base/connect,dojo/_base/event,dojo/_base/kernel,dojo/_base/lang,dojo/on,dojo/sniff,./main".split(","),function(g,j,f,a,b,e,h,k){var l=k.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=
Math.max(0>this._currentTimeout?this._initialDelay:1<this._subsequentDelay?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay);this._timer=setTimeout(b.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(a,e,f,h,g,k,j,l){if(g!=this._obj){this.stop();this._initialDelay=j||500;this._subsequentDelay=k||0.9;this._minDelay=l||10;this._obj=g;this._node=f;this._count=this._currentTimeout=-1;this._callback=b.hitch(e,h);this._evt={faux:!0};for(var w in a)"layerX"!=
w&&"layerY"!=w&&(e=a[w],"function"!=typeof e&&"undefined"!=typeof e&&(this._evt[w]=e));this._fireEventAndReload()}},stop:function(){if(this._timer)clearTimeout(this._timer),this._timer=null;if(this._obj)this._callback(-1,this._node,this._evt),this._obj=null},addKeyListener:function(h,k,q,s,o,u,p){if(k.keyCode)k.charOrCode=k.keyCode,a.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");else if(k.charCode)k.charOrCode=String.fromCharCode(k.charCode),
a.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");var v=[e(h,j._keypress,b.hitch(this,function(a){a.charOrCode==k.charOrCode&&(void 0===k.ctrlKey||k.ctrlKey==a.ctrlKey)&&(void 0===k.altKey||k.altKey==a.altKey)&&(void 0===k.metaKey||k.metaKey==(a.metaKey||!1))&&(void 0===k.shiftKey||k.shiftKey==a.shiftKey)?(f.stop(a),l.trigger(a,q,h,s,k,o,u,p)):l._obj==k&&l.stop()})),e(h,"keyup",b.hitch(this,function(){l._obj==k&&l.stop()}))];
return{remove:function(){g.forEach(v,function(a){a.remove()})}}},addMouseListener:function(a,f,k,j,o,u){var p=[e(a,"mousedown",b.hitch(this,function(b){b.preventDefault();l.trigger(b,f,a,k,a,j,o,u)})),e(a,"mouseup",b.hitch(this,function(a){this._obj&&a.preventDefault();l.stop()})),e(a,"mouseout",b.hitch(this,function(a){this._obj&&a.preventDefault();l.stop()})),e(a,"dblclick",b.hitch(this,function(e){e.preventDefault();9>h("ie")&&(l.trigger(e,f,a,k,a,j,o,u),setTimeout(b.hitch(this,l.stop),50))}))];
return{remove:function(){g.forEach(p,function(a){a.remove()})}}},addListener:function(a,b,e,f,h,k,j,l){var w=[this.addKeyListener(b,e,f,h,k,j,l),this.addMouseListener(a,f,h,k,j,l)];return{remove:function(){g.forEach(w,function(a){a.remove()})}}}};return l})},"ws/mail/folder":function(){define("ws/mail/folder",["dojo/_base/declare","dojo","dijit"],function(g){return g(null,{constructor:function(g){this.name=g[0];this.displayName=g[1];this.parentName=g[2];this.depth=g[3];this.permanent=g[4];this.unseenCount=
g[6];this.count=g[7];this.type=g[8];this.canMoveTo=g[9];this.account=g[11];this.status=g[12];this.name==Config.IMFolderName?(this.displayName=Config.Strings.Folder_SavedIMs,this.isIMFolder=!0):this.isIMFolder=!1}})})},"url:ws/address/PeoplePicker.html":'<div style="display:none" class="wsMenu">\n\t<div class="peoplePicker listView" data-dojo-type="dijit/layout/BorderContainer" data-dojo-attach-point="layoutWidget">\n\t\t<div data-dojo-attach-point="rolodexPane" data-dojo-type="ws/widget/Pane" data-dojo-props="region:\'bottom\'" class="rolodex"></div>\n\t\t<div data-dojo-type="ws/widget/Pane" data-dojo-props="region:\'center\'">\n\t\t\t<div data-dojo-attach-point="grid" data-dojo-type="dojox.grid.Grid"></div>\n\t\t</div>\n\t</div>\n</div>\n',
"ws/settings":function(){define("ws/settings",["dojo","dojo/_base/lang","ws/browser","ws/io","ws/WebSuite"],function(g,j){j.setObject("ws.settings",{load:function(f){var a=f.scope||"core";ws.WebSuite.isSettingLoaded(a)&&!f.forceReload||Settings.WSSConnectError?f.load&&f.load():ws.io.rpc({action:"GetSettings",isCalendar:"cal"==a,content:{scope:a},load:function(b){g.mixin(window.Settings,b.settings);ws.WebSuite.settingsLoaded[a]=!0;f.load&&f.load()},error:function(a){f.error&&f.error(a)}})},saveSoon:function(f){this.save(f)},
saveNow:function(f){this.save(f)},save:function(f,a){if(Settings.WSSConnectError)a&&a.load&&a.load();else{g.mixin(this._pendingSaveContent,f);var b={action:"HiddenSettings",content:this._pendingSaveContent};g.mixin(b,a);ws.io.rpc(b);this._pendingSaveContent={}}},savePending:function(){if(this._pendingSaveContent){var f=!0,a;for(a in this._pendingSaveContent){f=!1;break}!1==f&&this.save()}},isIE10Metro:function(){var f=!1;try{f=!!new ActiveXObject("htmlfile")}catch(a){f=!1}var b=window.innerWidth==
screen.width&&window.innerHeight==screen.height;return 10<=g.isIE&&b&&!f},allowPopups:function(){var f=!1;10<=g.isIE&&(f=this.isIE10Metro());return!(g.isIE&&ws.browser.win98||f)},_pendingSaveContent:{}})})},"dijit/layout/_LayoutWidget":function(){define("dijit/layout/_LayoutWidget","dojo/_base/lang,../_Widget,../_Container,../_Contained,../Viewport,dojo/_base/declare,dojo/dom-class,dojo/dom-geometry,dojo/dom-style".split(","),function(g,j,f,a,b,e,h,k,l){return e("dijit.layout._LayoutWidget",[j,f,
a],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,buildRendering:function(){this.inherited(arguments);h.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);var a=this.getParent&&this.getParent();if(!a||!a.isLayoutContainer)this.resize(),this.own(b.on("resize",g.hitch(this,"resize")))}},resize:function(a,b){var e=this.domNode;a&&k.setMarginBox(e,a);var f=b||{};g.mixin(f,a||{});if(!("h"in f)||!("w"in f))f=g.mixin(k.getMarginBox(e),f);var h=l.getComputedStyle(e),
j=k.getMarginExtents(e,h),p=k.getBorderExtents(e,h),f=this._borderBox={w:f.w-(j.w+p.w),h:f.h-(j.h+p.h)},j=k.getPadExtents(e,h);this._contentBox={l:l.toPixelValue(e,h.paddingLeft),t:l.toPixelValue(e,h.paddingTop),w:f.w-j.w,h:f.h-j.h};this.layout()},layout:function(){},_setupChild:function(a){h.add(a.domNode,this.baseClass+"-child "+(a.baseClass?this.baseClass+"-"+a.baseClass:""))},addChild:function(a,b){this.inherited(arguments);this._started&&this._setupChild(a)},removeChild:function(a){h.remove(a.domNode,
this.baseClass+"-child"+(a.baseClass?" "+this.baseClass+"-"+a.baseClass:""));this.inherited(arguments)}})})},"url:ws/suite/NewToday.html":'<div>\n\t<div data-dojo-type="dijit/layout/BorderContainer" class="newTodayPage" data-dojo-attach-point="layoutWidget">\n        <div data-dojo-type="ws/widget/SingleLineNotification" data-dojo-attach-point="notification" class="notification" data-dojo-props="region:\'top\'" style="display:none"></div>\n\t\t<div data-dojo-type="ws/widget/Pane" data-dojo-props="region:\'top\'" class="head" data-dojo-attach-point="headPane">\n\t\t\t<div data-dojo-attach-point="mailCount" data-dojo-attach-event="onclick: onClickMailCount" class="mailCount">\n\t\t\t\t<img src="${spacer}" class="mainSprite icon" data-dojo-attach-point="mailIcon">\n\t\t\t\t<span data-dojo-attach-point="mailCountNode" class="mailCountText" >&nbsp;</span>\n\t\t\t</div>\n\t\t\t<div data-dojo-attach-point="errMsgNode" style="display:none" class="errMsgNode"></div>\n\t\t\t<div class="clock" data-dojo-attach-point="clock" style="display:none">\n\t\t\t\t<div class="date" data-dojo-attach-point="dateNode">&nbsp;</div>\n\t\t\t\t<div class="time" data-dojo-attach-point="timeNode">&nbsp;</div>\n\t\t\t</div>\n\t\t\t<div class="weather" data-dojo-attach-point="weather" style="display:none">\n\t\t\t\t<div class="tempVal">\n\t\t\t\t\t<span class="degree"></span>\n\t\t\t\t\t<span class="tempNotation" data-dojo-attach-event="onclick: toggleTemp"></span>\n\t\t\t\t</div>\n\t\t\t\t<div id="weatherIcon" class="imageAlign weatherSprite"></div>\n\t\t\t\t<div class="cityTemp"> \n\t\t\t\t\t<span class="tempDiv">\n\t\t\t\t\t\t<div class="divider"></div>\n\t\t\t\t\t\t<span class="maxTempDiv"></span>\n\t\t\t\t\t\t<span class="divider"></span>\n\t\t\t\t\t\t<span class="minTempDiv"></span>\n\t\t\t\t\t\t<span class="divider"></span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="cityDiv">\n\t\t\t\t\t\t<span class="cityName"></span>\n\t\t\t\t\t\t<span class="editDiv">\n\t\t\t\t\t\t\t<span class="editLink" data-dojo-attach-event="onclick: onClickZipEdit">${Edit}</span> \n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="weather" data-dojo-attach-point="weatherEdit" style="display:none">\n\t\t\t\t<div class="zipInput" data-dojo-type="ws/widget/DefaultTextbox" data-dojo-attach-point="zipInput" defaultValue="${GetZipDlg_prompt}" tabindex="1" maxlength="5"></div>\n\t\t\t\t<div class="wsLink zipCancel" data-dojo-attach-event="onclick: onZipEditCancel">${Cancel}</div>\n\t\t\t\t<div data-dojo-type="ws/widget/Button" data-dojo-attach-point="zipSave" data-dojo-attach-event="onClick: onZipSave" size="Small" type="zipSave">${Save}</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div data-dojo-type="ws/widget/Pane" class="newsPane" data-dojo-attach-point="newsPane" data-dojo-props="region:\'center\'">\n\t\t\t<div class="newsScroller">\n\t\t\t\t<div class="stories">\n\t\t\t\t\t<div class="newsNav">\n\t\t\t\t\t\t<div data-dojo-type="ws/widget/WSSelect" data-dojo-attach-point="newsCat" class="newsTitle"></div>\n\t\t\t\t\t\t<div class="newsSel" data-dojo-attach-point="newsSel" data-dojo-attach-event="onclick: selectStory"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="story story1">\n\t\t\t\t\t\t<a href="#"  target="_blank" class="storyImgLnk">\n\t\t\t\t\t\t\t<img src="${spacer}" class="storyImg" border=0>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<div class="storyDetail">\n\t\t\t\t\t\t\t<a href="#" target="_blank" class="storyTitle"></a>\n\t\t\t\t\t\t\t<div class="storySummary"></div>\n\t\t\t\t\t\t\t<a href="#" target="_blank" class="storyMore"></a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="subStories">\n\t\t\t\t\t\t<div class="story story2">\n\t\t\t\t\t\t\t<a href="#"  target="_blank" class="storyImgLnk">\n\t\t\t\t\t\t\t\t<img src="${spacer}" class="storyImg" border=0>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<div class="storyDetail">\n\t\t\t\t\t\t\t\t<a href="#" target="_blank" class="storyTitle"></a>\n\t\t\t\t\t\t\t\t<div class="storySummary"></div>\n\t\t\t\t\t\t\t\t<a href="#" target="_blank" class="storyMore"></a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="story story3">\n\t\t\t\t\t\t\t<a href="#"  target="_blank" class="storyImgLnk">\n\t\t\t\t\t\t\t\t<img src="${spacer}" class="storyImg" border=0>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<div class="storyDetail">\n\t\t\t\t\t\t\t\t<a href="#" target="_blank" class="storyTitle"></a>\n\t\t\t\t\t\t\t\t<div class="storySummary"></div>\n\t\t\t\t\t\t\t\t<a href="#" target="_blank" class="storyMore"></a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="promoPane" data-dojo-attach-point="promoPane"> \n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div data-dojo-type="ws/widget/ContainerPane" data-dojo-attach-point="adPane" class="adPane">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n',
"ws/widget/WSMenuItem":function(){define("ws/widget/WSMenuItem","dojo/_base/declare,dojo,dijit,dijit/_Widget,dijit/_TemplatedMixin,dijit/_Contained,ws/html,ws/string".split(","),function(g,j,f,a,b,e){return g([a,b,e],{templateString:'<tr class="wsMenuItem" data-dojo-attach-event="onclick: _onClick" title="${title}">\t<td tabIndex="-1"><div class="iconNode" data-dojo-attach-point="iconNode"></div></td>\t<td tabIndex="-1" class="label" data-dojo-attach-point="labelNode"></td>\t<td tabIndex="-1"><div class="checkNode" data-dojo-attach-point="checkNode"></div></td></tr>',
checkOnClass:"ckonCol",checkOffClass:"ckoffCol",iconClass:null,width:0,caption:"",title:"",shortCutKey:null,disabled:!1,mouseOverBgColor:"#E7F1F8",mouseOverTextColor:"#555",mouseOverSamplingClass:"wsMenuItemHover",isCheckable:!0,bckgrndColor:"#fff",textColor:"#555",className:null,isLabel:!1,noHoverColor:!1,startup:function(){j.setSelectable(this.domNode,!1);this.domNode.title=this.title;if(this.width)this.labelNode.style.width=this.width+"px",this.domNode.style.whiteSpace="normal";this.className&&
j.addClass(this.domNode,this.className);this.setChecked();this.iconClass&&j.addClass(this.iconNode,this.iconClass);if(this.isLabel)this.disabled=!0,j.addClass(this.labelNode,"menuItemLabel");this.updateDisabled();this.labelNode.innerHTML=this.caption;this._updateMouseOverColor();this._handleHover(this.domNode);Config.EnableThemes&&this.subscribe("Theme/Change","_updateMouseOverColor");this.needsStyleUpdate&&this.subscribe("Menu/StyleUpdate","_updateMouseOverColor")},_updateMouseOverColor:function(){if(!this.noHoverColor){var a=
"#FFF",b="#555",e="#e4edfa",f="#555";this.domNode&&(a=j.style(this.domNode,"backgroundColor")||a,b=j.style(this.domNode,"color")||b,j.addClass(this.iconNode,this.mouseOverSamplingClass),e=j.style(this.iconNode,"backgroundColor")||e,f=j.style(this.iconNode,"color")||f,j.removeClass(this.iconNode,this.mouseOverSamplingClass));this.bckgrndColor=a;this.textColor=b;this.mouseOverBgColor=e;this.mouseOverTextColor=f}},_handleHover:function(a){this.noHoverColor||(this.connect(a,"onmouseenter",function(){a.style.backgroundColor=
this.mouseOverBgColor;a.style.color=this.mouseOverTextColor}),this.connect(a,"onmouseleave",function(){a.style.backgroundColor=this.bckgrndColor;a.style.color=this.textColor}))},_onClick:function(a){this.doClickAction();j.stopEvent(a)},doClickAction:function(){this.disabled||(this.domNode&&this.getParent().close(),this.onClick())},keySelect:function(){if(this.labelNode&&!this.disabled){this.labelNode.style.border="2px solid #000";this.labelNode.style.padding="2px 34px 3px 35px";try{this.labelNode.focus()}catch(a){}}},
keyDeselect:function(){if(this.labelNode&&!this.disabled)this.labelNode.style.border="",this.labelNode.style.padding="4px 36px 5px 37px"},onClick:function(){},enable:function(){this.disabled=!1;this.updateDisabled()},disable:function(){this.disabled=!0;this.updateDisabled()},updateDisabled:function(){j.toggleClass(this.domNode,"wsMenuItemDisabled",this.disabled);this.domNode.style.color="";this._updateMouseOverColor()},setChecked:function(a){if(this.isCheckable){if("undefined"!=typeof a)this.checked=
a;"undefined"!=typeof this.checked&&(j.toggleClass(this.checkNode,this.checkOnClass,this.checked),j.toggleClass(this.checkNode,this.checkOffClass,!this.checked))}},setCaption:function(a){this.labelNode.innerHTML=a},onClose:function(){if(!this.noHoverColor)this.domNode.style.backgroundColor=this.bckgrndColor,this.domNode.style.color=this.textColor}})})},"ws/widget/iframePane":function(){define("ws/widget/iframePane",["dojo/_base/declare","dojo","dijit","dijit/_Widget","dijit/_TemplatedMixin"],function(g,
j,f,a,b){return g([a,b],{templateString:'<iframe frameborder="0" scrolling="no" data-dojo-attach-point="iframeNode" style="clear:both;display:block"></iframe>',onClose:function(){this.hide()},show:function(a,b,g){ws.widget.popup.closeAllPopups();this.iframeNode.src=a;j.marginBox(this.domNode,b);j.marginBox(this.iframeNode,{w:b.w-18,h:b.h-30});a={popup:this};if(g){var b=f.byId("PanelWidget"),l=j.coords(b.domNode);a.x=l.l+g.l;a.y=l.t+g.t+b.pluginHeaderHeight}else{if(b.l)a.x=b.l;if(b.t)a.y=b.t}ws.widget.popup(a)},
hide:function(){ws.widget.popup.close(this);this.inherited(arguments);this.destroyRecursive();ws.widget.Dialogs.iframePane=null}})})},"ws/suite/SgnInHstyDlg":function(){define("ws/suite/SgnInHstyDlg","dojo/_base/declare,dojo/text!ws/suite/SgnInHstyDlg.html,dojo/text!ws/suite/SgnInHstyDlg.css,dojo,dijit,dijit/_Widget,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,ws/widget/WSModalPane,ws/widget/Button,ws/io,ws/reporting,ws/widget/util".split(","),function(g,j,f,a,b,e,h,k,l,n){return g([l,h,k],
{templateString:j,css:{templateString:f},destroyOnClose:!1,startup:function(){this.inherited(arguments);this.makeButtons();this.learnMore.href=Config.LearnMoreDlg},yesCallback:null,noCallback:null,secureCallback:null,btnClrGreenBg:"#369611",btnClrGreenBrd:"#377b04",btnClrRedBg:"#d20f13",btnClrRedBrd:"#870708",makeButtons:function(){this.hitchYesMe=a.hitch(this,this.handleBtnYesMe);this.hitchNoNotMe=a.hitch(this,this.handleBtnNoNotMe);var b=new n({size:"Large"});b.startup();b.setLabel(Config.Strings.SgnInHstyDlgSeeActivity);
b.onClick=a.hitch(this,this.handleBtnSeeActivity);b.domNode.style.backgroundColor=this.btnClrGreenBg;b.domNode.style.borderColor=this.btnClrGreenBrd;this.btnHldrSeeActivity=a.create("div",{"class":"btnRight",innerHTML:""},this.btnBar);this.btnHldrSeeActivity.style.display="none";this.btnHldrSeeActivity.appendChild(b.domNode);this.btnSeeActivity=b;b=new n({size:"Large"});b.startup();b.setLabel(Config.Strings.SgnInHstyDlgSecAcct);b.onClick=a.hitch(this,this.handleBtnSecure);b.domNode.style.backgroundColor=
this.btnClrGreenBg;b.domNode.style.borderColor=this.btnClrGreenBrd;this.btnHldrSecure=a.create("div",{"class":"btnRight",innerHTML:""},this.btnBar);this.btnHldrSecure.style.display="none";this.btnHldrSecure.appendChild(b.domNode);this.btnSecure=b;b=new n({size:"Large"});b.startup();this.btnHldrRight=a.create("div",{"class":"btnRight",innerHTML:""},this.btnBar);this.btnHldrSeeActivity.style.display="none";this.btnHldrRight.appendChild(b.domNode);this.btnRight=b;b=a.create("div",{"class":"btnAnchor",
innerHTML:""},this.btnHldrRight);this.btnHldrLeft=a.create("div",{"class":"btnAdjacent",innerHTML:""},b);this.btnHldrSeeActivity.style.display="none";b=new n({size:"Large"});b.startup();if(7>=a.isIE)b.domNode.style.width="100%";this.btnHldrLeft.appendChild(b.domNode);this.btnLeft=b;this.allActivity.onclick=a.hitch(this,this.handleBtnSeeActivity)},setRightBtnGreen:function(){this.btnRight.setLabel(Config.Strings.SgnInHstyDlgYesMe);this.btnRight.domNode.style.backgroundColor=this.btnClrGreenBg;this.btnRight.domNode.style.borderColor=
this.btnClrGreenBrd;this.btnRight.onClick=this.hitchYesMe;this.btnLeft.setLabel(Config.Strings.SgnInHstyDlgNoNotMe);this.btnLeft.domNode.style.backgroundColor=this.btnClrRedBg;this.btnLeft.domNode.style.borderColor=this.btnClrRedBrd;this.btnLeft.onClick=this.hitchNoNotMe},setRightBtnRed:function(){this.btnRight.setLabel(Config.Strings.SgnInHstyDlgNoNotMe);this.btnRight.domNode.style.backgroundColor=this.btnClrRedBg;this.btnRight.domNode.style.borderColor=this.btnClrRedBrd;this.btnRight.onClick=this.hitchNoNotMe;
this.btnLeft.setLabel(Config.Strings.SgnInHstyDlgYesMe);this.btnLeft.domNode.style.backgroundColor=this.btnClrGreenBg;this.btnLeft.domNode.style.borderColor=this.btnClrGreenBrd;this.btnLeft.onClick=this.hitchYesMe},setBtnVis:function(a){var b=null;for(b in a)if(this[b])this[b].style.display=a[b]},setSecureAccount:function(a){this.setBtnVis({btnHldrSeeActivity:"none",btnHldrSecure:"",btnHldrRight:"none",btnHldrLeft:"none",learnMore:a?"none":"",allActivity:a?"":"none",wsCloseBtn:"none"});this.titleMsg.innerHTML=
Config.Strings.SgnInHstyDlgResetPassword;this.contentMsg.innerHTML=Config.Strings.SgnInHstyDlgRecommend;this.show();ws.reporting.reportDLAction("Mail-SA-ChangePassword-Shown")},setLoginAlertOne:function(a){this.setBtnVis({btnHldrSeeActivity:"none",btnHldrSecure:"none",btnHldrRight:"",btnHldrLeft:"",learnMore:"none",allActivity:"",wsCloseBtn:"none"});this.setRightBtnRed();this.titleMsg.innerHTML=ws.string.substituteParams(Config.Strings.SgnInHstyDlgOneUnusual,a);this.contentMsg.innerHTML=Config.Strings.SignInHistoryWasYou;
this.show()},setLoginAlertMany:function(a){this.setBtnVis({btnHldrSeeActivity:"",btnHldrSecure:"none",btnHldrRight:"none",btnLeft:"none",learnMore:"none",allActivity:"none",wsCloseBtn:"none"});var b=a.pop();this.titleMsg.innerHTML=ws.string.substituteParams(Config.Strings.SgnInHstyDlgManyUnusual,a.join(", "),b);this.contentMsg.innerHTML="";this.show()},setExitConfirm:function(){this.setBtnVis({btnHldrSeeActivity:"none",btnHldrSecure:"",btnHldrRight:"none",btnHldrLeft:"none",learnMore:"none",allActivity:"none",
wsCloseBtn:""});this.titleMsg.innerHTML=Config.Strings.SgnInHstyDlgExitAlert;this.contentMsg.innerHTML="";this.show();ws.reporting.reportDLAction("Mail-SA-SettingsExitAlert")},handleBtnSeeActivity:function(){this.hide();ws.WebSuite.openSettings("signInHistorySettings")},handleBtnYesMe:function(){this.hide();this.yesCallback&&this.yesCallback()},handleBtnNoNotMe:function(){this.hide();this.noCallback&&this.noCallback()},handleBtnSecure:function(){this.hide();this.secureCallback&&this.secureCallback()},
hideDlg:function(){this.hide()}})})},"dojo/request/script":function(){define("dojo/request/script","module,./watch,./util,../_base/array,../_base/lang,../on,../dom,../dom-construct,../has,../_base/window".split(","),function(g,j,f,a,b,e,h,k,l,n){function m(a,b){a.canDelete&&p._remove(a.id,b.options.frameDoc,!0)}function q(b){B&&B.length&&(a.forEach(B,function(a){p._remove(a.id,a.frameDoc);a.frameDoc=null}),B=[]);return b.options.jsonp?!b.data:!0}function s(){return!!this.scriptLoaded}function o(a){return(a=
a.options.checkString)&&eval("typeof("+a+') !== "undefined"')}function u(a,b){if(this.canDelete){var e=this.response.options;B.push({id:this.id,frameDoc:e.ioArgs?e.ioArgs.frameDoc:e.frameDoc});if(e.ioArgs)e.ioArgs.frameDoc=null;e.frameDoc=null}b?this.reject(b):this.resolve(a)}function p(a,h,g){var k=f.parseArgs(a,f.deepCopy({},h)),a=k.url,h=k.options,l=f.deferred(k,m,q,h.jsonp?null:h.checkString?o:s,u);b.mixin(l,{id:h.altId?h.altId:v+w++,canDelete:!1});if(h.jsonp){var n=(~a.indexOf("?")?"&":"?")+
h.jsonp+"=";-1===a.indexOf(n)&&(a+=n+(h.frameDoc?"parent.":"")+v+"_callbacks."+l.id);l.canDelete=!0;A[l.id]=function(a){k.data=a;l.handleResponse(k)}}f.notify&&f.notify.emit("send",k,l.promise.cancel);if(!h.canAttach||h.canAttach(l)){var B=p._attach(l.id,a,h.frameDoc);if(!h.jsonp&&!h.checkString)var $=e(B,z,function(a){if("load"===a.type||x.test(B.readyState))$.remove(),l.scriptLoaded=a})}j(l);return g?l:l.promise}l.add("script-readystatechange",function(a,b){return"undefined"!==typeof b.createElement("script").onreadystatechange&&
("undefined"===typeof a.opera||"[object Opera]"!==a.opera.toString())});var v=g.id.replace(/[\/\.\-]/g,"_"),w=0,z=l("script-readystatechange")?"readystatechange":"load",x=/complete|loaded/,A=this[v+"_callbacks"]={},B=[];p.get=p;p._attach=function(a,b,e){var e=e||n.doc,f=e.createElement("script");f.type="text/javascript";f.src=b;f.id=a;f.async=!0;f.charset="utf-8";return e.getElementsByTagName("head")[0].appendChild(f)};p._remove=function(a,b,e){(b=h.byId(a,b))&&k.destroy(b);A[a]&&(e?A[a]=function(){delete A[a]}:
delete A[a])};p._callbacksProperty=v+"_callbacks";return p})},"dijit/popup":function(){define("dijit/popup","dojo/_base/array,dojo/aspect,dojo/_base/connect,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/_base/event,dojo/has,dojo/keys,dojo/_base/lang,dojo/on,./place,./BackgroundIframe,./main".split(","),function(g,j,f,a,b,e,h,k,l,n,m,q,s,o,u,p,v){function w(){this._popupWrapper&&(h.destroy(this._popupWrapper),delete this._popupWrapper)}a=a(null,
{_stack:[],_beginZIndex:1E3,_idGen:1,_createWrapper:function(a){var b=a._popupWrapper,e=a.domNode;if(!b)b=h.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":a["aria-label"]||a.label||a.name||a.id},a.ownerDocumentBody),b.appendChild(e),e=e.style,e.display="",e.visibility="",e.position="",e.top="0px",a._popupWrapper=b,j.after(a,"destroy",w,!0);return b},moveOffScreen:function(a){a=this._createWrapper(a);l.set(a,{visibility:"hidden",top:"-9999px",display:""})},hide:function(a){a=
this._createWrapper(a);l.set(a,"display","none")},getTopPopup:function(){for(var a=this._stack,b=a.length-1;0<b&&a[b].parent===a[b-1].widget;b--);return a[b]},open:function(a){for(var h=this._stack,g=a.popup,j=a.orient||["below","below-alt","above","above-alt"],l=a.parent?a.parent.isLeftToRight():k.isBodyLtr(g.ownerDocument),v=a.around,w=a.around&&a.around.id?a.around.id+"_dropdown":"popup_"+this._idGen++;h.length&&(!a.parent||!b.isDescendant(a.parent.domNode,h[h.length-1].widget.domNode));)this.close(h[h.length-
1].widget);var L=this._createWrapper(g);e.set(L,{id:w,style:{zIndex:this._beginZIndex+h.length},"class":"dijitPopup "+(g.baseClass||g["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:a.parent?a.parent.id:""});if(m("bgIframe")&&!g.bgIframe)g.bgIframe=new p(L);j=v?u.around(L,v,j,l,g.orient?s.hitch(g,"orient"):null):u.at(L,a,"R"==j?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],a.padding);L.style.display="";L.style.visibility="visible";g.domNode.style.visibility="visible";l=[];l.push(o(L,f._keypress,
s.hitch(this,function(b){if(b.charOrCode==q.ESCAPE&&a.onCancel)n.stop(b),a.onCancel();else if(b.charOrCode===q.TAB&&(n.stop(b),(b=this.getTopPopup())&&b.onCancel))b.onCancel()})));g.onCancel&&a.onCancel&&l.push(g.on("cancel",a.onCancel));l.push(g.on(g.onExecute?"execute":"change",s.hitch(this,function(){var a=this.getTopPopup();if(a&&a.onExecute)a.onExecute()})));h.push({widget:g,parent:a.parent,onExecute:a.onExecute,onCancel:a.onCancel,onClose:a.onClose,handlers:l});if(g.onOpen)g.onOpen(j);return j},
close:function(a){for(var b=this._stack;a&&g.some(b,function(b){return b.widget==a})||!a&&b.length;){var e=b.pop(),f=e.widget,h=e.onClose;if(f.onClose)f.onClose();for(var k;k=e.handlers.pop();)k.remove();f&&f.domNode&&this.hide(f);h&&h()}}});return v.popup=new a})},"dijit/_base/manager":function(){define("dijit/_base/manager",["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(g,j,f,a,b){var e={};g.forEach("byId,getUniqueId,findWidgets,_destroyAll,byNode,getEnclosingWidget".split(","),
function(b){e[b]=a[b]});f.mixin(e,{defaultDuration:j.defaultDuration||200});f.mixin(b,e);return b})},"ws/address/PeopleApp":function(){define("ws/address/PeopleApp","dojo/_base/declare,dojo/text!ws/address/PeopleApp.html,dojo/text!ws/address/PeopleApp.css,dojo,dijit,dijit/_Widget,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,ws/address/AddressModel,ws/widget/ClearableTextbox".split(","),function(g,j,f,a,b,e,h,k,l){return g([e,h,k],{templateString:j,css:{templateString:f},_earlyTemplatedStartup:!0,
_inited:!1,_started:!1,searchMode:!1,startup:function(){if(!this._started)this.model=new l({sortable:!0,fullTextSearchable:!0}),this.connect(this.model,"modelUpdated","modelUpdated"),this.model.core.sortData(Settings.AddressNameSortOrder?Settings.AddressNameSortOrder:Config.DefaultAddressNameSortOrder,"Ascending"),this.connect(this.appPplNode.domNode,"onclick","handleClick"),this.connect(this.appPplNode.domNode,"oncontextmenu","handleRClick"),this.connect(this.searchBox,"clear","searchClear"),a.query(".appTitleClose",
this.domNode).style("display","none"),this.connect(this.searchBox.textbox,"onkeyup","onKeyPressSearchField"),this._started=!0},init:function(){if(!this._inited)this.model.initData(),this.model.isLoading()||this.modelUpdated(),this._inited=!0},onMouseOut:function(){a.addClass(this.appTitleSearch,"appTitleSearch");this.searchMode||a.removeClass(this.appTitleSearch,"appTitleSearchSel")},onMouseOver:function(){a.addClass(this.appTitleSearch,"appTitleSearchSel")},modelUpdated:function(){var a=this.model.getRolodex(),
b=0,e=this.searchBox.getValue(),f=this.model.getSearchString();if(!e||e&&e==f){var h=this.model.getRowCount();if(0==h)f?(this.appPplEmpty.hide(),this.appPplNoResult.show()):(this.appPplEmpty.show(),this.appPplNoResult.hide()),this.appPplNode.hide(),this.toolbar.layout();else{this.appPplEmpty.hide();this.appPplNoResult.hide();this.appPplNode.show();for(var f=["<ul>"],g="appPplSection appPplSectionOne",k=!0;-1==a[b];)b++;for(var j=0;j<h;j++){if(Config.UseRolodexQuickContacts&&!e&&a[b]==j){f.push("<li class='"+
g+"'>"+ws.string.alphabet.charAt(b).toUpperCase()+"</li>");k&&(k=!1,g="appPplSection");for(;-1==a[++b]&&b<a.length;);}var l=this.model.getRow(j),l=ws.string.escapeXml(l.name||l.email1||l.email2||l.screenName||"");f.push("<li class='appPplItem' title='"+l+"'_row='"+j+"'>"+l+"</li>")}f.push("</ul>");this.appPplNode.domNode.innerHTML=f.join("")}}},onResized:function(){this.inherited(arguments);var b=a._getMarginSize(this.domNode).w;150<b&&a.style(this.searchBox.domNode,{width:b-22+"px"});0==this.model.getRowCount()&&
this.toolbar.layout()},fullView:function(b){a.stopEvent(b);ws.WebSuite.displayContactListView(null,"")},appClose:function(b){ws.WebSuite.Navigation.restoreApp();a.stopEvent(b)},handleClick:function(e){a.stopEvent(e);if(e=ws.widget.getEventTarget(e,"appPplItem","appPplNode"))if(e=a.attr(e,"_row")){var f=this.getEmail(this.model.getRow(+e));f&&0<f.length&&(e=b.byId("composeMessage"),"composeMessage"==ws.WebSuite._currentTab&&!e.isSendConfirmationOnShow()?ws.WebSuite.reuseComposeWindow(f):ws.WebSuite.getCompose(null,
a.hitch(this,function(a){a.reset({to:f})})))}},handleRClick:function(b){var e=ws.widget.getEventTarget(b,"appPplItem","appPplNode");a.stopEvent(b);if(e){this.menu||this.createContextMenu();var f=a.attr(e,"_row");f?(this.lastContact=this.model.getRow(+f),this.menu.open(b.pageX,b.pageY,e)):this.lastContact=null}},getEmail:function(a){return a.email1||a.email2||a.screenName||a.composeValue||""},createContextMenu:function(){var e=[{caption:Config.Strings.ContactAppSendMessage,onClick:a.hitch(this,function(){var b=
this.getEmail(this.lastContact);b&&0<b.length&&ws.WebSuite.getCompose(null,a.hitch(this,function(a){a.reset({to:b})}))})},{caption:Config.Strings.ContactAppAddCC,onClick:a.hitch(this,function(){var e=this.getEmail(this.lastContact);if(e&&0<e.length){var f=b.byId("composeMessage");"composeMessage"==ws.WebSuite._currentTab&&!f.isSendConfirmationOnShow()?ws.WebSuite.reuseComposeWindow(e,"cc"):ws.WebSuite.getCompose(null,a.hitch(this,function(a){a.reset({cc:e})}))}})},{caption:Config.Strings.ContactAppAddBCC,
onClick:a.hitch(this,function(){var e=this.getEmail(this.lastContact);if(e&&0<e.length){var f=b.byId("composeMessage");"composeMessage"==ws.WebSuite._currentTab&&!f.isSendConfirmationOnShow()?ws.WebSuite.reuseComposeWindow(e,"bcc"):ws.WebSuite.getCompose(null,a.hitch(this,function(a){a.reset({bcc:e})}))}})},{caption:Config.Strings.ContactAppDetails,onClick:a.hitch(this,function(){"d"==this.lastContact.bType?ws.WebSuite.editDistributionList(this.lastContact.uid):ws.WebSuite.showContactDetails(this.lastContact)})},
{caption:Config.Strings.ContactAppEdit,onClick:a.hitch(this,function(){a.publish("WSFeedbackStart",[Config.Strings.Loading]);"d"==this.lastContact.bType?ws.WebSuite.editDistributionList(this.lastContact.uid):this.model.getContact({uid:this.lastContact.uid,load:a.hitch(this,function(b){a.publish("WSFeedbackEnd",[Config.Strings.Loading]);ws.WebSuite.editContact(this.lastContact.uid,b,!0)}),error:a.hitch(this,function(b){a.publish("WSFeedbackEnd",[Config.Strings.Loading]);window.ws_ErrLgr&&!b&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,
"Dialogs.ok shown - Error Handler for addressModel.getContact-showContact file:ContactDetails.js");ws.widget.Dialogs.ok(b||Config.Strings.ErrorLoadingContact)})})})},{caption:Config.Strings.ContactAppDelete,onClick:a.hitch(this,function(){this.model.clearRolodex();this.model.deleteAddresses({uids:[this.lastContact.uid]})})}];this.menu=ws.widget.createMenu(e)},createAppMenu:function(){var b=[{caption:Config.Strings.NewContact,onClick:a.hitch(this,function(){ws.WebSuite.editContact(null,null,!0);ws.reporting.reportDLAction("Mail-LeftNav-Contacts-QuickAddNewContact")})},
{caption:Config.Strings.NewDistList,onClick:a.hitch(this,function(){ws.WebSuite.createDistList();ws.reporting.reportDLAction("Mail-LeftNav-Contacts-QuickCreateDistributionList")})},{separator:!0},{caption:Config.Strings.ContactAppFullTip,onClick:a.hitch(this,function(){ws.WebSuite.displayContactListView(null,"");ws.reporting.reportDLAction("Mail-LeftNav-Contacts-QuickOpenFullContacts")})}];this.appTitleMenu=ws.widget.createMenu(b)},addContact:function(b){ws.WebSuite.editContact(0,null,!0);a.stopEvent(b);
ws.reporting.reportDLAction("Mail-LeftNav-Contacts-EmptyAddNewContact")},appMenu:function(b){a.stopEvent(b);this.appTitleMenu||this.createAppMenu();this.appTitleMenu.open(this.appTitleLink)},searchContacts:function(b){a.stopEvent(b);this.searchMode?(a.query(".searchBox",this.domNode).style("display","none"),a.addClass(this.appTitleSearch,"appTitleSearch"),a.removeClass(this.appTitleSearch,"appTitleSearchSel"),this.searchBox.clear(),this.model.search("")):(a.query(".searchBox",this.domNode).style("display",
"block"),a.addClass(this.appTitleSearch,"appTitleSearchSel"),a.removeClass(this.appTitleSearch,"appTitleSearch"),this.searchBox.focus());this.layoutWidget.layout();this.searchMode=!this.searchMode;ws.reporting.reportDLAction("Mail-LeftNav-Contacts-QuickSearchContact")},onKeyPressSearchField:function(b){b.keyCode==a.keys.ESCAPE?(this.searchTimer&&clearTimeout(this.searchTimer),this.model.search("")):(this.searchTimer&&clearTimeout(this.searchTimer),this.searchTimer=setTimeout(a.hitch(this,function(){this.model.search(this.searchBox.getValue())}),
500))},searchClear:function(){this.searchTimer&&clearTimeout(this.searchTimer);this.model.search("")}})})},"ws/address/AddressField":function(){define("ws/address/AddressField","dojo/_base/declare,dojo,dijit,dijit/_Widget,dijit/_TemplatedMixin,ws/address/PeoplePicker,ws/address/AllAddressModel".split(","),function(g,j,f,a,b,e,h){return g("ws.address.AddressField",[a,b],{templateString:"<textarea data-dojo-attach-point='field' data-dojo-attach-event='onkeydown: onKeyDown, onkeypress: onKeyPress, onfocus: onFocus, onblur: onBlur' tabindex='${tabindex}' class='wsInput ${className}' style='float: left; height: 18px; overflow-x: hidden; overflow-y: auto; width: ${fieldWidth}; padding: 1px 2px;'>${value}</textarea>",
value:"",defaultValue:"",_wordSeparators:";,",_pickerActive:!1,_pickerMode:"explicit",tabindex:500,minHeight:j.isMac?16:17,maxHeight:60,fieldWidth:"90%",className:"",startup:function(){this.selectedContacts=[];this.createPeoplePicker();this.connect(this.peoplePicker,"onContactSelected","onContactSelected");this.connect(this.peoplePicker,"onClose",j.hitch(this,function(){this._pickerActive=!1}));this.setValue(this.value);ws.browser.ipad&&this.field.setAttribute("autocorrect","off")},createPeoplePicker:function(){if(!this.peoplePicker)ws.address.AddressField.prototype.peoplePicker=
new e,this.peoplePicker.setModel(new h({fetchDataOnInit:!1,sortable:!0})),this.peoplePicker.model.core.sortData(Settings.AddressNameSortOrder?Settings.AddressNameSortOrder:Config.DefaultAddressNameSortOrder,"Ascending"),this.peoplePicker.model.initData()},togglePeoplePicker:function(a){this._pickerActive?this.peoplePicker.close():(this.peoplePicker.showHighlight(!1),this.peoplePicker.searchAndOpen("",this._getAnchorNode(a)),clearTimeout(this.keypressTimeout),this._pickerActive=!0,this._pickerMode=
"explicit",this.field.focus())},getValue:function(){var a=this.field.value==this.defaultValue?"":j.trim(this.field.value);return a=a.replace(/,[, ]*/g,",")},setValue:function(a,b,e){this.selectedContacts=[];if(a==this.defaultValue)this.field.value=a;else{if((a=a||"")&&"string"==typeof a)a=a.replace(/, */g,", "),a=a.replace(/; */g,"; "),a=a.replace(/\s+$/,"");this.field.value=""==j.trim(a)?this.defaultValue:!this.isSingle&&!(";"==a.charAt(a.length-1)||","==a.charAt(a.length-1))?a+", ":b?a:a+" "}this.resizeSelf(e);
this._updateClass()},_updateClass:function(){""!=this.defaultValue&&j.toggleClass(this.field,"wsInputDefault",this.field.value==this.defaultValue)},onFocus:function(){j.publish("AddressFieldFocusChange",[this]);if(this.field.value==this.defaultValue)this.field.value="";this._updateClass();this.field.focus()},onBlur:function(){j.publish("AddressFieldBlurChange",[this]);if(""==j.trim(this.field.value))this.field.value=this.defaultValue;this._updateClass()},onKeyDown:function(a){if(j.isIE)if(a.keyCode==
j.keys.ESCAPE)this._pickerActive&&this.peoplePicker.close(),a.preventDefault();else if(a.keyCode==j.keys.BACKSPACE)this.onKeyPress(a)},onKeyPress:function(a){a.stopPropagation();if(this._pickerActive&&this.peoplePicker.processKeyPress(a))j.publish("AddressFieldKeyPressHandle",[this,a.keyCode,!0]);else if(j.publish("AddressFieldKeyPressHandle",[this,a.keyCode,!1]),a.keyCode==j.keys.ENTER)j.stopEvent(a);else{if(a.target.selectionStart==a.target.textLength&&(";"==a.keyChar||","==a.keyChar))this.field.value+=
a.keyChar+" ",j.stopEvent(a);this.keypressTimeout&&clearTimeout(this.keypressTimeout);this.keypressTimeout=ws.lang.setTimeout(this,"_onKeyPress",100,a);this.resizeTimeout&&clearTimeout(this.resizeTimeout);this.resizeTimeout=ws.lang.setTimeout(this,"resizeSelf",150)}},_getAnchorNode:function(a){var b=a&&a.domNode?a.domNode:null;return b=!b&&a&&a.tagName?a:this.anchorNode||this.field},_onKeyPress:function(){var a=this.matchText();null==a&&(a="");if(""==j.trim(a))this._pickerActive&&this.peoplePicker.close();
else if(this.field.value!=this._lastValue)this._pickerMode="autocomplete",this.peoplePicker.showHighlight(!0),this.peoplePicker.searchAndOpen(a,this._getAnchorNode()),this._pickerActive=this.peoplePicker.isShowing();this._lastValue=this.field.value},matchText:function(){var a=this.field.value,b=this._lastValue?this._lastValue:"",e=this._wordSeparators,f=-1;if(a==b)return this._matchValue;var h=a.length>b.length?b.length:a.length;for(i=0;i<h;++i)if(a.charAt(i)!=b.charAt(i)){f=i;break}0>f&&(f=a.length-
1);for(b=f;0<b&&0>e.indexOf(a.charAt(b));)--b;for(;f<a.length&&0>e.indexOf(a.charAt(f));)f++;for(a=a.substring(b,f);0<a.length&&(0<=e.indexOf(a.charAt(0))||" "==a.charAt(0));)a=a.substring(1),++b;this._matchValue=a.toLowerCase();this._matchStart=b;this._matchEnd=f;return a},onContactSelected:function(a){if(this._pickerActive&&a){this.selectedContacts.push(a);var b=a.composeValue;if(""!=j.trim(b)){if("autocomplete"==this._pickerMode){this.matchText();if(this.isSingle)this.field.value=b;else if(this._matchEnd==
this.field.value.length&&(b+=", "),0<=this._matchStart&&0<=this._matchEnd)this.field.value=this.field.value.substring(0,this._matchStart)+b+this.field.value.substring(this._matchEnd);this.setInsertionPoint(-1);this.clearMatch();this.peoplePicker.close()}else if(b=this.field.value,b=b.replace(/^\s+/,""),b=b.replace(/\s+$/,""),this.field.value=b,!this.isSingle)this.field.value=""==j.trim(b)?a.composeValue+", ":";"==b.charAt(b.length-1)||","==b.charAt(b.length-1)?this.field.value+(" "+a.composeValue+
", "):this.field.value+(", "+a.composeValue+", "),this.scrollToEnd();this.resizeSelf();this.focus()}}},setInsertionPoint:function(a){this.setSelectionRange(a,a);0>a&&this.scrollToEnd()},setSelectionRange:function(a,b){if(0>a||a>this.field.value.length)a=this.field.value.length;if(0>b||b>this.field.value.length)b=this.field.value.length;b<a&&(b=a);if(this.field.setSelectionRange)this.field.setSelectionRange(a,b);else if(this.field.createTextRange){var e=this.field.createTextRange();e.collapse(!0);
e.moveEnd("character",b);e.moveStart("character",a);e.select()}},clearMatch:function(){this._matchValue="";this._insertionPoint=this._matchEnd=this._matchStart=-1;this._lastValue=this.value},focus:function(a){a=a?a:0;try{this.field.focus()}catch(b){3>a&&(a++,ws.lang.setTimeout(this,this.focus,200,a))}},resizeSelf:function(){this.createMeasureNode();this.measureNode.innerHTML=this.field.value.replace(/\n/g,"<br>");this.measureNode.style.width=parseInt(this.field.style.width)+"px";var a=Math.min(this.maxHeight,
Math.max(this.minHeight,j.contentBox(this.measureNode).h));if(a!=parseInt(this.field.style.height))this.field.style.height=a+"px",this._pickerActive&&this.peoplePicker.move(this.field),this.onResizedSelf()},createMeasureNode:function(){if(!this.measureNode)this.measureNode=j.create("div",{style:{position:"absolute",visibility:"hidden",top:"-10000px",left:"10000px",fontSize:"12px"}},j.body())},onResizedSelf:function(){},scrollToEnd:function(){this.field.scrollTop=1E4}})})},"dojo/request/default":function(){define("dojo/request/default",
["exports","require","../has"],function(g,j,f){var a=f("config-requestProvider");a||(a="./xhr");g.getPlatformDefaultId=function(){return"./xhr"};g.load=function(b,e,f){j(["platform"==b?"./xhr":a],function(a){f(a)})}})},"dijit/BackgroundIframe":function(){define("dijit/BackgroundIframe","require,./main,dojo/_base/config,dojo/dom-construct,dojo/dom-style,dojo/_base/lang,dojo/on,dojo/sniff,dojo/_base/window".split(","),function(g,j,f,a,b,e,h,k,l){k.add("bgIframe",k("ie")||k("mozilla"));var n=new function(){var e=
[];this.pop=function(){var h;e.length?(h=e.pop(),h.style.display=""):(9>k("ie")?(h="<iframe src='"+(f.dojoBlankHtmlUrl||g.toUrl("dojo/resources/blank.html")||'javascript:""')+"' role='presentation' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>",h=l.doc.createElement(h)):(h=a.create("iframe"),h.src='javascript:""',h.className="dijitBackgroundIframe",h.setAttribute("role","presentation"),b.set(h,"opacity",0.1)),h.tabIndex=-1);return h};this.push=function(a){a.style.display=
"none";e.push(a)}};j.BackgroundIframe=function(a){if(!a.id)throw Error("no id");if(k("bgIframe")){var f=this.iframe=n.pop();a.appendChild(f);7>k("ie")||k("quirks")?(this.resize(a),this._conn=h(a,"resize",e.hitch(this,function(){this.resize(a)}))):b.set(f,{width:"100%",height:"100%"})}};e.extend(j.BackgroundIframe,{resize:function(a){this.iframe&&b.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+"px"})},destroy:function(){if(this._conn)this._conn.remove(),this._conn=null;this.iframe&&
(n.push(this.iframe),delete this.iframe)}});return j.BackgroundIframe})},"url:ws/widget/WSDatePicker.html":'<div class="WSDatePicker" data-dojo-attach-point="WSDatePickerDiv" style="overflow: hidden;position:relative;">\n    <div data-dojo-attach-point="topNav" class="topNav">\n        <div class="topNavChild">\n            <div class="mainSprite prevButton" data-dojo-attach-event="onclick: decrementMonth"></div>\n            <div class="mainSprite nextButton" data-dojo-attach-event="onclick: incrementMonth"></div>\n        </div>\n    </div>\n    <div class="nav">\n        <div class="mainSprite prevButton" data-dojo-attach-event="onclick: decrementMonth"></div>\n    </div>\n    <div data-dojo-attach-point="datePickerMain" style="float:left">\n        <table border="0" cellpadding="0" cellspacing="0" class="calTable">\n            <tbody data-dojo-attach-point="datePickerBody">\n                <tr>\n                    <td colspan="7" class="monthYear"><span data-dojo-attach-point="monthYearNode" class="monthyear"></span></td>\n                </tr>\n                <tr data-dojo-attach-point="datePickerDaysOfWeek" class="days">\n                    <td><span></span></td>\n                    <td><span></span></td>\n                    <td><span></span></td>\n                    <td><span></span></td>\n                    <td><span></span></td>\n                    <td><span></span></td>\n                    <td><span></span></td>\n                </tr>\n                <tr class="dates">\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                </tr>\n                <tr class="dates">\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                </tr>\n                <tr class="dates">\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                </tr>\n                <tr class="dates">\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                </tr>\n                <tr class="dates" style="display:none" data-dojo-attach-point="fifthWeekRow">\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                </tr>\n                <tr class="dates" style="display:none" data-dojo-attach-point="sixthWeekRow">\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate"><span></span></td>\n                </tr>\n            </tbody>\n        </table>\n        <div class="verticalRule"></div>\n        <table border="0" cellpadding="0" cellspacing="0" class="calTable calTable2">\n            <tbody data-dojo-attach-point="datePickerBody2">\n                <tr style="display:none">\n                    <td  class="monthYear" colspan="7"><span data-dojo-attach-point="monthYearNode2" class="monthyear"></span></td>\n                </tr>\n                <tr style="display:none"  data-dojo-attach-point="datePickerDaysOfWeek2" class="days">\n                    <td><span></span></td>\n                    <td><span></span></td>\n                    <td><span></span></td>\n                    <td><span></span></td>\n                    <td><span></span></td>\n                    <td><span></span></td>\n                    <td><span></span></td>\n                </tr>\n                <tr class="dates" style="display:none">\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                </tr>\n                <tr class="dates" style="display:none">\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                </tr>\n                <tr class="dates" style="display:none">\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                </tr>\n                <tr class="dates" style="display:none">\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                </tr>\n                <tr class="dates" style="display:none" data-dojo-attach-point="fifthWeekRow2">\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                </tr>\n                <tr class="dates" style="display:none" data-dojo-attach-point="sixthWeekRow2">\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                    <td data-dojo-attach-event="onclick: onSelectDate2"><span></span></td>\n                </tr>\n            </tbody>\n        </table>\n\n    </div>\n    <div class="nav">\n        <div class="mainSprite nextButton" data-dojo-attach-event="onclick: incrementMonth"></div>\n    </div>\n    <div data-dojo-attach-point="datePickerFoot" style="clear:both;text-align: center;">\n            <span class="todayContainer" data-dojo-attach-event="onclick: selectToday"><div class="iconToday mainSprite"></div><span class="wsLink" data-dojo-attach-point="todayNode"></span></span>\n    </div>\n</div>',
"url:ws/suite/SidePanel.css":"","ws/dojofixes":function(){define("ws/dojofixes",["dojo","dojo/_base/lang","ws/browser"],function(g,j,f){g.isMac&&(g.addClass(g.doc.documentElement,"dj_mac"),g.isFF&&g.addClass(g.doc.documentElement,"dj_macFF"));10==g.isIE?g.addClass(g.doc.documentElement,"dj_ie10"):f.ipad&&g.addClass(g.doc.documentElement,"dj_iPad");g.dojofromJson=g.fromJson;g.fromJson=function(a){if(!a||""==a)a='""';try{return g.dojofromJson(a)}catch(b){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.JsonParseErr,
"Exception in JSON string, func: dojo.fromJson, file: dojofixes.js ")}};g.isArray=function(a){return a&&a.push&&a.splice&&a.join};g.isIE&&(j.setObject("ws.dojofixes.fixScroll",function(){g.body().scrollTop=document.documentElement.scrollTop=0;g.body().scrollLeft=document.documentElement.scrollLeft=0}),g.addOnLoad(function(){g.connect(g.body(),"onscroll",ws.dojofixes.fixScroll);document.documentElement.onscroll=ws.dojofixes.fixScroll}))})},"ws/widget/WSMenu":function(){define("ws/widget/WSMenu","dojo/_base/declare,dojo/text!ws/widget/WSMenu.css,dojo,dijit,dojo/window,dijit/_Widget,dijit/_TemplatedMixin,dijit/_Container,ws/widget/popup,ws/html,ws/string".split(","),
function(g,j,f,a,b,e,h,k){return g([e,h,k],{templateString:'<div class="wsMenu" style="display: none;">\t<table border=0 cellspacing=0 cellpadding=0>\t\t<tbody data-dojo-attach-point="containerNode"></tbody>\t</table></div>',css:{templateString:j},scrollBarWidth:0,scrollBarWidthHasBeenAdded:!1,menuOrient:null,padding:f.isMac&&f.isWebKit?[0,-1]:[0,5],startup:function(){f.forEach(this.getChildren(),function(a){a.startup()});this._started=!0;this.scrollBarWidth=ws.WebSuite.scrollbarWidth;this.subscribe("wsresize",
"close")},open:function(a,b,e,f){var h,g;"number"==typeof a&&(h=a,g=b,b=e,e=f,a=null);ws.widget.popup({popup:this,x:h,y:g,around:a,orient:this.menuOrient||e,parent:b,padding:this.padding,shadow:!1})},onOpen:function(){this.domNode.style.height="";var a=f._getMarginSize(this.domNode),e=b.getBox().h;if(a.h>e){var h=this.scrollBarWidthHasBeenAdded?0:this.scrollBarWidth;this.scrollBarWidthHasBeenAdded=!0;f.marginBox(this.domNode,{h:e,w:a.w+h})}else if(this.scrollBarWidthHasBeenAdded)f.marginBox(this.domNode,
{w:a.w-this.scrollBarWidth}),this.scrollBarWidthHasBeenAdded=!1;if(this.enableA11yKey){"number"==typeof this.currentSelection&&0<=this.currentSelection&&this.a11yClearSelection();this.a11yKeyHndlrConnect=f.connect(this.domNode,"onkeyup",this,this.a11yKeyHndlr);try{this.domNode.tabIndex=-1,this.domNode.focus()}catch(g){}}},a11yKeyHndlr:function(a){a&&(a.keyCode==f.keys.DOWN_ARROW&&!a.shiftKey||"Down"==a.keyIdentifier)?this.a11yMoveSelection(1):a&&(a.keyCode==f.keys.UP_ARROW&&!a.shiftKey||"Up"==a.keyIdentifier)?
this.a11yMoveSelection(-1):a&&(a.keyCode==f.keys.ENTER||"Enter"==a.keyIdentifier)&&!a.shiftKey&&this.a11yDoClickAction()},a11yDoClickAction:function(){var a=this.getChildren()[this.currentSelection];this.a11yIsForValidItem(a)&&(a.doClickAction(),this.close())},a11yIsForValidItem:function(a){if(!a)return!1;var b="none"===a.domNode.style.display;return a.isSeparator||a.disabled||b?!1:!0},a11yMoveSelection:function(a){var b=f.hitch(this,function(a,b){var e=!0;a>=b&&(e=!1);0>a&&(e=!1);return e});if("number"!=
typeof this.currentSelection)this.currentSelection=-1;var e=this.getChildren(),h=e.length;if(h){for(var g=this.currentSelection+a,k=b(g,h),j=e[g],j=this.a11yIsForValidItem(j);k&&!j;)g+=a,k=b(g,h),j=e[g],j=this.a11yIsForValidItem(j);if(j)this.currentSelection=g;j=e[this.currentSelection];j=this.a11yIsForValidItem(j);for(a=0;a<h;a++)j&&a==this.currentSelection?e[a].keySelect():e[a].keyDeselect()}},a11yClearSelection:function(){this.currentSelection=-1;var a=this.getChildren(),b=a.length;if(b)for(var e=
0;e<b;e++)a[e].keyDeselect()},close:function(){ws.widget.popup.close(this)},onClose:function(){this.a11yKeyHndlrConnect&&f.disconnect(this.a11yKeyHndlrConnect);f.forEach(this.getChildren(),function(a){a.onClose()})},bindDomNode:function(a,b,e){this.boundNode=a;this.boundParentWidget=b;e||this.connect(a,"onclick","openMyself")},openMyself:function(){if(this.isShowing())return this.close();this.open(this.boundNode,this.boundParentWidget)},getBorderBoxWidth:function(){if(this.isShowing())return f._getMarginSize(this.domNode).w;
this.domNode.style.position="absolute";this.domNode.style.left="-9999px";this.domNode.style.top="-9999px";this.domNode.style.display="";var a=f._getMarginSize(this.domNode).w;this.domNode.style.position="";this.domNode.style.left="";this.domNode.style.top="";this.domNode.style.display="none";return a},processKey:function(a){var b=f.filter(this.getChildren(),function(b){return b.shortCutKey&&b.shortCutKey.toLowerCase()==a.keyChar.toLowerCase()})[0];b&&(b._onClick(),f.stopEvent(a))},hideChild:function(a){f.query("#"+
this.id+" tbody tr:nth-child("+a+")").style("display","none")},showChild:function(a){f.query("#"+this.id+" tbody tr:nth-child("+a+")").style("display","")},setChecked:function(a,b){b&&this.setUnchecked();var e=this.getChildren();e&&f.forEach(a,function(a){e[a]&&e[a].setChecked(!0)})},setUnchecked:function(a){var b=this.getChildren();if(f.isArray(a))f.forEach(a,function(a){b[a]&&b[a].setChecked(!1)});else for(a=0;a<b.length;a++)b[a].setChecked(!1)}})})},"url:ws/suite/SgnInHstyDlg.html":'<div class="WSModalPane sgnInHstyDlg">\n\t<div class="WSModalPaneInner" data-dojo-attach-point="WSModalPaneInner">\n\t\t<img dojoattachpoint="wsCloseBtn" src="${spacer}" class="mainSprite wsCloseBtn" data-dojo-attach-event="onclick:hideDlg">\n\t\t<div class="sgnInHstyDlgFirstLogin" data-dojo-attach-point="sgnInHstyDlgFirstLogin">\n\t\t\t<div class="minHeight">\n\t\t\t\t<img src="${spacer}" class="mainLargeIcon histDlgAlertIcon">\n\t\t\t\t<div data-dojo-attach-point="dlg_title" class="dlg_title">\n\t\t\t\t\t<span data-dojo-attach-point="titleMsg"></span>\n\t\t\t\t</div>\n\t\t\t\t<div data-dojo-attach-point="contentMsg" class="contentMsg">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div data-dojo-attach-point="btnBar" class="btnBar">\n\t\t\t\t<a class="botLftLink" data-dojo-attach-point="learnMore" target="_blank">${SgnInHstyDlgLearnMore}</a>\n\t\t\t\t<span class="botLftLink " data-dojo-attach-point="allActivity">${SgnInHstyDlgSeeActivityLnk}</span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n',
"dijit/_WidgetBase":function(){define("dijit/_WidgetBase","require,dojo/_base/array,dojo/aspect,dojo/_base/config,dojo/_base/connect,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/has,dojo/_base/kernel,dojo/_base/lang,dojo/on,dojo/ready,dojo/Stateful,dojo/topic,dojo/_base/window,./Destroyable,./registry".split(","),function(g,j,f,a,b,e,h,k,l,n,m,q,s,o,u,p,v,w,z,x,A,B){function C(a){return function(b){k[b?"set":"remove"](this.domNode,
a,b);this._set(a,b)}}s.add("dijit-legacy-requires",!o.isAsync);s("dijit-legacy-requires")&&v(0,function(){g(["dijit/_base/manager"])});var I={};return e("dijit._WidgetBase",[w,A],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:C("lang"),dir:"",_setDirAttr:C("dir"),textDir:"","class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",
a)},attributeMap:{},_blankGif:a.blankGif||g.toUrl("dojo/resources/blank.gif"),postscript:function(a,b){this.create(a,b)},create:function(a,b){this.srcNodeRef=h.byId(b);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&"string"==typeof this.srcNodeRef.id)this.id=this.srcNodeRef.id;if(a)this.params=a,u.mixin(this,a);this.postMixInProperties();if(!this.id)this.id=B.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id;this.ownerDocument=this.ownerDocument||
(this.srcNodeRef?this.srcNodeRef.ownerDocument:x.doc);this.ownerDocumentBody=x.body(this.ownerDocument);B.add(this);this.buildRendering();var e;if(this.domNode){this._applyAttributes();var f=this.srcNodeRef;f&&f.parentNode&&this.domNode!==f&&(f.parentNode.replaceChild(this.domNode,f),e=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();e&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a=this.constructor,b=a._setterAttrs;if(!b){var b=a._setterAttrs=[],e;for(e in this.attributeMap)b.push(e);
var a=a.prototype,f;for(f in a)f in this.attributeMap||"_set"+f.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()})+"Attr"in a&&b.push(f)}var h={},g;for(g in this.params||{})h[g]=this[g];j.forEach(b,function(a){a in h||this[a]&&this.set(a,this[a])},this);for(g in h)this.set(g,h[g])},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode)this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div");if(this.baseClass){var a=this.baseClass.split(" ");
this.isLeftToRight()||(a=a.concat(j.map(a,function(a){return a+"Rtl"})));l.add(this.domNode,a)}},postCreate:function(){},startup:function(){if(!this._started)this._started=!0,j.forEach(this.getChildren(),function(a){if(!a._started&&!a._destroyed&&u.isFunction(a.startup))a.startup(),a._started=!0})},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function b(e){e.destroyRecursive?e.destroyRecursive(a):e.destroy&&e.destroy(a)}this._beingDestroyed=
!0;this.uninitialize();j.forEach(this._connects,u.hitch(this,"disconnect"));j.forEach(this._supportingWidgets,b);this.domNode&&j.forEach(B.findWidgets(this.domNode,this.containerNode),b);this.destroyRendering(a);B.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&(this.bgIframe.destroy(a),delete this.bgIframe);this.domNode&&(a?k.remove(this.domNode,"widgetId"):n.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||n.destroy(this.srcNodeRef),delete this.srcNodeRef)},
destroyDescendants:function(a){j.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;u.isObject(a)?q.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,b,e){e=3<=arguments.length?e:this.attributeMap[a];j.forEach(u.isArray(e)?e:[e],function(e){var f=this[e.node||e||"domNode"];switch(e.type||"attribute"){case "attribute":u.isFunction(b)&&
(b=u.hitch(this,b));e=e.attribute?e.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;f.tagName?k.set(f,e,b):f.set(e,b);break;case "innerText":f.innerHTML="";f.appendChild(this.ownerDocument.createTextNode(b));break;case "innerHTML":f.innerHTML=b;break;case "class":l.replace(f,b,this[a])}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this[a]},set:function(a,b){if("object"===typeof a){for(var e in a)this.set(e,a[e]);return this}e=this._getAttrNames(a);var f=
this[e.s];if(u.isFunction(f))var h=f.apply(this,Array.prototype.slice.call(arguments,1));else{var f=this.focusNode&&!u.isFunction(this.focusNode)?"focusNode":"domNode",g=this[f].tagName,k;if(!(k=I[g])){k=this[f];var j={},l;for(l in k)j[l.toLowerCase()]=!0;k=I[g]=j}l=a in this.attributeMap?this.attributeMap[a]:e.s in this?this[e.s]:e.l in k&&"function"!=typeof b||/^aria-|^data-|^role$/.test(a)?f:null;null!=l&&this._attrToDom(a,b,l);this._set(a,b)}return h||this},_attrPairNames:{},_getAttrNames:function(a){var b=
this._attrPairNames;if(b[a])return b[a];var e=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+e+"Attr",g:"_get"+e+"Attr",l:e.toLowerCase()}},_set:function(a,b){var e=this[a];this[a]=b;this._created&&b!==e&&(this._watchCallbacks&&this._watchCallbacks(a,e,b),this.emit("attrmodified-"+a,{detail:{prevValue:e,newValue:b}}))},emit:function(a,b,e){b=b||{};if(void 0===b.bubbles)b.bubbles=!0;if(void 0===b.cancelable)b.cancelable=!0;if(!b.detail)b.detail=
{};b.detail.widget=this;var f,h=this["on"+a];h&&(f=h.apply(this,e?e:[b]));this._started&&!this._beingDestroyed&&p.emit(this.domNode,a.toLowerCase(),b);return f},on:function(a,b){var e=this._onMap(a);return e?f.after(this,e,b,!0):this.own(p(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,e=b._onMap;if(!e){var e=b._onMap={},f;for(f in b.prototype)/^on/.test(f)&&(e[f.replace(/^on/,"").toLowerCase()]=f)}return e["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+
this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?B.findWidgets(this.containerNode):[]},getParent:function(){return B.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,e,f){return this.own(b.connect(a,e,this,f))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(z.subscribe(a,u.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir:m.isBodyLtr(this.ownerDocument)},
isFocusable:function(){return this.focus&&"none"!=q.get(this.domNode,"display")},placeAt:function(a,b){var e=!a.tagName&&B.byId(a);e&&e.addChild&&(!b||"number"===typeof b)?e.addChild(this,b):(e=e?e.containerNode&&!/after|before|replace/.test(b||"")?e.containerNode:e.domNode:h.byId(a,this.ownerDocument),n.place(this.domNode,e,b),!this._started&&(this.getParent()||{})._started&&this.startup());return this},getTextDir:function(a,b){return b},applyTextDir:function(){},defer:function(a,b){var e=setTimeout(u.hitch(this,
function(){e=null;this._destroyed||u.hitch(this,a)()}),b||0);return{remove:function(){e&&(clearTimeout(e),e=null);return null}}}})})},"ws/suite/Navigation":function(){define("ws/suite/Navigation","dojo/_base/declare,dojo/text!ws/suite/Navigation.html,dojo/text!ws/suite/Navigation.css,dojo,dijit,dojo/window,dojo/request/script,dijit/_Widget,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,ws/Spinner,ws/mail/folderName,ws/widget/WSMenu,ws/widget/WSMenuItem,ws/widget/WSMenuSeparator,ws/address/PeopleApp,ws/calendar/EventsApp,ws/calendar/TodoApp,dijit/layout/BorderContainer,dijit/layout/StackContainer,ws/widget/DropDownButton,ws/widget/WSSplitContainer,ws/widget/Checkbox,ws/widget/Button,ws/browser,ws/dom,ws/html,ws/io,ws/lang,ws/sound,ws/string,ws/widget/Dialogs,ws/widget/Pane,ws/widget/util,ws/presence".split(","),
function(g,j,f,a,b,e,h,k,l,n,m,q,s,o,u){var p=g(null,{constructor:function(a,b,e){this.Scope=a;this.SearchString=b;this.Label=e}});return g([k,l,n],{templateString:j,css:{templateString:f},_earlyTemplatedStartup:!0,searchScope:"alltext",searchFieldColor:"#000",AOLQuotaMailboxSwitched:!Settings.ViewNewOld,SEARCH_QUERY_SAVE_LIMIT:5,APP_MAIL:0,APP_CALENDAR:1,APP_CONTACTS:2,APP_TODAY:3,APP_SETTINGS:5,APP_ADDCALENDAR:6,APP_EDITCALENDAR:7,APP_TODOS:8,APP_MANILLA:9,DRAGTYPES_MAIL:[],DRAGTYPES_CALENDAR:[0,
1,2],DRAGTYPES_CONTACTS:[],FOLDERS_NO_COUNT:{Sent:!0,IM:!0,OldMail:!0,Deleted:!0},FOLDERS_NO_BOLD:{Sent:!0,IM:!0,OldMail:!0,Deleted:!0},folderMaxLen:q.MaxLength,recentSearch:null,spinner:null,aimAutoStart:!1,aimStart:!1,scrollBarWidth:0,isMini:!1,oldNavWidth:180,minFolderHeight:125,miniSearchDat:{oldSi:null,app:null},navCollapserHidden:!1,firstResize:!0,manillaCountReq:1,manillaTimer:null,startup:function(){this.aim=this.selectedApp=null;this.folderNodes={};this.folderConnects=[];this.mnFolderNodes=
{};this.mnFolderConnects=[];this.accountNodes={};this.dropTargets={};if(!Settings.IsAuthUser)Config.ManillaEnabled=!1;this.disableHover=!1;this.showCalendarIndexCB=null;this.navItemHeight=a._getMarginSize(this.myFoldersItem).h;var b="";if(!Config.EnableAIMPanel)this.composeIMBtn.style.display="none",b="three";if(!Config.EnableAIMPanel||!Config.ShowMobileIcon)this.composeSMSBtn.style.display="none",b=""==b?"three":"two";b&&a.addClass(this.controlsPaneBtns,b);a.subscribe("WSDeferredInit",a.hitch(this,
function(){ws.bubbleConfig.showPinBubble("NewImTextBtns",this.controlsPaneBtns,!0);ws.bubbleConfig.showPinBubble("MiniNavNub",null,!0);ws.bubbleConfig.showPinBubble("MiniMods",null,!0);Config.ManillaEnabled&&ws.bubbleConfig.showPinBubble("Manilla1",this.manillaItem,!0);this.updateManillaCount()}));b="<span>("+(a.isMac?Config.Strings.OptKey:Config.Strings.AltKey)+" "+Config.Strings.KeyWriteMail+")</span>";a.attr(this.composeBtn,"data-title",ws.string.substituteParams(Config.Strings.NavWriteMailTip,
b));a.attr(a.query(".cpNavItem",this.navToolbar)[0],"data-title",ws.string.substituteParams(Config.Strings.NavWriteMailTip,b));ws.html.setShowing(this.todayItemCntr,Config.EnableTodayCurtain);ws.html.setShowing(this.mnToday,Config.EnableTodayCurtain);a.connect(this.todayItem,"onclick",a.hitch(this,"selectApp",this.APP_TODAY));a.connect(this.calendarItem,"onclick",a.hitch(this,"selectApp",this.APP_CALENDAR));a.connect(this.calendarItem,"onmouseover",a.hitch(this,"onMouseOverItem",this.calendarItem));
a.connect(this.calendarItem,"onmouseout",a.hitch(this,"onMouseOutItem",this.calendarItem));a.connect(this.contactsItem,"onclick",a.hitch(this,"displayContactListView",this.APP_CONTACTS));a.connect(this.contactsItem,"onmouseover",a.hitch(this,"onMouseOverItem",this.contactsItem));a.connect(this.contactsItem,"onmouseout",a.hitch(this,"onMouseOutItem",this.contactsItem));a.connect(this.myFoldersItem,"onmouseover",a.hitch(this,"onMouseOverItem",this.myFoldersItem));a.connect(this.myFoldersItem,"onmouseout",
a.hitch(this,"onMouseOutItem",this.myFoldersItem));a.connect(this.todayItem,"onmouseover",a.hitch(this,"onMouseOverItem",this.todayItem));a.connect(this.todayItem,"onmouseout",a.hitch(this,"onMouseOutItem",this.todayItem));a.connect(this.manillaItem,"onclick",a.hitch(this,"selectApp",this.APP_MANILLA));a.connect(this.manillaItem,"onmouseover",a.hitch(this,"onMouseOverItem",this.manillaItem));a.connect(this.manillaItem,"onmouseout",a.hitch(this,"onMouseOutItem",this.manillaItem));a.query(".navCollapser").connect("onclick",
a.hitch(this,"toggleNav","nubClick"));a.query(".navCollapser").connect("onmouseover",a.hitch(this,"onMouseOverNC"));a.query(".navCollapser").connect("onmouseout",a.hitch(this,"onMouseOutNC"));a.subscribe("/dnd/start",this,function(){this.disableHover=!0});a.subscribe("/dnd/drop",this,function(){this.disableHover=!1});a.subscribe("/dnd/cancel",this,function(){this.disableHover=!1});a.subscribe("dragStart",this,function(a){if(a&&a.source&&"message"==a.source.type)this.dragMessageStarted=this.disableHover=
!0});a.subscribe("dragEnd",this,function(a){if(a&&a.source&&"message"==a.source.type)this.disableHover=!1,window.clearTimeout(this.autoScrollTO),this.dragMessageStarted=this.autoScrollStarted=!1});a.subscribe("ws_view-selectChild",this,"hiliteCurrentApp");if(!Config.EnableAIMPanel||"K"==ws.UserContext.ParentalControls||"Y"==ws.UserContext.ParentalControls)a.query(".navToolbar .aimApp",this.domNode).style("display","none"),a.query(".appsToolbar",this.appsPane.domNode).addClass("noAimApp"),this.apAimBtn.style.display=
"none";else{if("True"==Settings.ChatAutoSignOn)a.subscribe("WSDeferredInit",this,"AIMSignIn"),this.aimAutoStart=!0;a.subscribe("aimSignIn",this,"AIMSignIn");a.subscribe("aimError",this,"AIMError")}this.defineMenus();Settings.FoldersVisible&&!(ws.browser.win2k&&6==a.isIE)&&setTimeout(a.hitch(this,"showMyFolders",!0,!0),0);a.connect(this.searchField,"onfocus",this,"onFocusSearchField");a.connect(this.searchField,"onblur",this,"onBlurSearchField");a.subscribe("SendConf/show",a.hitch(this,"updateNavCollapser",
!1));a.subscribe("SendConf/hide",a.hitch(this,"updateNavCollapser",!0));a.subscribe("Settings/show",this,"onSettingsShow");a.subscribe("Settings/hide",this,"onSettingsHide");a.subscribe("SettingsChanged/Chat",this,"onChatSettings");a.subscribe("SettingsChanged/Manilla",this,"onManillaSettings");this.decodeRecentSearchSetting();this.scrollBarWidth=ws.WebSuite.scrollbarWidth;this.subscribe("ListSpacingResize","resize");this.subscribe("toolbarLayoutUpdate","resize");this.splitContainer.addSizerFunc(a.hitch(this,
"splitSizer"));this.splitContainer.addClickFunc(a.hitch(this,"splitClick"));a.query(".dijitSplitContainerSizerV",this.domNode)[0].title=Config.Strings.SplitterTipClose;this.connect(this.appsPane,"layout","appPaneResize");this.aimAutoSignInBtn.setLabel(Config.Strings.ChatAutoSignOn2);this.aimAutoSignInBtn.setChecked("True"==Settings.ChatAutoSignOn);this.aimLoading.hide();if(!Config.EnableIMServices)this.fbPromo.style.display="none";this.initMiniNav();if(Settings.MiniNavMode)this.isMini=!0,a.style(this.navToolbar,
"display","block"),a.style(this.splitContainer.domNode,"display","none"),a.style(this.domNode,"width","42px"),a.query("#navCollapser div").removeClass("iconCollapse").addClass("iconExpand"),ws.reporting.reportDLAction("Mail-LeftNav-collapsedOnLoad");this.onManillaSettings();this.updateTempFolders();this.selectAppById(Settings.NavAppSelected,!0);a.subscribe("WebSuite/CloseNotification",this,"updateCollapserNot");a.subscribe("Theme/Change",this,"restartManilla")},appPaneResize:function(){var b=Math.floor(a._getMarginSize(this.appsPane.domNode).h);
if(0!=b&&this.appsPane.isShowing()){var e=1,e=30>=b?0:230>=b?1:b-30;0==e?(a.query(".appCurr",this.apBtns).removeClass("appCurr"),a.query(".dijitSplitContainerSizerV .thumb",this.domNode).addClass("openThumb"),a.query(".dijitSplitContainerSizerV",this.domNode)[0].title=Config.Strings.SplitterTipOpen):(this.selectAppById(this.currentApp,!0),a.query(".dijitSplitContainerSizerV .thumb",this.domNode).removeClass("openThumb"),a.query(".dijitSplitContainerSizerV",this.domNode)[0].title=Config.Strings.SplitterTipClose);
if(ws.WebSuite.firstResize&&e!=Settings.NavAppPaneSize)Settings.NavAppPaneSize=e,this.appResizeTimer&&clearTimeout(this.appResizeTimer),this.appResizeTimer=setTimeout(a.hitch(this,"_appPaneResize",e),2E3)}},_appPaneResize:function(a){ws.settings.saveSoon({NavAppPaneSize:Math.floor(a)})},splitSizer:function(a,b){var e=this.coords.h,f=e-30-9,e=e-230-9,h=this.minFolderHeight+30;0==Settings.NavAppPaneSize?b>f-20||e<=h?b=f:b<h?b=h:b>e&&(b=e):b<h?b=h:b>e+20?b=f:b>e&&(b=e);return b},splitClick:function(){0==
Settings.NavAppPaneSize?this.showAppPane():this.hideAppPane()},resizeNavItem:function(){if(6==a.isIE){var b=a.contentBox(this.domNode).w-20;0>b&&(b=0);a.marginBox(this.myFoldersNode,{w:b});a.marginBox(this.myCalendarsNode,{w:b});a.marginBox(this.subCalendarsNode,{w:b})}},initMiniNav:function(){a.query(".mnToday",this.navToolbar).connect("onclick",a.hitch(this,"selectApp",this.APP_TODAY));a.query(".mnFolders",this.navToolbar).connect("onclick",this,"flyoutFolders");a.query(".contactApp",this.navToolbar).connect("onclick",
a.hitch(this,"flyoutApp","contactApp"));a.query(".eventApp",this.navToolbar).connect("onclick",a.hitch(this,"flyoutApp","eventApp"));a.query(".aimApp",this.navToolbar).connect("onclick",a.hitch(this,"flyoutApp","aimApp"));a.query(".todoApp",this.navToolbar).connect("onclick",a.hitch(this,"flyoutApp","todoApp"));a.query(".mnScrollCont",this.navToolbar).connect("onmouseover",a.hitch(this,"onMouseOverMn"));a.query(".mnScrollCont",this.navToolbar).connect("onmouseout",a.hitch(this,"onMouseOutMn"));a.query(".mnScUp",
this.navToolbar).connect("onmouseover",a.hitch(this,"onMouseOverMn"));a.query(".mnScUp",this.navToolbar).connect("onmouseout",a.hitch(this,"onMouseOutMn"));a.query(".mnScDn",this.navToolbar).connect("onmouseover",a.hitch(this,"onMouseOverMn"));a.query(".mnScDn",this.navToolbar).connect("onmouseout",a.hitch(this,"onMouseOutMn"));a.query("#contactApp .appTitleBar",this.appStack.domNode).connect("onmouseover",a.hitch(this,"onMouseOverAT"));a.query("#contactApp .appTitleBar",this.appStack.domNode).connect("onmouseout",
a.hitch(this,"onMouseOutAT"));a.query("#eventApp .appTitleBar",this.appStack.domNode).connect("onmouseover",a.hitch(this,"onMouseOverAT"));a.query("#eventApp .appTitleBar",this.appStack.domNode).connect("onmouseout",a.hitch(this,"onMouseOutAT"));a.connect(this.mnContacts,"onclick",a.hitch(this,"displayContactListView",this.APP_CONTACTS));a.connect(this.mnCalendar,"onclick",a.hitch(this,"selectApp",this.APP_CALENDAR));a.connect(this.mnManilla,"onclick",a.hitch(this,"selectApp",this.APP_MANILLA));this.mnSearch=
a.create("div",{className:"mnSearch"},a.body());var b=a.create("div",{className:"searchInputDiv"},this.mnSearch);this.mnSearchField=a.create("input",{className:"wsInput searchInput",type:"text"},b);a.connect(this.mnSearchField,"onkeyup",this,"onKeyPressSearchField");b=a.create("div",{className:"mainSprite wsTinyArrow"},this.mnSearch);a.connect(b,"onclick",this,"openSearchMenu");b=a.create("div",{className:"mainSprite mnSearchGo"},this.mnSearch);a.connect(b,"onclick",this,"mnSearchGo");a.connect(this.mnSearchField,
"onfocus",this,"onFocusSearchField");a.connect(this.mnSearchField,"onblur",this,"onBlurSearchField");(b=a.isIE||a.isWebKit?a.body():a.doc)&&a.connect(b,"onmousedown",this,"onDocumentMouseDown");this.connect(this.navToolbar,a.isFF?"DOMMouseScroll":"onmousewheel",this.mnHandleWheel)},toggleNav:function(e){if(b.byId("ws_navsplitter")){var f=ws.WebSuite.getCurrentViewId(),h=b.byId(f);"calendarView"==f&&h.selectedViewId==h.VIEW_UPCOMING&&(h=h.views[h.VIEW_UPCOMING]);f=h?h.searchInfoPane:null;if(this.isMini){this.isMini=
!1;var g=this.mnSearchField.value;this.restoreApp();this.mnSearchClose();a.style(this.navToolbar,"display","none");a.style(this.splitContainer.domNode,"display","block");a.style(this.domNode,"width",this.oldNavWidth+"px");a.query("#navCollapser div").removeClass("iconExpand").addClass("iconCollapse");ws.settings.saveSoon({MiniNavMode:!1});Settings.MiniNavMode=!1;if(h&&f&&f.isShowing())this.searchActive(!1,f),this.searchField.focus(),this.searchField.value=g;ws.reporting.reportDLAction("Mail-LeftNav-expand-"+
(e||""))}else{this.isMini=!0;g=this.searchField.value;this.oldNavWidth=a._getMarginSize(this.domNode).w;a.style(this.navToolbar,"display","block");a.style(this.splitContainer.domNode,"display","none");a.style(this.domNode,"width","42px");a.query("#navCollapser div").removeClass("iconCollapse").addClass("iconExpand");ws.settings.saveSoon({MiniNavMode:!0});Settings.MiniNavMode=!0;var k=this.shouldMiniSearchCloseOnNavToggle();h&&f&&f.isShowing()&&!k?(this.searchActive(!0,f),this.mnSearchField.value=
g):k?this.mnSearchClose():this.searchActive(!1);ws.reporting.reportDLAction("Mail-LeftNav-collapse-"+(e||""))}this.onResized();ws.WebSuite.resize();this.resetMnScroll();this.searchAreaPane.domNode.scrollIntoView();if(a.isFF||a.isWebKit)a.style(a.body(),"position","absolute"),setTimeout(function(){a.style(a.body(),"position","")},100)}},shouldMiniSearchCloseOnNavToggle:function(){specialCloseNeeded=0;var a=b.byId("AddressList"),e=ws.WebSuite.getCurrentViewId();if(a&&"AddressList"==e&&("editContactWidget"==
a.selectedView||"contactDetails"==a.selectedView||"distributionListWidget"==a.selectedView))specialCloseNeeded=1;return specialCloseNeeded},onDocumentMouseDown:function(a){if(this.isMini){var e=ws.WebSuite.getCurrentViewId(),f=b.byId(e),h=this.searchMenu&&this.searchMenu.domNode&&ws.html.overElement(this.searchMenu.domNode,a),g=f&&f.searchInfoPane&&f.searchInfoPane.isShowing();"calendarView"==e&&f&&f.selectedViewId==f.VIEW_UPCOMING&&(g=f.views[f.VIEW_UPCOMING].searchInfoPane.isShowing());if(ws.html.overElement(this.mnSearch,
a)||ws.html.overElement(this.shNavItem,a)||h||g)return;a=this.mnSearchField;(""==a.style.color||void 0==a.value||""==a.value)&&this.mnSearchClose()}ws.widget.hideInstatip()},onMouseOverNC:function(){var b=a.byId("navCollapser");b&&ws.widget.showInstatip(b,{side:"bottom",label:this.isMini?Config.Strings.MiniNavExpand:Config.Strings.MiniNavCollapse})},onMouseOutNC:function(){var b=a.byId("navCollapser");b&&ws.widget.hideInstatip(b)},onMouseOverMn:function(){var b=a.query(".mnScrollCont",this.navToolbar)[0];
b.scrollHeight>b.clientHeight&&(a.query(".mnScUp",this.navToolbar).style("display","block"),a.query(".mnScDn",this.navToolbar).style("display","block"))},onMouseOutMn:function(){var b=a.query(".mnScrollCont",this.navToolbar)[0];b.scrollHeight>b.clientHeight&&(a.query(".mnScUp",this.navToolbar).style("display",""),a.query(".mnScDn",this.navToolbar).style("display",""))},onmnScrollUp:function(b){var e=this;a.hasClass(this.mnSearch,"mnSearchActive")||this.mnSearchClose();this.closeFlyout();a.stopEvent(b);
if(this.mnScrollInt)this.onmnScrollEnd();this.mnScrollInt=setInterval(function(){var b=a.query(".mnScrollCont")[0];b.scrollTop-=10;b.className=b.className;e.positionConnector();e.positionFolderConnector(e.mnFolders)},50)},onmnScrollDn:function(b){var e=this;a.hasClass(this.mnSearch,"mnSearchActive")||this.mnSearchClose();this.closeFlyout();a.stopEvent(b);if(this.mnScrollInt)this.onmnScrollEnd();this.mnScrollInt=setInterval(function(){var b=a.query(".mnScrollCont")[0];b.scrollTop+=10;b.className=b.className;
e.positionConnector();e.positionFolderConnector(e.mnFolders)},50)},onmnScrollEnd:function(){clearInterval(this.mnScrollInt);this.mnScrollInt=null},closeFlyout:function(){if(this.flyout)this.flyout.style.display="none",a.query(".navAppCurr",this.domNode).removeClass("navAppCurr")},mnHandleWheel:function(b){a.hasClass(this.mnSearch,"mnSearchActive")||this.mnSearchClose();this.closeFlyout();if(!b)b=window.event;a.stopEvent(b);a.isFF?b.axis==b.VERTICAL_AXIS&&(a.query(".mnScrollCont",this.navToolbar)[0].scrollTop+=
20*(b.detail/3)):a.query(".mnScrollCont",this.navToolbar)[0].scrollTop+=-20*(b.wheelDelta/120);this.positionFolderConnector(this.mnFolders)},resetMnScroll:function(){a.query(".mnScrollCont")[0].scrollTop=0},addMNFolder:function(b,e,f){var e=a.attr(b,"theFN"),h=this.mailModel.getFolderByName(e),g="";if(h){var k=Config.ShowFolderMessageCount&&!this.FOLDERS_NO_COUNT[h.type],j="Drafts"==h.type?h.count:h.unseenCount,g=ws.string.escapeXml(h.displayName),g=g.replace(/ /gm,"&nbsp;"),f=a.create("div",{className:"navItem"},
f.myNode);a.attr(f,"data-title",g);a.create("div",{className:b.className},f);a.create("div",{className:"mnUnseen",innerHTML:99<j?"99+":j,theCount:j,style:{display:k&&0<j?"block":"none"}},f);this.mnFolderConnects.push(a.connect(f,"onclick",a.hitch(this,"displayFolder",e,ws.UserContext.ActiveScreenName)));this.mnFolderConnects.push(a.connect(f,"onmouseenter",a.hitch(this,"onmouseoverMN",{target:f},"navItem","mnSysFolders")));this.mnFolderConnects.push(a.connect(f,"onmouseleave",a.hitch(this,"onmouseoutMN",
{target:f},"navItem","mnSysFolders")));this.mnFolderNodes[e]=f}},addMNMyFolder:function(b,e,f){b=a.attr(b,"theFN");if((e=this.mailModel.getFolderByName(b))&&Config.ShowFolderMessageCount&&0<e.unseenCount)this.showMNFoldersUnseen+=e.unseenCount;this.mnFolderNodes[b]=f.myNode},updateMiniNavFolders:function(){var b=this.mnScrollCont.scrollTop;a.forEach(this.mnFolderConnects,a.hitch(this,function(b){a.disconnect(b)}));for(var e in this.mnFolderNodes)if(this.mnFolderNodes[e]!=this.mnSysFolders&&this.mnFolderNodes[e]!=
this.mnFolders)e.theFN=null,a.destroy(this.mnFolderNodes[e]),delete this.mnFolderNodes[e];this.mnFolderConnects=[];this.mnFolderNodes={};this.showMNFoldersUnseen=0;this.mnSysFolders.innerHTML="";e=a.query(".navItem .icon",this.sysFoldersNode);e.myNode=this.mnSysFolders;e.forEach(this.addMNFolder,this);e=a.query(".navItem .icon",this.myFoldersNode);e.myNode=this.mnFolders;e.forEach(this.addMNMyFolder,this);a.query(".mnUnseen",this.mnFolders).style("display",0<this.showMNFoldersUnseen?"block":"none");
if(0<this.showMNFoldersUnseen)e=a.query(".mnUnseen",this.mnFolders)[0],e.innerHTML=99<this.showMNFoldersUnseen?"99+":this.showMNFoldersUnseen,a.attr(e,"theCount",this.showMNFoldersUnseen);this.hiliteCurrentApp();setTimeout(function(){ws.WebSuite.Navigation.mnScrollCont.scrollTop=b},100)},mnSearchClose:function(){this.mnSearch.style.display="none";a.removeClass(this.shNavItem,"mnSearchSelected")},miniNavSearch:function(e){var f=1;ws.widget.hideInstatip();var h=a.hasClass(this.mnSearch,"mnSearchActive"),
g=ws.WebSuite.settingsWidget&&ws.WebSuite.settingsWidget.isShowing(),k=b.byId("AddressList"),j=ws.WebSuite.getCurrentViewId();if(k&&("contactDetails"==k.selectedView||"distributionListWidget"==k.selectedView)&&"AddressList"==j&&"boolean"==typeof e&&e)this.mnSearchClose(),f=0;h?a.removeClass(this.shNavItem,"mnSearchSelected"):"none"==this.mnSearch.style.display&&!g&&f?(this.resetMnScroll(),f=a.position(this.shNavItem),mnSearchTop=f.y,a.marginBox(this.mnSearch,{l:f.x-5+f.w,t:mnSearchTop}),this.mnSearch.style.display=
"block","boolean"==typeof e&&e||a.addClass(this.shNavItem,"mnSearchSelected"),this.mnSearchField.focus()):this.mnSearchClose()},getSearchWidget:function(){return this.isMini?this.mnSearchField:this.searchField},onResized:function(){this.inherited(arguments);var b=a._getMarginSize(this.domNode),e=a._getMarginSize(this.domNode).w;if(this.isMini){if(!this.coords)return;var b=this.mnScrollCont.scrollTop,f=a._getMarginSize(this.mnMailDiv).h,h=a._getMarginSize(this.mnAppsDiv).h,g=this.coords.h-40;a.marginBox(this.mnScrollCont,
{h:g});this.mnScrollCont.scrollTop=0;f+h>g?a.style(this.mnAppsDiv,{position:"relative"}):a.style(this.mnAppsDiv,{position:""});this.mnScrollCont.scrollTop=b}else{var k=this.mainPane.domNode.scrollHeight>this.mainPane.domNode.clientHeight?ws.WebSuite.scrollbarWidth:0,f=b.h-this.minFolderHeight-30-this.splitContainer.sizerWidth;230>f&&(f=30);h=230;0==Settings.NavAppPaneSize?h=30:1<Settings.NavAppPaneSize&&(h=Settings.NavAppPaneSize+30);!this.firstResize&&h>f&&(h=f);this.appsPane.sizeShare=h;this.layoutWidget.sizeShare=
b.h-h-this.splitContainer.sizerWidth;this.splitContainer.resize(b);this.searchArea.style.width=Math.max(e-20-k,0)+"px";this.searchField.style.width=Math.max(e-75-k,0)+"px";this.aimSignInBtn.sizeMyself();this.resizeAimSignin();0==a.query(".navTempNode",this.sysFolderNode).length&&(a.query(".text span",this.sysFolderNode).forEach(function(b){var f=14;b.nextSibling&&(f=a._getMarginSize(b.nextSibling).w+10);b.style.width=Math.max(e-f-k-58,0)+"px"}),a.query(".text span",this.myFoldersContainer).forEach(function(b){var f=
14;b.nextSibling&&(f=a._getMarginSize(b.nextSibling).w+10);b.style.width=Math.max(e-f-k-58,0)+"px"}))}window.setTimeout(a.hitch(this,function(){this.positionConnector()}),10);if(this.firstResize)this.firstResize=!1;a.byId("navCollapser").style.left=e+1+"px"},selectApp:function(b){if(!(b==this.selectedApp&&b!=this.APP_MANILLA)){(this.selectedApp==this.APP_CALENDAR||this.selectedApp==this.APP_ADDCALENDAR||this.selectedApp==this.APP_EDITCALENDAR)&&b!=this.APP_ADDCALENDAR&&b!=this.APP_EDITCALENDAR&&b!=
this.APP_TODOS&&this.showCalendar(!1);this.selectedApp==this.APP_MANILLA&&b!=this.APP_MANILLA&&setTimeout(a.hitch(this,"updateManillaCount"),0);switch(b){case this.APP_CALENDAR:this.searchActive(!1);this.showCalendar(!0);break;case this.APP_CONTACTS:this.showContacts();break;case this.APP_ADDCALENDAR:this.showAddCalendar();break;case this.APP_TODAY:this.showToday();break;case this.APP_MANILLA:ws.bubbleConfig.hidePinBubble("Manilla1",!0),ws.bubbleConfig.saveAsSeen("Manilla1"),ws.reporting.report("Bill Manager",
"Mail"),this.showManilla()}this.onResized()}},hiliteCurrentApp:function(){var e=ws.WebSuite.getCurrentViewId();if(e){var f=null,h=null,g=!1;switch(e){case "AddressList":f=this.contactsItem;h=this.mnContacts;this.selectedApp=this.APP_CONTACTS;this.hideCalendar();break;case "calendarView":f=this.calendarItem;h=this.mnCalendar;this.selectedApp=this.APP_CALENDAR;break;case "addCalendar":case "editCalendar":case "subscribeCalendar":f=this.calendarItem;h=this.mnCalendar;this.selectedApp=this.APP_CALENDAR;
break;case "todayPage":g=!0;f=this.todayItem;h=a.query(".mnToday",this.navToolbar)[0];this.selectedApp=this.APP_TODAY;this.clearSearchField();this.searchActive(!1);break;case "manilla":f=this.manillaItem;h=this.mnManilla;this.selectedApp=this.APP_MANILLA;break;case "composeMessage":this.mnSearchClose();default:if(this.mailModel)if(this._folderListUpdated)f=this.folderNodes[this.mailModel.currentFolder],h=this.mnFolderNodes[this.mailModel.currentFolder];else if(!this.folderListChangedCB)this.folderListChangedCB=
a.hitch(this,function(){this.hiliteCurrentApp();this.folderListChangedCB=null});this.selectedApp=this.APP_MAIL;this.hideCalendar()}(e=b.byId(e))&&e.notification&&e.notification.isShowing()?a.query(".navCollapser").addClass("navColNot"):a.query(".navCollapser").removeClass("navColNot");this.currentHiliteNode&&a.removeClass(this.currentHiliteNode,"navItemCurrent");a.query(".navItemCurrent",this.navToolbar).removeClass("navItemCurrent");this.closeFlyoutFolders();this.folderFlyout&&"none"==this.folderFlyout.style.display&&
a.removeClass(this.mnFolders,"folderBtnSelected");if(e&&e.searchInfoPane&&e.searchInfoPane.isShowing())a.addClass(this.shNavItem,"navItemCurrent shNavItemCurrent");else{a.removeClass(this.shNavItem,"shNavItemCurrent");if(f)a.addClass(f,"navItemCurrent"),this.currentHiliteNode=f;h&&a.addClass(h,"navItemCurrent")}this.updateNavCollapser(!g)}},setMailModel:function(b){this.mailModel=b;a.connect(this.mailModel,"folderListChanged",this,"updateFolderList");a.connect(this.mailModel,"folderCountUpdated",
this,"updateFolderCount");a.connect(this.mailModel,"modelUpdated",this,"hiliteCurrentApp");a.connect(this.mailModel,"infoUpdated",this,"onMailInfoUpdated");a.connect(this.mailModel,"modelUpdated",a.hitch(this,"modelUpdated","mail"));a.connect(this.mailModel,"newMailReceived",this,"playNewMailSound");a.connect(this.mailModel.activeCachedList,"newMailReceived",this,"playNewMailSound");this.updateFolderList();this.onMailInfoUpdated();this.mailModel.isLoading()||this.maybePlayYgmSound()},updateTempFolders:function(){if(Settings.ViewNewOld){var b=
a.query(".navTempNode",this.sysFoldersNode);a.query(".text span",b[0]).innerHTML(Config.Strings.Folder_NewMail);var e=b[0].cloneNode(!0);b[0].parentNode.insertBefore(e,b[1]);a.query(".text span",e).innerHTML(Config.Strings.Folder_OldMail);a.query(".text span",b[4]).innerHTML(Config.Strings.Folder_Deleted_Traditional)}},countMNunread:function(b){if((b=this.mailModel.getFolderByName(a.attr(b,"theFN")))&&Config.ShowFolderMessageCount&&0<b.unseenCount)this.showMNFoldersUnseen+=b.unseenCount},updateFolderCount:function(b){var e=
this.folderNodes[b.name],f=b.type,h="Drafts"==f?b.count:b.unseenCount,g=0<h?h:"";a.query(".unseen",e).innerHTML(""+g).style("display",0<h?"block":"none");a.toggleClass(e,"hasUnseen",0<h&&!this.FOLDERS_NO_BOLD[f]);if(!Settings.HasAggregatedAccount&&("Inbox"==f||"NewMail"==f)||"AllInboxes"==f)ws.browser.setWindowTitle(Config.Strings.MessageListTitle+(0<h?" ("+g+")":""));e=a.query(".mnUnseen",this.mnFolders)[0];if("Personal"==f)this.showMNFoldersUnseen=0,a.query(".navItem .icon",this.myFoldersNode).forEach(this.countMNunread,
this),h=this.showMNFoldersUnseen,a.query(".mnUnseen",this.mnFolders).style("display",0<h?"block":"none"),e.innerHTML=99<h?"99+":0<h?h:"",a.attr(e,"theCount",h);else if(e=a.query(".mnUnseen",this.mnFolderNodes[b.name])[0])e.innerHTML=99<h?"99+":g,a.attr(e,"theCount",h),a.style(e,"display",0<h?"block":"none")},updateFolderList:function(){6==a.isIE&&ws.browser.win2k?setTimeout(a.hitch(this,"_updateFolderList"),0):this._updateFolderList()},_updateFolderList:function(){var b=ws.UserContext.ActiveScreenName,
f=this.mailModel.folders,h=f?f.length:0,g=["Personal","Saved","AutoSavedRead","AutoSavedSent","SavedIMs"],k=this.sysFoldersNode,j=this.myFoldersNode,l={},m="",q=null,s=!1,n=!1,p=!1;0<h&&a.query(".navTempNode",k).remove();a.forEach(this.folderConnects,a.hitch(this,function(b){a.disconnect(b)}));for(var o in this.folderNodes)a.destroy(this.folderNodes[o]),delete this.folderNodes[o];this.folderNodes={};this.folderConnects=[];for(var u=0;u<h;u++){var G=!1;if(o=f[u]){var F=o.type,D=o.name;!p&&"Aggregated"==
o.type&&(p=!0);var H=!1;Config.ShowFolderMessageCount&&(H=!0);var N="Spam"==F,M="Personal"==F&&!1==o.permanent,E=this.folderNodes[D];if(D==Config.DeletedItemsFolderName&&this.AOLQuotaMailboxSwitched==Settings.ViewNewOld)E&&(a.destroy(E),E=null,delete this.folderNodes[D],delete this.dropTargets[D]),this.AOLQuotaMailboxSwitched=!Settings.ViewNewOld;if(!E){E=document.createElement("div");E.className="navItem";this.folderConnects.push(a.connect(E,"onclick",a.hitch(this,"displayFolder",D,b)));this.folderConnects.push(a.connect(E,
"onmouseover",a.hitch(this,"onMouseOverItem",E)));this.folderConnects.push(a.connect(E,"onmouseout",a.hitch(this,"onMouseOutItem",E)));var K=-1==a.indexOf(g,F)?k:j;if(K==k){if("AllInboxes"==F)a.place(E,K,"first"),G=!0;else if(!Settings.HasAggregatedAccount&&("Inbox"==F||"NewMail"==F))a.place(E,K,"first"),G=!0;else if("OldMail"==F)this.folderNodes.NewMail?a.place(E,this.folderNodes.NewMail,"after"):a.place(E,K,"first");else{if(Settings.HasAggregatedAccount&&"Aggregated"!=o.type&&!n&&p)s=document.createElement("div"),
s.className="wsSeparator",K.appendChild(s),n=!0;K.appendChild(E)}s=!0}else a.place(E,K),q=E;if(Settings.HasAggregatedAccount)if("Inbox"==o.type)E.title=o.displayName;else if("Aggregated"==o.type)E.title=o.name==o.displayName?o.displayName:o.displayName+"  "+o.name;var K="",S=ws.string.escapeXml(o.displayName),S=S.replace(/ /gm,"&nbsp;"),P=Config.ImapStoreFolderDepthStartAt;if(Config.EnableIMAPFolderHierarchy){o.depth>=P&&(m=this.getParentFolder(o.name));for(var R=Config.FolderHierarchyDelimiter,S=
"",W=P;W<o.depth;W++)S+=" ";for(W=P;W<o.depth;W++)S+=R;""!=S&&(P=this.getParentFolder(o.name),P!=m&&(K='<div class = "text">'+P+"</div>",m=P));S=ws.string.escapeXml(S+o.displayName);S=S.replace(/ /gm,"&nbsp;")}K=G?K+('<div class="icon '+this.getFolderIconClass(o)+'" theFN="'+D+'"></div><div class="text"><span id="inboxNode">'+S+"</span>"):K+('<div class="icon '+this.getFolderIconClass(o)+'" theFN="'+D+'"></div><div class="text"><span>'+S+"</span>");H&&(K+='<div class="unseen"></div>');K+="</div>";
E.innerHTML=K;G={type:"Mail"};G.showEdit=M;G.showEmpty=N;G.folderName=D;a.connect(E,"oncontextmenu",a.hitch(this,this.onContextMenu,G));if(M)a.create("span",{className:"ctrl wsLink iconEdit",title:Config.Strings.NavEdit,style:{display:"none"},onclick:a.hitch(this,"editFolder",D)},E);else if(N&&(N=a.create("span",{className:"ctrl wsLink iconDeleted",style:{display:"none"},title:Config.Strings.NavEmpty,onclick:a.hitch(this,"emptyFolder",D)},E),"Spam"==F||"Deleted"==F))N.title=ws.string.substituteParams(Config.Strings.NavEmptyToolTip,
o.displayName);this.folderNodes[D]=E}if(H&&!this.FOLDERS_NO_COUNT[F]){H=a.query(".unseen",E)[0];try{a._destroyElement(H)}catch(T){}H=document.createElement("div");H.className="unseen";N="Drafts"==F?o.count:o.unseenCount;M=0<N?N:"";if("Aggregated"==o.type&&1<o.status)H.title=Config.Strings.AggregateErrorTip,a.addClass(H,"aggError"),H.onclick=a.hitch(this,"onAggError",D,o.status);else if(0<N)H.innerHTML=""+N;a.toggleClass(E,"hasUnseen",0<N&&!this.FOLDERS_NO_BOLD[F]);E.childNodes[1].appendChild(H);if(!Settings.HasAggregatedAccount&&
("Inbox"==F||"NewMail"==F)||"AllInboxes"==F)ws.browser.setWindowTitle(Config.Strings.MessageListTitle+(0<N?" ("+M+")":""))}l[D]=!0;if(!this._initSearchField)if(this._initSearchField=!0,this.mailModel.allowAllTextSearch()){if(this.searchScope="alltext",this.searchField.value=this.getSearchGhostText("alltext"),this.mnSearchField)this.mnSearchField.value=this.getSearchGhostText("alltext")}else if(this.searchScope="subject",this.searchField.value=this.getSearchGhostText("subject"),this.mnSearchField)this.mnSearchField.value=
this.getSearchGhostText("subject");this._folderListUpdated=!0}}for(o in this.folderNodes)o in l||(a.destroy(this.folderNodes[o]),delete this.folderNodes[o]);q&&!s&&e.scrollIntoView(q);this.updateMiniNavFolders();this.setupFolderDropTargets();if(this.folderListChangedCB)this.folderListChangedCB(),this.folderListChangedCB=null;this.onResized();7==a.isIE&&(a.style(this.mainPane.domNode,"overflow-y","hidden"),a.style(this.mainPane.domNode,"overflow-y","auto"))},onAggError:function(b,e,f){if(!f)f=window.event;
f.stopPropagation?f.stopPropagation():f.cancelBubble=!0;var h;if(!(2>e)){f="<div class='aggDlgTitle'>"+Config.Strings.AggregateErrorTitle+"</div>";switch(e){case 2:f+=ws.string.substituteParams(Config.Strings.AggregateErrorConn,b);ws.widget.Dialogs.ok(f,h,!1);return;case 4:f+=ws.string.substituteParams(Config.Strings.AggregateErrorRate,b);ws.widget.Dialogs.ok(f,h,!1);return;case 5:f+=ws.string.substituteParams(Config.Strings.AggregateErrorConn,b);ws.widget.Dialogs.ok(f,h,!1);return;default:f+=ws.string.substituteParams(Config.Strings.AggregateErrorConn,
b),b=Config.Strings.AggregateRetryButton,h=a.hitch(this,"aggRetry")}ws.widget.Dialogs.show(f,[b],h,{newCancel:!0});return!1}},aggRetry:function(a){1==a&&ws.WebSuite.checkMail()},checkMail:function(b){ws.WebSuite.checkMail();(b.ctrlKey||b.metaKey)&&b.altKey&&a.publish("snippetViewUpdate");ws.reporting.reportDLAction("Mail-LeftNav-Check")},composeIM:function(){ws.presence.launchIM("",!0,!1);ws.reporting.reportDLAction("Mail-LeftNav-IMinitiated")},composeSMS:function(){ws.presence.launchIM("",!0,!0);
ws.reporting.reportDLAction("Mail-LeftNav-TextInitiated")},getFolderIconClass:function(a){return"AllInboxes"==a.type?"iconInbox":"SavedIMs"==a.type?"iconPersonal":"Aggregated"==a.type||"Inbox"==a.type&&Settings.HasAggregatedAccount?"iconL"+a.account:"icon"+a.type},getParentFolder:function(a){return a.split(Config.FolderNameSeparator)[Config.ImapStoreFolderDepthStartAt-1]},setupFolderDropTargets:function(){ws.lang.ensureLayersLoaded(a.hitch(this,function(){require(["ws/dnd/NavigationDropTarget","ws/dnd/HtmlDragManager"],
a.hitch(this,function(b){if(!this.myFoldersDropTarget)this.myFoldersDropTarget=new b(this.myFoldersItem,["message"],this,"myFolders");for(var e in this.dropTargets)ws.dnd.dragManager.unregisterDropTarget(this.dropTargets[e]),delete this.dropTargets[e];this.dropTargets={};a.forEach(this.mailModel.folders||[],function(a){this.folderNodes[a.name]&&!this.dropTargets[a.name]&&(this.dropTargets[a.name]=new b(this.folderNodes[a.name],["message"],this,a.name))},this)}))}))},onMailInfoUpdated:function(){var a=
Settings.HasUnlimitedMailStorage?0:Math.round(100*(Settings.MailStorageUsed/Settings.MailStorageQuota));ws.html.setInnerText(this.quotaWarningTextNode,ws.string.substituteParams(Config.Strings.QuotaWarning,a));ws.html.setShowing(this.quotaWarningContainer,90<=a&&!this.closedQuotaWarning)},closeQuotaWarning:function(){this.quotaWarningContainer.style.display="none";this.closedQuotaWarning=!0},displayFolder:function(){if(ws.WebSuite.isRecordTimingData)ws.WebSuite.messageListTimerStart=new Date;this.selectApp(this.APP_MAIL);
this.hideCreateFolder()},composeMessage:function(){},showMyFolders:function(a){this.hideCreateFolder();this.toggleTwisty(a,this.myFoldersContainer);this.onResized()},toggleMyFolders:function(){var a="none"==this.myFoldersContainer.style.display;this.showMyFolders(a);ws.settings.saveSoon({FoldersVisible:a})},expandMyFolders:function(){var a="none"==this.myFoldersContainer.style.display;a&&this.toggleMyFolders();return a},showCreateFolder:function(a){this.showMyFolders(!0);this.createFolderNode.style.display=
"";this.createFolderInput.value=Config.Strings.NewFolder;e.scrollIntoView(this.createFolderNode);ws.html.selectInputText(this.createFolderInput);a.stopPropagation()},hideCreateFolder:function(){this.createFolderNode.style.display="none"},onCreateFolderKeyPress:function(b){b.keyCode==a.keys.ENTER?this.createFolder():b.keyCode==a.keys.ESCAPE&&this.hideCreateFolder()},createFolder:function(){this._createFolder({newName:this.createFolderInput.value,okCB:a.hitch(this,"hideCreateFolder")})},_createFolder:function(b){b&&
b.newName&&this.mailModel.createFolder({newName:b.newName,dialogOkCB:a.hitch(this,function(){ws.html.selectInputText(this.createFolderInput)}),load:a.hitch(this,function(){var e=b.undo?ws.string.substituteParams(Config.Strings.FolderRestored,b.newName):Config.Strings.FolderCreated;a.publish("WSFeedbackStart",[e,!0]);b.okCB&&b.okCB()}),error:function(a){window.ws_ErrLgr&&!a&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for mailModel.createFolder-_createFolder file:Navigation.js");
ws.widget.Dialogs.ok(a?a:ws.string.substituteParams(Config.Strings.ErrorCreatingFolder,b.newName))}})},editFolder:function(b,e){this.editFolderDialog?this.editFolderDialog.show(b):(a.publish("WSFeedbackStart",[Config.Strings.Loading]),setTimeout(a.hitch(this,function(){this.createEditFolderDialog(a.hitch(this,function(){this.editFolderDialog.show(b);a.publish("WSFeedbackEnd",[Config.Strings.Loading])}))}),0));e&&e.stopPropagation()},createEditFolderDialog:function(b){require(["ws/mail/EditFolderDialog"],
a.hitch(this,function(e){this.editFolderDialog=new e({model:this.mailModel,undoDeleteFolderCB:a.hitch(this,"_createFolder"),undoEmptyFolderCB:a.hitch(this,"restoreMessages")});a.body().appendChild(this.editFolderDialog.domNode);this.editFolderDialog.startup();b&&b()}))},emptyFolder:function(b,e){var f=this.mailModel.getFolderByName(b);this.mailModel.getCachedListForFolder(f.name);if("Deleted"!=f.type&&"Spam"!=f.type)this._emptyFolder(f,!0);else{"Spam"==f.type&&ws.reporting.reportDLAction("Mail-LeftNav-EmptySpam");
var h=ws.string.substituteParams(Config.Strings.PermEmptyFolderConfirmation,f.displayName);ws.widget.Dialogs.okCancel(h,a.hitch(this,function(a){a&&this._emptyFolder(f)}))}e&&e.stopPropagation()},_emptyFolder:function(b,e){this.mailModel.emptyFolder({name:b.name,fetchUIDs:e,load:a.hitch(this,function(f){var h=null,g=null;if(e&&f.responseUIDs)h=f.responseUIDs;g=!Config.UseOMS&&(Config.EnableRestoreButton||Settings.ViewNewOld)?h&&h.length?a.hitch(this,"restoreMessages",h):null:h&&h.length?a.hitch(this.mailModel,
"undoMoveMessages",h,Config.DeletedItemsFolderName,b.name):null;a.publish("WSFeedbackStart",[ws.string.substituteParams(Config.Strings.FolderEmptied,b.displayName),!0,g])}),error:function(a){window.ws_ErrLgr&&!a&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for mailModel.emptyFolder-_emptyFolder file:Navigation.js");ws.widget.Dialogs.ok(a||Config.Strings.EmptyFolderError)}})},restoreMessages:function(b){this.mailModel.restoreMessages({uids:b,folder:Config.DeletedItemsFolderName,
load:a.hitch(this,function(){this.mailModel.refetchFolderIndex(this.mailModel.currentFolder);var e=1==b.length?Config.Strings.MessageRestored:ws.string.substituteParams(Config.Strings.MessagesRestored,b.length);a.publish("WSFeedbackStart",[e,!0])}),error:function(a){ws.widget.Dialogs.ok(a||Config.Strings.ErrorRestoring)}})},deleteFolder:function(b){var e=this.mailModel.getFolderByName(b),b=-1==e.count?"":e.count,b=Config.EnableIMAPFolderHierarchy?ws.string.substituteParams(Config.Strings.DeleteHierarchyFolderConfirmation,
e.displayName):ws.string.substituteParams(Config.Strings.DeleteFolderConfirmation,e.displayName,b);0==e.count?this._deleteFolder(e,a.hitch(this,"_createFolder",{newName:e.displayName,undo:!0})):ws.widget.Dialogs.okCancel(b,a.hitch(this,function(a){a&&this._deleteFolder(e)}))},_deleteFolder:function(b,e){this.mailModel.deleteFolder({load:a.hitch(this,function(){e?this.folderListChangedCB=a.hitch(this,function(){a.publish("WSFeedbackStart",[ws.string.substituteParams(Config.Strings.FolderDeleted,b.displayName),
!0,e]);this.folderListChangedCB=null}):(a.publish("WSFeedbackStart",[ws.string.substituteParams(Config.Strings.FolderDeleted,b.displayName),!0,e]),this.folderListChangedCB=null)}),name:b.name,error:function(a){window.ws_ErrLgr&&!a&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for mailModel.deleteFolder-_deleteFolder file:Navigation.js");ws.widget.Dialogs.ok(a||Config.Strings.DeleteFolderError)}})},changeFolderReadState:function(a){var b=this.mailModel.getCurrentFolder().type;
b="NewMail"==b||"OldMail"==b?(b=this.mailModel.activeCachedList.GetAllUIDs())?b.concat([]):null:this.mailModel.activeCachedList.GetAllUIDs();b&&this.mailModel.changeMessagesReadState({uids:b,read:a,error:function(a){window.ws_ErrLgr&&!a&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for mailModel.changeMessagesReadState-changeFolderReadState file:Navigation.js");ws.widget.Dialogs.ok(a||Config.Strings.MarkReadError)}})},newFolder:function(b){require(["ws/widget/WSInputableMenuItem"],
a.hitch(this,function(e){var f=this.rightClickMenu.Mail,h=f.getChildren()[7];if(!this.newFolderInputMenu)this.newFolderInputMenu=new e({okCB:a.hitch(this,"_createFolder"),defaultValue:Config.Strings.NewFolder,originalMenuItem:h,maxlength:ws.mail.folderName.MaxLength}),f.addChild(this.newFolderInputMenu);h.hide();this.newFolderInputMenu.show();this.newFolderInputMenu.initializeText(Config.Strings.NewFolder);b&&b.stopPropagation()}))},maybePlayYgmSound:function(){if(!this.maybePlayYgmSound.executed){var a=
this.mailModel.getFolderByName(this.mailModel.getInboxFolderName());if(a)this.maybePlayYgmSound.executed=!0,Settings.PlaySound&&a&&a.unseenCount&&ws.sound.play(Config.BaseAffinityResourcesURL+"sounds/ygm.mp3")}},playNewMailSound:function(){Settings.PlaySound&&ws.sound.play(Config.BaseAffinityResourcesURL+"sounds/newmail.mp3")},setContactsModel:function(b){this.abModel=b;a.connect(b,"search",a.hitch(this,"modelUpdated","contacts"))},setCalendarModel:function(b){this.calendarModel=b;a.connect(b,"searchUpdated",
a.hitch(this,"modelUpdated","calendar"))},showCalendar:function(a,b){if(a){var e=ws.WebSuite.theCalendarModel;e&&e.refreshSearchResult();ws.WebSuite.selectCalendarApp(b)}else b&&b()},hideCalendar:function(){this.resetSearchField()},showAddCalendar:function(){ws.WebSuite.selectTab("addCalendar")},addCalendar:function(a){this.selectApp(this.APP_ADDCALENDAR);a.stopPropagation()},selectCalendar:function(a){a=this.calendarModel.calendars[a];if(!a[this.calendarModel.calendarEnum.selected]){var b=!1;this.showCalendarIndexCB&&
(b=this.showCalendarIndexCB());a=this.calendarModel.getCalendarArgs(a,b);a.selected=!0;this.calendarModel.saveCalendar(a)}},selectThisCalendarOnly:function(a){var b=this.calendarModel.calendarEnum,e=null,f=!0,h;for(h in this.calendarModel.calendars){var g=this.calendarModel.calendars[h];h==a?(g[b.selected]||(f=!1),e=this.calendarModel.getCalendarArgs(g,!1),e.selected=!0,e.selectThisOnly=!0):g[b.selected]&&(f=!1)}e&&!f&&this.calendarModel.saveCalendar(e)},deleteCalendar:function(b,e){var f=this.calendarModel.calendarEnum,
h=this.calendarModel.calendars,g=!1;if(h&&f){var h=h[b],k=h[f.calType],g=null!=h?h[f.worldReadable]:!1;!g&&2!=k&&(g=h[f.readWriteList],g=h[f.readOnlyList]||g)}ws.widget.Dialogs.okCancel(g?Config.Strings.ConfirmCalDeleteShared:Config.Strings.ConfirmCalDelete,a.hitch(this,function(f){f&&(a.publish("WSFeedbackStart",[Config.Strings.Loading]),this.calendarModel.deleteCalendar({id:b,displayName:e,components:!1,index:!1,enums:!1,dayBucketIndex:!1,loadCallback:function(){a.publish("WSFeedbackStart",[ws.string.substituteParams(Config.Strings.CalendarDeleted,
e),!0])},errorCallback:function(){a.publish("WSFeedbackEnd",[Config.Strings.Loading])}}),a.publish("EditCalendar/Delete"))}))},makeCalendarPublic:function(b,e){a.publish("WSFeedbackStart",[Config.Strings.Loading]);var f=this.calendarModel.calendars[b],h=this.calendarModel.calendarEnum,g=this.showCalendarIndexCB?this.showCalendarIndexCB():!1,g=this.calendarModel.getCalendarArgs(f,g),f=f[h.ticket],f=null!=f&&0<f.length,k=g.worldReadable&&!f;g.worldReadable=!0;if(f)g.ticket="";g.loadCallback=function(){a.publish("WSFeedbackEnd",
[Config.Strings.Loading]);var f=ws.string.substituteParams(k?Config.Strings.AlreadyPublic:Config.Strings.MakePublicSuccess,e);a.publish("WSFeedbackStart",[f,!0,function(){var a;a=Config.EnableCalendarPublicHTMLURL?ws.calendar.calutil.getPublicCalendarURL(b,null):ws.calendar.calutil.getPublicCalendarData(b,null);var f=ws.string.substituteParams(Config.Strings.PubCalEmailSubject,e),h=ws.string.substituteParams("<a href='{0}'>{1}</a>",a,e),g=(Config.EnableCalendarPublicHTMLURL?ws.string.substituteParams(Config.Strings.PubCalEmailBody,
h,ws.UserContext.ActiveScreenName)+"<small>"+ws.string.substituteParams(Config.Strings.PubCalEmailFooter,a)+"</small>":ws.string.substituteParams(Config.Strings.PubCalEmailBody2,h,ws.UserContext.ActiveScreenName)+"<small>"+ws.string.substituteParams(Config.Strings.PubCalEmailFooter2,a)+"</small>").replace(/\\n/g,"<br>");ws.WebSuite.getCompose("calendar",function(a){a.reset({subject:f,body:g,dontAddSignature:!0,isDirty:!0})})},null,Config.Strings.ShareLink])};g.errorCallback=function(){ws.widget.Dialogs.ok(Config.Strings.CalErrorSavingCal);
a.publish("WSFeedbackEnd",[Config.Strings.Loading])};this.calendarModel.saveCalendar(g)},setCalendarColor:function(a,b){var e=this.calendarModel.calendars[a],f=this.showCalendarIndexCB?this.showCalendarIndexCB():!1,e=this.calendarModel.getCalendarArgs(e,f);e.color=b;this.calendarModel.saveCalendar(e)},showContacts:function(b){ws.WebSuite.theAddressModel?(ws.WebSuite.theAddressModel.initData(),ws.WebSuite.displayContactListView(null,b)):setTimeout(a.hitch(this,function(){ws.lang.ensureLayersLoadedSoon(a.hitch(this,
function(){ws.WebSuite.theAddressModel.initData();ws.WebSuite.displayContactListView(null,b)}))}))},displayContactListView:function(a){var e=b.byId("AddressList");if(e)e.selectedView=null;a==this.selectedApp?ws.WebSuite.displayContactListView(null,null):this.selectApp(a)},showToday:function(){ws.WebSuite.showTodayPage()},autoScroll:function(b){t=a.position(this.mainPane.domNode,!0);var e=a._getContentBox(this.mainPane.domNode),b=b.pageY-t.y;36>b?(this.autoScrollTO=ws.lang.setTimeout(a.hitch(this,
"_autoScroll",-9),100),this.autoScrollStarted=!0):36>e.h-b?(this.autoScrollTO=ws.lang.setTimeout(a.hitch(this,"_autoScroll",9),100),this.autoScrollStarted=!0):this.autoScrollStarted=!1},_autoScroll:function(b){if(this.autoScrollStarted){var e=this.mainPane.domNode.scrollTop;ws.dnd.dragManager.onScroll();this.mainPane.domNode.scrollTop+=b;e==this.mainPane.domNode.scrollTop?this.autoScrollStarted=!1:this.autoScrollTO=ws.lang.setTimeout(a.hitch(this,"_autoScroll",b),500)}},onMouseOverItem:function(b,
e){if(9>a.isIE)if(this.lastRemoveHover==b){if(this.removeHoverTimeout)clearTimeout(this.removeHoverTimeout),this.removeHoverTimeout=null}else if(this.lastRemoveHover)this.removeItemHover(this.lastRemoveHover),this.lastRemoveHover=null;if(!this.disableHover){var f=a.hasClass(b,"cpNavItem")?"navItemHover":"navTile24 navItemHover";a.addClass(b,f);f=a.query(".ctrl",b);if(0<f.length)f[0].style.display="",a.query(".text .unseen",b).style("display","none")}ws.dnd&&ws.dnd.dragManager&&ws.dnd.dragManager._dragTriggered&&
this.dragMessageStarted&&this.autoScroll(e)},removeItemHover:function(b){if(!this.disableHover){var e=a.hasClass(b,"cpNavItem")?"navItemHover":"navTile24 navItemHover";a.removeClass(b,e);e=a.query(".ctrl",b);if(0<e.length)e[0].style.display="none",a.query(".text .unseen",b).style("display","")}},onMouseOutItem:function(b){9>a.isIE?(this.removeHoverTimeout=setTimeout(a.hitch(this,this.removeItemHover,b),0),this.lastRemoveHover=b):this.removeItemHover(b)},onMouseOverCalItem:function(b){this.disableHover||
a.query(".ctrl",b).style("display","")},onMouseOutCalItem:function(b){this.disableHover||a.query(".ctrl",b).forEach(function(a){if(a!=this.activeQuickActionButton)a.style.display="none"},this)},handleRightClickAction:function(b,e){var f=this.rightClickMenuArgs;switch(b){case "renameFolder":this.editFolder(f.folderName);break;case "emptyFolder":this.emptyFolder(f.folderName);break;case "deleteFolder":this.deleteFolder(f.folderName);break;case "markAllUnRead":this.changeFolderReadState(!1);break;case "markAllRead":this.changeFolderReadState(!0);
break;case "newFolder":this.newFolder();break;case "goToCalendar":this.selectApp(this.APP_CALENDAR);break;case "addCalendar":this.selectApp(this.APP_ADDCALENDAR);break;case "newEvent":this.selectApp(this.APP_CALENDAR);this.displayAddCalEvent();break;case "selectThisCalendar":this.selectCalendar(f.calId);break;case "selectThisCalendarOnly":this.selectThisCalendarOnly(f.calId);break;case "shareCalendar":case "editCalendar":this.editCalendar(f.calId);break;case "deleteCalendar":this.deleteCalendar(f.calId,
f.displayName);break;case "makeCalendarPublic":this.makeCalendarPublic(f.calId,f.displayName);break;case "setCalendarColor":this.setCalendarColor(f.calId,e);break;case "goToContacts":this.displayContactListView(this.APP_CONTACTS);break;case "newContact":ws.lang.ensureLayersLoaded(a.hitch(this,function(){ws.WebSuite.displayNewContactView()}));break;case "newDistList":ws.lang.ensureLayersLoaded(a.hitch(this,function(){ws.WebSuite.displayNewDistListView()}))}this.rightClickMenuArgs=null},displayAddCalEvent:function(){ws.WebSuite.getAddEditWidget(a.hitch(this,
function(a){a.show()}))},defineMenus:function(){this.rightClickMenuDefinition={Mail:[{caption:Config.Strings.Rename,onClick:a.hitch(this,"handleRightClickAction","renameFolder")},{caption:Config.Strings.Empty,onClick:a.hitch(this,"handleRightClickAction","emptyFolder")},{caption:Config.Strings.Delete,onClick:a.hitch(this,"handleRightClickAction","deleteFolder")},{separator:!0},{caption:"",onClick:a.hitch(this,"handleRightClickAction","markAllUnRead")},{caption:"",onClick:a.hitch(this,"handleRightClickAction",
"markAllRead")},{separator:!0}],Contacts:[{caption:Config.Strings.GoToContacts,onClick:a.hitch(this,"handleRightClickAction","goToContacts")},{separator:!0},{caption:Config.Strings.NewContact,onClick:a.hitch(this,"handleRightClickAction","newContact")},{caption:Config.Strings.NewDistList,onClick:a.hitch(this,"handleRightClickAction","newDistList")}],CalendarHead:[{caption:Config.Strings.GoToCalendar,onClick:a.hitch(this,"handleRightClickAction","goToCalendar")},{separator:!0},{caption:Config.Strings.AddCalendar,
onClick:a.hitch(this,"handleRightClickAction","addCalendar")},{caption:Config.Strings.NewEventBtn,onClick:a.hitch(this,"handleRightClickAction","newEvent")}],Calendar:[{caption:Config.Strings.AddEventBtn,onClick:a.hitch(this,"handleRightClickAction","newEvent")},{caption:Config.Strings.ShowThisCalendarOnly,onClick:a.hitch(this,"handleRightClickAction","selectThisCalendarOnly")},{separator:!0},{caption:Config.Strings.Edit,onClick:a.hitch(this,"handleRightClickAction","editCalendar")},{caption:Config.Strings.ShareThisCalendar,
onClick:a.hitch(this,"handleRightClickAction","shareCalendar")},{caption:Config.Strings.MakePublic,onClick:a.hitch(this,"handleRightClickAction","makeCalendarPublic")},{caption:Config.Strings.Delete,onClick:a.hitch(this,"handleRightClickAction","deleteCalendar")},{separator:!0},{dojoType:"ws.widget.CalendarColorPickerMenuItem",onClick:a.hitch(this,"handleRightClickAction","setCalendarColor")}]}},createRightClickMenu:function(b){var e=this.rightClickMenuDefinition[b];if(!e)return null;e=this.rightClickMenu[b]=
ws.widget.createMenu(e);if("Mail"==b)b=new o({caption:Config.Strings.NewFolder}),b._onClick=a.hitch(this,"newFolder"),e.addChild(b);a.connect(e,"onClose",this,"onCloseMenu");return e},getRightClickMenu:function(a){if(!this.rightClickMenu)this.rightClickMenu={};if(!this.rightClickMenuDefinition[a])return null;var b=this.rightClickMenu[a];b||(b=this.createRightClickMenu(a));return b},updateRightClickMenu:function(a){var b=this.rightClickMenuArgs,e=Settings.ViewNewOld?Config.Strings.KeepAllAsNewLabel:
Config.Strings.MarkAllUnreadLabel,f=Settings.ViewNewOld?Config.Strings.IgnoreAllLabel:Config.Strings.MarkAllReadLabel,h=a.getChildren();if(a==this.rightClickMenu.Mail)h[4].setCaption(e),h[5].setCaption(f),h[0].setEnabled(b.showEdit),h[1].setEnabled(b.showEmpty),h[2].setEnabled(b.showEdit),this.newFolderInputMenu&&this.newFolderInputMenu.restore(),b=b.folderName==this.mailModel.currentFolder&&this.mailModel.canChangeMessageReadState(),h[4].setEnabled(b),h[5].setEnabled(b);else if(a==this.rightClickMenu.Calendar)h[0].setShowing(b.showAddEvent),
h[4].setShowing(b.showShare),h[5].setShowing(b.showPublish),h[6].setShowing(b.showDelete),a=this.calendarModel.getCalendarList(),e=this.calendarModel.calendarEnum,b=ws.lang.findByProp(a,e.id,b.calId),h[8]&&h[8].setCurrentColor(a[b][e.color])},onQuickActionMenu:function(b,e){ws.lang.ensureLayersLoaded(a.hitch(this,"_onContextMenu",b,-1,-1,e));this.activeQuickActionButton=e},onContextMenu:function(b,e){a.stopEvent(e);ws.lang.ensureLayersLoaded(a.hitch(this,"_onContextMenu",b,e.pageX,e.pageY,e.target))},
_onContextMenu:function(a,b,e,f){var h=a.type,g=this.getRightClickMenu(h);if(g)g.isShowing()&&g.close(),this.rightClickMenuArgs=a,g=this.getRightClickMenu(h),this.updateRightClickMenu(g),0<=b?g.open(b,e,f):g.open(f)},onCloseMenu:function(){if(this.activeQuickActionButton)this.activeQuickActionButton.style.display="none",this.activeQuickActionButton=null},toggleTwisty:function(b,e){a.toggleClass(this.myFoldersItem,"myFoldersItemExpanded",b);e.style.display=b?"":"none"},isRecentSearchesAvailable:function(){for(var a=
0;a<this.SEARCH_QUERY_SAVE_LIMIT;a++)if(null!=this.recentSearch&&void 0!=this.recentSearch[a])return a;return-1},isSearchQueryUnique:function(a,b,e){for(var f=0;f<this.SEARCH_QUERY_SAVE_LIMIT;f++)if(null!=this.recentSearch&&void 0!=this.recentSearch[f]&&this.recentSearch[f].Scope==a&&this.recentSearch[f].SearchString==b&&this.recentSearch[f].Label==e)return!1;return!0},decodeRecentSearchSetting:function(){if(null==this.recentSearch)this.recentSearch=[];for(var a=Settings.RecentSearchQueries.split(","),
b=0;b<a.length-1;b++){var e=a[b].split(":");newEntry=new p(e[0],e[1],e[2]);this.recentSearch.push(newEntry)}},encodeRecentSearchSetting:function(){for(var a="",b=0;b<this.recentSearch.length;b++)a+=this.recentSearch[b].Scope+":"+this.recentSearch[b].SearchString+":"+this.recentSearch[b].Label+",";ws.settings.saveSoon({RecentSearchQueries:a})},addRecentSearch:function(a,b){var e="";if("alltext"==a)e="";else if("subject"==a)e=Config.Strings.Subject;else if("fromto"==a)e=Config.Strings.FromTo;else if("calendar"==
a)e=Config.Strings.Calendar;else if("contacts"==a)e=Config.Strings.Contacts;newEntry=new p(a,b,e);null==this.recentSearch&&this.decodeRecentSearchSetting();this.isSearchQueryUnique(a,b,e)&&(this.recentSearch.push(newEntry),this.recentSearch.length>=this.SEARCH_QUERY_SAVE_LIMIT+1&&this.recentSearch.shift());this.encodeRecentSearchSetting()},populateSearchMenuWithRecentSearches:function(){if(-1!=this.isRecentSearchesAvailable()){this.searchMenu.addChild(new u);this.searchMenu.addChild(new o({caption:Config.Strings.RecentSearches,
isLabel:!0}));for(var b=this.recentSearch.length-1;0<=b;b--){var e="&ldquo;"+ws.string.escapeXml(this.recentSearch[b].SearchString)+"&rdquo; <span>"+this.recentSearch[b].Label+"</span>",e=new o({caption:e,isCheckable:!1});e.onClick=a.hitch(this,"performRecentSearch",b);this.searchMenu.addChild(e)}}},openSearchMenu:function(b){this.searchMenu&&this.searchMenu.destroy();this.searchMenu=ws.widget.createMenu([{caption:Config.Strings.Mail,searchScope:"alltext",onClick:a.hitch(this,"setSearchScope","alltext",
Config.Strings.Mail),iconClass:""},{caption:Config.Strings.Subject,searchScope:"subject",onClick:a.hitch(this,"setSearchScope","subject",Config.Strings.Subject),iconClass:""},{caption:Config.Strings.Sender,searchScope:"fromto",onClick:a.hitch(this,"setSearchScope","fromto",Config.Strings.Sender),iconClass:""},{separator:!0},{caption:Config.Strings.Calendar,searchScope:"calendar",onClick:a.hitch(this,"setSearchScope","calendar",Config.Strings.Calendar),iconClass:""},{caption:Config.Strings.Contacts,
searchScope:"contacts",onClick:a.hitch(this,"setSearchScope","contacts",Config.Strings.Contacts),iconClass:""}]);a.addClass(this.searchMenu.domNode,"searchDropDownMenu");var e=this.mailModel.allowAllTextSearch();Config.UseOMS&&Config.CrossFolderSearch&&this.populateSearchMenuWithRecentSearches();var f=0;if("calendar"==this.searchScope)f=4;else if("contacts"==this.searchScope)this.searchScope="contacts",f=5;else if("alltext"==this.searchScope)this.searchScope="alltext",f=0;else if("subject"==this.searchScope)this.searchScope=
"subject",f=1;else if("fromto"==this.searchScope)this.searchScope="fromto",f=2;this.searchMenu.getChildren()[f].setChecked(!0);f=this.searchMenu;if(f.isShowing())f.close();else{f.getChildren()[0].setShowing(e);e=(this.mailModel.getCurrentFolder()||{}).type;e="Sent"==e||"Drafts"==e||"AutoSavedSent"==e||"SavedIMs"==e?Config.Strings.Recipient:Config.Strings.Sender;if(Config.UseOMS&&Config.CrossFolderSearch)e=Config.Strings.FromTo;f.getChildren()[2].setCaption(e);f.open(b.target)}},performRecentSearch:function(a){var b=
Config.Strings.Mail;if("alltext"==this.recentSearch[a].Scope)b=Config.Strings.Mail;else if("subject"==this.recentSearch[a].Scope)b=Config.Strings.Subject;else if("fromto"==this.recentSearch[a].Scope)b=Config.Strings.Sender;else if("calendar"==this.recentSearch[a].Scope)b=Config.Strings.Calendar;var e=this.getSearchWidget();e.style.color=this.searchFieldColor;this.setSearchScope(this.recentSearch[a].Scope,b);e.value=this.recentSearch[a].SearchString;e.style.color=this.searchFieldColor;this.searchApp()},
setSearchScope:function(b,e){this.searchScope=b;var f=this.searchMenu;f&&a.forEach(f.getChildren(),function(b){!b.separator&&a.isFunction(b.setChecked)&&b.setChecked(b.caption==e)});f=this.getSearchWidget();if(""==f.style.color&&null==this.mailModel.getSearchString())f.value=this.getSearchGhostText(b)},getSearchGhostText:function(a){var b;if("fromto"==a)Config.UseOMS&&Config.CrossFolderSearch?b=Config.Strings.SearchFromTo:(b=(this.mailModel.getCurrentFolder()||{}).type,b="Sent"==b||"Drafts"==b||"AutoSavedSent"==
b?Config.Strings.SearchRecipient:Config.Strings.SearchSender);if("alltext"==a)b=Config.Strings.SearchMail;if("subject"==a)b=Config.Strings.SearchSubject;if("calendar"==a)b=Config.Strings.SearchCalendar;if("contacts"==a)b=Config.Strings.SearchContacts;return b},removeSpecialCharacters:function(a){if(a)return a=a.replace(/^\s+/,""),a=a.replace(/^[\+\-<>]/,""),!Config.UseOMS||"calendar"==this.searchScope?a.replace(/[\=()&*~`!{}^#?%$;:\[\]"]+/g,""):a.replace(/[\/_()&~`!{}^#?%$;:\[\]"\r\n]+/g," ")},searchApp:function(){var a=
this.getSearchWidget();if(""==a.style.color||void 0==a.value||""==a.value)return ws.widget.Dialogs.ok(Config.Strings.SearchFieldEmpty),!1;a.value=this.removeSpecialCharacters(a.value);if(""==a.value)return ws.widget.Dialogs.ok(Config.Strings.SearchFieldEmpty),!1;if("calendar"==this.searchScope)this.searchCalendar(this.searchScope);else if("contacts"==this.searchScope){if(a=b.byId("AddressList"))a.selectedView=null;this.searchContacts()}else a.style.color=this.searchFieldColor,this.searchMail(this.searchScope);
return!0},searchMail:function(a){var b=this.getSearchWidget();this.searchMailCB&&""!=b.style.color&&this.searchMailCB(a,b.value)},searchCalendar:function(a){var b=this.getSearchWidget();this.searchCalendarCB&&""!=b.style.color&&this.searchCalendarCB(a,b.value)},searchContacts:function(){var a=this.getSearchWidget();if(this.searchContactsCB){var b=a.value;if(""==a.style.color||0==b.length)b=void 0;this.searchContactsCB(b);b||a.blur()}},onFocusSearchField:function(){var a=this.getSearchWidget();if(""==
a.style.color)a.value="";a.style.color=this.searchFieldColor},clearSearchField:function(){this.getSearchWidget().value="";this.setSearchScope(this.mailModel.allowAllTextSearch()?"alltext":"subject",Config.Strings.Mail);this.resetSearchField()},clearSearch:function(){this.setSearchScope(this.mailModel.allowAllTextSearch()?"alltext":"subject",Config.Strings.Mail)},resetSearchField:function(b){var e=b||this.getSearchWidget();if(""==e.value)if(e.style.color="",b=this.searchMenu)a.forEach(b.getChildren(),
function(a){if(a.checked&&!a.disabled)e.value=this.getSearchGhostText(a.searchScope)},this);else if("calendar"==this.searchScope)e.value=this.getSearchGhostText("calendar");else if("contacts"==this.searchScope)e.value=this.getSearchGhostText("contacts");else{try{var f=this.mailModel.allowAllTextSearch()}catch(h){}e.value=f?this.getSearchGhostText("alltext"):this.getSearchGhostText("subject")}},onBlurSearchField:function(){this.resetSearchField()},mnSearchGo:function(){this.searchApp()},onKeyPressSearchField:function(e){var f=
b.byId("AddressList"),h=ws.WebSuite.getCurrentViewId();if(f&&("distributionListWidget"==f.selectedView||"contactDetails"==f.selectedView)&&"AddressList"==h)f.selectedView=null;f=this.getSearchWidget();h=a.hasClass(this.mnSearch,"mnSearchActive");if(""==f.style.color)f.value="",f.style.color=this.searchFieldColor;if(e.keyCode==a.keys.ENTER)"contacts"==this.searchScope&&this.searchTimer&&clearTimeout(this.searchTimer),this.searchApp()&&a.removeClass(this.shNavItem,"mnSearchSelected"),e.preventDefault();
else if(e.keyCode==a.keys.ESCAPE)e.preventDefault(),this.isMini&&!this._oldsiNode&&!h&&this.mnSearchClose();else if("contacts"==this.searchScope)this.searchTimer&&clearTimeout(this.searchTimer),this.searchTimer=null,this.searchTimer=setTimeout(a.hitch(this,function(){this.searchContacts()}),500)},modelUpdated:function(a){this.searchStrUpdated(a);if("mail"==a)this.maybePlayYgmSound();else if("calendar"==a)this.searchScope="calendar";else if("contacts"==a)this.searchScope="contacts"},searchStrUpdated:function(a){if(!this.mailModel.searchInProgress){var b=
null;if("mail"==a){a=ws.WebSuite.getCurrentViewId();if("AddressList"==a||"calendarView"==a)return;"before"!=this.mailModel.getSearchIn()&&(b=this.mailModel.getSearchString());Config.UseOMS&&Config.CrossFolderSearch&&null!=b&&this.addRecentSearch(this.searchScope,b)}else"calendar"==a&&null!=this.calendarModel?(b=this.calendarModel.getSearchString(),Config.UseOMS&&Config.CrossFolderSearch&&null!=b&&this.addRecentSearch(this.searchScope,b)):"contacts"==a&&(b=this.abModel.getSearchString());null==b&&
(b="");this.updateSearchStr(this.searchField,b);this.updateSearchStr(this.mnSearchField,b)}},updateSearchStr:function(a,b){if(a.value!=b){a.value=b;var e=!1;""!=a.value&&(e=!0);this.resetSearchField(a);if(e)a.style.color=this.searchFieldColor}},onmouseoverMNS:function(a){this.onmouseoverMN(a,"shNavItem")},onmouseoutMNS:function(a){this.onmouseoutMN(a,"shNavItem")},onmouseoverMNC:function(a){this.onmouseoverMN(a,"cpNavItem")},onmouseoutMNC:function(a){this.onmouseoutMN(a,"cpNavItem")},onmouseoverMN:function(b,
e,f){if(e=ws.widget.getEventTarget(b,e||"navItem",f||"navToolbar")){var f=0,h=a.query(".mnUnseen",e)[0],g={side:"right"};h&&(f=+a.attr(h,"theCount"));if(0<f)g.label=a.attr(e,"data-title")+"&nbsp;("+f+")";ws.widget.showInstatip(e,g)}this.onMouseOverItem(e,b)},onmouseoutMN:function(a,b,e){(b=ws.widget.getEventTarget(a,b||"navItem",e||"navToolbar"))&&ws.widget.hideInstatip(b);this.onMouseOutItem(b,a)},onMouseOverAT:function(b){if(b=ws.widget.getEventTarget(b,"appTitleBar","appTitleBar")){var e=a.position(b),
f=a._getMarginSize(a.query(".appTitleLink",b)[0]).w-26;e.x+=f;e.y+=9;e.w-=f;ws.widget.showInstatip(b,{side:"top",nodePosition:e})}},onMouseOutAT:function(a){(a=ws.widget.getEventTarget(a,"appTitleBar","appTitleBar"))&&ws.widget.hideInstatip(a)},onmouseoverCP:function(b){if(b=ws.widget.getEventTarget(b,"cpBtn","controlsPaneBtns"))a.addClass(b.parentNode,"cpBtnHover"),ws.widget.showInstatip(b)},onmouseoutCP:function(b){if(b=ws.widget.getEventTarget(b,"cpBtn","controlsPaneBtns"))a.removeClass(b.parentNode,
"cpBtnHover"),a.removeClass(b.parentNode,"cpBtnClick"),ws.widget.hideInstatip(b)},onmousedownCP:function(b){(b=ws.widget.getEventTarget(b,"cpBtn","controlsPaneBtns"))&&a.addClass(b.parentNode,"cpBtnClick")},onmouseupCP:function(){a.query(".cpBtnClick",this.controlsPaneBtns).removeClass("cpBtnClick")},setupPresenceMenu:function(){this.presenceDisplay.menuDefinition=[{caption:Config.Strings.BuddyStatus_Label_Available,id:"aimWimMenuItem-online",iconClass:"presMenuItem status-online",onClick:a.hitch(this,
function(){ws.im.wim.setState("online","")})},{caption:Config.Strings.BuddyStatus_Label_Away,id:"aimWimMenuItem-away",iconClass:"presMenuItem status-away",onClick:a.hitch(this,function(){ws.im.wim.setState("away","")})},{caption:Config.Strings.BuddyStatus_Label_Invisible,id:"aimWimMenuItem-invisible",iconClass:"presMenuItem status-invisible",onClick:function(){ws.im.wim.setState("invisible","")}},{separator:!0},{caption:Config.Strings.AddBuddyTitle,id:"aimWimMenuItem-addBuddy",onClick:a.hitch(this,
"addBuddy")},{caption:Config.Strings.SetStatusMenuItem,id:"aimWimMenuItem-setStatus",onClick:a.hitch(this,"setStatus")},{id:"aimWimMenuItem-FBsep",separator:!0},{caption:Config.Strings.Menu_SetupFB,id:"aimWimMenuItem-setupFB",iconClass:"FBserviceIcon",onClick:a.hitch(this,function(){this.aim.promoConnect()})},{caption:Config.Strings.Menu_SigninFB,id:"aimWimMenuItem-signinFB",iconClass:"FBserviceIcon",onClick:a.hitch(this,function(){this.aim.fbManualSignin=!0;ws.im.wim.setServiceConnection("facebook",
!0)})},{caption:Config.Strings.Menu_SignoutFB,id:"aimWimMenuItem-signoutFB",iconClass:"FBserviceIcon",onClick:a.hitch(this,function(){this.aim.fbManualSignout=!0;ws.im.wim.setServiceConnection("facebook",!1)})},{separator:!0},{caption:Config.Strings.Label_AutoSignOn,id:"aimWimMenuItem-auto",isCheckable:!0,checked:!0,onClick:a.hitch(this,"clkAutoSignIn")},{caption:Config.Strings.Menu_SignOutAIM,id:"aimWimMenuItem-signOut",onClick:function(){ws.im.wim.end()}}];this.presenceDisplay.updateMenu=function(){this.menu.setUnchecked();
var e=a.query("#aimWimMenuItem-auto td");e&&3==e.length&&(a.attr(e[1],"colSpan","2"),a.byId("aimWimMenuItem-auto").removeChild(e[0]),e=a.query("#aimWimMenuItem-signOut td"),a.attr(e[1],"colSpan","2"),a.byId("aimWimMenuItem-signOut").removeChild(e[0]),e=a.query("#aimWimMenuItem-addBuddy td"),a.attr(e[1],"colSpan","2"),a.byId("aimWimMenuItem-addBuddy").removeChild(e[0]),e=a.query("#aimWimMenuItem-setStatus td"),a.attr(e[1],"colSpan","2"),a.byId("aimWimMenuItem-setStatus").removeChild(e[0]));"True"==
Settings.ChatAutoSignOn&&b.byId("aimWimMenuItem-auto").setChecked(!0);if(ws.im.wim.user)switch(ws.im.wim.user.state){case "online":b.byId("aimWimMenuItem-online").setChecked(!0);break;case "away":b.byId("aimWimMenuItem-away").setChecked(!0);break;case "invisible":b.byId("aimWimMenuItem-invisible").setChecked(!0)}(e=ws.im.wim.getServiceConfig("facebook"))?(a.byId("aimWimMenuItem-FBsep").style.display="",!e.associated||e.notAuthorized?(a.byId("aimWimMenuItem-setupFB").style.display="",a.byId("aimWimMenuItem-signinFB").style.display=
"none",a.byId("aimWimMenuItem-signoutFB").style.display="none"):e.online?(a.byId("aimWimMenuItem-setupFB").style.display="none",a.byId("aimWimMenuItem-signinFB").style.display="none",a.byId("aimWimMenuItem-signoutFB").style.display=""):(a.byId("aimWimMenuItem-setupFB").style.display="none",a.byId("aimWimMenuItem-signinFB").style.display="",a.byId("aimWimMenuItem-signoutFB").style.display="none")):(a.byId("aimWimMenuItem-setupFB").style.display="none",a.byId("aimWimMenuItem-signinFB").style.display=
"none",a.byId("aimWimMenuItem-signoutFB").style.display="none",a.byId("aimWimMenuItem-FBsep").style.display="none")}},updateUserPresence:function(b){var e=b.state;b.invisible&&(e="invisible");b=a.byId("presenceIcon");switch(e){case "online":case "invisible":case "away":case "mobile":b.className="status-"+e;break;case "idle":b.className="status-online"}},AIMError:function(a){this.onSessionEnd();this.aimErrorMsg.innerHTML=a;this.aimSearchBtn.style.display="none";this.aimErrorNode.style.display="block";
this.fbPromo.style.display="none"},onClickASI:function(){this.clkAutoSignIn();this.aimAutoSignInBtn.setChecked("True"==Settings.ChatAutoSignOn)},clkAutoSignIn:function(){var a="True"==Settings.ChatAutoSignOn?"False":"True";ws.settings.saveSoon({ChatAutoSignOn:a});Settings.ChatAutoSignOn=a},onSessionStart:function(){},onSessionEnd:function(){this.aim.hide();this.aimErrorNode.style.display="none";this.fbPromo.style.display=Config.EnableIMServices?"block":"none";this.aimSearchBtn.style.display="none";
this.aimSignIn.show();this.aimLoading.hide();a.query(".appTitleAdd",this.domNode).style("display","none");a.query(".appTitleStatus",this.domNode).style("display","none");a.style(this.presenceDisplay.domNode,"display","none");setTimeout(a.hitch(this,function(){this.aimSignInBtn.sizeMyself();this.resizeAimSignin()}),0)},getAlistHtml:function(a){var b=ws.im.wim.getBuddyById(a);return"<div class=\"alistItem\" onclick=\"dojo.publish('aimWimBuddyClicked', [{aimId: '"+a+'\'}]); return false;"><div class="alStatus '+
this.aim.buddyListWidget.makePresenceStyle(b)+'"></div><span class="name">'+ws.string.escapeXml(ws.im.wim.getDisplayId(b.aimId))+"</span></div>"},updateAlist:function(){for(var b="",e=0,f=ws.im.wim.getAlist(),h=0;h<f.length&&!(b+=this.getAlistHtml(f[h]),e++,5<=e);h++);0<f.length?a.query(".alistDiv",this.domNode).style("display","block"):a.query(".alistDiv",this.domNode).style("display","none");a.query(".alistDiv",this.domNode).innerHTML(0<b.length?b:"<div></div>")},onBuddyListLoad:function(){this.aimLoading.hide();
this.presenceDisplay.show();this.aimSearchBtn.style.display="block";this.spinner&&this.spinner.stop()},onAList:function(){Config.EnableCHAL&&this.updateAlist()},onAuthCancel:function(){this.onSessionEnd()},onPresenceChanged:function(b){if(Config.EnableCHAL){var e=ws.im.wim.getAlist();-1!=a.indexOf(e,b.aimId)&&this.updateAlist()}},addBuddy:function(){this.aim&&this.aim.addBuddy()},setStatus:function(){if(this.aim)this.aim.onSetStatus()},onAimMouseOut:function(b){a.stopEvent(b);a.addClass(this.aimSearchBtn,
"appTitleSearch");this.aim.searchBox.isShowing()||a.removeClass(this.aimSearchBtn,"appTitleSearchSel")},onAimMouseOver:function(b){a.stopEvent(b);a.addClass(this.aimSearchBtn,"appTitleSearchSel")},searchAIM:function(b){a.stopEvent(b);this.aim.onSearch(b)},onUserLoad:function(){this.updateUserPresence(ws.im.wim.user)},onmouseoverAP:function(b){if(b=ws.widget.getEventTarget(b,"apBtn","apBtns"))a.addClass(b.parentNode,"apBtnHover"),ws.widget.showInstatip(b,{side:"top"})},onmouseoutAP:function(b){if(b=
ws.widget.getEventTarget(b,"apBtn","apBtns"))a.removeClass(b.parentNode,"apBtnHover"),a.removeClass(b.parentNode,"apBtnClick"),ws.widget.hideInstatip(b)},onmousedownAP:function(b){(b=ws.widget.getEventTarget(b,"apBtn","apBtns"))&&a.addClass(b.parentNode,"apBtnClick")},onmouseupAP:function(){a.query(".apBtnClick",this.apBtns).removeClass("apBtnClick")},AIMInit:function(e){Config.EnableAIMPanel&&ws.lang.ensureLayersLoadedExtra(a.hitch(this,function(){require(["ws/im/ImPanel"],a.hitch(this,function(a){if(!this.aim)this.aim=
new a({id:"aimPanel"}),b.byId("aimApp").addChild(this.aim),this.setupPresenceMenu(),ws.im.wim.listeners.push(this);e&&e()}))}),{layers:["Aim"]})},AIMSignIn:function(){if(Config.EnableAIMPanel){if(!this.spinner)this.spinner=new m("AimSignIn",this.aimSpinner);this.spinner.spin();this.aimSignIn.hide();this.aimLoading.show();b.byId("aimApp").layout();this.AIMInit(a.hitch(this,function(){this.aim.domNode.style.display="";this.aim.signOn()}));ws.reporting.reportDLAction("Mail-LeftNav-AIM-QuickSignIn")}},
selectAppById:function(a,b){switch(a){case "contactApp":this.selectContactApp(null,b);break;case "aimApp":this.selectAimApp(null,b);break;case "eventApp":this.selectEventApp(null,b);break;case "todoApp":this.selectTodoApp(null,b)}},showAppPane:function(){Settings.NavAppPaneSize=1;ws.settings.saveSoon({NavAppPaneSize:1});this.onResized()},hideAppPane:function(){Settings.NavAppPaneSize=0;ws.settings.saveSoon({NavAppPaneSize:0});this.onResized()},selectContactApp:function(e,f){e&&"contactApp"!=this.currentApp&&
ws.reporting.reportDLAction("Mail-LeftNav-minicontacts-InlineOpen");this.currentApp="contactApp";var h=b.byId("contactApp");this.appStack.selectChild(h);h.init();a.query(".appCurr",this.apBtns).removeClass("appCurr");a.query(".ap-contact .apBtn",this.apBtns).addClass("appCurr");if("contactApp"!=Settings.NavAppSelected)ws.settings.saveSoon({NavAppSelected:"contactApp"}),Settings.NavAppSelected="contactApp";0==Settings.NavAppPaneSize&&!f&&this.showAppPane()},selectAimApp:function(e,f){if(!Config.EnableAIMPanel||
"K"==ws.UserContext.ParentalControls||"Y"==ws.UserContext.ParentalControls)this.selectContactApp();else{e&&"aimApp"!=this.currentApp&&ws.reporting.reportDLAction("Mail-LeftNav-miniaim-InlineOpen");this.currentApp="aimApp";this.appStack.selectChild(b.byId("aimApp"));a.query(".appCurr",this.apBtns).removeClass("appCurr");a.query(".ap-aim .apBtn",this.apBtns).addClass("appCurr");if("aimApp"!=Settings.NavAppSelected)ws.settings.saveSoon({NavAppSelected:"aimApp"}),Settings.NavAppSelected="aimApp";0==Settings.NavAppPaneSize&&
!f&&this.showAppPane();this.aimSignInBtn.sizeMyself();setTimeout(a.hitch(this,function(){this.resizeAimSignin()}),200)}},selectEventApp:function(e,f){e&&"eventApp"!=this.currentApp&&ws.reporting.reportDLAction("Mail-LeftNav-minical-InlineOpen");this.currentApp="eventApp";var h=b.byId("eventApp");this.appStack.selectChild(h);h.init();a.query(".appCurr",this.apBtns).removeClass("appCurr");a.query(".ap-event .apBtn",this.apBtns).addClass("appCurr");if("eventApp"!=Settings.NavAppSelected)ws.settings.saveSoon({NavAppSelected:"eventApp"}),
Settings.NavAppSelected="eventApp";0==Settings.NavAppPaneSize&&!f&&this.showAppPane()},selectTodoApp:function(e,f){e&&"todoApp"!=this.currentApp&&ws.reporting.reportDLAction("Mail-LeftNav-minitodo-InlineOpen");this.currentApp="todoApp";var h=b.byId("todoApp");this.appStack.selectChild(h);h.init();a.query(".appCurr",this.apBtns).removeClass("appCurr");a.query(".ap-todo .apBtn",this.apBtns).addClass("appCurr");if("todoApp"!=Settings.NavAppSelected)ws.settings.saveSoon({NavAppSelected:"todoApp"}),Settings.NavAppSelected=
"todoApp";0==Settings.NavAppPaneSize&&!f&&this.showAppPane()},resizeAimSignin:function(){var b=a._getMarginSize(a.byId("aimApp")).w,e=a._getMarginSize(this.aimSignInBtn.domNode);this.aimSignInBtn.domNode.style.left=(b-e.w)/2+"px";e=a._getMarginSize(this.aimAutoSignInBtn.domNode);this.aimAutoSignInBtn.domNode.style.left=(b-e.w)/2+"px"},hideConnector:function(a){a.style.display="none"},positionFolderConnector:function(b){if(this.folderFlyout&&"none"!=this.folderFlyout.style.display){var e,f;e=this.folderFlyout;
b=a.position(b);e=a.position(e);f=b.y-e.y;31<f&&f<e.h-31&&!a.hasClass(this.mnFolders,"navItemCurrent")?a.style(this.folderFlyoutConnector,{height:b.h-2+"px",top:f+"px",display:"block"}):this.hideConnector(this.folderFlyoutConnector)}},positionConnector:function(b){if(this.flyout&&"none"!=this.flyout.style.display){if(!b)if(b=a.query(".navAppCurr",this.mnAppsDiv),b.length)b=a.query(".navAppCurr",this.mnAppsDiv)[0];else return;var e,b=a.position(b);e=a.position(this.flyout);a.style(this.flyoutConnector,
{height:b.h-2+"px",top:b.y-e.y+"px",display:"block"})}},flyoutApp:function(e){if(!this.reporting_idMap)this.reporting_idMap={contactApp:"Mail-LeftNav-minicontacts-FlyoutOpen",aimApp:"Mail-LeftNav-miniaim-FlyoutOpen",eventApp:"Mail-LeftNav-minical-FlyoutOpen",todoApp:"Mail-LeftNav-minitodo-FlyoutOpen"};ws.reporting.reportDLAction(this.reporting_idMap[e]);this.closeFlyoutFolders();var f=b.byId(e);f.init&&f.init();this.appStack.removeChild(f);this.flyout?this.restoreApp():(this.flyout=a.create("div",
{className:"flyoutCont",style:"display:none;"},a.body()),this.flyoutConnector=a.create("div",{className:"foConnector"},this.flyout));a.place(f.domNode,this.flyout,"first");a.removeClass(f.domNode,"dijitHidden");a.query(".navItem",this.mnAppsDiv).removeClass("navAppCurr");var h=a.query("."+e,this.mnAppsDiv)[0];a.hasClass(h,"navItemCurrent")||a.query("."+e,this.mnAppsDiv).addClass("navAppCurr");ws.widget.hideInstatip(a.query("."+e,this.mnAppsDiv)[0]);f.show();a.query(".appTitleClose",f.domNode).style("display",
"");this.flyout.style.display="";var g=a._getMarginSize(f.domNode);g.w=180;if(200>g.h)g.h=200;if(g.h!=Settings.NavAppPaneSize&&1<Settings.NavAppPaneSize)g.h=Settings.NavAppPaneSize;a.marginBox(f.domNode,{w:g.w,h:g.h});"aimApp"==e&&this.resizeAimSignin();setTimeout(function(){f.resize()},0);this.positionConnector(h)},flyoutFolders:function(){require(["ws/mail/FolderApp"],a.hitch(this,function(b){this.restoreApp();a.addClass(this.mnFolders,"folderBtnSelected");if(!this.folderFlyout)this.folderFlyout=
a.create("div",{id:"folderFlyCont",className:"folderFlyCont",style:"display:none;"},a.body()),this.folderApp=new b,this.folderFlyout.appendChild(this.folderApp.domNode),this.folderApp.setModel(this.mailModel),this.folderFlyoutConnector=a.create("div",{className:"foConnector"},this.folderFlyout),this.connect(this.folderApp,"handleClick",a.hitch(this,this.hideConnector,this.folderFlyoutConnector)),this.connect(this.folderApp,"appClose",a.hitch(this,function(){a.removeClass(this.mnFolders,"folderBtnSelected")}));
this.folderApp.modelUpdated();var b=ws.WebSuite.viewportSize.h,e=a._getMarginSize(this.appStack.domNode),f=a.position(this.mnFolders);e.w=180;if(200>e.h)e.h=200;a.style(this.folderApp.domNode,{width:e.w+"px",height:e.h+"px"});f.y=f.y-e.h/2+20;if(f.y+e.h>b)f.y=b-e.h-2;this.folderFlyout.style.top=f.y+"px";var h=this.folderApp;setTimeout(function(){h.resize()},0);this.folderFlyout.style.display="block";a.hasClass(this.mnFolders,"navItemCurrent")||this.positionFolderConnector(this.mnFolders)}))},closeFlyoutFolders:function(){if(this.folderFlyout)this.folderFlyout.style.display=
"none",a.removeClass(this.mnFolders,"folderBtnSelected")},restoreApp:function(){if(this.flyout){this.flyout.style.display="none";var e=this.flyout.firstChild;if(e&&"foConnector"!=e.className){var f=b.byNode(e);f.hide();a.query(".navItem",this.mnAppsDiv).removeClass("navAppCurr");this.flyout.removeChild(e);this.appStack.addChild(f);a.query(".appTitleClose",f.domNode).style("display","none");this.selectAppById(f.domNode.id);this.hiliteCurrentApp()}}this.closeFlyoutFolders()},searchActive:function(b,
e,f){var h=e;if(e&&e.domNode)h=e.domNode,e.coords=null;if(this.isMini)if(b)this.searchActive(!1,null,!0),this.miniNavSearch(!0),this.miniSearchDat.oldSi=h,a._getMarginSize(this.mnSearch),a._getMarginSize(h),a.addClass(this.mnSearch,"mnSearchActive"),a.addClass(h,"searchInfoMini");else{if(!h)h=this.miniSearchDat.oldSi;a.removeClass(this.mnSearch,"mnSearchActive");h&&a.removeClass(h,"searchInfoMini");this.mnSearchClose();if(!f)this.mnSearchField.value="";this.miniSearchDat.oldSi=null}else{if(!h)h=this.miniSearchDat.oldSi;
h&&a.removeClass(h,"searchInfoMini");this.mnSearchClose();this.miniSearchDat.oldSi=null}},updateNavCollapser:function(e){var f=ws.WebSuite.getCurrentViewId();if(ws.CalSolo||"todayPage"==f||"composeMessage"==f&&b.byId("composeMessage").isSendConfirmationOnShow())e=!1;this.navCollapserHidden=!e;a.query(".navCollapser").style("display",e?"block":"none")},updateCollapserNot:function(){a.query(".navCollapser").removeClass("navColNot")},onSettingsShow:function(){this.restoreApp();this.mnSearchClose()},
onSettingsHide:function(){if(a.hasClass(this.mnSearch,"mnSearchActive")&&this.isMini)this.mnSearch.style.display="block"},showMnSearch:function(b){if(this.isMini){var e=a.hasClass(this.mnSearch,"mnSearchActive");this.mnSearch.style.display=b&&e?"block":"none"}},onChatSettings:function(){this.aimAutoSignInBtn.setChecked("True"==Settings.ChatAutoSignOn)},restartManilla:function(){"manilla"==ws.WebSuite._currentTab&&this.showManilla()},showManilla:function(){var b=ws.themes.ThemeConfig;b.initialThemeLoaded?
(b=ws.string.substituteParams(Config.ManillaUrl,b.getThemeColor("Gen_base",!0),b.getThemeColor("Gen_medium",!0),b.getThemeColor("Gen_dark",!0),b.getThemeColor("Gen_accent",!0),b.getThemeColor("Gen_accentDark",!0)),ws.io.rpc({action:"OauthUrl",content:{url:b,provider:"manilla"},load:a.hitch(this,function(b){ws.WebSuite.selectTab("manilla",a.hitch(this,function(e){var f=ws.string.substituteParams(Config.ManillaLoaderUrl,encodeURIComponent(b.url));e.domNode.innerHTML="";a.create("iframe",{src:f},e.domNode)}))}),
error:a.hitch(this,function(){})})):setTimeout(a.hitch(this,"showManilla"),100)},updateManillaCount:function(){if(Settings.ManillaActive&&Config.ManillaEnabled){var b="manillaCountReq"+this.manillaCountReq++;ws.io.rpc({action:"OauthUrl",content:{url:ws.string.substituteParams(Config.ManillaCountUrl,encodeURIComponent("dojo_request_script_callbacks."+b)),provider:"manilla"},load:a.hitch(this,function(e){h.get(e.url,{jsonp:"jsonp",timeout:7E3,preventCache:!1,altId:b}).then(a.hitch(this,"manillaCountResp"),
a.hitch(this,"manillaCountError"))}),error:a.hitch(this,function(){})})}},manillaCountResp:function(b){var e=b.total_alerts;(b=b.error)?-1==b?this.cancelManillaTimer():this.setManillaTimer():(b=0<e?e:"",a.query(".unseen",this.manillaItem).innerHTML(""+b).style("display",0<e?"block":"none"),a.toggleClass(this.manillaItem,"hasUnseen",0<e),a.query(".mnUnseen",this.mnManilla).innerHTML(99<e?"99+":b).style("display",0<e?"block":"none"),this.setManillaTimer())},manillaCountError:function(){this.setManillaTimer()},
setManillaTimer:function(){this.manillaTimer=setTimeout(a.hitch(this,"updateManillaCount"),Config.ManillaCountCycle)},cancelManillaTimer:function(){this.manillaTimer&&clearTimeout(this.manillaTimer)},onManillaSettings:function(){this.manillaItem.style.display=Settings.ManillaActive&&Config.ManillaEnabled?"block":"none";this.mnManilla.style.display=Settings.ManillaActive&&Config.ManillaEnabled?"block":"none"}})})},"ws/widget/SingleLineNotification":function(){define("ws/widget/SingleLineNotification",
"dojo/_base/declare,dojo/text!ws/widget/SingleLineNotification.html,dojo/text!ws/widget/SingleLineNotification.css,dojo,dijit,dijit/_Widget,dijit/_TemplatedMixin,dojo/_base/fx".split(","),function(g,j,f,a,b,e,h,k){return g([e,h],{templateString:j,css:{templateString:f},extraClassName:"",close:function(b){k.animateProperty({node:this.domNode,duration:300,properties:{height:{end:0,unit:"px"}},onEnd:a.hitch(this,function(){this.hide();a.publish("WebSuite/CloseNotification")})}).play();if("awayMessage_1"!=
ws.WebSuite.notificationMsg.id&&!ws.WebSuite.notificationMsg.sticky&&!0!==b)ws.WebSuite.seenNotificationIds[ws.WebSuite.seenNotificationIds.length]=ws.WebSuite.notificationMsg.id,ws.settings.saveSoon({SeenNotificationMsgs:ws.WebSuite.seenNotificationIds})},autoDismiss:function(b){setTimeout(a.hitch(this,function(){this.close(!0)}),b?1E3*b:3E4)}})})},"dojox/grid/contentBuilder":function(){define("dojox/grid/contentBuilder",["dojo/_base/declare","dojo","dojox/grid/Builder"],function(g,j,f){return g("dojox.grid.contentBuilder",
[f],{update:function(){this.prepareHtml()},prepareHtml:function(){for(var a=this.grid.get,b=this.view.structure.rows,e=0,f;f=b[e];e++)for(var g=0,j;j=f[g];g++)j.get=j.get||void 0==j.value&&a,j.markup=this.generateCellMarkup(j,j.cellStyles,j.cellClasses,!1)},generateHtml:function(a,b){var e=[this._table],f=this.view,g=f.onBeforeRow,f=f.structure.rows;g&&g(b,f);for(var g=0,j;j=f[g];g++)if(!j.hidden&&!j.header){e.push(!j.invisible?"<tr>":'<tr class="dojoxGrid-invisible">');for(var n=0,m,q,s,o;m=j[n];n++)q=
m.markup,s=m.customClasses=[],o=m.customStyles=[],q[5]=m.format(a),q[1]=s.join(" "),q[3]=o.join(";"),e.push.apply(e,q);e.push("</tr>")}e.push("</table>");return e.join("")},decorateEvent:function(a){a.rowNode=this.findRowTarget(a.target);if(!a.rowNode)return!1;a.rowIndex=a.rowNode[dojox.grid.rowIndexTag];this.baseDecorateEvent(a);a.cell=this.grid.getCell(a.cellIndex);return!0}})})},"dojo/_base/html":function(){define("dojo/_base/html","./kernel,../dom,../dom-style,../dom-attr,../dom-prop,../dom-class,../dom-construct,../dom-geometry".split(","),
function(g,j,f,a,b,e,h,k){g.byId=j.byId;g.isDescendant=j.isDescendant;g.setSelectable=j.setSelectable;g.getAttr=a.get;g.setAttr=a.set;g.hasAttr=a.has;g.removeAttr=a.remove;g.getNodeProp=a.getNodeProp;g.attr=function(b,e,f){return 2==arguments.length?a["string"==typeof e?"get":"set"](b,e):a.set(b,e,f)};g.hasClass=e.contains;g.addClass=e.add;g.removeClass=e.remove;g.toggleClass=e.toggle;g.replaceClass=e.replace;g._toDom=g.toDom=h.toDom;g.place=h.place;g.create=h.create;g.empty=function(a){h.empty(a)};
g._destroyElement=g.destroy=function(a){h.destroy(a)};g._getPadExtents=g.getPadExtents=k.getPadExtents;g._getBorderExtents=g.getBorderExtents=k.getBorderExtents;g._getPadBorderExtents=g.getPadBorderExtents=k.getPadBorderExtents;g._getMarginExtents=g.getMarginExtents=k.getMarginExtents;g._getMarginSize=g.getMarginSize=k.getMarginSize;g._getMarginBox=g.getMarginBox=k.getMarginBox;g.setMarginBox=k.setMarginBox;g._getContentBox=g.getContentBox=k.getContentBox;g.setContentSize=k.setContentSize;g._isBodyLtr=
g.isBodyLtr=k.isBodyLtr;g._docScroll=g.docScroll=k.docScroll;g._getIeDocumentElementOffset=g.getIeDocumentElementOffset=k.getIeDocumentElementOffset;g._fixIeBiDiScrollLeft=g.fixIeBiDiScrollLeft=k.fixIeBiDiScrollLeft;g.position=k.position;g.marginBox=function(a,b){return b?k.setMarginBox(a,b):k.getMarginBox(a)};g.contentBox=function(a,b){return b?k.setContentSize(a,b):k.getContentBox(a)};g.coords=function(a,b){g.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");var a=j.byId(a),
e=f.getComputedStyle(a),e=k.getMarginBox(a,e),h=k.position(a,b);e.x=h.x;e.y=h.y;return e};g.getProp=b.get;g.setProp=b.set;g.prop=function(a,e,f){return 2==arguments.length?b["string"==typeof e?"get":"set"](a,e):b.set(a,e,f)};g.getStyle=f.get;g.setStyle=f.set;g.getComputedStyle=f.getComputedStyle;g.__toPixelValue=g.toPixelValue=f.toPixelValue;g.style=function(a,b,e){switch(arguments.length){case 1:return f.get(a);case 2:return f["string"==typeof b?"get":"set"](a,b)}return f.set(a,b,e)};return g})},
"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(g,j,f){function a(a){return h[a]=new Function("item","index","array",a)}function b(b){var e=!b;return function(f,g,k){var j=0,l=f&&f.length||0,v;l&&"string"==typeof f&&(f=f.split(""));"string"==typeof g&&(g=h[g]||a(g));if(k)for(;j<l;++j){if(v=!g.call(k,f[j],j,f),b^v)return!v}else for(;j<l;++j)if(v=!g(f[j],j,f),b^v)return!v;return e}}function e(a){var b=1,e=0,f=0;a||(b=e=f=-1);return function(h,g,j,v){if(v&&0<b)return l.lastIndexOf(h,
g,j);var v=h&&h.length||0,w=a?v+f:e;j===k?j=a?e:v+f:0>j?(j=v+j,0>j&&(j=e)):j=j>=v?v+f:j;for(v&&"string"==typeof h&&(h=h.split(""));j!=w;j+=b)if(h[j]==g)return j;return-1}}var h={},k,l={every:b(!1),some:b(!0),indexOf:e(!0),lastIndexOf:e(!1),forEach:function(b,e,f){var g=0,k=b&&b.length||0;k&&"string"==typeof b&&(b=b.split(""));"string"==typeof e&&(e=h[e]||a(e));if(f)for(;g<k;++g)e.call(f,b[g],g,b);else for(;g<k;++g)e(b[g],g,b)},map:function(b,e,f,g){var k=0,j=b&&b.length||0,g=new (g||Array)(j);j&&
"string"==typeof b&&(b=b.split(""));"string"==typeof e&&(e=h[e]||a(e));if(f)for(;k<j;++k)g[k]=e.call(f,b[k],k,b);else for(;k<j;++k)g[k]=e(b[k],k,b);return g},filter:function(b,e,f){var g=0,k=b&&b.length||0,j=[],l;k&&"string"==typeof b&&(b=b.split(""));"string"==typeof e&&(e=h[e]||a(e));if(f)for(;g<k;++g)l=b[g],e.call(f,l,g,b)&&j.push(l);else for(;g<k;++g)l=b[g],e(l,g,b)&&j.push(l);return j},clearCache:function(){h={}}};f.mixin(g,l);return l})},"dojo/promise/Promise":function(){define(["../_base/lang"],
function(g){function j(){throw new TypeError("abstract");}return g.extend(function(){},{then:function(){j()},cancel:function(){j()},isResolved:function(){j()},isRejected:function(){j()},isFulfilled:function(){j()},isCanceled:function(){j()},always:function(f){return this.then(f,f)},otherwise:function(f){return this.then(null,f)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/errors/RequestTimeoutError":function(){define("dojo/errors/RequestTimeoutError",
["./create","./RequestError"],function(g,j){return g("RequestTimeoutError",null,j,{dojoType:"timeout"})})},"ws/im/wim":function(){define("ws/im/wim","dojo,dojo/_base/lang,dojo/io/script,dojox/io/scriptFrame,ws/io,ws/sound".split(","),function(g,j,f){j.setObject("ws.im.wim",{_token:null,_tokenExpiresIn:0,_aimsid:null,_fetchBaseUrl:null,_requestId:1,_removalIntervalId:0,_fetchFailures:0,_sessionFailures:0,lastIMStatusCode:0,_offlineGroupName:"Offline",_systemAimId:">>$y$tem<<",listeners:[],events:"buddylist,presence,im,typing,offlineIM",
user:null,buddies:{},phones:{},acceptedBuddies:{aolsystemmsg:!0},declinedBuddies:{},ignoredBuddies:{},blockedBuddies:{},allowedBuddies:{},pdMode:"permitAll",gotBL:!1,onlineBuddies:0,Alist:[],groups:[],serviceData:{},pendingNick:null,cannedAwayMessages:[Config.Strings.BuddyStatus_Label_IAmAway,Config.Strings.BuddyStatus_Label_OnThePhone,Config.Strings.BuddyStatus_Label_BeRightBack],use24hour:!1,resetUserData:function(){this._token=null;this._tokenExpiresIn=0;this._redirectUrl=this._fetchBaseUrl=this._aimsid=
null;this._fetchFailures=0;this.user=null;this.buddies={};this.groups=[];this.customOnlineMessages=[];this.customAwayMessages=[];this.ignoredBuddies={};this.blockedBuddies={};this.allowedBuddies={};this.pdMode="permitAll";this.Alist=[];this.gotBL=!1},removeListener:function(a){a=g.indexOf(this.listeners,a);-1<a&&this.listeners.splice(a,1)},start:function(){this._endCalled=!1;g.addOnLoad(g.hitch(this,function(){this._token=null;ws.io.rpc({action:"GetOpenAuthToken",load:g.hitch(this,function(a){(this._token=
a.token_a)&&0<this._token.length?this._startSession():this._errorResponse(a,{args:{_wimAction:"aim/startSession",_wimErrorType:1}})}),error:g.hitch(this,function(){this._errorResponse(null,{args:{_wimAction:"aim/startSession",_wimErrorType:1}})})})}));var a=function(){ws.im.wim.end(!0)};"undefined"==typeof window.addEventListener?window.attachEvent("onunload",a):window.addEventListener("unload",a,!1);a=(new Date).toLocaleTimeString();this.use24hour="M"!=a.charAt(a.length-1)},end:function(a){this._stopFetchEvents();
if(!this._endCalled){this._endCalled=!0;var b="_sessionEndResponse";a&&(this._removalIntervalId&&clearInterval(this._removalIntervalId),this._stopFetchEvents(),b=null);this._call("aim/endSession",b,1,{aimsid:this._aimsid,invalidateToken:0});for(b=a=(new Date).getTime();a+1E3>b;)b=(new Date).getTime()}},setState:function(a,b,e){this._call("presence/setState","_setStateResponse",9,{aimsid:this._aimsid,view:a,idle:e})},setStatus:function(a){this.tmpStatus=a=(a||"").replace(/^\s+/,"").replace(/\s+$/,
"");this._call("presence/setStatus","_setStatusResponse",9,{aimsid:this._aimsid,statusMsg:a})},setTyping:function(a,b){Settings.ChatPrivacyTyping&&this._call("im/setTyping","_discardResponse",9,{aimsid:this._aimsid,typingStatus:b,t:a})},sendSMS:function(a,b,e){this.phones[b]=a;this.sendIm(b,e,!1,!1)},sendIm:function(a,b,e,f){e=e||!1;(new Date).getTime();this.lastIMStatusCode=0;delete this.declinedBuddies[a];delete this.ignoredBuddies[a];this._call("im/sendIM","_discardResponse",9,{aimsid:this._aimsid,
t:a,message:b,offlineIM:e,autoResponse:f})},restoreConversation:function(a,b){var e=g.create("div",{innerHTML:b},g.body()),f="",k="",j=g.query(".vcard",e);if(2<j.length)return!1;for(var n=0;n<j.length;n++)f=j[n].getAttribute("uid"),k=g.query(".fn",j[n])[0].innerHTML;if(!f||0==f.length)return!1;if(j=ws.im.wim.buddies[f]){if(j.im=[],j.aimid==j.displayId&&k!=f)j.displayId=k}else j=ws.im.wim.buddies[f]={aimId:f,displayId:k};k=g.query(".service",e)[0].innerHTML;if("facebook"==k)j.service=k;k=g.query(".message",
e);for(j=0;j<k.length;j++){n={senderAimId:"",message:"",autoresponse:!1,timestamp:0};if(k[j].hasChildNodes())for(var m=g.hasClass(k[j],"status"),q=0;q<k[j].childNodes.length;q++)if(g.hasClass(k[j].childNodes[q],"username"))if(m)n.senderAimId=this._systemAimId;else if(g.hasClass(k[j].childNodes[q],"buddyImName"))n.senderAimId=f;else{var s=k[j].childNodes[q].getElementsByTagName("a");n.senderAimId=0==s.length?k[j].childNodes[q].innerHTML:s[0].innerHTML}else if(g.hasClass(k[j].childNodes[q],"messageData"))n.message=
k[j].childNodes[q].innerHTML;else if(g.hasClass(k[j].childNodes[q],"timestamp")&&(s=k[j].childNodes[q].getAttribute("title"),s=ws.date.GetDateFromFormat(s.substr(0,15),"yyyyMMddTHHmmss"),0!=s))n.timestamp=s/1E3;n.senderAimId&&0<n.senderAimId.length&&this._storeIm(f,n)}g._destroyElement(e);ws.presence.launchAIMPanel(f,!1,!1,!0);return!0},addBuddy:function(a,b,e){if(e&&0<e.length)this.pendingNick=e;this._call("buddylist/addBuddy","_addBuddyResponse",5,{aimsid:this._aimsid,buddy:a,group:b})},removeBuddy:function(a,
b){this._call("buddylist/removeBuddy","_removeBuddyResponse",5,{aimsid:this._aimsid,buddy:a,group:b})},removeGroup:function(a){this._call("buddylist/removeGroup","_removeGroupResponse",5,{aimsid:this._aimsid,group:a})},renameGroup:function(a,b){this._call("buddylist/renameGroup","_renameGroupResponse",5,{aimsid:this._aimsid,oldGroup:a,newGroup:b})},getPresence:function(a,b){this._getPresenceCallback=b;this._call("presence/get","_getPresenceResponse",9,{aimsid:this._aimsid,t:a})},blockBuddy:function(a){this.pdMode=
"denySome";this._call("preference/setPermitDeny","_discardResponse",5,{aimsid:this._aimsid,pdBlock:a,pdMode:this.pdMode});this.blockedBuddies[a]=!0;var b=this.buddies[a];this.buddies[a].state="offline";this._notify("onPresenceChanged",{aimId:a,oldValues:b})},unblockBuddy:function(a){this._call("preference/setPermitDeny","_discardResponse",5,{aimsid:this._aimsid,pdBlockRemove:a,pdMode:this.pdMode});delete this.blockedBuddies[a];this.buddies[a].state="online";this._notify("onPresenceChanged",{aimId:a,
oldValues:this.buddies[a]})},ignoreBuddy:function(a,b){b?this.ignoredBuddies[a]=b:delete this.ignoredBuddies[a];this._notify("onPresenceChanged",{aimId:a,oldValues:this.buddies[a]})},editBuddy:function(a){this._ebData=a;a.og&&a.ng?this._call("buddylist/moveBuddy","_moveBuddyResponse",9,{aimsid:this._aimsid,buddy:a.bn,group:a.og,newGroup:a.ng}):this._moveBuddyResponse()},_ebData:null,_moveBuddyResponse:function(){this._ebData&&null!=this._ebData.dn&&ws.im.wim.setNickname(this._ebData.bn,this._ebData.dn);
this._ebData=null},setNickname:function(a,b){this._call("buddylist/setBuddyAttribute","_discardResponse",9,{aimsid:this._aimsid,t:a,friendly:b})},moveBuddy:function(a,b,e){this._call("buddylist/moveBuddy","_discardResponse",9,{aimsid:this._aimsid,buddy:a,group:b,newGroup:e})},makeTimeStamp:function(a){return ws.date.formatTime(a,this.use24hour?"H:mm":"h:mma").toLowerCase()},_getPresenceResponse:function(a){a.users&&a.users[0]&&this._getPresenceCallback(a.users[0])},_removeGroupResponse:function(){this._notify("onGroupRemoved")},
_renameGroupResponse:function(){this._notify("onGroupRenamed")},_addBuddyResponse:function(a){this._notify("onBuddyAdded");if(null!=this.pendingNick)this.setNickname(a.results[0].buddy,this.pendingNick),this.pendingNick=null},_removeBuddyResponse:function(){this._notify("onBuddyRemoved")},isInBuddyList:function(a){return 0==ws.im.wim.groups.length||!(!this.buddies[a]||!this.buddies[a].groups)},getBuddyByNick:function(a){a=a.toLowerCase();for(id in this.buddies)if(this.buddies[id].friendly&&this.buddies[id].friendly.toLowerCase()==
a)return this.buddies[id];return null},getBuddyById:function(a){var b={aimId:a,state:"offline"};if(null==this.user||0==a.length)return b;var e=a.toLowerCase();return this.user&&e==this.user.aimId.toLowerCase()?this.user:this.isInBuddyList(a)?this.buddies[a]:b},getMiniIconUrl:function(a){return"online"==a.state&&ws.im.wim.isBuddyAllowed(a.aimId)&&a.buddyIcon&&0<a.buddyIcon.length?a.buddyIcon:Config.SpacerImageURL},isEditableGroup:function(a){return"Offline"!=a.name&&"Recent Buddies"!=a.name&&!a.groupPermissions},
isBuddyAllowed:function(a){var b="denyAll"!=this.pdMode&&("permitAll"==this.pdMode||"denySome"==this.pdMode&&!(a in this.blockedBuddies)||"permitSome"==this.pdMode&&a in this.allowedBuddies||"permitOnList"==this.pdMode&&this.isInBuddyList(a));return!(a in this.ignoredBuddies)&&b},getGroup:function(a){a=ws.lang.findByProp(ws.im.wim.groups,"name",a);return ws.im.wim.groups[a]},normalize:function(a){return a.toLowerCase().replace(/\s/g,"")},getDisplayId:function(a){return this.user&&a==this.user.aimId?
this.user.displayId:this.buddies[a]&&this.buddies[a].displayId?this.buddies[a].friendly||this.buddies[a].displayId:a},getExpressions:function(a,b){a=this.normalize(a);this._expressions[a]?b&&b(this._expressions[a]):this._call("expressions/get",function(e){this._expressions[a]=e.expressions;b&&b(e.expressions)},9,{t:a})},_expressions:{},playEventSound:function(a){ws.sound.play(Config.BaseAffinityResourcesURL+"sounds/"+{imSound:"voom.mp3"}[a])},replaceMsgTokens:function(a){var b=new Date,a=a.replace(/%n/gi,
ws.im.wim.user.displayId),a=a.replace(/%t/gi,b.toLocaleTimeString());return a=a.replace(/%d/gi,b.toLocaleDateString())},_getTokenResponse:function(a){if(a.token){this._token=a.token.a;this._tokenExpiresIn=a.token.expiresIn;var b=this;setTimeout(function(){b._startSession()},10)}else this._notify("onError",Config.Strings.Error_BadGetTokenResponse+a)},_startSessionResponse:function(a){a.fetchBaseURL?(this._aimsid=a.aimsid,this._fetchBaseUrl=a.fetchBaseURL,this.user=a.myInfo,this._fetchTimeoutId=setTimeout(this._fetchEvents,
700),this._getPermitDeny(),this._notify("onSessionStart"),this._notify("onUserLoad"),this._sessionFailures=0):this._notify("onError",Config.Strings.Error_BadStartSessionResponse+a)},_startSession:function(){var a="";Config.EnableIMServices&&(a+=",service");this._call("aim/startSession","_startSessionResponse",1,{events:this.events+a,assertCaps:"",interestCaps:"",language:Config.PageLocale})},_restartSession:function(){this._stopFetchEvents();this.resetUserData();this.start()},_getPermitDeny:function(){this._call("preference/getPermitDeny",
"_permitDenyResponse",9,{aimsid:this._aimsid})},_permitDenyResponse:function(a){this.blockedBuddies={};this.allowedBuddies={};this.pdMode=a.pdMode;a.blocks&&g.forEach(a.blocks,g.hitch(this,function(a){this.blockedBuddies[a]=!0}));a.allows&&g.forEach(a.allows,g.hitch(this,function(a){this.allowedBuddies[a]=!0}))},_fetchEvents:function(){0!=ws.im.wim._fetchTimeoutId&&ws.im.wim._call("fetchEvents","_fetchEventsResponse",9,{timeout:ws.im.wim._fetchTimeout})},_fetchTimeout:2E4,_fetchEventsResponse:function(a){if(a.fetchBaseURL)this._fetchBaseUrl=
a.fetchBaseURL;var b=!0,e=a.events;this._fetchFailures=0;var f=!1;if(e){for(var k=0;k<e.length;k++){var j=e[k];if("sessionEnded"==j.type)b=!1,this.resetUserData(),this._notify("onSessionEnd");else if("buddylist"==j.type)this._unpackBuddyList(j.eventData),Config.EnableCHAL&&!this.gotBL&&this._fetchAlist(),f=this.gotBL=!0;else if("presence"==j.type)this._presenceChanged(j.eventData);else if("im"==j.type||"offlineIM"==j.type){var n=j.eventData,m=n.aimId||n.source.aimId,q=n.message.match(/<[a-z]/ig),
s=n.message.match(/<\/[a-z]/ig);if(q&&s&&q.length!=s.length)n.message=ws.html.getText(n.message);this.phones[m]&&(m=this.phones[m]);if("offlineIM"==j.type)n.message=ws.string.substituteParams(Config.Strings.IM_Notice_OfflineIM,ws.date.timeAgo(1E3*n.timestamp))+" "+n.message;if(n.source)this.buddies[m]?this._presenceChanged(n.source):this.buddies[m]=n.source;this.isBuddyAllowed(m)&&this._notify("onIm",{senderAimId:m,message:n.message,autoresponse:n.autoresponse,timestamp:n.timestamp})}else"typing"==
j.type?this.isBuddyAllowed(j.eventData.aimId)&&this._notify("onTypingChanged",{aimId:j.eventData.aimId,status:j.eventData.typingStatus}):"service"==j.type&&(g.mixin(this.serviceData,j.eventData),this.gotBL&&this.serviceData.serviceURLs&&this.serviceData.serviceConfigs&&(f=!0))}f&&(this._notify("onBuddyListLoad"),g.publish("WSFeedbackEnd",[Config.Strings.Loading]))}b?this._fetchTimeoutId=setTimeout(this._fetchEvents,a.timeToNextFetch||700):this._stopFetchEvents()},_removeComment:function(a,b){for(var e=
0;e<a.comments.length;e++)if(a.comments[e].id==b.id){a.comments[e].splice(e,1);break}},_removeActivity:function(a,b){for(var e=0;e<a.length;e++)if(a[e].id==b)return a.splice(e,1)[0];return null},_updateActivity:function(a,b,e){for(var f=0;f<a.length;f++)a[f].id==b&&(a[f]=e)},_sessionEndResponse:function(){this._notify("onSessionEnd");this.resetUserData()},_storeIm:function(a,b){var e=this.buddies[a];e||(e=this.buddies[a]={aimId:a,displayId:a,state:"offline"});if(!e.im)e.im=[];if(!e.groups)e.groups=
[this._offlineGroupName];e.im.push(b)},_decodePresence:function(a){if(a.awayMsg)a.awayMsg=a.awayMsg;if(a.statusMsg)a.statusMsg=a.statusMsg},_setStateResponse:function(a){this._decodePresence(a.myInfo);this.user=a.myInfo;this._notify("onUserLoad")},_setStatusResponse:function(){this.user.statusMsg=this.tmpStatus;this._decodePresence(this.user);this._notify("onUserLoad")},isStateOffline:function(a){return-1!=g.indexOf(["offline","unknown","notfound"],a)},_presenceChanged:function(a){var b=null;this._decodePresence(a);
var e=this.buddies[a.aimId];if(a.aimId==this.user.aimId)this.user=a;if(e){for(var f in a)if("im"!=f&&(!e[f]||e[f]!=a[f]))b||(b={}),b[f]=e[f],e[f]=a[f];if(e.awayMsg&&!a.awayMsg)b.awayMsg=e.awayMsg,e.awayMsg=null;if(e.statusMsg&&!a.statusMsg)b.statusMsg=e.statusMsg,e.statusMsg=null}else e=this.buddies[a.aimId]=a,b={};this.updateOnlineCount();e.baseTime=new Date;b&&this._notify("onPresenceChanged",{aimId:a.aimId,oldValues:b})},_stopFetchEvents:function(){clearTimeout(this._fetchTimeoutId);this._fetchTimeoutId=
0},_call:function(a,b,e,h){h||(h={});var k="",k="fetchEvents"==a?this._fetchBaseUrl:"auth/getToken"==a?Config.AuthServer+a:Config.WIMServer+a;if(null!=k){"im/sendIM"==a&&(k+="?comscoreChannel=websuite");h.r=this._requestId++;h.k=Config.WIMKey;h.f="json";if(this._token)h.a=this._token;var j=7E3;h.timeout&&(j+=h.timeout);b={url:k,callbackParamName:"c",content:h,load:g.hitch(this,"_loadResponse"),error:g.hitch(this,"_errorResponse"),timeout:j,preventCache:!0,_wimAction:a,_wimCall:b,_wimErrorType:e};
if("fetchEvents"==a)b.frameDoc="fetchEframe";f.get(b)}},_loadResponse:function(a,b){var a=a.response,b=b.args,e=a.statusCode;if(200==e){if(b._wimCall)if(g.isFunction(b._wimCall))b._wimCall.apply(this,[a.data]);else this[b._wimCall](a.data)}else Config.UseRealToken&&401==e?0==this._sessionFailures&&(this._sessionFailures++,ws.lang.setTimeout(this,"_restartSession",1E3)):(this._notify("onError",{action:b._wimAction,statusCode:a.statusCode,statusText:Config.Strings.UnspecifiedError,params:b.content,
errorType:b._wimErrorType,errorMsg:a.statusText,resp:a}),type="error")},_errorResponse:function(a,b){b=b.args;"aim/startSession"==b._wimAction&&0==this._sessionFailures?(this._sessionFailures++,this._restartSession()):"aim/endSession"==b._wimAction?this.resetUserData():a&&"timeout"==a.dojoType?"fetchEvents"==b._wimAction?2<++this._fetchFailures?this._restartSession():this._fetchTimeoutId=setTimeout(this._fetchEvents,700):this._notify("onError",{errorType:b._wimErrorType,errorMsg:Config.Strings.Error_ActionTimedOut+
b._wimAction}):this._notify("onError",{errorType:b._wimErrorType,errorMsg:a})},_notify:function(a,b){for(var e=0;e<this.listeners.length;e++){var f=this.listeners[e];if(f[a])f[a](b)}},_unpackBuddyList:function(a){if(a&&a.groups){var b=this.buddies;this.buddies={};this.groups=[];this.onlineBuddies=0;for(var e={displayName:Config.Strings.BuddyList_Label_GroupOffline,name:this._offlineGroupName,buddies:[],isOfflineGroup:!0},f={displayName:Config.Strings.BuddyList_Label_GroupFB,name:"Facebook Friends",
buddies:[],service:"facebook",groupPermissions:[]},a=a.groups,g=0;g<a.length;g++){var j=a[g].name,n=a[g].buddies,m=n.length,q=a[g];q.displayName="Recent Buddies"==j?Config.Strings.BuddyList_Label_GroupRecentBuddies:j;q.buddies=[];this.groups.push(q);for(var s=0;s<m;s++){var o=n[s].aimId,u=this.buddies[o];if(!u&&(u=this.buddies[o]=n[s],u.groups=[this._offlineGroupName],e.buddies.push(o),this.isStateOffline(u.state)||this.onlineBuddies++,b[o]&&b[o].im))u.im=b[o].im;u.baseTime=new Date;u.groups.push(j);
q.buddies.push(o)}}for(id in b)if(!this.buddies[id])this.buddies[id]=b[id],this.buddies[id].groups=[this._offlineGroupName],e.buddies.push(id);(b=ws.im.wim.getServiceConfig("facebook"))&&(!b.associated||b.notAuthorized)&&this.groups.push(f);e.buddies=e.buddies.sort();this.groups.push(e)}},updateOnlineCount:function(){this.onlineBuddies=0;for(id in this.buddies)this.isStateOffline(this.buddies[id].state)||this.onlineBuddies++},_discardResponse:function(){},reportAction:function(a,b,e){if(Config.EnableAIMReporting){var f=
"";e&&(f=",additional="+e);this._call("aim/reportAction","_discardResponse",9,{aimsid:this._aimsid,action:"type="+a+",id="+encodeURIComponent(b)+f})}},getServiceUrls:function(a){if(this.user&&this.serviceData&&this.serviceData.serviceURLs)for(var b=0;b<this.serviceData.serviceURLs.length;b++)if(this.serviceData.serviceURLs[b].name==a)return this.serviceData.serviceURLs[b].urls;return null},getServiceConfig:function(a){if(this.user&&this.serviceData.serviceConfigs)for(var b=0;b<this.serviceData.serviceConfigs.length;b++)if(this.serviceData.serviceConfigs[b].name==
a)return this.serviceData.serviceConfigs[b];return null},setServiceConnection:function(a,b){b&&g.publish("WSFeedbackStart",[Config.Strings.Loading]);this._call("service/setConnection","_discardResponse",9,{aimsid:this._aimsid,serviceName:a,connected:b?"1":"0"})},disableService:function(a){this._call("service/setCredentials","_discardResponse",9,{aimsid:this._aimsid,s:this.user.aimId,serviceName:a,serviceToken:"",serviceUid:"",serviceApiKey:""})},setServiceSignon:function(a,b){this._call("service/setAttributes",
"_discardResponse",9,{aimsid:this._aimsid,serviceName:a,autoLogin:b?"1":"0"})},setGroupCollapsed:function(a,b){this._call("buddylist/setGroupAttribute","_discardResponse",9,{aimsid:this._aimsid,group:a,collapsed:b?"1":"0"})},_fetchAlist:function(){g.io.script.get({url:Config.CHALServer+"chal/getRankedAlist",callbackParamName:"c",content:{f:"json",sg:this.user.aimId,rankingRuleset:"mail-personal",devId:Config.CHALKey},load:g.hitch(this,"_updateAlist"),error:g.hitch(this,"_errorAlist"),timeout:7E3})},
_updateAlist:function(a){if(200==a.response.statusCode){for(var b=[],a=a.response.data.aList.contacts,e=0;e<a.length&&!(this.getBuddyById(a[e].address),b.push(a[e].address),5<=b.length);e++);this.Alist=b;this._notify("onAList")}},_errorAlist:function(){},getAlist:function(){return this.Alist}});ws.im.wim.listeners.push({onSessionStart:function(){this.mouseMoveHandler=g.connect(g.body(),"onmousemove",this,"onMouseMove");clearInterval(this.updateInterval);this.updateInterval=setInterval(g.hitch(this,
"updateIdleState"),6E4);this.lastActivity=new Date;this.lastStateToken="online"},onSessionEnd:function(){clearInterval(this.updateInterval);g.disconnect(this.mouseMoveHandler);clearInterval(this.updateInterval)},onMouseMove:function(){this.lastActivity=new Date;"online"!=this.lastStateToken&&this.updateIdleState()},updateIdleState:function(){if(Settings.ChatShowIdleTime&&null!=ws.im.wim.user){var a=ws.im.wim.user.state;if(!("invisible"==a||"away"==a)){var a=Math.round((new Date-this.lastActivity)/
1E3),b=900<a,e=b?this.lastActivity:"online";if(e!=this.lastStateToken)ws.im.wim.setState(b?"idle":"online",null,a),this.lastStateToken=e}}}})})},"url:ws/widget/WSDatePicker.css":"","ws/widget/Checkbox":function(){define("ws/widget/Checkbox",["dojo/_base/declare","dojo","dijit","dijit/_Widget","dijit/_TemplatedMixin"],function(g,j,f,a,b){return g([a,b],{templateString:'<table class="chkBoxCntr"><tr valign="top"><td><div class="mainSprite chkBox" data-dojo-attach-point="chkNode" data-dojo-attach-event="onclick:toggle"></div></td><td class="chkBoxLabel" data-dojo-attach-point="labelNode" data-dojo-attach-event="onclick:toggle"></td></tr></table>',
checked:!1,label:"",disabled:!1,startup:function(){this.checked&&this.setChecked(!0);this.setLabel(this.label);this.setDisabled(this.disabled)},setChecked:function(a){this.checked=a?!0:!1;j.toggleClass(this.domNode,"chkBoxChecked",this.checked)},setDisabled:function(a){this.disabled=a;j.toggleClass(this.domNode,"chkBoxDisabled",this.disabled)},setLabel:function(a){this.label=a;this.labelNode.innerHTML=this.label},toggle:function(a){this.disabled||(this.setChecked(!this.checked),this.onClick(a))},
onClick:function(){}})})},"dijit/_base/sniff":function(){define("dijit/_base/sniff",["dojo/uacss"],function(){})},"dojox/grid/_grid/selection":function(){define("dojox/grid/_grid/selection",["dojo/_base/declare","dojo"],function(g){return g("dojox.grid.selection",null,{constructor:function(g){this.grid=g;this.selected=[]},multiSelect:!0,selected:null,updating:0,selectedIndex:-1,onCanSelect:function(g){return this.grid.onCanSelect(g)},onCanDeselect:function(g){return this.grid.onCanDeselect(g)},onSelected:function(g){return this.grid.onSelected(g)},
onDeselected:function(g){return this.grid.onDeselected(g)},onChanging:function(){},onChanged:function(){return this.grid.onSelectionChanged()},isSelected:function(g){return this.selected[g]},getFirstSelected:function(){for(var g=0,f=this.selected.length;g<f;g++)if(this.selected[g])return g;return-1},getNextSelected:function(g){for(var g=g+1,f=this.selected.length;g<f;g++)if(this.selected[g])return g;return-1},getSelected:function(){for(var g=[],f=0,a=this.selected.length;f<a;f++)this.selected[f]&&
g.push(f);return g},getSelectedCount:function(){for(var g=0,f=0;f<this.selected.length;f++)this.selected[f]&&g++;return g},beginUpdate:function(){if(0==this.updating)this.onChanging();this.updating++},endUpdate:function(){this.updating--;if(0==this.updating)this.onChanged()},select:function(g){this.unselectAll(g);this.addToSelection(g)},addToSelection:function(g){g=Number(g);if(this.selected[g])this.selectedIndex=g;else if(!1!==this.onCanSelect(g))this.selectedIndex=g,this.beginUpdate(),this.selected[g]=
!0,this.grid.onSelected(g),this.endUpdate()},deselect:function(g){g=Number(g);if(this.selectedIndex==g)this.selectedIndex=-1;this.selected[g]&&!1!==this.onCanDeselect(g)&&(this.beginUpdate(),delete this.selected[g],this.grid.onDeselected(g),this.endUpdate())},setSelected:function(g,f){this[f?"addToSelection":"deselect"](g)},toggleSelect:function(g){this.setSelected(g,!this.selected[g])},insert:function(g){this.selected.splice(g,0,!1);this.selectedIndex>=g&&this.selectedIndex++},remove:function(g){this.selected.splice(g,
1);this.selectedIndex>=g&&this.selectedIndex--},unselectAll:function(g){for(var f in this.selected)f!=g&&!0===this.selected[f]&&this.deselect(f)},shiftSelect:function(g,f){var a=0<=g?g:f,b=f;a>b&&(b=a,a=f);for(;a<=b;a++)this.addToSelection(a)},clickSelect:function(g,f,a){this.beginUpdate();if(this.multiSelect){var b=this.selectedIndex;f||this.unselectAll(g);a?this.shiftSelect(b,g):f?this.toggleSelect(g):this.addToSelection(g)}else this.select(g);this.endUpdate()},clickSelectEvent:function(g){this.clickSelect(g.rowIndex,
g.ctrlKey,g.shiftKey)},clear:function(){this.beginUpdate();this.unselectAll();this.endUpdate()}})})},"dojo/_base/config":function(){define(["../has","require"],function(g,j){var f={},a=j.rawConfig,b;for(b in a)f[b]=a[b];return f})},"dojo/request/iframe":function(){define("module,require,./watch,./util,./handlers,../_base/lang,../io-query,../query,../has,../dom,../dom-construct,../_base/window".split(","),function(g,j,f,a,b,e,h,k,l,n,m,q){function s(){return!this.isFulfilled()}function o(){return!!this._finished}
function u(a,f){if(!f)try{var h=a.options,g=v.doc(v._frame),j=h.handleAs;if("html"!==j){if("xml"===j)if("html"===g.documentElement.tagName.toLowerCase()){k("a",g.documentElement).orphan();var l=g.documentElement.innerText,l=l.replace(/>\s+</g,"><");a.text=e.trim(l)}else a.data=g;else a.text=g.getElementsByTagName("textarea")[0].value;b(a)}else a.data=g}catch(m){f=m}f?this.reject(f):this._finished?this.resolve(a):this.reject(Error("Invalid dojo/request/iframe request state"))}function p(){this._callNext()}
function v(b,e,h){var g=a.parseArgs(b,a.deepCreate(x,e),!0),b=g.url,e=g.options;if("GET"!==e.method&&"POST"!==e.method)throw Error(e.method+" not supported by dojo/request/iframe");if(!v._frame)v._frame=v.create(v._iframeName,z+"();");b=a.deferred(g,null,s,o,u,p);b._callNext=function(){if(!this._calledNext)this._calledNext=!0,v._currentDfd=null,v._fireNextRequest()};b._legacy=h;v._dfdQueue.push(b);v._fireNextRequest();f(b);return h?b:b.promise}var w=g.id.replace(/[\/\.\-]/g,"_"),z=w+"_onload";q.global[z]||
(q.global[z]=function(){var a=v._currentDfd;if(a){var b=n.byId(a.response.options.form)||a._tmpForm;if(b){for(var e=a._contentToClean,f=0;f<e.length;f++)for(var h=e[f],g=0;g<b.childNodes.length;g++){var k=b.childNodes[g];if(k.name===h){m.destroy(k);break}}a._originalAction&&b.setAttribute("action",a._originalAction);if(a._originalMethod)b.setAttribute("method",a._originalMethod),b.method=a._originalMethod;if(a._originalTarget)b.setAttribute("target",a._originalTarget),b.target=a._originalTarget}a._tmpForm&&
(m.destroy(a._tmpForm),delete a._tmpForm);a._finished=!0}else v._fireNextRequest()});var x={method:"POST"};v.create=function(a,b,e){if(q.global[a])return q.global[a];if(q.global.frames[a])return q.global.frames[a];e||(l("config-useXDomain")&&l("config-dojoBlankHtmlUrl"),e=l("config-dojoBlankHtmlUrl")||j.toUrl("dojo/resources/blank.html"));b=m.place('<iframe id="'+a+'" name="'+a+'" src="'+e+'" onload="'+b+'" style="position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden">',
q.body());return q.global[a]=b};v.doc=function(a){if(a.contentDocument)return a.contentDocument;var b=a.name;if(b){var e=q.doc.getElementsByTagName("iframe");if(a.document&&e[b].contentWindow&&e[b].contentWindow.document)return e[b].contentWindow.document;if(q.doc.frames[b]&&q.doc.frames[b].document)return q.doc.frames[b].document}return null};v.setSrc=function(a,b,e){try{if(e){var f;(f=dojo.isIE||dojo.isWebKit?a.contentWindow.document:a.contentWindow)?f.location.replace(b):a.location=b}else dojo.isWebKit?
a.location=b:frames[a.name].location=b}catch(h){}};v._iframeName=w+"_IoIframe";v._notifyStart=function(){};v._dfdQueue=[];v._currentDfd=null;v._fireNextRequest=function(){var b;try{if(!v._currentDfd&&v._dfdQueue.length){do b=v._currentDfd=v._dfdQueue.shift();while(b&&(b.canceled||b.isCanceled&&b.isCanceled())&&v._dfdQueue.length);if(!b||b.canceled||b.isCanceled&&b.isCanceled())v._currentDfd=null;else{var f=b.response,g=f.options,k=b._contentToClean=[],j=n.byId(g.form),l=a.notify,s=g.data||null,o;
!b._legacy&&"POST"===g.method&&!j?j=b._tmpForm=m.create("form",{name:w+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},q.body()):"GET"===g.method&&j&&-1<f.url.indexOf("?")&&(o=f.url.slice(f.url.indexOf("?")+1),s=e.mixin(h.queryToObject(o),s));if(j){if(!b._legacy){var p=j;do p=p.parentNode;while(p!==q.doc.documentElement);if(!p)j.style.position="absolute",j.style.left="-1000px",j.style.top="-1000px",q.body().appendChild(j);if(!j.name)j.name=w+"_form"}if(s){var p=function(a,b){m.create("input",
{type:"hidden",name:a,value:b},j);k.push(a)},u;for(u in s){var z=s[u];if(e.isArray(z)&&1<z.length)for(o=0;o<z.length;o++)p(u,z[o]);else j[u]?j[u].value=z:p(u,z)}}var x=j.getAttributeNode("action"),D=j.getAttributeNode("method"),H=j.getAttributeNode("target");if(f.url)b._originalAction=x?x.value:null,x?x.value=f.url:j.setAttribute("action",f.url);if(b._legacy){if(!D||!D.value)mthdNode?mthdNode.value=g.method:fn.setAttribute("method",g.method)}else b._originalMethod=D?D.value:null,D?D.value=g.method:
j.setAttribute("method",g.method);b._originalTarget=H?H.value:null;H?H.value=v._iframeName:j.setAttribute("target",v._iframeName);j.target=v._iframeName;l&&l.emit("send",f,b.promise.cancel);v._notifyStart(f);j.submit()}else{g="";if(f.options.data)g=f.options.data,"string"!==typeof g&&(g=h.objectToQuery(g));p=f.url+(-1<f.url.indexOf("?")?"&":"?")+g;l&&l.emit("send",f,b.promise.cancel);v._notifyStart(f);v.setSrc(v._frame,p,!0)}}}}catch(N){b.reject(N)}};a.addCommonMethods(v,["GET","POST"]);return v})},
"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme");define("../ready,./kernel,./connect,./unload,./window,./event,./html,./NodeList,../query,./xhr,./fx".split(","),function(g){return g})},"ws/widget/WSSelect":function(){define("ws/widget/WSSelect","dojo/_base/declare,dojo/text!ws/widget/WSSelect.css,dojo,dijit,dijit/_Widget,dijit/_TemplatedMixin,dijit/_Container,ws/widget/WSMenu,ws/widget/WSMenuItem,ws/widget/WSMenuSeparator,ws/html,ws/lang".split(","),function(g,
j,f,a,b,e,h,k,l,n){return g([b,e,h],{templateString:'<div id="${id}" tabindex="${tabindex}" class="wsSelect" title="${title}" data-dojo-attach-event="onclick: toggleMenu, onkeypress: onKeyPress, onmousedown:_onMouseDown, onmouseup:_onMouseUp, onmouseout:_onMouseOut, onmouseover:onMouseOver">\t<div class="option" data-dojo-attach-point="currentValueNode"></div>\t<div class="wsArrow" data-dojo-attach-point="arrowNode"></div></div>',css:{templateString:j},options:null,currentValue:-1,id:"",tabindex:"",
title:"",enabled:!0,isMenuDirty:!1,optionalLabelPrefix:null,staticMenuHeader:null,useTinyArrow:!1,disableCheck:!1,disableMouseStates:!1,size:"byValue",constructor:function(a){if(a&&a.options){for(var b=[],a=a.options,e=0;e<a.length;e++)b.push({display:a[e].display,value:a[e].value,selected:a[e].selected});if(null!=b)this.options=b}},buildRendering:function(){var a=[];if(null!=this.srcNodeRef)for(var b=this.srcNodeRef.getElementsByTagName("li"),e=0;e<b.length;e++)a.push({display:b[e].innerHTML,value:""+
b[e].getAttribute("value"),selected:"true"==b[e].getAttribute("selected")});if(null==this.options)this.options=a;this.inherited(arguments)},startup:function(){this.setOptions(this.options);this.disableMouseStates||ws.html.addHoverClass(this.domNode,"wsSelectHover");if(this.useTinyArrow)this.arrowNode.className="wsTinyArrow",f.isIE&&setTimeout(f.hitch(this,"fixArrow"),10)},fixArrow:function(){if(null!=this.arrowNode)this.arrowNode.style.zoom="",this.arrowNode.style.zoom=1},setOptions:function(a){this.options=
a;this.isMenuDirty=!0;for(var b=0,e=0;e<a.length;e++)a[e].selected&&(b=e);0<a.length&&this.setOption(b);this.enabled=1<a.length;f.toggleClass(this.domNode,"wsSelectDisabled",!this.enabled)},getMenu:function(){if(this.menu&&!this.isMenuDirty)return this.menu;this.menu?this.menu.destroyDescendants():this.createMenu();for(var a=0;a<this.options.length;a++){var b;b=this.options[a].isSeparator?new n:new l({caption:this.options[a].display,disabled:this.options[a].disabled||!1,checked:this.disableCheck?
!1:this.options[a].checked});if(!this.options[a].disabled)this.options[a]._onClick?b._onClick=this.options[a]._onClick:b.onClick=f.hitch(this,"setOption",a,!0);this.menu.addChild(b);b.startup()}this.isMenuDirty=!1;return this.menu},createMenu:function(){this.menu=new k;this.menu.startup();f.body().appendChild(this.menu.domNode)},toggleMenu:function(){var a=this.getMenu();a.isShowing()||!this.enabled?a.close():a.open(this.domNode)},onKeyPress:function(a){a.keyCode==f.keys.ENTER&&ws.lang.setTimeout(this,
function(){this.toggleMenu()},0)},sizeMyself:function(){if("byMenu"==this.size)var a=this.getMenu().getBorderBoxWidth()-18;else"byValue"==this.size?(this.currentValueNode.style.width="",a=f._getMarginSize(this.currentValueNode).w+18):a=parseInt(this.size);f.contentBox(this.currentValueNode,{w:a});f.isIE&&setTimeout(f.hitch(this,"fixButtons"),10)},setOptionalLabelPrefixHTML:function(a){this.optionalLabelPrefix=a},setOption:function(a,b){if(!this.staticMenuHeader&&this.currentValue!=this.options[a].value)this.currentValueNode.innerHTML=
null!=this.optionalLabelPrefix?this.optionalLabelPrefix+this.options[a].display:this.options[a].display;if(null!=this.staticMenuHeader)this.currentValueNode.innerHTML=this.staticMenuHeader;this.currentValueNode.style.display=""==this.currentValueNode.innerHTML?"none":"";this.currentValue=this.options[a].value;this.currentIndex=a;this.sizeMyself();b&&this.valueChanged()},setOptionByValue:function(a){for(var b=0;b<this.options.length;b++)if(this.options[b].value==a)return this.setOption(b),!0;return!1},
setClass:function(a){this.domNode.className="wsSelect "+a},fixButtons:function(){if(null!=this.domNode)this.domNode.style.position="static",this.domNode.style.position="relative"},_onMouseDown:function(a){this.disabled||(this.disableMouseStates||f.addClass(this.domNode,"wsSelectClick"),this.onMouseDown(a))},_onMouseUp:function(a){this.disabled||(this.disableMouseStates||f.removeClass(this.domNode,"wsSelectClick"),this.onMouseUp(a))},_onMouseOut:function(a){this.disabled||(this.disableMouseStates||
f.removeClass(this.domNode,"wsSelectClick"),this.onMouseOut(a))},onMouseOver:function(){},onMouseDown:function(){},onMouseUp:function(){},onMouseOut:function(){},valueChanged:function(){}})})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(g,j,f,a){var b,e={},h={},k={config:j,global:this,dijit:e,dojox:h},e={dojo:["dojo",k],dijit:["dijit",e],dojox:["dojox",h]},a=f.map&&f.map[a.id.match(/[^\/]+/)[0]];for(b in a)e[b]?e[b][0]=a[b]:e[b]=[a[b],{}];for(b in e)a=e[b],
a[1]._scopeName=a[0],j.noGlobals||(this[a[0]]=a[1]);k.scopeMap=e;k.baseUrl=k.config.baseUrl=f.baseUrl;k.isAsync=f.async;k.locale=j.locale;a="$Rev: 31395 $".match(/\d+/);k.version={major:1,minor:8,patch:4,flag:"",revision:a?+a[0]:NaN,toString:function(){var a=k.version;return a.major+"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(k);k.exit=function(){};"undefined"!=typeof console||(console=
{});for(var e="assert,count,debug,dir,dirxml,error,group,groupEnd,info,profile,profileEnd,time,timeEnd,trace,warn,log".split(","),l,a=0;l=e[a++];)console[l]||function(){var a=l+"";console[a]="log"in console?function(){var b=Array.apply({},arguments);b.unshift(a+":");console.log(b.join(" "))}:function(){};console[a]._fake=!0}();g.add("dojo-debug-messages",!!j.isDebug);k.deprecated=k.experimental=function(){};if(g("dojo-debug-messages"))k.deprecated=function(){},k.experimental=function(){};if(j.modulePaths){k.deprecated("dojo.modulePaths",
"use paths configuration");g={};for(b in j.modulePaths)g[b.replace(/\./g,"/")]=j.modulePaths[b];f({paths:g})}k.moduleUrl=function(a,b){k.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var e=null;a&&(e=f.toUrl(a.replace(/\./g,"/")+(b?"/"+b:"")+"/*.*").replace(/\/\*\.\*/,"")+(b?"":"/"));return e};k._hasResource={};return k})},"ws/cache":function(){define("ws/cache",["dojo/_base/declare"],function(g){return g(null,{constructor:function(g,f){this.maxSize=g;this.discardSize=f;this.clear()},clear:function(){this.size=
0;this.data={}},add:function(g,f){this.data[g]=f;this.size++},get:function(g){return this.data[g]||null},update:function(g,f,a,b){if(b)for(var e in this.data){if(!b[e]){var h=this.data[e];h&&(h[f]=a)}}else for(b=0;b<g.length;b++)(h=this.data[g[b]])&&(h[f]=a)}})})},"url:ws/widget/ListView.css":"","url:ws/suite/TodayPage.html":'<div>\n\t<div data-dojo-type="dijit/layout/BorderContainer" class="todayPage" data-dojo-attach-point="layoutWidget">\n        <div data-dojo-type="ws/widget/SingleLineNotification" data-dojo-attach-point="notification" class="notification" data-dojo-props="region:\'top\'" style="display:none"></div>\n\t\t<div data-dojo-type="ws/widget/Pane" data-dojo-props="region:\'top\'" class="head" data-dojo-attach-point="headPane">\n\t\t\t<div data-dojo-attach-point="mailCount" data-dojo-attach-event="onclick: onClickMailCount" class="mailCount">\n\t\t\t\t<img src="${spacer}" class="mainSprite icon" data-dojo-attach-point="mailIcon">\n\t\t\t\t<span data-dojo-attach-point="mailCountNode" class="mailCountText" >&nbsp;</span>\n\t\t\t</div>\n\t\t\t<div data-dojo-attach-point="errMsgNode" style="display:none" class="errMsgNode"></div>\n\t\t\t<div class="clock" data-dojo-attach-point="clock" style="display:none">\n\t\t\t\t<div class="date" data-dojo-attach-point="dateNode">&nbsp;</div>\n\t\t\t\t<div class="time" data-dojo-attach-point="timeNode">&nbsp;</div>\n\t\t\t</div>\n\t\t\t<div class="weather" data-dojo-attach-point="weather" style="display:none">\n\t\t\t\t<iframe data-dojo-attach-point="weatherIframe" src="about:blank" width="100%" height="100%" frameborder=0 border=0 marginwidth=0 marginheight=0 scrolling="no" align="top" allowTransparency="true"></iframe>\n\t\t\t</div>\n\t\t</div>\n\t\t<div data-dojo-type="ws/widget/Pane" data-dojo-attach-point="iframePane" data-dojo-props="region:\'center\'">\n\t\t\t<iframe src="about:blank" scrolling="auto" frameBorder="no" name="" allowtransparency="true" id="todayIframe" style="display:none;background-color:#fff"></iframe>\n\t\t</div>\n\t</div>\n</div>',
"ws/CachedList":function(){define("ws/CachedList","dojo/_base/declare,dojo,ws/cache,ws/CachedListIndex,ws/io,ws/lang".split(","),function(g,j,f,a){return g("ws.CachedList",null,{constructor:function(a,e,h){this.screenNames="";this.CacheSize=a?a:Config.ClientSideMaxCache;this.FetchSize=e?e:Config.ClientSideMaxMessageFetch;this.Cache=new f(this.CacheSize,Config.ClientSideCacheDiscard);this.seenMessages=[];this.isInbox=h;this.TopContactsFirst=!1;this.Clear()},deferredIndexUpdate:!1,pendingRowUpdates:[],
Clear:function(a){a=a||{};a.keepCache||this.Cache.clear();this.Index={};if(!a.keepSort)this.CurrentIndex="received",this.SortDirection="descending";this.IndexDirection=this.SortDirection;if(!a.keepSearch)this.SubSearch=this.SearchIn=this.SearchString=null;this.data=this.foldersCanMoveTo=null;this.requestsInProgress=[];this.indexRequestsInProgress=[];this.seenMessages=[];this.rowCount=0;this.indexLoaded=!1;this.errorState=a.errorState||!1;this.netErrorState=a.netErrorState||!1;this.errCode=a.errCode||
null;this.errorObj=a.errorObj||null;this.deferredIndexUpdate=!1;this.pendingRowUpdates=[];this.Cleared()},Cleared:function(){},FoldersChanged:function(){},IndexUpdated:function(){},RowsUpdated:function(){},LinkedScreenNameDataUpdated:function(){},IsLoading:function(){return!this.indexLoaded},tracklm:function(a){ws.bootstrap&&ws.bootstrap.add&&ws.bootstrap.add("load_mail",a)},trackdl:function(a,e){ws.reporting&&ws.reporting.DL&&ws.reporting.DL.append&&ws.reporting.DL.append(a,e)},trackall:function(a,
e){ws.bootstrap&&ws.bootstrap.add&&ws.bootstrap.add("load_mail",a);ws.reporting&&ws.reporting.DL&&ws.reporting.DL.append&&ws.reporting.DL.append(a,e)},SetFolder:function(a,e,f,g,j,n,m){this.trackall("-CL.SFa");this.folder==a&&this.indexLoaded&&!this.SearchString&&!this.SearchIn&&!e?(this.RefetchIndex({doImport:m}),this.trackall("-CL.SFb")):(this.Clear({keepSort:!0}),this.folder=a,this.screenName=g?g:ws.UserContext.ActiveScreenName,this.SearchString=e,this.SearchIn=f,this.GetData({row:0,count:this.FetchSize,
reqInfo:j,canConsolidate:!n,doImport:m}),this.trackall("-CL.SFz"))},SetSort:function(a,e,f){this.CurrentIndex==a&&this.IndexDirection==e&&!f&&!this.TopContactsFirst?this.IndexUpdated():(this.Clear({keepSearch:!0}),this.SortDirection=e,this.CurrentIndex=a,this.IndexDirection=e,this.GetData({row:0,count:this.FetchSize,canConsolidate:!1,reqIndex:!0}))},SetSearch:function(a,e,f){if(!(a==this.SearchString&&e==this.SearchIn&&!f))this.Clear({keepSort:!0}),this.SearchString=a,this.SearchIn=e,this.SubSearch=
f,a=!1,Config.UseOMS&&Config.CrossFolderSearch&&(a=!0),this.GetData({returnfoldername:a,row:0,count:this.FetchSize,subSearch:f||""})},RefetchIndex:function(a){this.GetData({row:0,count:this.FetchSize,reqIndex:!0,automatic:a&&a.automatic,doImport:a&&a.doImport})},RefetchInfo:function(){this.GetData({automatic:!0,reqIndex:!1,reqRows:!1,reqInfo:!0})},GetUID:function(a){if(null==this.Cache)return null;var e=this.Index[this.CurrentIndex];if(null==e)return null;a=parseInt(a);return a>=this.rowCount||0>
a?null:e.getRow(a)},GetAvailableRowsForUIDs:function(a){if(!a||null==this.Cache)return[];var e=this.Index[this.CurrentIndex];return null==e?[]:e.getRowsForUids(a)},GetAllUIDs:function(){var a=this.Index[this.CurrentIndex];return!a?null:a.baseSegment},GetRow:function(a){a=parseInt(a);isNaN(a)&&(a=0);var e=this.Index[this.CurrentIndex];if(null==this.Cache||null==e||0>a||a>=this.rowCount)return null;e=e.getRow(a);if(null!=e){var f=this.Cache.get(e);if(null!=f)return f;if(-1!=this.IsRequestInProgress(a))return null}var f=
a-Config.ClientSideBackFetch,g=this.FetchSize,f=0>f?0:f;if(null!=e)return this.GetData({row:f,count:g}),this.Cache.get(e);if(-1!=this.IsRequestInProgress(a,!0))return null;a-=Config.ClientSideBackFetch;this.GetData({row:f,count:g,reqIndex:!0,indexStart:0>a?0:a,indexMax:Config.ClientSideMaxMessageFetch});return null},UpdateCache:function(a,e,f,g){this.Cache.update(a,e,f,g)},DeleteFromIndex:function(a){j.isArray(a)||(a=[a]);for(var e in this.Index)this.Index[e].deleteUids(a);this.rowCount-=a.length},
DeleteAllFromIndex:function(){for(var a in this.Index)this.Index[a].deleteAllUids();this.rowCount=0},GetRowCount:function(){return null==this.rowCount||0>this.rowCount?0:this.rowCount},AddSeenMessage:function(a){a&&-1==j.indexOf(this.seenMessages,a)&&this.seenMessages.push(a)},RemoveSeenMessages:function(a){this.seenMessages=ws.lang.difference(this.seenMessages,a)},ClearSeenMessages:function(){this.seenMessages=[]},DeleteSeenMessage:function(a){if(a)for(var e=0;e<a.length;e++){var f=j.indexOf(this.seenMessages,
a[e]);-1!=f&&this.seenMessages.splice(f,1)}},IsUidExist:function(a){for(var e in this.Index)if(this.Index[e].isUidExist(a))return!0;return!1},GetData:function(a){this.trackall("-CL.GDa");if(ws.lang.undefinedOrNull(this.folder))this.trackall("-CL.GDb");else{var e=this.CurrentIndex,f="reqIndex"in a?a.reqIndex:null==this.Index[e],g="reqRows"in a?a.reqRows:!0,l="reqInfo"in a?a.reqInfo:this.isInbox,n="row"in a?a.row:0,m="count"in a?a.count:this.FetchSize,q="indexStart"in a?a.indexStart:0,s="indexMax"in
a?a.indexMax:Config.ClientSideMaxMessageFetch,o="automatic"in a?a.automatic:!1,u="canConsolidate"in a?a.canConsolidate:!0,p="tcs"in a?a.tcs:this.TopContactsFirst,v="returnfoldername"in a?a.returnfoldername:!1,a="doImport"in a?a.doImport:!1,w=Math.random();g&&this.AddRequestInProgress(n,m,w);f&&this.AddRequestInProgress(q,s,w,!0);this.trackall("-CL.GDc");ws.io.rpc({action:"GetMessageList",automatic:o,canConsolidate:u,content:{folder:this.folder,start:n,count:m,indexStart:q,indexMax:s,index:f,info:l,
rows:g,sort:e,tcs:p,sortDir:this.IndexDirection,search:this.SearchString,searchIn:this.SearchIn,subSearch:this.SubSearch||"",seen:this.seenMessages,screenName:this.screenName,returnfoldername:v,"import":a},load:j.hitch(this,"ProcessResponse",w),error:j.hitch(this,function(a,b,e){this.trackall("-CL.GDd");this.Clear({keepSearch:!!this.SearchString,errorState:!0,errorObj:a,netErrorState:b,errCode:e||a})})});this.trackall("-CL.GDz")}},IsRequestInProgress:function(a,e){for(var f=e?this.indexRequestsInProgress:
this.requestsInProgress,g=0;g<f.length;g++){var j=f[g];if(j.start<=a&&j.end>=a)return g}return-1},AddRequestInProgress:function(a,e,f,g){(g?this.indexRequestsInProgress:this.requestsInProgress).push({start:a,end:a+e-1,tag:f})},EndRequestInProgress:function(a,e){for(var f=e?this.indexRequestsInProgress:this.requestsInProgress,g=0;g<f.length;g++)f[g].tag==a&&f.splice(g,1)},newMailReceived:function(){},ProcessResponse:function(b,e){this.trackall("-CL.PRa");if(e){this.trackall("-CL.PRb");this.Cache.size>
this.Cache.maxSize&&this.Cache.clear();var f=this.CurrentIndex;this.data=e;var g=[],j=[];if(e.fcsupport)ws.CachedList.prototype.fastCountSupport=e.fcsupport;if(e.foldersCanMoveTo)this.foldersCanMoveTo=e.foldersCanMoveTo;if(e.PASpamFltrLvl)this.PASpamFltrLvl=e.PASpamFltrLvl;e.folders&&this.FoldersChanged(e.folders);if(e.index){if(this.rowCount!=e.totalItems)this.Index={},this.rowCount=e.totalItems;f in this.Index||(this.Index[f]=new a);this.Index[f].setData(e.index,e.indexStart);this.indexLoaded=!0}if(e.rows){for(var n=
this.Index[this.CurrentIndex],m=0;m<e.rows.length;m++)e.rows[m]&&(j=e.rows[m][0],f=e.rows[m],this.Cache.add(j,f),g.push(j));j=n.getRowsForUids(g)}g=1<this.requestsInProgress.length;if(!g&&!this.deferredIndexUpdate&&!e.index)this.RowsUpdated(this.pendingRowUpdates),this.RowsUpdated(j);else if(!this.deferredIndexUpdate&&!e.index)this.pendingRowUpdates=this.pendingRowUpdates.concat(j);j=!1;e.index?g?this.deferredIndexUpdate=!0:j=!0:this.deferredIndexUpdate&&!g&&(j=!0);if(j)this.deferredIndexUpdate=!1,
this.pendingRowUpdates=[],0===this.GetRowCount()&&this.isInbox&&ws.reporting.reportDLAction("Mail-EmptyFolder-Inbox"),this.IndexUpdated();e.hasNewMsg&&this.newMailReceived()}this.EndRequestInProgress(b);this.EndRequestInProgress(b,!0);if(ws.WebSuite&&ws.WebSuite.isRecordTimingData)ws.WebSuite.messageListTimerEnd=new Date;this.trackall("-CL.PRz");return null}})})},"ws/widget/WSDatePicker":function(){define("ws/widget/WSDatePicker","dojo/_base/declare,dojo/text!ws/widget/WSDatePicker.html,dojo/text!ws/widget/WSDatePicker.css,dojo,dijit,dijit/_Widget,dijit/_TemplatedMixin,ws/string,ws/date".split(","),
function(g,j,f,a,b,e,h){return g([e,h],{templateString:j,css:{templateString:f},gridHeadDateFormat:Config.Strings.DatePickerHeaderDateFormat,gridFooterDateFormat:Config.Strings.DatePickerFooterDateFormat,hideTodayLink:!1,hideBorder:!1,startup:function(){this.dateCells=this.dateRows=this.viewEnd=this.viewStart=this.selectedDate=this.displayDate=this.today=this.now=null;this.startRow=2;this.endRow=7;this.numRowsBeingDisplayed=5;this.dateRows=this.datePickerBody.rows;this.dateCells=[];for(var a,b=this.startRow;b<=
this.endRow;b++){a=this.dateRows[b];this.dateCells[b-this.startRow]=[];a=a.cells;for(var e=0;e<a.length;e++)this.dateCells[b-this.startRow][e]=a[e],this.dateCells[b-this.startRow][e]._dayOffset=7*(b-this.startRow)+e}e=0;for(a=[];e<ws.date.abbrevDays.length;)b=(ws.date.firstDayOfWeek+e)%ws.date.abbrevDays.length,a[e]=ws.date.abbrevDays[b],e++;e=this.datePickerDaysOfWeek.getElementsByTagName("span");for(b=0;b<e.length;b++)e[b].innerHTML=a[b];this.setDate(null);if(this.hideTodayLink)this.datePickerFoot.style.display=
"none";if(this.hideBorder)this.WSDatePickerDiv.style.border="none"},selectDateConnect:function(){},updateUI:function(b){var e={};b&&(e=b);this.monthYearNode.innerHTML=ws.date.formatDateTime(this.displayDate,this.gridHeadDateFormat);for(var f=b=null,h=this.viewStart,g=this.endRow-this.startRow+1,j=0,j=0;j<g;j++)if(j==g-1&&h.getMonth()!=this.displayDate.getMonth()){this.sixthWeekRow.style.display="none";break}else if(j==g-2&&h.getMonth()!=this.displayDate.getMonth()){this.fifthWeekRow.style.display=
"none";break}else{if(j==g-1)this.sixthWeekRow.style.display="";if(j==g-2)this.fifthWeekRow.style.display="";for(var o=0;o<this.dateCells[j].length;o++){b=this.dateCells[j][o];a.removeClass(b);f=b.childNodes[0];if(h.getMonth()!=this.displayDate.getMonth())a.addClass(b,"empty"),f.innerHTML="";else{var u=h.getDate();f.style.fontWeight=e[u]?"bold":"normal";f.innerHTML=h.getDate()}u="";""!=f.innerHTML&&(h.getTime()==this.today.getTime()&&(u="today"),this.selectedDate&&h.getTime()==this.selectedDate.getTime()&&
(u="selected"));u&&a.addClass(b,u);h=ws.date.add(h,ws.date.dateParts.DAY,1)}}this.numRowsBeingDisplayed=j;e=ws.date.formatDateTime(this.today,this.gridFooterDateFormat);this.todayNode.innerHTML=Config.Strings.TodayIs+e},getNumRows:function(){return this.numRowsBeingDisplayed},setDate:function(a){this.now=new Date;this.today=new Date(this.now.getFullYear(),this.now.getMonth(),this.now.getDate());this.displayDate=a;if(null==this.displayDate)this.displayDate=new Date(this.now.getFullYear(),this.now.getMonth(),
this.now.getDate());if(null==this.selectedDate)this.selectedDate=new Date(this.now.getFullYear(),this.now.getMonth(),this.now.getDate());this.viewStart=ws.date.getFirstDayInMonthView(this.displayDate);this.viewEnd=ws.date.getLastDayInMonthView(this.displayDate);this.updateUI()},decrementMonth:function(){this.setDate(ws.date.add(this.displayDate,ws.date.dateParts.MONTH,-1))},incrementMonth:function(){this.setDate(ws.date.incrementMonth(this.displayDate))},onSelectDate:function(a){if((a=a.currentTarget)&&
""!=a.childNodes[0].innerHTML)this.selectedDate=ws.date.add(this.viewStart,ws.date.dateParts.DAY,a._dayOffset),this.setDate(this.selectedDate),this.selectDateConnect(this.selectedDate)},displayForPublicView:function(){this.datePickerFoot.style.display="none";this.WSDatePickerDiv.style.border="none";a.query(".nav",this.domNode).forEach(function(a){a.style.display="none"});a.style(this.datePickerMain,"float","none");this.topNav.style.display="block"},selectToday:function(){this.selectedDate=this.today;
this.setDate(this.selectedDate);this.selectDateConnect(this.selectedDate)},onSelectDate2:function(){}})})},"dojox/grid/_grid/publicEvents":function(){define("dojox/grid/_grid/publicEvents",["dojo/_base/declare","dojo"],function(g,j){dojox.grid.publicEvents={cellOverClass:"dojoxGrid-cell-over",onKeyEvent:function(f){this.dispatchKeyEvent(f)},onContentEvent:function(f){this.dispatchContentEvent(f)},onHeaderEvent:function(f){this.dispatchHeaderEvent(f)},onStyleRow:function(f){with(f)customClasses+=(odd?
" dojoxGrid-row-odd":"")+(selected?" dojoxGrid-row-selected":"")+(over?" dojoxGrid-row-over":"");this.focus.styleRow(f);this.edit.styleRow(f)},onKeyDown:function(f){if(!f.altKey&&!f.ctrlKey&&!f.metaKey)switch(f.keyCode){case j.keys.ESCAPE:this.edit.cancel();break;case j.keys.ENTER:f.shiftKey||(f=this.edit.isEditing(),this.edit.apply(),f||this.edit.setEditCell(this.focus.cell,this.focus.rowIndex));break;case j.keys.TAB:this.focus[f.shiftKey?"previousKey":"nextKey"](f);break;case j.keys.LEFT_ARROW:!this.edit.isEditing()&&
this.focus.cell&&this.focus.move(0,-1);break;case j.keys.RIGHT_ARROW:!this.edit.isEditing()&&this.focus.cell&&this.focus.move(0,1);break;case j.keys.UP_ARROW:!this.edit.isEditing()&&this.focus.cell&&this.focus.move(-1,0);break;case j.keys.DOWN_ARROW:!this.edit.isEditing()&&this.focus.cell&&this.focus.move(1,0)}},onMouseOver:function(f){-1==f.rowIndex?this.onHeaderCellMouseOver(f):this.onCellMouseOver(f)},onMouseOut:function(f){-1==f.rowIndex?this.onHeaderCellMouseOut(f):this.onCellMouseOut(f)},onMouseOverRow:function(f){this.rows.isOver(f.rowIndex)||
(this.rows.setOverRow(f.rowIndex),-1==f.rowIndex?this.onHeaderMouseOver(f):this.onRowMouseOver(f))},onMouseOutRow:function(f){if(this.rows.isOver(-1))this.onHeaderMouseOut(f);else this.rows.isOver(-2)||(this.rows.setOverRow(-2),this.onRowMouseOut(f))},onCellMouseOver:function(f){j.addClass(f.cellNode,this.cellOverClass)},onCellMouseOut:function(f){j.removeClass(f.cellNode,this.cellOverClass)},onCellClick:function(f){this.focus.setFocusCell(f.cell,f.rowIndex);this.onRowClick(f)},onCellDblClick:function(f){this.edit.setEditCell(f.cell,
f.rowIndex);this.onRowDblClick(f)},onCellContextMenu:function(f){this.onRowContextMenu(f)},onCellFocus:function(f,a){this.edit.cellFocus(f,a)},onRowClick:function(f){this.edit.rowClick(f);this.selection.clickSelectEvent(f)},onRowDblClick:function(){},onRowMouseOver:function(){},onRowMouseOut:function(){},onRowContextMenu:function(f){j.stopEvent(f)},onHeaderMouseOver:function(){},onHeaderMouseOut:function(){},onHeaderCellMouseOver:function(f){j.addClass(f.cellNode,this.cellOverClass)},onHeaderCellMouseOut:function(f){j.removeClass(f.cellNode,
this.cellOverClass)},onHeaderClick:function(){},onHeaderCellClick:function(f){this.setSortIndex(f.cell.index);this.onHeaderClick(f)},onHeaderDblClick:function(){},onHeaderCellDblClick:function(f){this.onHeaderDblClick(f)},onHeaderCellContextMenu:function(f){this.onHeaderContextMenu(f)},onHeaderContextMenu:function(f){j.stopEvent(f)},onStartEdit:function(){},onApplyCellEdit:function(){},onCancelEdit:function(){},onApplyEdit:function(){},onCanSelect:function(){return!0},onCanDeselect:function(){return!0},
onSelected:function(f){this.updateRowStyles(f)},onDeselected:function(f){this.updateRowStyles(f)},onSelectionChanged:function(){}}})},"dijit/layout/StackContainer":function(){define("dijit/layout/StackContainer","dojo/_base/array,dojo/cookie,dojo/_base/declare,dojo/dom-class,dojo/has,dojo/_base/lang,dojo/ready,dojo/topic,../registry,../_WidgetBase,./_LayoutWidget".split(","),function(g,j,f,a,b,e,h,k,l,n,m){f=f("dijit.layout.StackContainer",m,{doLayout:!0,persist:!1,baseClass:"dijitStackContainer",
buildRendering:function(){this.inherited(arguments);a.add(this.domNode,"dijitLayoutContainer")},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onkeypress",this._onKeyPress)},startup:function(){if(!this._started){var a=this.getChildren();g.forEach(a,this._setupChild,this);this.persist?this.selectedChildWidget=l.byId(j(this.id+"_selectedChild")):g.some(a,function(a){if(a.selected)this.selectedChildWidget=a;return a.selected},this);var b=this.selectedChildWidget;if(!b&&a[0])b=
this.selectedChildWidget=a[0],b.selected=!0;k.publish(this.id+"-startup",{children:a,selected:b});this.inherited(arguments)}},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=!0;var a=this.selectedChildWidget;a&&this._showChild(a)}this.inherited(arguments)},_setupChild:function(b){this.inherited(arguments);a.replace(b.domNode,"dijitHidden","dijitVisible");b.domNode.title=""},addChild:function(a,b){this.inherited(arguments);this._started&&(k.publish(this.id+"-addChild",a,b),this.selectedChildWidget||
this.selectChild(a))},removeChild:function(a){this.inherited(arguments);this._started&&k.publish(this.id+"-removeChild",a);if(!this._descendantsBeingDestroyed&&this.selectedChildWidget===a&&(this.selectedChildWidget=void 0,this._started)){var b=this.getChildren();b.length&&this.selectChild(b[0])}},selectChild:function(a,b){a=l.byId(a);if(this.selectedChildWidget!=a){var e=this._transition(a,this.selectedChildWidget,b);this._set("selectedChildWidget",a);k.publish(this.id+"-selectChild",a);this.persist&&
j(this.id+"_selectedChild",this.selectedChildWidget.id)}return e},_transition:function(a,b){b&&this._hideChild(b);var e=this._showChild(a);a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize());return e},_adjacent:function(a){var b=this.getChildren(),e=g.indexOf(b,this.selectedChildWidget),e=e+(a?1:b.length-1);return b[e%b.length]},forward:function(){return this.selectChild(this._adjacent(!0),!0)},back:function(){return this.selectChild(this._adjacent(!1),!0)},
_onKeyPress:function(a){k.publish(this.id+"-containerKeyPress",{e:a,page:this})},layout:function(){var a=this.selectedChildWidget;a&&a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize())},_showChild:function(b){var e=this.getChildren();b.isFirstChild=b==e[0];b.isLastChild=b==e[e.length-1];b._set("selected",!0);a.replace(b.domNode,"dijitVisible","dijitHidden");return b._onShow&&b._onShow()||!0},_hideChild:function(b){b._set("selected",!1);a.replace(b.domNode,"dijitHidden",
"dijitVisible");b.onHide&&b.onHide()},closeChild:function(a){a.onClose(this,a)&&(this.removeChild(a),a.destroyRecursive())},destroyDescendants:function(a){this._descendantsBeingDestroyed=!0;this.selectedChildWidget=void 0;g.forEach(this.getChildren(),function(b){a||this.removeChild(b);b.destroyRecursive(a)},this);this._descendantsBeingDestroyed=!1}});f.ChildWidgetProperties={selected:!1,disabled:!1,closable:!1,iconClass:"dijitNoIcon",showTitle:!0};e.extend(n,f.ChildWidgetProperties);return f})},"dojo/regexp":function(){define(["./_base/kernel",
"./_base/lang"],function(g,j){var f={};j.setObject("dojo.regexp",f);f.escapeString=function(a,b){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(a){return b&&-1!=b.indexOf(a)?a:"\\"+a})};f.buildGroupRE=function(a,b,e){if(!(a instanceof Array))return b(a);for(var h=[],g=0;g<a.length;g++)h.push(b(a[g]));return f.group(h.join("|"),e)};f.group=function(a,b){return"("+(b?"?:":"")+a+")"};return f})},"dojo/main":function(){define("./_base/kernel,./has,require,./sniff,./_base/lang,./_base/array,./_base/config,./ready,./_base/declare,./_base/connect,./_base/Deferred,./_base/json,./_base/Color,./has!dojo-firebug?./_firebug/firebug,./_base/browser,./_base/loader".split(","),
function(g,j,f,a,b,e,h,k){h.isDebug&&f(["./_firebug/firebug"]);var l=h.require;l&&(l=e.map(b.isArray(l)?l:[l],function(a){return a.replace(/\./g,"/")}),g.isAsync?f(l):k(1,function(){f(l)}));return g})},"ws/date":function(){define("ws/date",["dojo/date","ws/string"],function(g){ws.date={};ws.date.firstDayOfWeek=Config.FirstDayOfWeek;ws.date.RFC2445=Config.Strings.DateRFC2445;ws.date.RFC2445WithTime=Config.Strings.DateRFC2445WithTime;ws.date.months=[Config.Strings.January,Config.Strings.February,Config.Strings.March,
Config.Strings.April,Config.Strings.May,Config.Strings.June,Config.Strings.July,Config.Strings.August,Config.Strings.September,Config.Strings.October,Config.Strings.November,Config.Strings.December];ws.date.shortMonths=[Config.Strings.Jan,Config.Strings.Feb,Config.Strings.Mar,Config.Strings.Apr,Config.Strings.ShortMay,Config.Strings.Jun,Config.Strings.Jul,Config.Strings.Aug,Config.Strings.Sep,Config.Strings.Oct,Config.Strings.Nov,Config.Strings.Dec];ws.date.days=[Config.Strings.Sunday,Config.Strings.Monday,
Config.Strings.Tuesday,Config.Strings.Wednesday,Config.Strings.Thursday,Config.Strings.Friday,Config.Strings.Saturday];ws.date.shortDays=[Config.Strings.Sun,Config.Strings.Mon,Config.Strings.Tue,Config.Strings.Wed,Config.Strings.Thu,Config.Strings.Fri,Config.Strings.Sat];ws.date.monthNames=ws.date.months.concat(ws.date.shortMonths);ws.date.dayNames=ws.date.days.concat(ws.date.shortDays);ws.date.abbrevDays=[Config.Strings.AbbSunday,Config.Strings.AbbMonday,Config.Strings.AbbTuesday,Config.Strings.AbbWednesday,
Config.Strings.AbbThursday,Config.Strings.AbbFriday,Config.Strings.AbbSaturday];ws.date.amAbb=Config.Strings.Date_am;ws.date.pmAbb=Config.Strings.Date_pm;ws.date.kEmptyDate=null;ws.date.MONTH_LENGTH=[31,28,31,30,31,30,31,31,30,31,30,31];ws.date.LEAP_MONTH_LENGTH=[31,29,31,30,31,30,31,31,30,31,30,31];ws.date.dateParts={YEAR:0,MONTH:1,DAY:2,HOUR:3,MINUTE:4,SECOND:5,MILLISECOND:6,QUARTER:7,WEEK:8,WEEKDAY:9};ws.date.add=function(g,f,a){switch(f){case ws.date.dateParts.YEAR:g=new Date(g.getFullYear()+
a,g.getMonth(),g.getDate(),g.getHours(),g.getMinutes(),g.getSeconds(),g.getMilliseconds());break;case ws.date.dateParts.MONTH:0>g.getMonth()+a?(f=Math.abs(g.getMonth()+a),a=Math.floor(f/12)+1,g=new Date(g.getFullYear()-a,12-f%12,g.getDate(),g.getHours(),g.getMinutes(),g.getSeconds(),g.getMilliseconds())):(f=g.getMonth()+a,a=Math.floor(f/12),g=new Date(g.getFullYear()+a,f%12,g.getDate(),g.getHours(),g.getMinutes(),g.getSeconds(),g.getMilliseconds()));break;case ws.date.dateParts.HOUR:g=new Date(g.getFullYear(),
g.getMonth(),g.getDate(),g.getHours()+a,g.getMinutes(),g.getSeconds(),g.getMilliseconds());break;case ws.date.dateParts.MINUTE:g=new Date(g.getTime()+6E4*a);break;case ws.date.dateParts.SECOND:g=new Date(g.getFullYear(),g.getMonth(),g.getDate(),g.getHours(),g.getMinutes(),g.getSeconds()+a,g.getMilliseconds());break;case ws.date.dateParts.MILLISECOND:g=new Date(g.getFullYear(),g.getMonth(),g.getDate(),g.getHours(),g.getMinutes(),g.getSeconds(),g.getMilliseconds()+a);break;default:g=new Date(g.getFullYear(),
g.getMonth(),g.getDate()+a,g.getHours(),g.getMinutes(),g.getSeconds(),g.getMilliseconds())}return g};ws.date.getFirstDayOfWeekFromDate=function(g){var f=g.getDay()-ws.date.firstDayOfWeek;0>f&&(f+=7);return ws.date.add(g,ws.date.dateParts.DAY,-f)};ws.date.getLastDayOfWeek=function(g){var f=g.getDay();return ws.date.add(g,ws.date.dateParts.DAY,(ws.date.firstDayOfWeek-f+6)%7)};ws.date.getFirstDayInMonthView=function(g){g=new Date(g.getFullYear(),g.getMonth(),1);return ws.date.getFirstDayOfWeekFromDate(g)};
ws.date.getLastDayInMonthView=function(g){var f=null,f=ws.date.getFirstDayInMonthView(g);return f=ws.date.add(f,ws.date.dateParts.DAY,35).getMonth()!=g.getMonth()?ws.date.add(f,ws.date.dateParts.DAY,34):ws.date.add(f,ws.date.dateParts.DAY,41)};ws.date.numberOfWeeksSpanMonth=function(g){var f=null,f=ws.date.getFirstDayInMonthView(g);return f=ws.date.add(f,ws.date.dateParts.DAY,35).getMonth()!=g.getMonth()?5:6};ws.date.getADateInPreviousMonth=function(g){return ws.date.add(g,ws.date.dateParts.DAY,-g.getDate())};
ws.date.getPreviousMonth=function(g){var f=g,f=ws.date.getADateInPreviousMonth(g);g.getDate()<f.getDate()&&f.setDate(g.getDate());return f};ws.date.getADateInNextMonth=function(j){var f=g.getDaysInMonth(j),j=new Date(j.getFullYear(),j.getMonth(),1);return ws.date.add(j,ws.date.dateParts.DAY,f)};ws.date.getNextMonth=function(g){var f=ws.date.getADateInNextMonth(g),a=ws.date.GetDaysInMonth(f.getFullYear(),f.getMonth());g.getDate()>a?f.setDate(a):f.setDate(g.getDate());return f};ws.date.daysSpanned=
function(g,f){var a=6E4*g.getTimezoneOffset(),b=6E4*f.getTimezoneOffset(),a=g.getTime()-a,b=f.getTime()-b;return Math.floor(b/864E5)-Math.floor(a/864E5)};ws.date.shortestDate=function(j,f){var a=new Date,b=a.getDate(),e=a.getMonth(),a=a.getYear(),h=new Date(j),k=h.getDate(),l=h.getMonth(),n=h.getYear(),b=g.difference(new Date(n,l,k),new Date(a,e,b),"day"),e=f?"":Config.Strings.Today+" ";return 0==b?e+ws.date.formatDateTime(h,Config.Strings.DateToday):1==b&&!f?Config.Strings.Yesterday+" "+ws.date.formatDateTime(h,
Config.Strings.DateToday):7>b?ws.date.formatDateTime(h,Config.Strings.DateWeek):a==n?ws.date.formatDateTime(h,Config.Strings.DateThisYear):ws.date.formatDateTime(h,Config.Strings.DateYear)};ws.date.timeAgo=function(g){var f=new Date,g=new Date(g),a=(f-g)/1E3;1>a&&(a=1);var b=Math.round(a/60),e=Math.floor(a/86400);return 60>a?ws.string.substituteParams(Config.Strings.TimeAgo_NSeconds,Math.round(a)):1==b?Config.Strings.TimeAgo_OneMinute:3600>a?ws.string.substituteParams(Config.Strings.TimeAgo_NMinutes,
b):5400>a?Config.Strings.TimeAgo_OneHour:0==e&&f.getDate()==g.getDate()?ws.string.substituteParams(Config.Strings.TimeAgo_NHours,Math.round(a/3600)):1>=e?Config.Strings.TimeAgo_OneDay:7>=e?ws.string.substituteParams(Config.Strings.TimeAgo_NDays,e):f.getYear()==g.getYear()?ws.date.formatDateTime(g,Config.Strings.TimeAgo_ThisYearDate):ws.date.formatDateTime(g,Config.Strings.TimeAgo_PreviousYearDate)};ws.date.readableDuration=function(g){if(60>g)return Math.round(g)+Config.Strings.SecondsAbbrev;var f=
[];if(86400<=g){var a=Math.round(g/86400);f.push(a+Config.Strings.DaysAbbrev);g%=86400}3600<=g&&(a=Math.round(g/3600),f.push(a+Config.Strings.HoursAbbrev),g%=3600);60<=g&&(g=Math.round(g/60),f.push(g+Config.Strings.MinutesAbbrev));return f.join(" ")};ws.date.formatISO8601=function(g){var f=g.getMonth()+1,a=g.getDate(),b=g.getHours(),e=g.getMinutes(),h=g.getSeconds();return""+g.getFullYear()+(0>f||9<f?f:"0"+f)+(0>a||9<a?a:"0"+a)+"T"+(0>b||9<b?b:"0"+b)+(0>e||9<e?e:"0"+e)+(0>h||9<h?h:"0"+h)};ws.date.formatRFC2445=
function(g){var f=g.getMonth()+1,a=g.getDate();return""+g.getFullYear()+(0>f||9<f?f:"0"+f)+(0>a||9<a?a:"0"+a)};ws.date.formatRFC2445WithTime=function(g){var f=g.getMonth()+1,a=g.getDate(),b=g.getHours(),e=g.getMinutes(),h=g.getSeconds();return""+g.getFullYear()+(0>f||9<f?f:"0"+f)+(0>a||9<a?a:"0"+a)+(0>b||9<b?b:"0"+b)+(0>e||9<e?e:"0"+e)+(0>h||9<h?h:"0"+h)};ws.date.formatDateTime=function(g,f){var a=g.getFullYear()+"",b=g.getMonth()+1,e=g.getDate(),h=g.getDay(),k=g.getHours(),l=g.getMinutes(),n=g.getSeconds(),
m={};m.y=a;m.yyyy=a;m.yy=a.substring(2,4);m.M=b;m.MM=0>b||9<b?b:"0"+b;m.MMM=ws.date.monthNames[b-1];m.NNN=ws.date.monthNames[b+11];m.d=e;m.dd=0>e||9<e?e:"0"+e;m.E=ws.date.dayNames[h+7];m.EE=ws.date.dayNames[h];m.H=k;m.HH=0>k||9<k?k:"0"+k;m.h=0==k?12:12<k?k-12:k;m.hh=0>m.h||9<m.h?m.h:"0"+m.h;m.K=11<k?k-12:k;m.k=k+1;m.KK=0>m.K||9<m.K?m.K:"0"+m.K;m.kk=0>m.k||9<m.k?m.k:"0"+m.k;m.a=11<k?ws.date.pmAbb:ws.date.amAbb;m.m=l;m.mm=0>l||9<l?l:"0"+l;m.s=n;m.ss=0>n||9<n?n:"0"+n;a="";b=f.split("");e=0;for(k=h=null;e<
f.length;){h=b[e];for(k="";b[e]==h&&e<b.length;)k+=b[e++];a=null!=m[k]?a+m[k]:a+k}return a};ws.date.formatTime=function(g,f,a){var b=g.getHours(),e=g.getMinutes(),h=g.getSeconds(),g={};g.H=b;g.HH=0>b||9<b?b:"0"+b;g.h=0==b?12:12<b?b-12:b;g.hh=0>g.h||9<g.h?g.h:"0"+g.h;g.K=11<b?b-12:b;g.k=b+1;g.KK=0>g.K||9<g.K?g.K:"0"+g.K;g.kk=0>g.k||9<g.k?g.k:"0"+g.k;g.a=11<b?ws.date.pmAbb:ws.date.amAbb;g.m=e;g.mm=0>e||9<e?e:"0"+e;g.s=h;g.ss=0>h||9<h?h:"0"+h;a&&0==e&&(f=a);for(var a="",e=f.split(""),b=0,k=h=null;b<
f.length;){h=e[b];for(k="";e[b]==h&&b<e.length;)k+=e[b++];a=null!=g[k]?a+g[k]:a+k}return a};ws.date.formatMinutes=function(g,f,a){var g=g%1440,b=Math.floor(g/60),e=g-60*b,g={};g.H=b;g.HH=0>b||9<b?b:"0"+b;g.h=0==b?12:12<b?b-12:b;g.hh=0>g.h||9<g.h?g.h:"0"+g.h;g.K=11<b?b-12:b;g.k=b+1;g.KK=0>g.K||9<g.K?g.K:"0"+g.K;g.kk=0>g.k||9<g.k?g.k:"0"+g.k;g.a=11<b?ws.date.pmAbb:ws.date.amAbb;g.m=e;g.mm=0>e||9<e?e:"0"+e;a&&0==e&&(f=a);for(var a="",b=f.split(""),e=0,h=null,k=null;e<f.length;){h=b[e];for(k="";b[e]==
h&&e<b.length;)k+=b[e++];a=null!=g[k]?a+g[k]:a+k}return a};ws.date.IsInteger=function(g){for(var f=0;f<g.length;f++)if(-1=="1234567890".indexOf(g.charAt(f)))return!1;return!0};ws.date.GetInt=function(g,f,a,b){for(;b>=a;b--){var e=g.substring(f,f+b);if(e.length<a)break;if(ws.date.IsInteger(e))return e}return null};ws.date.GetDateFromFormat=function(g,f){for(var g=g+"",f=f+"",a=0,b=0,e="",h="",k,l,n=new Date,m=n.getYear(),q=n.getMonth()+1,s=1,o=n.getHours(),u=n.getMinutes(),n=n.getSeconds(),p="";b<
f.length;){e=f.charAt(b);for(h="";f.charAt(b)==e&&b<f.length;)h+=f.charAt(b++);if("yyyy"==h||"yy"==h||"y"==h){"yyyy"==h&&(l=k=4);"yy"==h&&(l=k=2);"y"==h&&(k=2,l=4);m=ws.date.GetInt(g,a,k,l);if(null==m)return 0;a+=m.length;2==m.length&&(m=70<m?1900+(m-0):2E3+(m-0))}else if("MM"==h||"M"==h){q=ws.date.GetInt(g,a,h.length,2);if(null==q||1>q||12<q)return 0;a+=q.length}else if("dd"==h||"d"==h){s=ws.date.GetInt(g,a,h.length,2);if(null==s||1>s||31<s)return 0;a+=s.length}else if("hh"==h||"h"==h){o=ws.date.GetInt(g,
a,h.length,2);if(null==o||1>o||12<o)return 0;a+=o.length}else if("HH"==h||"H"==h){o=ws.date.GetInt(g,a,h.length,2);if(null==o||0>o||23<o)return 0;a+=o.length}else if("KK"==h||"K"==h){o=ws.date.GetInt(g,a,h.length,2);if(null==o||0>o||11<o)return 0;a+=o.length}else if("kk"==h||"k"==h){o=ws.date.GetInt(g,a,h.length,2);if(null==o||1>o||24<o)return 0;a+=o.length;o--}else if("mm"==h||"m"==h){u=ws.date.GetInt(g,a,h.length,2);if(null==u||0>u||59<u)return 0;a+=u.length}else if("ss"==h||"s"==h){n=ws.date.GetInt(g,
a,h.length,2);if(null==n||0>n||59<n)return 0;a+=n.length}else if("a"==h){e=0;p=Config.Strings.Date_am.length;e=g.substring(a,a+p).toLowerCase();if(e==Config.Strings.Date_am)e=p,p="AM";else if(e==Config.Strings.Date_pm)e=Config.Strings.Date_pm.length,p="PM";else return 0;a+=e}else{if(g.substring(a,a+h.length)!=h)return 0;a+=h.length}}if(a!=g.length)return 0;if(2==q)if(0==m%4&&0!=m%100||0==m%400){if(29<s)return 0}else if(28<s)return 0;if((4==q||6==q||9==q||11==q)&&30<s)return 0;12>o&&"PM"==p?o=o-0+
12:11<o&&"AM"==p&&(o-=12);return(new Date(m,q-1,s,o,u,n)).getTime()};ws.date.ParseDate=function(g){var f=2==arguments.length?arguments[1]:!1;generalFormats="y-M-d;MMM d, y;MMM d,y;y-MMM-d;d-MMM-y;MMM d".split(";");monthFirst="M/d/y,M-d-y,M.d.y,MMM-d,M/d,M-d".split(",");dateFirst="d/M/y,d-M-y,d.M.y,d-MMM,d/M,d-M".split(",");for(var f=["generalFormats",f?"dateFirst":"monthFirst",f?"monthFirst":"dateFirst"],a=null,b=0;b<f.length;b++)for(var e=window[f[b]],h=0;h<e.length;h++)if(a=ws.date.GetDateFromFormat(g,
e[h]),0!=a)return new Date(a);return null};ws.date.ParseDateFromFormat=function(g,f){var a=null;try{if(a=new Date(ws.date.GetDateFromFormat(g,f)),null==a||1970>=a.getFullYear())a=null}catch(b){a=null}return a};ws.date.ParseTimeFromFormat=function(g,f){var a=new Date,b=a.getYear()+1900,e=a.getMonth()+1,a=a.getDate();return ws.date.ParseDateFromFormat(e+"/"+a+"/"+b+" "+g,"M/d/yyyy "+f)};ws.date.ParseHourMinTextField=function(g,f,a){var b=0,e=0,h=!1,k=[],f=ws.date.ParseTimeFromFormat(g,f);null==f?h=
!0:(b=f.getHours(),e=f.getMinutes());h&&(f=ws.date.ParseTimeFromFormat(g,a),null!=f&&(b=f.getHours(),e=0));if(null==f)return null;k.hr=b;k.min=e;return k};ws.date.GetPreviousWeekDate=function(g){return ws.date.add(g,ws.date.dateParts.DAY,-7)};ws.date.GetNextWeekDate=function(g){return ws.date.add(g,ws.date.dateParts.DAY,7)};ws.date.GetFirstDayInWeek=function(g,f){var a=g.getDay()-f;0>a&&(a+=7);return ws.date.add(g,ws.date.dateParts.DAY,-a)};ws.date.GetLastDayInWeek=function(g,f){var a=g.getDay();
return ws.date.add(g,ws.date.dateParts.DAY,(f-a+6)%7)};ws.date.IsValidDate=function(g){return g!=ws.date.kEmptyDate&&g.getTime};ws.date.TimeRangeFormatter=function(g,f,a,b,e){if(a||!ws.date.IsValidDate(g))return"";a=ws.date.formatDateTime(g,0<g.getMinutes()?b:e);!ws.date.IsValidDate(f)||g.getTime()==f.getTime()?g=a:(g=ws.date.formatDateTime(f,0<f.getMinutes()?b:e),g=a+"-"+g);return g};ws.date.FormatTimeRange=function(g,f,a,b,e){(g=ws.date.TimeRangeFormatter(g,f,a,b,e))&&(g=g.toLowerCase());return g};
ws.date.IsLeapYear=function(g){return 0==g%4&&(0!=g%100||0==g%400)};ws.date.GetDaysInMonth=function(g,f){return ws.date.IsLeapYear(g)?ws.date.LEAP_MONTH_LENGTH[f]:ws.date.MONTH_LENGTH[f]};ws.date.incrementMonth=function(g){var f=g.getDate(),g=new Date(g.getFullYear(),g.getMonth()+1,1),a=ws.date.GetDaysInMonth(g.getFullYear(),g.getMonth());f<=a?g.setDate(f):g.setDate(a);return g}})},"ws/widget/Dialogs":function(){define("ws/widget/Dialogs","dojo,ws/widget/GenericDialog,ws/widget/iframeModalPane,ws/widget/iframePane,ws/widget/WSModalPane,ws/widget/WSToolbar".split(","),
function(g,j,f,a){ws.widget.Dialogs={iframePane:null,show:function(a,e,f,k){if(!this.dialog)this.dialog=new j,g.body().appendChild(this.dialog.domNode),this.dialog.startup();this.dialog.show(a,e,f,k);g.publish("popup/open",[])},showTransientDialog:function(a,e,f,k,l){f=new j(g.mixin({destroyOnClose:!0},f));g.body().appendChild(f.domNode);f.startup();var n=[];if(k&&k.length)for(var m=0;m<k.length;m++)n.push(k[m].label);l=g.mixin({btnArgs:k},l);f.show(a,n,e,l);g.publish("popup/open",[])},showSpamOffAlert:function(a){var e=
['<div style="font-weight:bold;font-size:15px">',Config.Strings.SpamFilterOffDlgTitle,"</div><br><div>",Config.Strings.SpamFilterOffDlgMsg,"</div>"],e=e.join(""),a=g.hitch(this,function(a,b){1==b?ws.settings.load({scope:"spam",load:function(){if(Settings.SpamSettingsAvailable){var b={PersonalAdaptiveSpamFilterLevel:"Off"};g.mixin(window.Settings,b);ws.settings.save(b,{load:a});ws.WebSuite.theMailModel.activeCachedList.RefetchIndex()}},error:function(){}}):a()},a);ws.reporting.reportDLAction("Mail-SpamKnobAlert");
ws.widget.Dialogs.show(e,[Config.Strings.OK,Config.Strings.SpamFilterOffDlgLink],a,{width:380,textNodeStyle:"font-size:14px;padding: 4px 8px 15px 8px;",btnArgs:[null,{type:"Bare"}]})},showUnsubDialog:function(a,e,f,k){ws.reporting.reportDLAction("Mail-Spam-LightboxMsgShown");var a=' <a href="'+ws.string.substituteParams(Config.spamLearnMoreUrl,Config.unsubscribeLearnMoreId)+'" target="_blank">'+Config.Strings.dm_LearnMore+"</a>",a="<div style='font-size:16px;padding-bottom:20px;font-weight:bold;'>"+
ws.string.substituteParams(Config.Strings.UnsubStopEmails,null!=f?f:e)+"</div><div style='font-size:12px;padding-bottom:20px;'>"+ws.string.substituteParams(Config.Strings.UnsubWeHelp,e)+a+"</div>",j="<div class='modalPaneFooter' style='width:434px;'><label><input type='checkbox' name='dontShow' />"+Config.Strings.UnsubDontShow+"</label></div>",k=g.hitch(this,function(a,b){var k=g.query(".modalPaneFooter input[type=checkbox]",this.dialog.footerNode);if(k.length&&k[0].checked)ws.settings.saveNow({EnableUnsubscribing:!1}),
Settings.EnableUnsubscribing=!1;0==b?(ws.reporting.reportDLAction("Mail-Spam-LightboxMsgOk"),a(null,null,!0,e,f)):1==b&&(ws.reporting.reportDLAction("Mail-Spam-LightboxMsgNo"),a())},k);ws.widget.Dialogs.show(a,[Config.Strings.UnsubLink,Config.Strings.UnsubNoThanksLink],k,{newCancel:!0,width:480,textNodeStyle:"font-size:14px;padding: 4px 8px 15px 8px;",footerHtml:j,btnArgs:[null,{type:"Bare"}]})},showSpamDisp:function(a,e,f,k,j){var n=function(a,b,e){b?ws.WebSuite.spamDLreport("Filter","p","g",e):
1==a.length?(a=a[0],"userrule"===a?ws.WebSuite.spamDLreport(a,"p","s",e):ws.WebSuite.spamDLreport(a,"p",null,e)):1<a.length&&ws.WebSuite.spamDLreport(null,"M",null,e)},m=[],q,s,o,u="",p=k?Config.Strings.SD_justMkNS:"",v;for(v in a)a.hasOwnProperty(v)&&m.push(v);if(1===m.length){f=m[0];e=a[f];v=e.length?e[0]:"";u=' <a href="'+ws.string.substituteParams(Config.spamLearnMoreUrl,Config[f+"LearnMoreId"])+'" target="_blank">'+Config.Strings.dm_LearnMore+"</a>";s=Config.Strings.SD_changeThis;o=Config.Strings["SD_"+
f+"ActPrmy"];e=a[f].length?a[f][0]:"";""!==e&&ws.string.substituteParams(Config.Strings["SD_"+f],e);e=Config.Strings["SD_"+f+"LB"];q=k?("string"==typeof v&&v.length&&-1!=e.indexOf("{0}")?ws.string.substituteParams(e,v):e)+".":Config.Strings["SD_"+f+"Gen"]+".";var w=g.hitch(this,function(e){var f=["<div style='font-size:16px;padding-bottom:20px;'>"+q+"</div>","",k?"<div style='font-size:12px;padding-bottom:20px;'>"+s+u+"</div>":""],f=f.join(""),h=g.hitch(this,function(f,h){if(0==h)if(e)n(m,e,"v"),
ws.WebSuite.openSettings("filterSettings");else{n(m,e,"f");for(var k=0;k<m.length;k++){var j=m[k],l=a[j],q=g.hitch(this,function(){f(null,!0)}),s=function(){};if(l.length)for(var o=0;o<l.length;o++)ws.WebSuite.spmFltrFixIt(j,{load:k===m.length-1&&o===l.length-1?q:function(){},error:s},l[o]);else ws.WebSuite.spmFltrFixIt(j,{load:k===m.length-1?q:function(){},error:s},"")}}else 1==h&&(n(m,e,"m"),f())},j);ws.widget.Dialogs.show(f,[o,p],h,{newCancel:!0,width:480,textNodeStyle:"font-size:14px;padding: 4px 8px 15px 8px;",
btnArgs:[null,{type:"Bare"}]})}),f=m[0],e=a[f];"userrule"===f?(f=g.hitch(this,function(){q=Config.Strings.SD_userruleLB;s=Config.Strings.SD_changeThisFltr;n(m,!1,null);w()}),v=g.hitch(this,function(){q=Config.Strings.SD_userruleUnclrLB;s=Config.Strings.SD_changeThisFltr;o=Config.Strings.SD_userruleActView;u=' <a href="'+ws.string.substituteParams(Config.spamLearnMoreUrl,Config.userruleNoFixLearnMoreId)+'" target="_blank">'+Config.Strings.dm_LearnMore+"</a>";n(m,!0,null);w(!0)}),ws.WebSuite.canFixBadFltr(e[0],
f,v)):(n(m,!1,null),w())}},ok:function(a,e,f,g){f?this.okCancel(a,e):this.show(a,["&nbsp;&nbsp;&nbsp;&nbsp;"+Config.Strings.OK+"&nbsp;&nbsp;&nbsp;&nbsp;"],e,g)},okCancel:function(a,e,f){this.show(a,f?[Config.Strings.Cancel,Config.Strings.OK]:[Config.Strings.OK,Config.Strings.Cancel],function(a){e&&(f?e(0!=a):e(0==a))});return this.dialog},yesNo:function(a,e){this.show(a,[Config.Strings.Yes,Config.Strings.No],function(a){e&&e(0==a)})},iframe:function(b){if(b&&null==this.iframePane)this.iframePane=
null!=b.isModal&&b.isModal?new f:new a,this.iframePane.pluginId=b.pluginId,g.body().appendChild(this.iframePane.domNode),this.iframePane.startup(),this.iframePane.show(b.url,b.box,b.offset),g.publish("popup/open",[])},iframeClose:function(a){this.iframePane&&this.iframePane.pluginId&&this.iframePane.pluginId==a&&this.iframePane.hide()}}})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./has"],function(g,j,f){function a(a,b,e,g,h){if(g=b.match(/(.*):(.*)/))return b=
g[2],g=g[1],k.selector(g,b).call(h,a,e);f("touch")&&(l.test(b)&&(e=C(e)),!f("event-orientationchange")&&"orientationchange"==b&&(b="resize",a=window,e=C(e)));o&&(e=o(e));if(a.addEventListener){var j=b in q,m=j?q[b]:b;a.addEventListener(m,e,j);return{remove:function(){a.removeEventListener(m,e,j)}}}if(w&&a.attachEvent)return w(a,"on"+b,e);throw Error("Target must be an event emitter");}function b(){this.cancelable=!1}function e(){this.bubbles=!1}var h=window.ScriptEngineMajorVersion;f.add("jscript",
h&&h()+ScriptEngineMinorVersion()/10);f.add("event-orientationchange",f("touch")&&!f("android"));f.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);var k=function(b,e,f,g){return"function"==typeof b.on&&"function"!=typeof e&&!b.nodeType?b.on(e,f):k.parse(b,e,f,a,g,this)};k.pausable=function(a,b,e,f){var g,a=k(a,b,function(){if(!g)return e.apply(this,arguments)},f);a.pause=function(){g=!0};a.resume=function(){g=!1};return a};
k.once=function(a,b,e){var f=k(a,b,function(){f.remove();return e.apply(this,arguments)});return f};k.parse=function(a,b,e,f,g,h){if(b.call)return b.call(h,a,e);if(-1<b.indexOf(",")){for(var b=b.split(/\s*,\s*/),k=[],j=0,l;l=b[j++];)k.push(f(a,l,e,g,h));k.remove=function(){for(var a=0;a<k.length;a++)k[a].remove()};return k}return f(a,b,e,g,h)};var l=/^touch/;k.selector=function(a,b,e){return function(f,g){function h(b){for(l=l&&l.matches?l:j.query;!l.matches(b,a,f);)if(b==f||!1===e||!(b=b.parentNode)||
1!=b.nodeType)return;return b}var l="function"==typeof a?{matches:a}:this,m=b.bubble;return m?k(f,m(h),g):k(f,b,function(a){var b=h(a.target);return b&&g.call(b,a)})}};var n=[].slice,m=k.emit=function(a,f,g){var h=n.call(arguments,2),k="on"+f;if("parentNode"in a){var j=h[0]={},l;for(l in g)j[l]=g[l];j.preventDefault=b;j.stopPropagation=e;j.target=a;j.type=f;g=j}do a[k]&&a[k].apply(a,h);while(g&&g.bubbles&&(a=a.parentNode));return g&&g.cancelable&&g},q={};if(!f("event-stopimmediatepropagation"))var s=
function(){this.modified=this.immediatelyStopped=!0},o=function(a){return function(b){if(!b.immediatelyStopped)return b.stopImmediatePropagation=s,a.apply(this,arguments)}};if(f("dom-addeventlistener"))q={focusin:"focus",focusout:"blur"},k.emit=function(a,b,e){if(a.dispatchEvent&&document.createEvent){var f=a.ownerDocument.createEvent("HTMLEvents");f.initEvent(b,!!e.bubbles,!!e.cancelable);for(var g in e)g in f||(f[g]=e[g]);return a.dispatchEvent(f)&&f}return m.apply(k,arguments)};else{k._fixEvent=
function(a,b){if(!a)a=(b&&(b.ownerDocument||b.document||b).parentWindow||window).event;if(!a)return a;u&&a.type==u.type&&(a=u);if(!a.target){a.target=a.srcElement;a.currentTarget=b||a.srcElement;if("mouseover"==a.type)a.relatedTarget=a.fromElement;if("mouseout"==a.type)a.relatedTarget=a.toElement;if(!a.stopPropagation)a.stopPropagation=z,a.preventDefault=x;switch(a.type){case "keypress":var e="charCode"in a?a.charCode:a.keyCode;10==e?(e=0,a.keyCode=13):13==e||27==e?e=0:3==e&&(e=99);a.charCode=e;e=
a;e.keyChar=e.charCode?String.fromCharCode(e.charCode):"";e.charOrCode=e.keyChar||e.keyCode}}return a};var u,p=function(a){this.handle=a};p.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var v=function(a){return function(b){var b=k._fixEvent(b,this),e=a.call(this,b);b.modified&&(u||setTimeout(function(){u=null}),u=b);return e}},w=function(a,b,e){e=v(e);if(((a.ownerDocument?a.ownerDocument.parentWindow:a.parentWindow||a.window||window)!=top||5.8>f("jscript"))&&!f("config-_allow_leaks")){"undefined"==
typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var h=a[b];if(!h||!h.listeners){var k=h,h=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");h.listeners=[];a[b]=h;h.global=this;k&&h.listeners.push(_dojoIEListeners_.push(k)-1)}h.listeners.push(a=h.global._dojoIEListeners_.push(e)-1);return new p(a)}return g.after(a,b,e,!0)},z=function(){this.cancelBubble=
!0},x=k._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(a){}this.defaultPrevented=!0;this.returnValue=!1}}if(f("touch"))var A=function(){},B=window.orientation,C=function(a){return function(b){var e=b.corrected;if(!e){var g=b.type;try{delete b.type}catch(h){}if(b.type){if(f("mozilla")){var e={},k;for(k in b)e[k]=b[k]}else A.prototype=b,e=new A;e.preventDefault=function(){b.preventDefault()};e.stopPropagation=function(){b.stopPropagation()}}else e=
b,e.type=g;b.corrected=e;if("resize"==g){if(B==window.orientation)return null;B=window.orientation;e.type="orientationchange";return a.call(this,e)}if(!("rotation"in e))e.rotation=0,e.scale=1;var g=e.changedTouches[0],j;for(j in g)delete e[j],e[j]=g[j]}return a.call(this,e)}};return k})},"ws/suite/NewToday":function(){define("ws/suite/NewToday","dojo/_base/declare,dojo/text!ws/suite/NewToday.html,dojo/text!ws/suite/NewToday.css,dojo,dijit,dijit/_Widget,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,ws/widget/Advertisement,dojo/io/script,dijit/layout/BorderContainer,ws/widget/ContainerPane,ws/date,ws/html,ws/io,ws/string,ws/widget/Pane,ws/widget/WSSelect,ws/widget/Button,ws/widget/SingleLineNotification".split(","),
function(g,j,f,a,b,e,h,k,l,n){return g([e,h,k],{templateString:j,css:{templateString:f},themeColorsDone:!1,hasIframeInited:!1,data:null,tempModes:["F","C"],currTempMode:0,newsIntHandle:null,productname:"wmStandard",currentCat:"Top_Stories",defaultCat:"Top_Stories",startup:function(){this.connect(this.mailModel,"modelUpdated","updateMailCount");this.zip="94306";if(ws.UserContext.Zip)this.zip=ws.UserContext.Zip;this.locale="en-us";if(ws.UserContext.Locale)this.locale=ws.UserContext.Locale;a.io.script.get({url:Config.NewTodayStoryURL,
callbackParamName:"callback",content:{f:"json",client:this.productname,cobrand:this.locale,zipcode:this.zip},load:a.hitch(this,"newsResp"),error:a.hitch(this,"newsError"),timeout:7E3,preventCache:!0});this.fetchWeather();this.connect(this.newsCat,"valueChanged","selectCategory");this.adWidget=new l({adtype:"newtoday"});this.adWidget.startup();this.adWidget.adConfig&&this.adPane.addChild(this.adWidget)},testResp:function(a){this.testData=a},incNewsIndex:function(){this.newsIndex+=3;if(this.newsIndex>
this.slides.length-1)this.newsIndex=0},decNewsIndex:function(){this.newsIndex-=3;if(0>this.newsIndex)this.newsIndex=this.slides.length-1},stopAutoRotate:function(){if(this.newsIntHandle)clearInterval(this.newsIntHandle),this.newsIntHandle=null},startAutoRotate:function(){this.newsIntHandle=setInterval(a.hitch(this,"autoRotate"),7E3)},autoRotate:function(){this.incNewsIndex();this.showNewsSlide()},newsResp:function(a){this.rawNews=a[this.productname];this.updateSlides();this.updateCategoryMenu();this.showNewsSlide();
this.addProductPromo(this.rawNews.productPromo);this.startAutoRotate()},updateSlides:function(){if(this.rawNews[this.currentCat]){this.slides=this.rawNews[this.currentCat].stories;this.slidePages=Math.floor(this.slides.length/3);this.newsIndex=0;this.newsSel.innerHTML="";for(var b=0;b<this.slidePages;b++)a.create("div",{className:"newsNavSpot todaySprite",_idx:this.slidePages-b-1},this.newsSel)}},showNewsSlide:function(){a.query(".newsNavSpotSel",this.newsSel).removeClass("newsNavSpotSel");a.addClass(this.newsSel.childNodes[this.slidePages-
Math.floor(this.newsIndex/3)-1],"newsNavSpotSel");a.query(".story").forEach(a.hitch(this,function(b,e){var f=this.slides[this.newsIndex+e];a.query(".storyImg",b).attr("src",f.imgLarge);a.query(".storyImgLnk, .storyTitle, .storyMore",b).attr("href",f.newsLink);a.query(".storyTitle",b).innerHTML(f.headline||"&nbsp;");a.query(".storySummary",b).innerHTML(f.summary||"&nbsp;");a.query(".storyMore",b).innerHTML(f.readmore||"&nbsp;")}));a.query(".storySummary",this.newsPane.domNode).forEach(function(a){ws.html.ellipsis(a)});
a.query(".storyTitle",this.newsPane.domNode).forEach(function(a){ws.html.ellipsis(a)})},newsError:function(){},selectStory:function(b){if(b=ws.widget.getEventTarget(b,"newsNavSpot","newsSel"))this.stopAutoRotate(),this.newsIndex=3*+a.attr(b,"_idx"),this.showNewsSlide()},updateCategoryMenu:function(){if(0!=this.slides.length){if("true"==this.rawNews.extraContent){this.cats=[];for(var a=this.rawNews.categories,b=0;b<a.length;b++)this.cats.push({display:a[b][1],value:a[b][0]})}else this.cats=[{display:this.rawNews[this.defaultCat].displayName,
value:this.defaultCat}];this.newsCat.setOptions(this.cats);this.newsCat.setOptionByValue(this.currentCat)}},selectCategory:function(){this.currentCat=this.newsCat.currentValue;this.stopAutoRotate();var b={f:"json",client:this.productname,cobrand:this.locale,zipcode:this.zip};if(this.currentCat!=this.defaultCat)b.cat=this.currentCat;a.io.script.get({url:Config.NewTodayStoryURL,callbackParamName:"callback",content:b,load:a.hitch(this,"newsResp"),error:a.hitch(this,"newsError"),timeout:7E3,preventCache:!0})},
addProductPromo:function(a){this.promoPane.innerHTML=a},weatherResp:function(a){this.weather.style.display="block";this.rawWeather=a.WeatherResponse.data;this.updateWeather()},weatherError:function(){this.weather.style.display="none"},updateWeather:function(){var b=this.rawWeather;a.query(".degree",this.weather).innerHTML(0==this.currTempMode?b.tempF:b.tempC);a.query(".tempNotation",this.weather).innerHTML(this.tempModes[this.currTempMode]);a.query(".maxTempDiv",this.weather).innerHTML((0==this.currTempMode?
b.highTempF:b.highTempC)+"H");a.query(".minTempDiv",this.weather).innerHTML((0==this.currTempMode?b.lowTempF:b.lowTempC)+"L");a.query(".cityName",this.weather).innerHTML(b.cityName+",&nbsp;"+b.stateCode);b=ws.string.substituteParams("l{0}-weatherType-{1}","D"==b.dayOrNight?"d":"n",b.skyCode);a.query("#weatherIcon",this.weather).addClass(b)},onHide:function(){this.stopAutoRotate();this.blockAds()},onShow:function(){this.inherited(arguments);if(!this.newsIntHandle&&this.rawNews)this.newsIntHandle=setInterval(a.hitch(this,
"autoRotate"),7E3);this.adWidget.block(!1);this.updateMailCount();if(ws.WebSuite.isRecordTimingData&&0==ws.WebSuite.todayPageLoaded)ws.WebSuite.todayPageLoaded=new Date;a.publish("Today/show")},blockAds:function(){this.adWidget.block(!0)},updateMailCount:function(){if("none"!=this.domNode.style.display&&this.mailModel){var a=this.mailModel.getFolderByName(this.mailModel.getInboxFolderName()),b="",e=this.mailCount,f=this.errMsgNode,g=this.mailCountNode;if(a)a=a.unseenCount,b=ws.string.substituteParams(Config.Strings[0==
a?"MessageCountNone":1==a?"MessageCountSingular":"MessageCountPlural"],a);else if(this.mailModel.isLoading())b=Config.Strings.Loading;else if(this.mailModel.isErrorState()){this.mailModel.getErrorObj();b=Config.Strings.TodayPageErrNotAvailable;if(this.mailModel.isNetErrorState())b=Config.Strings.TodayPageNetworkErr;b+="<br><span>"+Config.Strings.TodayPageErrLoginAgain+"</span>";g=e=this.errMsgNode;f=this.mailCount}g.innerHTML=b;ws.html.setShowing(e,!0);ws.html.setShowing(f,!1)}},onClickZipEdit:function(b){a.stopEvent(b);
this.zipInput.setValue(this.zip);this.weatherEdit.style.display="block";this.weather.style.display="none"},onZipEditCancel:function(){this.weatherEdit.style.display="none";this.weather.style.display="block"},onZipSave:function(){var b=this.zipInput.getValue();if(b&&b!=this.zip&&/[0-9]{5}/.test(b))this.tempZip=b,n.get({url:Config.SetWeatherZipURL,load:a.hitch(this,"saveZipResp"),error:a.hitch(this,"saveZipError"),content:{zip:b}}),this.onZipEditCancel()},saveZipResp:function(){if(wsSrv_setZipResults){var a=
wsSrv_setZipResults.status;if(!(a&&"error"===a))this.zip=this.tempZip,this.fetchWeather()}},saveZipError:function(){},fetchWeather:function(){Config.ShowWeatherInToday&&a.io.script.get({url:Config.NewTodayWeatherURL,callbackParamName:"c",content:{f:"json",b:"ObservationBean",m:"getByZipcode",a:this.zip},load:a.hitch(this,"weatherResp"),error:a.hitch(this,"weatherError"),timeout:7E3,preventCache:!0})},onClickMailCount:function(){},updateClock:function(){},updateWeatherLocation:function(){},_getThemeColor:function(){},
toggleTemp:function(){this.currTempMode=(this.currTempMode+1)%2;this.updateWeather()},onNavLeft:function(){this.stopAutoRotate();this.decNewsIndex();this.showNewsStory()},onNavRight:function(){this.stopAutoRotate();this.incNewsIndex();this.showNewsStory()}})})},"dojo/_base/fx":function(){define("./kernel,./config,./lang,../Evented,./Color,./connect,./sniff,../dom,../dom-style".split(","),function(g,j,f,a,b,e,h,k,l){var n=f.mixin,m={},q=m._Line=function(a,b){this.start=a;this.end=b};q.prototype.getValue=
function(a){return(this.end-this.start)*a+this.start};var s=m.Animation=function(a){n(this,a);if(f.isArray(this.curve))this.curve=new q(this.curve[0],this.curve[1])};s.prototype=new a;f.extend(s,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var a=this._percent,b=this.easing;return b?b(a):a},_fire:function(a,b){var e=b||[];if(this[a])if(j.debugAtAllCosts)this[a].apply(this,e);else try{this[a].apply(this,e)}catch(f){}return this},play:function(a,b){this._delayTimer&&
this._clearTimer();if(b)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);var e=a||this.delay,g=f.hitch(this,"_play",b);if(0<e)return this._delayTimer=setTimeout(g,e),this;g();return this},_play:function(){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;var a=this.curve.getValue(this._getStep());
if(!this._percent){if(!this._startRepeatCount)this._startRepeatCount=this.repeat;this._fire("onBegin",[a])}this._fire("onPlay",[a]);this._cycle();return this},pause:function(){this._delayTimer&&this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(a,b){this._stopTimer();this._active=this._paused=!0;this._percent=a;b&&this.play();return this},stop:function(a){this._delayTimer&&
this._clearTimer();if(!this._timer)return this;this._stopTimer();if(a)this._percent=1;this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var a=(new Date).valueOf(),a=0===this.duration?1:(a-this._startTime)/this.duration;1<=a&&(a=1);this._percent=a;this.easing&&(a=this.easing(a));this._fire("onAnimate",[this.curve.getValue(a)]);if(1>
this._percent)this._startTimer();else{this._active=!1;if(0<this.repeat)this.repeat--,this.play(null,!0);else if(-1==this.repeat)this.play(null,!0);else if(this._startRepeatCount)this.repeat=this._startRepeatCount,this._startRepeatCount=0;this._percent=0;this._fire("onEnd",[this.node]);!this.repeat&&this._stopTimer()}}return this},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var o=0,u=null,p={run:function(){}};f.extend(s,{_startTimer:function(){if(!this._timer)this._timer=
e.connect(p,"run",this,"_cycle"),o++;u||(u=setInterval(f.hitch(p,"run"),this.rate))},_stopTimer:function(){if(this._timer)e.disconnect(this._timer),this._timer=null,o--;0>=o&&(clearInterval(u),u=null,o=0)}});var v=h("ie")?function(a){var b=a.style;if(!b.width.length&&"auto"==l.get(a,"width"))b.width="auto"}:function(){};m._fade=function(a){a.node=k.byId(a.node);var b=n({properties:{}},a),a=b.properties.opacity={};a.start=!("start"in b)?function(){return+l.get(b.node,"opacity")||0}:b.start;a.end=b.end;
a=m.animateProperty(b);e.connect(a,"beforeBegin",f.partial(v,b.node));return a};m.fadeIn=function(a){return m._fade(n({end:1},a))};m.fadeOut=function(a){return m._fade(n({end:0},a))};m._defaultEasing=function(a){return 0.5+Math.sin((a+1.5)*Math.PI)/2};var w=function(a){this._properties=a;for(var e in a){var f=a[e];if(f.start instanceof b)f.tempColor=new b}};w.prototype.getValue=function(a){var e={},g;for(g in this._properties){var h=this._properties[g],k=h.start;k instanceof b?e[g]=b.blendColors(k,
h.end,a,h.tempColor).toCss():f.isArray(k)||(e[g]=(h.end-k)*a+k+("opacity"!=g?h.units||"px":0))}return e};m.animateProperty=function(a){var h=a.node=k.byId(a.node);if(!a.easing)a.easing=g._defaultEasing;a=new s(a);e.connect(a,"beforeBegin",a,function(){var a={},e;for(e in this.properties){if("width"==e||"height"==e)this.node.display="block";var g=this.properties[e];f.isFunction(g)&&(g=g(h));g=a[e]=n({},f.isObject(g)?g:{end:g});if(f.isFunction(g.start))g.start=g.start(h);if(f.isFunction(g.end))g.end=
g.end(h);var k=0<=e.toLowerCase().indexOf("color"),j=function(a,b){var e={height:a.offsetHeight,width:a.offsetWidth}[b];if(void 0!==e)return e;e=l.get(a,b);return"opacity"==b?+e:k?e:parseFloat(e)};if("end"in g){if(!("start"in g))g.start=j(h,e)}else g.end=j(h,e);k?(g.start=new b(g.start),g.end=new b(g.end)):g.start="opacity"==e?+g.start:parseFloat(g.start)}this.curve=new w(a)});e.connect(a,"onAnimate",f.hitch(l,"set",a.node));return a};m.anim=function(a,b,e,f,g,h){return m.animateProperty({node:a,
duration:e||s.prototype.duration,properties:b,easing:f,onEnd:g}).play(h||0)};n(g,m);g._Animation=s;return m})},"url:ws/calendar/EventsApp.css":"","dijit/_Contained":function(){define("dijit/_Contained",["dojo/_base/declare","./registry"],function(g,j){return g("dijit._Contained",null,{_getSibling:function(f){var a=this.domNode;do a=a[f+"Sibling"];while(a&&1!=a.nodeType);return a&&j.byNode(a)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},
getIndexInParent:function(){var f=this.getParent();return!f||!f.getIndexOfChild?-1:f.getIndexOfChild(this)}})})},"dijit/layout/utils":function(){define("dijit/layout/utils","dojo/_base/array,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/lang,../main".split(","),function(g,j,f,a,b,e){function h(a,e){var g=a.resize?a.resize(e):f.setMarginBox(a.domNode,e);g?b.mixin(a,g):(b.mixin(a,f.getMarginBox(a.domNode)),b.mixin(a,e))}e=b.getObject("layout",!0,e);e.marginBox2contentBox=function(b,e){var g=
a.getComputedStyle(b),h=f.getMarginExtents(b,g),j=f.getPadBorderExtents(b,g);return{l:a.toPixelValue(b,g.paddingLeft),t:a.toPixelValue(b,g.paddingTop),w:e.w-(h.w+j.w),h:e.h-(h.h+j.h)}};e.layoutChildren=function(a,e,f,m,q){e=b.mixin({},e);j.add(a,"dijitLayoutContainer");f=g.filter(f,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(g.filter(f,function(a){return"center"==a.region||"client"==a.layoutAlign}));g.forEach(f,function(a){var b=a.domNode,f=a.region||a.layoutAlign;if(!f)throw Error("No region setting for "+
a.id);var g=b.style;g.left=e.l+"px";g.top=e.t+"px";g.position="absolute";j.add(b,"dijitAlign"+(f.substring(0,1).toUpperCase()+f.substring(1)));b={};m&&m==a.id&&(b["top"==a.region||"bottom"==a.region?"h":"w"]=q);"top"==f||"bottom"==f?(b.w=e.w,h(a,b),e.h-=a.h,"top"==f?e.t+=a.h:g.top=e.t+e.h+"px"):"left"==f||"right"==f?(b.h=e.h,h(a,b),e.w-=a.w,"left"==f?e.l+=a.w:g.left=e.l+e.w+"px"):("client"==f||"center"==f)&&h(a,e)})};return{marginBox2contentBox:e.marginBox2contentBox,layoutChildren:e.layoutChildren}})},
"url:ws/calendar/CNavigation.html":'<div class="WSCNavigation">\n\t<div data-dojo-type="dijit/layout/BorderContainer" data-dojo-attach-point="layoutWidget" style="height: 100%; width: 100%;" >\n\n\t\t\n        <div data-dojo-props="region:\'top\'" data-dojo-type="ws/widget/Pane" data-dojo-attach-point="searchAreaPane" class="searchPane">\n\t\t\t<div class="searchInputDiv" data-dojo-attach-point="searchArea">\n\t\t\t\t<input class="wsInput searchInput" type="text" data-dojo-attach-point="searchField" data-dojo-attach-event="onkeyup: onKeyPressSearchField" />\n\t\t\t\t<div class="goSearch" data-dojo-attach-point="searchBtn" data-dojo-attach-event="onclick: searchApp"></div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div data-dojo-props="region:\'center\'" data-dojo-type="ws/widget/Pane" class="mainPane" data-dojo-attach-point="mainPane">\n\t\t\t<\!-- Calendar --\>\n\t\t\t<div data-dojo-type="ws/widget/WSDatePicker" data-dojo-attach-point="navDatePicker" class="navDatePicker"></div>\n\n            <div class="wsSeparator"></div>\n\n\t\t\t<div data-dojo-attach-point="calendarContainer" class="calendarContainer" style="display: none;">\n\t\t\t\t<div data-dojo-attach-point="myCalendarsNode" style="overflow: hidden;"></div>\n\t\t\t\t<div data-dojo-attach-point="subCalendarsNode" style="overflow: hidden;"></div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<\!--\n            <div class="addCalendarNode" data-dojo-attach-point="addCalendarNode">\n\t\t\t\t<img src="${spacer}" class="imgLargeAdd"/>\n\t\t\t\t<span data-dojo-attach-point="addCalendarNodeText" class="addCalendarNodeText"></span>\n\t\t\t</div>\n\t\t\t--\>\n\t\t</div>\n\t\t<div id="todoApp" data-dojo-type="ws/calendar/TodoApp" data-dojo-props="region:\'bottom\'" dojoAttachPoint="todoApp" style="height: 200px">\n\t\t</div>\n\t</div>\n</div>',
"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(g,j,f){function a(a){setTimeout(function(){e.apply(b,a)},0)}var b=new f,e=b.emit;b.emit=null;j.prototype.trace=function(){var b=g._toArray(arguments);this.then(function(e){a(["resolved",e].concat(b))},function(e){a(["rejected",e].concat(b))},function(e){a(["progress",e].concat(b))});return this};j.prototype.traceRejected=function(){var b=g._toArray(arguments);this.otherwise(function(e){a(["rejected",e].concat(b))});
return this};return b})},"dojo/dom-style":function(){define("dojo/dom-style",["./sniff","./dom"],function(g,j){function f(a,b,f){b=b.toLowerCase();if(g("ie")){if("auto"==f){if("height"==b)return a.offsetHeight;if("width"==b)return a.offsetWidth}if("fontweight"==b)switch(f){case 700:return"bold";default:return"normal"}}b in n||(n[b]=m.test(b));return n[b]?e(a,f):f}var a,b={};a=g("webkit")?function(a){var b;if(1==a.nodeType){var e=a.ownerDocument.defaultView;b=e.getComputedStyle(a,null);if(!b&&a.style)a.style.display=
"",b=e.getComputedStyle(a,null)}return b||{}}:g("ie")&&(9>g("ie")||g("quirks"))?function(a){return 1==a.nodeType&&a.currentStyle?a.currentStyle:{}}:function(a){return 1==a.nodeType?a.ownerDocument.defaultView.getComputedStyle(a,null):{}};b.getComputedStyle=a;var e;e=g("ie")?function(a,b){if(!b)return 0;if("medium"==b)return 4;if(b.slice&&"px"==b.slice(-2))return parseFloat(b);var e=a.style,f=a.runtimeStyle,g=e.left,h=f.left;f.left=a.currentStyle.left;try{e.left=b,b=e.pixelLeft}catch(k){b=0}e.left=
g;f.left=h;return b}:function(a,b){return parseFloat(b)||0};b.toPixelValue=e;var h=function(a,b){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(e){return b?{}:null}},k=9>g("ie")||10>g("ie")&&g("quirks")?function(a){try{return h(a).Opacity/100}catch(b){return 1}}:function(b){return a(b).opacity},l=9>g("ie")||10>g("ie")&&g("quirks")?function(a,b){var e=100*b,f=1==b;a.style.zoom=f?"":1;if(h(a))h(a,1).Opacity=e;else{if(f)return b;a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+
e+")"}h(a,1).Enabled=!f;if("tr"==a.tagName.toLowerCase())for(e=a.firstChild;e;e=e.nextSibling)"td"==e.tagName.toLowerCase()&&l(e,b);return b}:function(a,b){return a.style.opacity=b},n={left:!0,top:!0},m=/margin|padding|width|height|max|min|offset/,q=g("ie")?"styleFloat":"cssFloat",s={cssFloat:q,styleFloat:q,"float":q};b.get=function(a,e){var g=j.byId(a),h=arguments.length;if(2==h&&"opacity"==e)return k(g);var e=s[e]||e,l=b.getComputedStyle(g);return 1==h?l:f(g,e,l[e]||g.style[e])};b.set=function(a,
e,f){var g=j.byId(a),h=arguments.length,k="opacity"==e,e=s[e]||e;if(3==h)return k?l(g,f):g.style[e]=f;for(var m in e)b.set(a,m,e[m]);return b.getComputedStyle(g)};return b})},"url:ws/address/PeopleApp.html":'<div class="appNode appPpl">\n\t<div class="layoutWidget" data-dojo-type="dijit/layout/BorderContainer" data-dojo-attach-point="layoutWidget">\n\t\t<div class="mainSprite appTitleBar" data-dojo-type="ws/widget/Pane" data-dojo-props="region:\'top\'">\n\t\t\t<div class="appTitleLink" data-dojo-attach-point="appTitleLink" data-dojo-attach-event="onclick: appMenu"><span class="appTitle">${NavPeople}</span><img src="${spacer}" class="mainSprite appTitleArrow"></div>\n\t\t\t<ul>\n\t\t\t\t<li class="mainSprite appTitleClose" data-dojo-attach-event="onclick: appClose"></li>\n\t\t\t\t<li class="mainSprite appTitleSearch" data-dojo-attach-event="onclick: searchContacts,onmouseout: onMouseOut,onmouseover: onMouseOver" data-dojo-attach-point="appTitleSearch"></li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div data-dojo-type="ws/widget/Pane" class="searchBox" style="display:none;" data-dojo-props="region:\'top\'">\n\t\t\t<div class="cSearchInput" data-dojo-type="ws/widget/ClearableTextbox" data-dojo-attach-point="searchBox" defaultValue="${ContactAppSearchDef}"></div>\n\t\t</div>\n\t\t<div data-dojo-attach-point="appPplNode" data-dojo-type="ws/widget/Pane" class="appPplNode" data-dojo-props="region:\'center\'"></div>\n\t\t<div data-dojo-attach-point="appPplNoResult" data-dojo-type="ws/widget/Pane" class="appPplNoResult" data-dojo-props="region:\'center\'" style="display:none;">\n\t\t\t<div class="noResultMsg">${NoMatchesFound}</div>\n\t\t</div>\n\t\t<div data-dojo-attach-point="appPplEmpty" data-dojo-type="ws/widget/Pane" data-dojo-props="region:\'center\'" style="display:none;">\n\t\t\t<div class="appPplEmptyMsg">${ContactAppEmpty}</div>\n\t\t\t<div data-dojo-attach-point="toolbar" data-dojo-type="ws/widget/WSToolbar" vizType="Bare">\n\t\t\t\t<div data-dojo-type="ws/widget/Pane" data-dojo-props="toolbarPosition: \'center\'">\n\t\t\t\t\t<div data-dojo-type="ws/widget/Button" data-dojo-attach-event="onClick: addContact">${ContactAppEmptyBtn}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n',
"dojo/dom-construct":function(){define("exports,./_base/kernel,./sniff,./_base/window,./dom,./dom-attr,./on".split(","),function(g,j,f,a,b,e){function h(a,b){var e=b.parentNode;e&&e.insertBefore(a,b)}function k(a){if(a.canHaveChildren)try{a.innerHTML="";return}catch(b){}for(var e;e=a.lastChild;)l(e,a)}function l(a,b){a.firstChild&&k(a);b&&(f("ie")&&b.canHaveChildren&&"removeNode"in a?a.removeNode(!1):b.removeChild(a))}var n={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table",
"tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},m=/<\s*([\w\:]+)/,q={},s=0,o="__"+j._scopeName+"ToDomId",u;for(u in n)if(n.hasOwnProperty(u))j=n[u],j.pre="option"==u?'<select multiple="multiple">':"<"+j.join("><")+">",j.post="</"+j.reverse().join("></")+">";g.toDom=function(b,e){var e=e||a.doc,f=e[o];f||(e[o]=f=++s+"",q[f]=e.createElement("div"));var b=b+"",g=b.match(m),h=g?g[1].toLowerCase():
"",f=q[f];if(g&&n[h]){g=n[h];f.innerHTML=g.pre+b+g.post;for(g=g.length;g;--g)f=f.firstChild}else f.innerHTML=b;if(1==f.childNodes.length)return f.removeChild(f.firstChild);for(h=e.createDocumentFragment();g=f.firstChild;)h.appendChild(g);return h};g.place=function(a,e,f){e=b.byId(e);"string"==typeof a&&(a=/^\s*</.test(a)?g.toDom(a,e.ownerDocument):b.byId(a));if("number"==typeof f){var k=e.childNodes;!k.length||k.length<=f?e.appendChild(a):h(a,k[0>f?0:f])}else switch(f){case "before":h(a,e);break;
case "after":f=a;(k=e.parentNode)&&(k.lastChild==e?k.appendChild(f):k.insertBefore(f,e.nextSibling));break;case "replace":e.parentNode.replaceChild(a,e);break;case "only":g.empty(e);e.appendChild(a);break;case "first":if(e.firstChild){h(a,e.firstChild);break}default:e.appendChild(a)}return a};g.create=function(f,h,k,j){var l=a.doc;if(k)k=b.byId(k),l=k.ownerDocument;"string"==typeof f&&(f=l.createElement(f));h&&e.set(f,h);k&&g.place(f,k,j);return f};g.empty=function(a){k(b.byId(a))};g.destroy=function(a){(a=
b.byId(a))&&l(a,a.parentNode)}})},"dijit/_Container":function(){define("dijit/_Container",["dojo/_base/array","dojo/_base/declare","dojo/dom-construct"],function(g,j,f){return j("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=this.domNode},addChild:function(a,b){var e=this.containerNode;if(b&&"number"==typeof b){var g=this.getChildren();if(g&&g.length>=b)e=g[b-1].domNode,b="after"}f.place(a.domNode,e,b);this._started&&!a._started&&
a.startup()},removeChild:function(a){"number"==typeof a&&(a=this.getChildren()[a]);if(a)(a=a.domNode)&&a.parentNode&&a.parentNode.removeChild(a)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(a,b){var e=this.getChildren(),f=g.indexOf(this.getChildren(),a);return e[f+b]},getIndexOfChild:function(a){return g.indexOf(this.getChildren(),a)}})})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(g,j){return function(f,a,b,e){var h=f&&"function"===
typeof f.then,k=h&&f instanceof j;if(h){if(!k)h=new g(f.cancel),f.then(h.resolve,h.reject,h.progress),f=h.promise}else return 1<arguments.length?a?a(f):f:(new g).resolve(f);return a||b||e?f.then(a,b,e):f}})},"url:ws/themes/widget/ThemePicker.html":"<div></div>","ws/presence":function(){define("ws/presence","dojo,dojo/_base/lang,dojo/io/iframe,dojo/io/script,ws/io,ws/string,ws/widget/Dialogs".split(","),function(g,j,f,a){j.setObject("ws.presence",{getBuddyIconUrl:function(a,e){var f=ws.presence.getScreenNameForContact(a,
e);return f?Config.BuddyIconUrl+encodeURIComponent(f):null},getPresenceIconForScreenName:function(a,e){var f=e||Config.AIMPresenceUrl+encodeURIComponent(a);return ws.string.substituteParams('<a href="#"><img align=\'absmiddle\' src="{0}" border="0"></a>',f)},getPresenceIconUrl:function(a){var e=Config.PresenceIconUrl;switch(a){case 1:e+="online.gif";break;case 2:e+="offline.gif";break;case 5:e+="idle.gif";break;case 6:e+="away.gif";break;case 7:e+="mobile.gif";break;case 8:e+="mobile.gif";break;default:e=
"about:blank"}return e},ableToGetIM:function(a){return 1==a||5==a||6==a||7==a||8==a},getPresenceIcon:function(a){return(a=ws.presence.getScreenNameForContact(a))?this.getPresenceIconForScreenName(a):"&nbsp;"},getScreenNameForContact:function(a,e){var f=a.screenName||ws.presence.getScreenNameForAddress(a.email)||ws.presence.getScreenNameForAddress(a.email1)||ws.presence.getScreenNameForAddress(a.email2);e||(f=f||a.email||a.email1||a.email2);return f},getScreenNameForAddress:function(a){return(a=ws.presence.parseEmailAddress(a))&&
-1!=g.indexOf(Config.KnownDomains,a.domain)?a.name:null},_launchIM:function(a,e){"Aim"==Settings.IMSending||!Config.EnableWebIM?this.launchClientIM(a):Config.EnableAIMPanel&&this.launchAIMPanel(a,e)},launchIM:function(a,e,f){0<=a.indexOf("@")&&!e?f?this._launchIM("",f):this._launchIM(a,f):this._launchIM(a,f)},launchClientIM:function(a){if(!ws.presence.imFrame)ws.presence.imFrame=f.create("IMFrame",null,Config.EmptyFileURL);a=ws.string.substituteParams(Config.SendIMUrlAIM,a);f.setSrc(ws.presence.imFrame,
a,!0)},launchAIMPanel:function(a,e,f,k){if(dijit.byId("NavigationWidget"))ws.WebSuite.Navigation.AIMInit(g.hitch(this,function(){var g=ws.WebSuite.Navigation.aim;f||g.openIm({aimId:a,useSMS:e});k&&g.refreshWindow(a)}));else try{opener.ws.presence.launchAIMPanel(a,e),opener.focus()}catch(j){}},launchAIMExpress:function(a){var e=screen.availWidth+1E4,f=screen.availHeight+1E3,a="undefined"!=typeof a?ws.string.substituteParams(Config.IMLaunchAE,encodeURIComponent(a)):Config.LaunchAE,e=ws.string.substituteParams("status=yes,resizable=yes,menubar=no,scrollbars=yes,left={0},top={1},width={2},height={3}",
e,f,1,1);ws.io.openWindow(a,"",e)},parseEmailAddress:function(a){if(null==a||""==a)return null;var e="",f="",a=a.match(/(.*)@(.*)/);null!=a&&3==a.length&&(e=a[1],f=a[2],null!=e&&(e=e.replace(/\/M/gi,""),e=e.replace(/\/A/gi,"")),null!=f&&(f=f.toLowerCase()));return{name:e,domain:f}},getScreenNameFromEmail:function(b){b.f="json";b.k=Config.WIMKey;b.t=kwArgs.users;b.friendly=1;a.get({url:Config.WIMServer+"presence/get",callbackParamName:"c",content:b,load:g.hitch(this,function(a){b.load(a)}),error:b.error,
timeout:kwArgs.timeout,preventCache:!0})},getPresence:function(b){a.get({url:Config.WIMServer+"presence/get",callbackParamName:"c",content:{f:"json",k:Config.WIMKey,t:b.users,friendly:1},load:b.load,error:function(){b.error&&b.error()},timeout:b.timeout,preventCache:!0})}})})},"ws/suite/Footer":function(){define("ws/suite/Footer","dojo/_base/declare,dojo/text!ws/suite/Footer.html,dojo/text!ws/suite/Footer.css,dojo,dijit,dijit/_Widget,dijit/_TemplatedMixin,ws/Spinner,ws/html,ws/string,ws/widget/util".split(","),
function(g,j,f,a,b,e,h,k){return g([e,h],{templateString:j,css:{templateString:f},spinner:null,startup:function(){this.feedbackDescriptions=[];this.feedbackPersistence=[];a.subscribe("WSFeedbackStart",this,"onFeedbackStart");a.subscribe("WSFeedbackEnd",this,"onFeedbackEnd");a.subscribe("WSFeedbackHide",this,"hideFeedback");a.subscribe("WSEditor/BodyClick",this,"hideFeedback")},setWidth:function(b){a.marginBox(this.domNode,{w:b})},loginTime:new Date,onFeedbackStart:function(a,b,e,f,g){b||this.hideFeedbackNonPersist();
this.feedbackDescriptions.push(a);this.feedbackPersistence.push(b);this.undoCB=e?e:null;this.cleanUpUndoCB=f?f:null;this.undoLabel=g||Config.Strings.Undo;this.updateFeedback()},onFeedbackEnd:function(b){b=a.indexOf(this.feedbackDescriptions,b);-1!=b&&(this.feedbackDescriptions.splice(b,1),this.feedbackPersistence.splice(b,1));this.updateFeedback()},updateFeedback:function(){if(0==this.feedbackDescriptions.length){if(this.feedback&&this.feedback.style)this.feedback.style.display="none";a.disconnect(this.docMouseDownHandle);
a.disconnect(this.docKeyDownHandle);this.listenerConnected=!1;this.spinner&&this.spinner.stop()}else{var b=this.feedbackDescriptions[this.feedbackDescriptions.length-1],e=this.feedbackPersistence[this.feedbackPersistence.length-1];if(this.feedback&&this.feedback.style)this.feedback.style.display="block";ws.html.setShowing(this.undoLink,Config.EnableUndo&&this.undoCB);ws.html.setInnerText(this.undoLink,this.undoLabel);ws.html.setInnerText(this.feedbackTextNode,b);if(e)ws.html.setShowing(this.progressNode,
!1),ws.html.setShowing(this.persistentIcon,!0),this.spinner&&this.spinner.stop();else{ws.html.setShowing(this.progressNode,!0);ws.html.setShowing(this.persistentIcon,!1);if(!this.spinner)this.spinner=new k("Feedback",this.progressNode);this.spinner.spin()}setTimeout(a.hitch(this,function(){if(!this.listenerConnected)this.docMouseDownHandle=a.connect(document.documentElement,"onmousedown",this,"hideFeedback"),this.docKeyDownHandle=a.connect(document.documentElement,"onkeydown",this,"hideFeedback"),
this.listenerConnected=!0}),0)}},hideFeedback:function(a){var b=!0;Config.EnableUndo&&(a&&ws.html.overElement(this.undoLink,a)?(this.undoLastAction(),b=!1):this.cleanUpUndo());this.cleanUpUndoCB=this.undoCB=null;if(this.feedbackDescriptions.length)if(b)for(;this.feedbackDescriptions.length;)this.onFeedbackEnd(this.feedbackDescriptions[this.feedbackDescriptions.length-1]);else this.onFeedbackEnd(this.feedbackDescriptions[this.feedbackDescriptions.length-1]);else this.updateFeedback()},hideFeedbackNonPersist:function(){if(this.feedbackDescriptions.length){for(var a=
[],b=[],e=0;e<this.feedbackDescriptions.length;e++)this.feedbackPersistence[e]&&(a.push(this.feedbackPersistence[e]),b.push(this.feedbackDescriptions[e]));this.feedbackPersistence=a;this.feedbackDescriptions=b}this.updateFeedback()},undoLastAction:function(){this.undoCB&&this.undoCB()},cleanUpUndo:function(){this.cleanUpUndoCB&&this.cleanUpUndoCB()}})})},"ws/calendar/ColorPicker":function(){define("ws/calendar/ColorPicker","dojo/_base/declare,dojo/text!ws/calendar/ColorPicker.css,dojo,dijit,dijit/_Widget,dijit/_TemplatedMixin,ws/widget/CalendarColorPickerMenuItem,ws/widget/WSMenu".split(","),
function(g,j,f,a,b,e,h){return g([b,e],{templateString:'<div class="calColorPicker" data-dojo-attach-event="onclick: showColorPicker"><img src="${spacer}" class="wsCalCB wsCalCB_009712"><img src="${spacer}" class="btnArrowImg megaMenuArrow"></div>',css:{templateString:j},colorPickerMenu:null,selectedColor:null,defaultCalColor:"#0360EB",startup:function(){this.reset()},reset:function(){this.onCalColorSelected(this.defaultCalColor,!0)},showColorPicker:function(a){a.preventDefault();this.colorPickerMenu?
this.colorPickerMenu.isShowing()?this.colorPickerMenu.close():this.colorPickerMenu.open(this.domNode):(this.colorPickerMenu=ws.widget.createMenu([{dojoType:h,onClick:f.hitch(this,"onCalColorSelected")}]),this.colorPickerMenu.getChildren()[0].setCurrentColor(),this.colorPickerMenu.open(this.domNode))},onCalColorSelected:function(a,b){this.domNode.firstChild.className="wsCalCB wsCalCB_"+a.substring(1);this.selectedColor=a;if(!b)this.onColorSelected(a)},setSelectedColor:function(a,b){this.onCalColorSelected(a,
b)},getSelectedColor:function(){return this.selectedColor},onColorSelected:function(){}})})},"ws/string":function(){define("ws/string",["dojo","dojo/_base/lang"],function(g,j){j.setObject("ws.string",{substituteParams:function(f,a){var b="object"==typeof a?a:g._toArray(arguments,1);return null==f?"":f.replace(/\%?\{(\w+)\}/g,function(a,f){if("undefined"!=typeof b[f]&&null!=b[f])return b[f];throw Error("Substitution not found: "+f);})},escapeXml:function(f){return f.replace(/&/gm,"&amp;").replace(/</gm,
"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace(/'/gm,"&#39;")},unescapeXml:function(f){f=f.replace(/&#38;|&amp;/g,"&");f=f.replace(/&#60;|&lt;/g,"<");f=f.replace(/&#62;|&gt;/g,">");f=f.replace(/&#34;|&quot;/g,'"');return f=f.replace(/&#39;|&apos;/g,"'")},decodeHTML:function(f){var a=document.createElement("textarea");a.innerHTML=f.replace(/</g,"&lt;").replace(/>/g,"&gt;");return a.value},escapeJs:function(f){return f.replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace(/'/gm,
"&#39;")},sanitize:function(f,a){return g.trim(f.replace(RegExp("\\<.*?\\>|&.*?;"+(a?"":"|[\r\n]"),"g"),""))},summary:function(f,a){return!a||f.length<=a?f:f.substring(0,a-3).replace(/\.+$/,"")+"..."},textOverflow:function(){var f="textContent"in document.body?"textContent":"innerText",a=String.fromCharCode(8230);return function(b){g.query(b).forEach(function(b){var g=b[f],k=g.length;for(0==k||8230!=g.charCodeAt(k-1)?b.origText=g:g=b[f]=b.origText;g&&b.scrollWidth>b.offsetWidth;)g=g.substring(0,g.length-
1),b[f]=g+a})}},alphabet:"abcdefghijklmnopqrstuvwxyz",markupSearchString:function(f,a){if(f&&a&&(f=ws.string.escapeXml(f),a=ws.string.escapeXml(a),-1!=a.toLowerCase().indexOf(f.toLowerCase()))){for(var b=a,e=b.toLowerCase(),g=f.length,k=f.toLowerCase(),j=[],n=e.indexOf(k);-1!=n;)j.push(b.substr(0,n)),j.push("<span class='searchTerm'>",b.substr(n,g),"</span>"),b=b.substr(n+g),e=e.substr(n+g),n=e.indexOf(k);j.push(b);a=j.join("")}return a}})})},"dijit/_base/typematic":function(){define("dijit/_base/typematic",
["../typematic"],function(){})},"dijit/_base":function(){define("dijit/_base","./main,./a11y,./WidgetSet,./_base/focus,./_base/manager,./_base/place,./_base/popup,./_base/scroll,./_base/sniff,./_base/typematic,./_base/wai,./_base/window".split(","),function(g){return g._base})},"dijit/layout/BorderContainer":function(){define("dijit/layout/BorderContainer","dojo/_base/array,dojo/cookie,dojo/_base/declare,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/on,dojo/touch,../_WidgetBase,../_Widget,../_TemplatedMixin,./_LayoutWidget,./utils".split(","),
function(g,j,f,a,b,e,h,k,l,n,m,q,s,o,u,p,v){var w=f("dijit.layout._Splitter",[o,u],{live:!0,templateString:'<div class="dijitSplitter" data-dojo-attach-event="onkeypress:_onKeyPress,press:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse" tabIndex="0" role="separator"><div class="dijitSplitterThumb"></div></div>',constructor:function(){this._handlers=[]},postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);this._factor=/top|left/.test(this.region)?
1:-1;this._cookieName=this.container.id+"_"+this.region},buildRendering:function(){this.inherited(arguments);a.add(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));if(this.container.persist){var b=j(this._cookieName);b&&(this.child.domNode.style[this.horizontal?"height":"width"]=b)}},_computeMaxSize:function(){var a=this.horizontal?"h":"w",b=e.getMarginBox(this.child.domNode)[a],f=g.filter(this.container.getChildren(),function(a){return"center"==a.region})[0],a=e.getMarginBox(f.domNode)[a];
return Math.min(this.child.maxSize,b+a)},_startDrag:function(f){if(!this.cover)this.cover=b.place("<div class=dijitSplitterCover></div>",this.child.domNode,"after");a.add(this.cover,"dijitSplitterCoverActive");this.fake&&b.destroy(this.fake);if(!(this._resize=this.live))(this.fake=this.domNode.cloneNode(!0)).removeAttribute("id"),a.add(this.domNode,"dijitSplitterShadow"),b.place(this.fake,this.domNode,"after");a.add(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active");
this.fake&&a.remove(this.fake,"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");var g=this._factor,h=this.horizontal,j=h?"pageY":"pageX",l=f[j],s=this.domNode.style,o=e.getMarginBox(this.child.domNode)[h?"h":"w"],p=this._computeMaxSize(),u=this.child.minSize||20,h=this.region,v="top"==h||"bottom"==h?"top":"left",w=parseInt(s[v],10),z=this._resize,F=n.hitch(this.container,"_layoutChildren",this.child.id),h=this.ownerDocument;this._handlers=this._handlers.concat([m(h,q.move,this._drag=
function(a,b){var e=a[j]-l,f=g*e+o,h=Math.max(Math.min(f,p),u);(z||b)&&F(h);s[v]=e+w+g*(h-f)+"px"}),m(h,"dragstart",k.stop),m(this.ownerDocumentBody,"selectstart",k.stop),m(h,q.release,n.hitch(this,"_stopDrag"))]);k.stop(f)},_onMouse:function(b){b="mouseover"==b.type||"mouseenter"==b.type;a.toggle(this.domNode,"dijitSplitterHover",b);a.toggle(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",b)},_stopDrag:function(e){try{this.cover&&a.remove(this.cover,"dijitSplitterCoverActive"),this.fake&&
b.destroy(this.fake),a.remove(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow"),this._drag(e),this._drag(e,!0)}finally{this._cleanupHandlers(),delete this._drag}this.container.persist&&j(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365})},_cleanupHandlers:function(){for(var a;a=this._handlers.pop();)a.remove()},_onKeyPress:function(a){this._resize=!0;var b=this.horizontal,f=1;switch(a.charOrCode){case b?
l.UP_ARROW:l.LEFT_ARROW:f*=-1;case b?l.DOWN_ARROW:l.RIGHT_ARROW:break;default:return}b=e.getMarginSize(this.child.domNode)[b?"h":"w"]+this._factor*f;this.container._layoutChildren(this.child.id,Math.max(Math.min(b,this._computeMaxSize()),this.child.minSize));k.stop(a)},destroy:function(){this._cleanupHandlers();delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments)}}),z=f("dijit.layout._Gutter",[o,u],{templateString:'<div class="dijitGutter" role="presentation"></div>',
postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region)},buildRendering:function(){this.inherited(arguments);a.add(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"))}}),f=f("dijit.layout.BorderContainer",p,{design:"headline",gutters:!0,liveSplitters:!0,persist:!1,baseClass:"dijitBorderContainer",_splitterClass:w,postMixInProperties:function(){this.gutters||(this.baseClass+="NoGutter");this.inherited(arguments)},startup:function(){this._started||(g.forEach(this.getChildren(),
this._setupChild,this),this.inherited(arguments))},_setupChild:function(e){var f=e.region;if(f){this.inherited(arguments);a.add(e.domNode,this.baseClass+"Pane");var g=this.isLeftToRight();"leading"==f&&(f=g?"left":"right");"trailing"==f&&(f=g?"right":"left");if("center"!=f&&(e.splitter||this.gutters)&&!e._splitterWidget)g=e.splitter?this._splitterClass:z,n.isString(g)&&(g=n.getObject(g)),g=new g({id:e.id+"_splitter",container:this,child:e,region:f,live:this.liveSplitters}),g.isSplitter=!0,e._splitterWidget=
g,b.place(g.domNode,e.domNode,"after"),g.startup();e.region=f}},layout:function(){this._layoutChildren()},addChild:function(a,b){this.inherited(arguments);this._started&&this.layout()},removeChild:function(b){var e=b.region,f=b._splitterWidget;f&&(f.destroy(),delete b._splitterWidget);this.inherited(arguments);this._started&&this._layoutChildren();a.remove(b.domNode,this.baseClass+"Pane");h.set(b.domNode,{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"});h.set(b.domNode,"top"==
e||"bottom"==e?"width":"height","auto")},getChildren:function(){return g.filter(this.inherited(arguments),function(a){return!a.isSplitter})},getSplitter:function(a){return g.filter(this.getChildren(),function(b){return b.region==a})[0]._splitterWidget},resize:function(a,b){if(!this.cs||!this.pe){var f=this.domNode;this.cs=h.getComputedStyle(f);this.pe=e.getPadExtents(f,this.cs);this.pe.r=h.toPixelValue(f,this.cs.paddingRight);this.pe.b=h.toPixelValue(f,this.cs.paddingBottom);h.set(f,"padding","0px")}this.inherited(arguments)},
_layoutChildren:function(a,b){if(this._borderBox&&this._borderBox.h){var e=g.map(this.getChildren(),function(a,b){return{pane:a,weight:["center"==a.region?Infinity:0,a.layoutPriority,("sidebar"==this.design?1:-1)*(/top|bottom/.test(a.region)?1:-1),b]}},this);e.sort(function(a,b){for(var e=a.weight,f=b.weight,g=0;g<e.length;g++)if(e[g]!=f[g])return e[g]-f[g];return 0});var f=[];g.forEach(e,function(a){a=a.pane;f.push(a);a._splitterWidget&&f.push(a._splitterWidget)});v.layoutChildren(this.domNode,{l:this.pe.l,
t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h},f,a,b)}},destroyRecursive:function(){g.forEach(this.getChildren(),function(a){var b=a._splitterWidget;b&&b.destroy();delete a._splitterWidget});this.inherited(arguments)}});f.ChildWidgetProperties={region:"",layoutPriority:0,splitter:!1,minSize:0,maxSize:Infinity};n.extend(s,f.ChildWidgetProperties);f._Splitter=w;f._Gutter=z;return f})},"ws/address/AddressBookUtil":function(){define("ws/address/AddressBookUtil","dojo/_base/declare,dojo,dojo/_base/lang,ws/UserContext,ws/string,ws/reporting,ws/io".split(","),
function(g,j,f){f.setObject("ws.address.AddressBookUtil",{LoadSortDefaults:function(){},GetRequestParamsForPrint:function(a,b){var e,f=b.sortBy,g=b.sortDir,j=b.nameFormat,n=b.categoryFilter;"selected"!=a&&(null==f&&this.LoadSortDefaults(),null!=f&&(e+=ws.string.substituteParams("&sort={0}&sortDir={1}",f,g)));"category"==a&&n&&(e=ws.string.substituteParams("{0}&category={1}",e,encodeURIComponent(n)));return e+"&nameFormat="+j},OpenLocateOnMapWindow:function(a){var a=Config.BaseABPagesURL+"addresslist-locate.aspx?"+
a,a=a+("&user="+ws.io.getUserUid()),b=ws.string.substituteParams("status=yes,resizable=yes,menubar=yes,scrollbars=yes,left={0},top={1},width={2},height={3}","5","5","725","725");(a=ws.io.openWindow(a,"",b))&&a.focus();ws.reporting.report("Locate Map","Addresses")},OpenAddressPrintWindow:function(a){var a=Config.BaseABPagesURL+"AddressListPrint?"+a,a=a+("&user="+ws.io.getUserUid()),b=ws.string.substituteParams("status=yes,resizable=yes,menubar=yes,scrollbars=yes,left={0},top={1},width={2},height={3}",
"5","5","780","500");(a=ws.io.openWindow(a,"",b))&&a.focus();ws.reporting.report("Print Contacts","Addresses")},getNameInfoHTML:function(a,b,e,f){var g=[];"FirstLastNick"==b||"FirstLastEmailScreenNamePhone"==b?(a.firstName&&g.push(a.firstName),a.lastName&&g.push(a.lastName)):"LastFirstNick"==b||"LastFirstEmailScreenNamePhone"==b?(a.lastName&&a.firstName?g.push(a.lastName+","):a.lastName&&g.push(a.lastName),a.firstName&&g.push(a.firstName)):"LastNoCommaFirstNick"==b&&(a.lastName&&g.push(a.lastName),
a.firstName&&g.push(a.firstName));f||(a.nickName&&g.push("("+a.nickName+")"),!a.nickName&&!a.firstName&&!a.lastName&&(a.email1?g.push(a.email1):a.email2?g.push(a.email2):a.screenName?g.push(a.screenName):a.phone&&g.push(a.phone)));a=g.join(" ");e||(a=ws.string.escapeXml(a));return a},_mapAddressesToContacts:function(a,b){for(var e=j.map(a.getValue().split(/[;,]/),j.trim),f=0;f<e.length;f++)e[f]||e.splice(f--,1);for(var g=a.selectedContacts,l=[],f=e.length-1;0<=f;f--)for(var n=0;n<g.length;n++){if(g[n].screenName==
e[f]){l.push(g[n]);e.splice(f,1);break}if("d"==g[n].bType&&g[n].contactUids.length&&g[n].composeValue.match(e[f]))for(var m=g[n].contactUids.split(","),q=0;q<m.length;q++){var s=b.getRecordByUID(1*m[q]);if(s.screenName==e[f]){l.push(s);e.splice(f,1);break}}}return{addresses:e,contacts:l}}})})},"dojo/window":function(){define("./_base/lang,./sniff,./_base/window,./dom,./dom-geometry,./dom-style,./dom-construct".split(","),function(g,j,f,a,b,e,h){j.add("rtl-adjust-position-for-verticalScrollBar",function(a,
e){var g=f.body(e),k=h.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},g,"last"),j=h.create("div",{style:{overflow:"hidden",direction:"ltr"}},k,"last"),o=0!=b.position(j).x;k.removeChild(j);g.removeChild(k);return o});j.add("position-fixed-support",function(a,e){var g=f.body(e),k=h.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},g,"last"),j=h.create("span",
{style:{position:"fixed",left:"0",top:"0"}},k,"last"),o=b.position(j).x!=b.position(k).x;k.removeChild(j);g.removeChild(k);return o});var k={getBox:function(a){var a=a||f.doc,e="BackCompat"==a.compatMode?f.body(a):a.documentElement,g=b.docScroll(a);if(j("touch"))var h=k.get(a),a=h.innerWidth||e.clientWidth,e=h.innerHeight||e.clientHeight;else a=e.clientWidth,e=e.clientHeight;return{l:g.x,t:g.y,w:a,h:e}},get:function(a){if(j("ie")&&k!==document.parentWindow){a.parentWindow.execScript("document._parentWindow = window;",
"Javascript");var b=a._parentWindow;a._parentWindow=null;return b}return a.parentWindow||a.defaultView},scrollIntoView:function(g,h){try{var g=a.byId(g),k=g.ownerDocument||f.doc,q=f.body(k),s=k.documentElement||q.parentNode,o=j("ie"),u=j("webkit");if(!(g==q||g==s))if(!j("mozilla")&&!o&&!u&&!j("opera")&&"scrollIntoView"in g)g.scrollIntoView(!1);else{var p="BackCompat"==k.compatMode,v=Math.min(q.clientWidth||s.clientWidth,s.clientWidth||q.clientWidth),w=Math.min(q.clientHeight||s.clientHeight,s.clientHeight||
q.clientHeight),k=u||p?q:s,z=h||b.position(g),x=g.parentNode,u=function(a){return 6>=o||7==o&&p?!1:j("position-fixed-support")&&"fixed"==e.get(a,"position").toLowerCase()};if(!u(g))for(;x;){x==q&&(x=k);var A=b.position(x),B=u(x),C="rtl"==e.getComputedStyle(x).direction.toLowerCase();if(x==k){A.w=v;A.h=w;k==s&&o&&C&&(A.x+=k.offsetWidth-A.w);if(0>A.x||!o||9<=o)A.x=0;if(0>A.y||!o||9<=o)A.y=0}else{var I=b.getPadBorderExtents(x);A.w-=I.w;A.h-=I.h;A.x+=I.l;A.y+=I.t;var J=x.clientWidth,L=A.w-J;if(0<J&&0<
L)C&&j("rtl-adjust-position-for-verticalScrollBar")&&(A.x+=L),A.w=J;J=x.clientHeight;L=A.h-J;if(0<J&&0<L)A.h=J}if(B){if(0>A.y)A.h+=A.y,A.y=0;if(0>A.x)A.w+=A.x,A.x=0;if(A.y+A.h>w)A.h=w-A.y;if(A.x+A.w>v)A.w=v-A.x}var U=z.x-A.x,O=z.y-A.y,V=U+z.w-A.w,$=O+z.h-A.h,G,F;if(0<V*U&&(x.scrollLeft||x==k||x.scrollWidth>x.offsetHeight)){G=Math[0>U?"max":"min"](U,V);if(C&&(8==o&&!p||9<=o))G=-G;F=x.scrollLeft;x.scrollLeft+=G;G=x.scrollLeft-F;z.x-=G}if(0<$*O&&(x.scrollTop||x==k||x.scrollHeight>x.offsetHeight))G=Math.ceil(Math[0>
O?"max":"min"](O,$)),F=x.scrollTop,x.scrollTop+=G,G=x.scrollTop-F,z.y-=G;x=x!=k&&!B&&x.parentNode}}}catch(D){g.scrollIntoView(!1)}}};g.setObject("dojo.window",k);return k})},"dojo/NodeList-manipulate":function(){define(["./query","./_base/lang","./_base/array","./dom-construct","./NodeList-dom"],function(g,j,f,a){function b(a){for(var e="",a=a.childNodes,f=0,g;g=a[f];f++)8!=g.nodeType&&(e=1==g.nodeType?e+b(g):e+g.nodeValue);return e}function e(a){for(;a.childNodes[0]&&1==a.childNodes[0].nodeType;)a=
a.childNodes[0];return a}function h(b,e){"string"==typeof b?(b=a.toDom(b,e&&e.ownerDocument),11==b.nodeType&&(b=b.childNodes[0])):1==b.nodeType&&b.parentNode&&(b=b.cloneNode(!1));return b}var k=g.NodeList;j.extend(k,{_placeMultiple:function(b,e){for(var f="string"==typeof b||b.nodeType?g(b):b,h=[],k=0;k<f.length;k++)for(var j=f[k],u=this.length,p=u-1,v;v=this[p];p--)0<k&&(v=this._cloneNode(v),h.unshift(v)),p==u-1?a.place(v,j,e):j.parentNode.insertBefore(v,j),j=v;h.length&&(h.unshift(0),h.unshift(this.length-
1),Array.prototype.splice.apply(this,h));return this},innerHTML:function(a){return arguments.length?this.addContent(a,"only"):this[0].innerHTML},text:function(e){if(arguments.length){for(var f=0,g;g=this[f];f++)1==g.nodeType&&(a.empty(g),g.appendChild(g.ownerDocument.createTextNode(e)));return this}for(var h="",f=0;g=this[f];f++)h+=b(g);return h},val:function(a){if(arguments.length){for(var b=j.isArray(a),e=0,g;g=this[e];e++){var h=g.nodeName.toUpperCase(),k=g.type,u=b?a[e]:a;if("SELECT"==h){h=g.options;
for(k=0;k<h.length;k++){var p=h[k];p.selected=g.multiple?-1!=f.indexOf(a,p.value):p.value==u}}else"checkbox"==k||"radio"==k?g.checked=g.value==u:g.value=u}return this}if((g=this[0])&&1==g.nodeType){a=g.value||"";if("SELECT"==g.nodeName.toUpperCase()&&g.multiple){a=[];h=g.options;for(k=0;k<h.length;k++)p=h[k],p.selected&&a.push(p.value);a.length||(a=null)}return a}},append:function(a){return this.addContent(a,"last")},appendTo:function(a){return this._placeMultiple(a,"last")},prepend:function(a){return this.addContent(a,
"first")},prependTo:function(a){return this._placeMultiple(a,"first")},after:function(a){return this.addContent(a,"after")},insertAfter:function(a){return this._placeMultiple(a,"after")},before:function(a){return this.addContent(a,"before")},insertBefore:function(a){return this._placeMultiple(a,"before")},remove:k.prototype.orphan,wrap:function(a){if(this[0])for(var a=h(a,this[0]),b=0,f;f=this[b];b++){var g=this._cloneNode(a);f.parentNode&&f.parentNode.replaceChild(g,f);e(g).appendChild(f)}return this},
wrapAll:function(a){if(this[0]){a=h(a,this[0]);this[0].parentNode.replaceChild(a,this[0]);for(var a=e(a),b=0,f;f=this[b];b++)a.appendChild(f)}return this},wrapInner:function(a){if(this[0])for(var a=h(a,this[0]),b=0;b<this.length;b++){var e=this._cloneNode(a);this._wrap(j._toArray(this[b].childNodes),null,this._NodeListCtor).wrapAll(e)}return this},replaceWith:function(a){for(var a=this._normalize(a,this[0]),b=0,e;e=this[b];b++)this._place(a,e,"before",0<b),e.parentNode.removeChild(e);return this},
replaceAll:function(a){for(var a=g(a),b=this._normalize(this,this[0]),e=0,f;f=a[e];e++)this._place(b,f,"before",0<e),f.parentNode.removeChild(f);return this},clone:function(){for(var a=[],b=0;b<this.length;b++)a.push(this._cloneNode(this[b]));return this._wrap(a,this,this._NodeListCtor)}});if(!k.prototype.html)k.prototype.html=k.prototype.innerHTML;return k})},"dojox/grid/VirtualGrid":function(){define("dojox/grid/VirtualGrid","dojo/_base/declare,dojo,dijit/_Widget,dijit/_TemplatedMixin,dojox/grid/scroller/columns,dojox/grid/layout,dojox/grid/_grid/views,dojox/grid/rows,dojox/grid/_grid/selection,dojox/grid/focus,dojox/grid/edit,dojox/grid/_grid/lib,dojox/grid/scroller,dojox/grid/_grid/GridView,dojox/grid/_grid/GridRowView,dojox/grid/_grid/publicEvents".split(","),
function(g,j,f,a,b,e,h,k,l,n,m){g=g("dojox.grid.VirtualGrid",[f,a],{templateString:'<div class="dojoxGrid" hidefocus="hidefocus"><div class="dojoxGrid-master-header" dojoAttachPoint="headerNode"></div><div class="dojoxGrid-master-view" dojoAttachPoint="viewsNode"></div><span dojoAttachPoint="lastFocusNode" tabindex="0"></span></div>',classTag:"dojoxGrid",get:function(){},rowCount:5,keepRows:75,rowsPerPage:25,autoWidth:!1,autoHeight:!1,autoRender:!0,defaultHeight:"15em",structure:"",elasticView:-1,
singleClickEdit:!1,sortInfo:0,themeable:!0,buildRendering:function(){this.inherited(arguments);if(this.get==dojox.grid.VirtualGrid.prototype.get)this.get=null;if(!this.domNode.getAttribute("tabIndex"))this.domNode.tabIndex="0";this.createScroller();this.createLayout();this.createViews();this.createManagers();dojox.grid.initTextSizePoll();this.connect(dojox.grid,"textSizeChanged","textSizeChanged");dojox.grid.funnelEvents(this.domNode,this,"doKeyEvent",dojox.grid.keyEvents);this.connect(this,"onShow",
"renderOnIdle")},postCreate:function(){this.styleChanged=this._styleChanged;this.setStructure(this.structure)},destroy:function(){this.domNode.onReveal=null;this.domNode.onSizeChange=null;this.edit.destroy();this.views.destroyViews();this.inherited(arguments)},styleChanged:function(){this.setStyledClass(this.domNode,"")},_styleChanged:function(){this.styleChanged();this.update()},textSizeChanged:function(){setTimeout(j.hitch(this,"_textSizeChanged"),1)},_textSizeChanged:function(){this.domNode&&(this.views.forEach(function(a){a.content.update()}),
this.render())},sizeChange:function(){dojox.grid.jobs.job(this.id+"SizeChange",50,j.hitch(this,"update"))},renderOnIdle:function(){setTimeout(j.hitch(this,"render"),1)},createManagers:function(){this.rows=new k(this);this.focus=new n(this);this.selection=new l(this);this.edit=new m(this)},createScroller:function(){this.scroller=new b;this.scroller.renderRow=j.hitch(this,"renderRow");this.scroller.removeRow=j.hitch(this,"rowRemoved")},createLayout:function(){this.layout=new e(this)},createViews:function(){this.views=
new h(this);this.views.createView=j.hitch(this,"createView")},createView:function(a){a=new (eval(a))({grid:this});this.viewsNode.appendChild(a.domNode);this.headerNode.appendChild(a.headerNode);this.views.addView(a);return a},buildViews:function(){for(var a=0,b;b=this.layout.structure[a];a++)this.createView(b.type||"dojox.grid._grid.GridView").setStructure(b);this.scroller.setContentNodes(this.views.getContentNodes())},setStructure:function(a){this.views.destroyViews();if((this.structure=a)&&j.isString(this.structure))this.structure=
dojox.grid.getProp(this.structure);if(!this.structure)this.structure=window.layout;this.structure&&(this.layout.setStructure(this.structure),this._structureChanged())},_structureChanged:function(){this.buildViews();this.autoRender&&this.render()},resize:function(){if(this.domNode.parentNode){var a=j._getPadBorderExtents(this.domNode);if(this.autoHeight)this.domNode.style.height="auto",this.viewsNode.style.height="";else if(!(0<this.flex)&&this.domNode.clientHeight<=a.h)this.domNode.parentNode==j.body()?
this.domNode.style.height=this.defaultHeight:this.fitTo="parent";if("parent"==this.fitTo){var b=j._getContentBox(this.domNode.parentNode).h;j.marginBox(this.domNode,{h:Math.max(0,b)})}b=this.views.measureHeader();this.headerNode.style.height=b+"px";b=this.autoHeight?-1:Math.max(this.domNode.clientHeight-b,0)||0;this.autoWidth?this.domNode.style.width=this.views.arrange(1,0,0,b)+"px":this.views.arrange(1,0,this.domNode.clientWidth||this.domNode.offsetWidth-a.w,b);this.scroller.windowHeight=b;this.scroller.defaultRowHeight=
this.rows.getDefaultHeightPx()+1;this.postresize()}},resizeHeight:function(){var a=this.views.measureHeader();this.headerNode.style.height=a+"px";a=this.autoHeight?-1:Math.max(this.domNode.clientHeight-a,0)||0;this.views.onEach("setSize",[0,a]);this.views.onEach("resizeHeight");this.scroller.windowHeight=a},render:function(){if(this.domNode)this.update=this.defaultUpdate,this.scroller.init(this.rowCount,this.keepRows,this.rowsPerPage),this.prerender(),this.setScrollTop(0),this.postrender()},prerender:function(){this.views.render();
this.resize()},postrender:function(){this.postresize();this.focus.initFocusView();j.setSelectable(this.domNode,!1)},postresize:function(){if(this.autoHeight)this.viewsNode.style.height=this.views.measureContent()+"px"},renderRow:function(a,b){this.views.renderRow(a,b)},rowRemoved:function(a){this.views.rowRemoved(a)},invalidated:null,updating:!1,beginUpdate:function(){this.invalidated=[];this.updating=!0},endUpdate:function(){this.updating=!1;var a=this.invalidated;if(a.all)this.update();else if(void 0!=
a.rowCount)this.updateRowCount(a.rowCount);else for(r in a)this.updateRow(Number(r));this.invalidated=null},defaultUpdate:function(){this.updating?this.invalidated.all=!0:(this.prerender(),this.scroller.invalidateNodes(),this.setScrollTop(this.scrollTop),this.postrender())},update:function(){this.render()},updateRow:function(a){a=Number(a);this.updating?this.invalidated[a]=!0:(this.views.updateRow(a,this.rows.getHeight(a)),this.scroller.rowHeightChanged(a))},updateRowCount:function(a){this.updating?
this.invalidated.rowCount=a:(this.rowCount=a,this.scroller.updateRowCount(a),this.setScrollTop(this.scrollTop),this.resize())},updateRowStyles:function(a){this.views.updateRowStyles(a)},rowHeightChanged:function(a){this.views.renormalizeRow(a);this.scroller.rowHeightChanged(a)},fastScroll:!0,delayScroll:!1,scrollRedrawThreshold:j.isIE?100:50,scrollTo:function(a){if(this.fastScroll){var b=Math.abs(this.lastScrollTop-a);this.lastScrollTop=a;b>this.scrollRedrawThreshold||this.delayScroll?(this.delayScroll=
!0,this.scrollTop=a,this.views.setScrollTop(a),dojox.grid.jobs.job("dojoxGrid-scroll",200,j.hitch(this,"finishScrollJob"))):this.setScrollTop(a)}else this.setScrollTop(a)},finishScrollJob:function(){this.delayScroll=!1;this.setScrollTop(this.scrollTop)},setScrollTop:function(a){this.scrollTop=this.views.setScrollTop(a);this.scroller.scroll(this.scrollTop)},scrollToRow:function(a){this.setScrollTop(this.scroller.findScrollTop(a)+1)},styleRowNode:function(a,b){b&&this.rows.styleRowNode(a,b)},getCell:function(a){return this.layout.cells[a]},
setCellWidth:function(a,b){this.getCell(a).unitWidth=b},getCellName:function(a){return"Cell "+a.index},canSort:function(){},sort:function(){},getSortAsc:function(a){a=void 0==a?this.sortInfo:a;return Boolean(0<a)},getSortIndex:function(a){a=void 0==a?this.sortInfo:a;return Math.abs(a)-1},setSortIndex:function(a,b){var e=a+1;void 0!=b?e*=b?1:-1:this.getSortIndex()==a&&(e=-this.sortInfo);this.setSortInfo(e)},setSortInfo:function(a){if(this.canSort(a))this.sortInfo=a,this.sort(),this.update()},doKeyEvent:function(a){a.dispatch=
"do"+a.type;this.onKeyEvent(a)},_dispatch:function(a,b){if(a in this)return this[a](b)},dispatchKeyEvent:function(a){this._dispatch(a.dispatch,a)},dispatchContentEvent:function(a){this.edit.dispatchEvent(a)||a.sourceView.dispatchContentEvent(a)||this._dispatch(a.dispatch,a)},dispatchHeaderEvent:function(a){a.sourceView.dispatchHeaderEvent(a)||this._dispatch("doheader"+a.type,a)},dokeydown:function(a){this.onKeyDown(a)},doclick:function(a){if(a.cellNode)this.onCellClick(a);else this.onRowClick(a)},
dodblclick:function(a){if(a.cellNode)this.onCellDblClick(a);else this.onRowDblClick(a)},docontextmenu:function(a){if(a.cellNode)this.onCellContextMenu(a);else this.onRowContextMenu(a)},doheaderclick:function(a){if(a.cellNode)this.onHeaderCellClick(a);else this.onHeaderClick(a)},doheaderdblclick:function(a){if(a.cellNode)this.onHeaderCellDblClick(a);else this.onHeaderDblClick(a)},doheadercontextmenu:function(a){if(a.cellNode)this.onHeaderCellContextMenu(a);else this.onHeaderContextMenu(a)},doStartEdit:function(a,
b){this.onStartEdit(a,b)},doApplyCellEdit:function(a,b,e){this.onApplyCellEdit(a,b,e)},doCancelEdit:function(a){this.onCancelEdit(a)},doApplyEdit:function(a){this.onApplyEdit(a)},addRow:function(){this.updateRowCount(this.rowCount+1)},removeSelectedRows:function(){this.updateRowCount(Math.max(0,this.rowCount-this.selection.getSelected().length));this.selection.clear()}});j.mixin(dojox.grid.VirtualGrid.prototype,dojox.grid.publicEvents);return g})},"dijit/_FocusMixin":function(){define("dijit/_FocusMixin",
["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(g,j,f,a){a.extend(j,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return f("dijit._FocusMixin",null,{_focusManager:g})})},"dijit/_WidgetsInTemplateMixin":function(){define("dijit/_WidgetsInTemplateMixin",["dojo/_base/array","dojo/_base/declare","dojo/parser"],function(g,j,f){return j("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,
widgetsInTemplate:!0,_beforeFillContent:function(){if(this.widgetsInTemplate){var a=this._startupWidgets=f.parse(this.domNode,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,scope:"dojo"});if(!a.isFulfilled())throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");this._attachTemplateNodes(a,
function(a,e){return a[e]})}},startup:function(){g.forEach(this._startupWidgets,function(a){a&&!a._started&&a.startup&&a.startup()});this.inherited(arguments)}})})},"ws/sound":function(){define("ws/sound",["dojo","dojo/_base/lang"],function(g,j){j.setObject("ws.sound",{play:function(f,a){if(this.available()){if(null==a||"undefined"==typeof a)a=!0;g.isIE?this._playBgsound(f):this._playFlash(f,a)}},available:function(){if(g.isIE)return!0;var f=navigator.plugins["Shockwave Flash"];if(f)var a=f.description.replace(/([a-zA-Z]|\s)+/,
"").replace(/(\s+r|\s+b[0-9]+)/,".").split(".")[0];return f&&8<=a},_playBgsound:function(f){if(!this._bgsoundNode)this._bgsoundNode=document.createElement("bgsound"),g.body().appendChild(this._bgsoundNode);this._bgsoundNode.src=f},_playFlash:function(f,a){if(!this._flashMovies[f]){var b="wsSoundMovie"+this._flashCount++,e=ws.string.substituteParams('<embed src="{swf}" FlashVars="id={id}" allowScriptAccess="always" quality="high" bgcolor="#ffffff" width="0" height="0" name="{id}" align="middle" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />',
{id:b,swf:Config.BaseSameDomainURL+"resources/soundbridge.swf"}),h=document.createElement("div");document.body.appendChild(h);h.innerHTML=e;this._flashMovies[f]=document[b]}this._flashMovies[f].proxyMethods?setTimeout(g.hitch(this,function(){this._flashMovies[f].proxyMethods("loadSound",[f,a])}),g.isSafari?500:0):ws.lang.setTimeout(this,"_playFlash",500,f,a)},_flashCount:0,_flashMovies:{}});Sound={onLoad:function(){},onSoundComplete:function(){},onID3:function(){}}})},"dojo/Deferred":function(){define(["./has",
"./_base/lang","./errors/CancelError","./promise/Promise","./promise/instrumentation"],function(g,j,f,a,b){var e=Object.freeze||function(){},h=function(a,b,e,f,g){2===b&&m.instrumentRejected&&0===a.length&&m.instrumentRejected(e,!1,f,g);for(g=0;g<a.length;g++)k(a[g],b,e,f)},k=function(a,b,e,f){var g=a[b],h=a.deferred;if(g)try{var k=g(e);if(0===b)"undefined"!==typeof k&&n(h,b,k);else{if(k&&"function"===typeof k.then){a.cancel=k.cancel;k.then(l(h,1),l(h,2),l(h,0));return}n(h,1,k)}}catch(j){n(h,2,j)}else n(h,
b,e);2===b&&m.instrumentRejected&&m.instrumentRejected(e,!!g,f,h.promise)},l=function(a,b){return function(e){n(a,b,e)}},n=function(a,b,e){if(!a.isCanceled())switch(b){case 0:a.progress(e);break;case 1:a.resolve(e);break;case 2:a.reject(e)}},m=function(b){var g=this.promise=new a,j=this,l,n,v,w=!1,z=[];Error.captureStackTrace&&(Error.captureStackTrace(j,m),Error.captureStackTrace(g,m));this.isResolved=g.isResolved=function(){return 1===l};this.isRejected=g.isRejected=function(){return 2===l};this.isFulfilled=
g.isFulfilled=function(){return!!l};this.isCanceled=g.isCanceled=function(){return w};this.progress=function(a,b){if(l){if(!0===b)throw Error("This deferred has already been fulfilled.");return g}h(z,0,a,null,j);return g};this.resolve=function(a,b){if(l){if(!0===b)throw Error("This deferred has already been fulfilled.");return g}h(z,l=1,n=a,null,j);z=null;return g};var x=this.reject=function(a,b){if(l){if(!0===b)throw Error("This deferred has already been fulfilled.");return g}Error.captureStackTrace&&
Error.captureStackTrace(v={},x);h(z,l=2,n=a,v,j);z=null;return g};this.then=g.then=function(a,b,e){var f=[e,a,b];f.cancel=g.cancel;f.deferred=new m(function(a){return f.cancel&&f.cancel(a)});l&&!z?k(f,l,n,v):z.push(f);return f.deferred.promise};this.cancel=g.cancel=function(a,e){if(l){if(!0===e)throw Error("This deferred has already been fulfilled.");}else{if(b)var g=b(a),a="undefined"===typeof g?a:g;w=!0;if(l){if(2===l&&n===a)return a}else return"undefined"===typeof a&&(a=new f),x(a),a}};e(g)};m.prototype.toString=
function(){return"[object Deferred]"};b&&b(m);return m})},"ws/CachedListIndex":function(){define("ws/CachedListIndex",["dojo/_base/declare","dojo","dijit"],function(g,j){return g(null,{constructor:function(){this.baseSegment=[]},getRow:function(f){return f<this.baseSegment.length?this.baseSegment[f]:null},setData:function(f,a){if(0==a)this.baseSegment=f;else for(var b=a,e=0;e<f.length;b++,e++)this.baseSegment[b]=f[e]},getRowsForUids:function(f){var a=[],b={};j.forEach(this.baseSegment,function(a,
e){a&&(b[a]=e)});for(var e=0;e<f.length;e++){var g=b[f[e]];null!=g&&a.push(g)}return a},deleteUids:function(f){for(var a=0;a<f.length;a++){var b=j.indexOf(this.baseSegment,f[a]);-1!=b&&this.baseSegment.splice(b,1)}},deleteAllUids:function(){this.baseSegment=[]},isUidExist:function(f){return-1!=j.indexOf(this.baseSegment,f)?!0:!1}})})},"ws/widget/Button":function(){define("ws/widget/Button","dojo/_base/declare,dojo/text!ws/widget/Button.css,dojo,dijit,dijit/_Widget,dijit/_TemplatedMixin,ws/html".split(","),
function(g,j,f,a,b,e){return g([b,e],{showArrow:!1,showArrowBorder:!1,highlight:!1,className:"",iconClassName:"",tabIndex:"",title:"",tip:"",arrowTitle:"",minWidth:null,size:"",type:"",fixSize:!1,templateString:'<div class="unselectable btn" tabindex="${tabIndex}" data-dojo-attach-event="onmouseenter:_onMouseEnter,onmouseleave:_onMouseLeave,onclick:_onClick, onmouseover:_onMouseOver, onmousedown:_onMouseDown, onmouseup:_onMouseUp, onmouseout:_onMouseOut, onkeypress:onKeyPress">\t<div class="btnLabel" data-dojo-attach-point="containerNode"></div>\t<div class="btnArrow" data-dojo-attach-point="arrowNode" data-dojo-attach-event="onclick:onArrowClick" style="display:none"><img class="btnArrowImg" data-dojo-attach-point="arrowImg" src="'+
Config.SpacerImageURL+'"></div></div>',css:{templateString:j},startup:function(){if(!this._started){this._started=!0;this.title&&this.setTitle(this.title);this.label?this.setLabel(this.label):this.setLabel(this.getLabel());""!=this.size&&f.addClass(this.domNode,"btn"+this.size);""!=this.type&&this.setType(this.type);this.className&&f.addClass(this.domNode,this.className);if(this.showArrow)this.arrowNode.style.display="";this.showArrowBorder&&f.addClass(this.arrowNode,"btnSplitArrow");this.disabled&&
this.disable();this.highlight&&this.setHighlight(!0);this.minWidth&&this.resize();if(f.isIE&&(setTimeout(f.hitch(this,"fixButtons"),10),7==f.isIE&&this.fixSize))this.ie7fixSizeRetry=5,window.setTimeout(f.hitch(this,this.ie7fixSize),0);ws.html.addHoverClass(this.domNode,"btn"+this.size+this.type+"Hover",!0);this.clickClassName="btn"+this.size+this.type+"Click";this._origTip=this.tip;this._origTitle=this.title;this.subscribe("toolbarLayoutUpdate",f.hitch(this,function(){this.renderIconButtonContent();
this.tip=this._origTip;this.setTitle(this._origTitle);this.processTip2()}));this.renderIconButtonContent();this.processTip2()}},ie7fixSize:function(){var a=null;try{a=f.coords(this.containerNode)}catch(b){}null==a||0==a.w||0==a.h?this.ie7fixSizeRetry&&(this.ie7fixSizeRetry--,window.setTimeout(f.hitch(this,this.ie7fixSize),30)):(f.style(this.domNode,"width",a.w+"px"),f.style(this.domNode,"height",a.h+"px"))},fixButtons:function(){if(null!=this.domNode)this.domNode.style.zoom="",this.domNode.style.zoom=
1},resize:function(){var a=f._getMarginSize(this.domNode).w;if(this.minWidth&&a<this.minWidth)this.domNode.style.width=this.minWidth+"px"},sizeMyself:function(){if(this.domNode.parentNode){var a=document.createElement("span");this.domNode.parentNode.insertBefore(a,this.domNode)}f.body().appendChild(this.domNode);this.marginBox=f.marginBox(this.domNode);a&&(a.parentNode.insertBefore(this.domNode,a),f._destroyElement(a))},setTip:function(a){this._origTip=this.tip=a;this.processTip2()},processTip2:function(){if(this.tip)this.setTitle("");
else if(!this.tip&&""!=this.iconClassName&&!f.hasClass(this.domNode,"DropDownButton")&&!f.hasClass(this.domNode,"DropDownLink"))if(""!=this.title)this.tip=this.title;else{var a=f.query(".label",this.containerNode);if(1==a.length)this.tip=a[0].innerHTML;this.setTitle("")}},renderIconButtonContent:function(){if(""!=this.iconClassName){f.addClass(this.domNode,"wsIconButton");var a="";this.showArrow&&(a+="<div class='btnIconArrowCntr'>");a+="<div class='icon "+this.iconClassName+"'></div>";if(this.showArrow)a+=
"<img class='btnArrowImg' src='"+Config.SpacerImageURL+"'></div>",this.arrowNode.style.display="none";""!=this.label&&(a+="<div class='label'>"+this.label+"</div>");this.containerNode.innerHTML=a;f.hasClass(f.body(),"btnLabelsOn2")&&0==f.query(".label",this.containerNode).length&&f.query(".icon",this.containerNode).style({top:"7px"})}},getLabel:function(){return this.containerNode.innerHTML},setLabel:function(a){this.label=a;this.containerNode.innerHTML=a},IsEqualsLabel:function(a){return this.containerNode.innerHTML==
a},setType:function(a,b){""!=this.type&&f.removeClass(this.domNode,"btn"+this.size+this.type);""!=this.subType&&f.removeClass(this.domNode,"btn"+this.size+this.subType);this.type=a;this.subType=b;f.addClass(this.domNode,"btn"+this.size+a);this.subType&&f.addClass(this.domNode,"btn"+this.size+a+b);"Bare"==this.type?f.addClass(this.containerNode,"wsLink"):f.removeClass(this.containerNode,"wsLink")},setTitle:function(a){this._origTitle=this.title=a;this.domNode.title=a},enable:function(){this.disabled=
!1;f.removeClass(this.domNode,"btn"+this.size+"Disabled")},disable:function(){this.disabled=!0;f.addClass(this.domNode,"btn"+this.size+"Disabled")},setHighlight:function(a){this.highlight=a;f.toggleClass(this.domNode,"ButtonHighlight",a)},_onClick:function(a){this.tip&&ws.widget.hideInstatip(this.domNode);if(!this.disabled){this.onClick(a);try{this.domNode&&this.domNode.blur()}catch(b){}}},_onMouseDown:function(a){this.disabled||(this.clickClassName&&f.addClass(this.domNode,this.clickClassName),this.highlight||
f.addClass(this.domNode,"ButtonHighlight"),this.onMouseDown(a))},_onMouseUp:function(a){(!this.menu||this.menu&&!this.menu.isShowing())&&this.setHighlight(this.highlight);this.clickClassName&&f.removeClass(this.domNode,this.clickClassName);if(!this.disabled)this.onMouseUp(a)},_onMouseOut:function(a){(!this.menu||this.menu&&!this.menu.isShowing())&&this.setHighlight(this.highlight);this.clickClassName&&f.removeClass(this.domNode,this.clickClassName);if(!this.disabled)this.onMouseOut(a)},_onMouseOver:function(a){this.onMouseOver(a)},
_onMouseEnter:function(){if(this.tip&&(!this.menu||this.menu&&!this.menu.isShowing())){if(!this.tipDim)f.byId("instatip").innerHTML=this.tip,this.tipDim=f.marginBox(window.wsMasterTip);ws.widget.showInstatip(this.domNode,{label:this.tip,tipDimensions:this.tipDim})}},_onMouseLeave:function(){this.tip&&ws.widget.hideInstatip(this.domNode)},onClick:function(){},onMouseOver:function(){},onMouseDown:function(){},onMouseUp:function(){},onMouseOut:function(){},onArrowClick:function(){},onKeyPress:function(){}})})},
"ws/dom":function(){define("ws/dom",["dojo","dojo/_base/lang"],function(g,j){j.setObject("ws.dom",{forEachNode:function(f,a,b){for(var f=f.childNodes,e=0;e<f.length;e++){var g=f[e],k=!1;null!=a&&(k=a(g));k||(ws.dom.forEachNode(g,a,b),null!=b&&(e+=b(g)))}},findAncestorByClass:function(f,a){for(;f;){if(g.hasClass(f,a))return f;f=f.parentNode}return null}})})},"dojo/_base/connect":function(){define("./kernel,../on,../topic,../aspect,./event,../mouse,./sniff,./lang,../keys".split(","),function(g,j,f,
a,b,e,h,k){function l(b,f,h,l,m){l=k.hitch(h,l);if(!b||!b.addEventListener&&!b.attachEvent)return a.after(b||g.global,f,l,!0);"string"==typeof f&&"on"==f.substring(0,2)&&(f=f.substring(2));if(!b)b=g.global;if(!m)switch(f){case "keypress":f=o;break;case "mouseenter":f=e.enter;break;case "mouseleave":f=e.leave}return j(b,f,l,m)}function n(a){a.keyChar=a.charCode?String.fromCharCode(a.charCode):"";a.charOrCode=a.keyChar||a.keyCode}h.add("events-keypress-typed",function(){var a={charCode:0};try{a=document.createEvent("KeyboardEvent"),
(a.initKeyboardEvent||a.initKeyEvent).call(a,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(b){}return 0==a.charCode&&!h("opera")});var m={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},q=h("mac")?"metaKey":"ctrlKey",s=function(a,b){var e=k.mixin({},a,b);n(e);e.preventDefault=function(){a.preventDefault()};e.stopPropagation=function(){a.stopPropagation()};return e},o;o=h("events-keypress-typed")?function(a,b){var e=j(a,"keydown",function(a){var e=
a.keyCode,f=13!=e&&32!=e&&(27!=e||!h("ie"))&&(48>e||90<e)&&(96>e||111<e)&&(186>e||192<e)&&(219>e||222<e)&&229!=e;if(f||a.ctrlKey){f=f?0:e;if(a.ctrlKey){if(3==e||13==e)return b.call(a.currentTarget,a);f=95<f&&106>f?f-48:!a.shiftKey&&65<=f&&90>=f?f+32:m[f]||f}e=s(a,{type:"keypress",faux:!0,charCode:f});b.call(a.currentTarget,e);if(h("ie"))try{a.keyCode=e.keyCode}catch(g){}}}),f=j(a,"keypress",function(a){var e=a.charCode,a=s(a,{charCode:32<=e?e:0,faux:!0});return b.call(this,a)});return{remove:function(){e.remove();
f.remove()}}}:h("opera")?function(a,b){return j(a,"keypress",function(a){var e=a.which;3==e&&(e=99);e=32>e&&!a.shiftKey?0:e;a.ctrlKey&&!a.shiftKey&&65<=e&&90>=e&&(e+=32);return b.call(this,s(a,{charCode:e}))})}:function(a,b){return j(a,"keypress",function(a){n(a);return b.call(this,a)})};var u={_keypress:o,connect:function(a,b,e,f,g){var h=arguments,k=[],j=0;k.push("string"==typeof h[0]?null:h[j++],h[j++]);var m=h[j+1];k.push("string"==typeof m||"function"==typeof m?h[j++]:null,h[j++]);for(m=h.length;j<
m;j++)k.push(h[j]);return l.apply(this,k)},disconnect:function(a){a&&a.remove()},subscribe:function(a,b,e){return f.subscribe(a,k.hitch(b,e))},publish:function(a,b){return f.publish.apply(f,[a].concat(b))},connectPublisher:function(a,b,e){var f=function(){u.publish(a,arguments)};return e?u.connect(b,e,f):u.connect(b,f)},isCopyKey:function(a){return a[q]}};u.unsubscribe=u.disconnect;k.mixin(g,u);return u})},"dojo/request/watch":function(){define("./util,../errors/RequestTimeoutError,../errors/CancelError,../_base/array,../_base/window,../has!host-browser?dom-addeventlistener?:../on:".split(","),
function(g,j,f,a,b,e){function h(){for(var a=+new Date,b=0,e;b<n.length&&(e=n[b]);b++){var f=e.response,g=f.options;if(e.isCanceled&&e.isCanceled()||e.isValid&&!e.isValid(f))n.splice(b--,1),k._onAction&&k._onAction();else if(e.isReady&&e.isReady(f))n.splice(b--,1),e.handleResponse(f),k._onAction&&k._onAction();else if(e.startTime&&e.startTime+(g.timeout||0)<a)n.splice(b--,1),e.cancel(new j("Timeout exceeded",f)),k._onAction&&k._onAction()}k._onInFlight&&k._onInFlight(e);n.length||(clearInterval(l),
l=null)}function k(a){if(a.response.options.timeout)a.startTime=+new Date;a.isFulfilled()||(n.push(a),l||(l=setInterval(h,50)),a.response.options.sync&&h())}var l=null,n=[];k.cancelAll=function(){try{a.forEach(n,function(a){try{a.cancel(new f("All requests canceled."))}catch(b){}})}catch(b){}};b&&e&&b.doc.attachEvent&&e(b.global,"unload",function(){k.cancelAll()});return k})},"url:ws/widget/WSToolbar.css":"","dojo/dom-attr":function(){define("exports,./sniff,./_base/lang,./dom,./dom-style,./dom-prop".split(","),
function(g,j,f,a,b,e){function h(a,b){var e=a.getAttributeNode&&a.getAttributeNode(b);return e&&e.specified}var k={innerHTML:1,className:1,htmlFor:j("ie"),value:1},l={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};g.has=function(b,f){var g=f.toLowerCase();return k[e.names[g]||f]||h(a.byId(b),l[g]||f)};g.get=function(b,g){var b=a.byId(b),j=g.toLowerCase(),s=e.names[j]||g,o=b[s];if(k[s]&&"undefined"!=typeof o||"href"!=s&&("boolean"==typeof o||f.isFunction(o)))return o;j=l[j]||
g;return h(b,j)?b.getAttribute(j):null};g.set=function(h,j,q){h=a.byId(h);if(2==arguments.length){for(var s in j)g.set(h,s,j[s]);return h}s=j.toLowerCase();var o=e.names[s]||j,u=k[o];if("style"==o&&"string"!=typeof q)return b.set(h,q),h;if(u||"boolean"==typeof q||f.isFunction(q))return e.set(h,j,q);h.setAttribute(l[s]||j,q);return h};g.remove=function(b,e){a.byId(b).removeAttribute(l[e.toLowerCase()]||e)};g.getNodeProp=function(b,f){var b=a.byId(b),g=f.toLowerCase(),k=e.names[g]||f;if(k in b&&"href"!=
k)return b[k];g=l[g]||f;return h(b,g)?b.getAttribute(g):null}})},"url:ws/themes/widget/ThemeStyles.css":"body a, body .wsLink, body .wsLink:visited, body .wsSelect .option, body .buddyList .groupEdit,body .newTodayPage .editLink,body .newTodayPage .tempNotation{color: %{Gen_accent};}body .wsLink:hover, body .wsLink:focus{color: %{Gen_accent};}body .WSHat .searchArea input.SearchABTest17.gen_baseBC{border-color: %{Gen_base}!important;}body .footer_container .feedback .undoLink,body .feedbackBox .wsLink,body .feedbackBox a,body .feedbackBox a:visited,body .feedbackBox .wsLink:hover,body .feedbackBox .wsLink:focus{color: %{Gen_light};}body .WSHat .signOutLink a,body .WSHat .signOutLink a:visited,body .WSHat .adminLinks .link,body .WSHat .adminLinks .pipe,body .WSHat .adminLinks span a,body .WSHat .adminLinks span a:visited {color: %{Hdr_link};}body .WSHat .salutation {color: %{Hdr_grtingText};}body .fdbkBadge .fdbkBadgeIcon,body .fdbkPaneEntry ul li:hover .feedbackSprite,body .fdbkPaneEntry ul li.fdbkOptionHover .feedbackSprite,body .WSNavigation .navItemCurrent,body .WSNavigation .shNavItemCurrent,body .settings .pageList .pageItem.current,body .WSNavigation .hasUnseen .text .unseen,body .appFolders .unseen,body .navToolbar .mnUnseen{background-color: %{Gen_accent};}body .WSNavigation .shNavItemCurrent {background-color: %{Gen_base};}body .navToolbar .cpNavItem .icon,body .navToolbar .cpNavItem,body .todayPage .storyTitle,body .todayPage .story1 .storyDetail,body .newTodayPage .storyTitle,body .newTodayPage .story1 .storyDetail{background-color: %{Gen_base};}body .navToolbar .cpNavItem.navItemHover,body .navToolbar .cpNavItem.navItemHover .icon {background-color: %{Gen_dark};}.dj_ie7 body .navToolbar .navItemCurrent .mnUnseen,.dj_ie8 body .navToolbar .navItemCurrent .mnUnseen{background-color: %{Gen_accentDark};}body .peoplePicker .showHighlight .row-highlight .dojoxGrid-cell,body .editCalendar .screenNameRowHover,body .messageListView .dojoxGrid-header-sort-up,body .messageListView .dojoxGrid-header-sort-down,body .buddyList h2.groupItemHover,body .buddyList .buddy h3:hover,body .wsMenuItemHover,body .listView .dojoxGrid-row-over,body .filterRow:hover,body .filterRow:hover td,body .appPplNode .appPplItem:hover,body .appTodo .taskItem:hover,.test {background-color: %{Gen_light} !important;}body .displayMessage .wsItemHover,body .displayMessage .wsItem:hover {background-color: %{Gen_light} !important; color: #202020 !important;}body #eventApp .eventRow:hover {background-color: %{Gen_light};}body .taskPanel .taskCloseBtnCntr {background-color: %{Gen_light} !important;}.dj_ie8 body .WSUntimedView .bodyCellToday,.dj_ie8 body .WSGridView .bodyCellToday,.dj_ie8 body .peoplePicker .showHighlight .row-highlight .dojoxGrid-cell,.dj_ie8 body .editCalendar .screenNameRowHover,.dj_ie8 body .messageListView .dojoxGrid-header-sort-up,.dj_ie8 body .messageListView .dojoxGrid-header-sort-down,.dj_ie8 body .buddyList h2.groupItemHover,.dj_ie8 body .buddyList .buddy h3:hover,.dj_ie8 body .wsMenuItemHover,.dj_ie8 body .listView .dojoxGrid-row-over,.dj_ie8 .test {background-color: %{Gen_light} !important;}body .searchInfo, body .sendConfirmation .linkButton, body .searchInfo .DropDownButton .btnLabel{color: #fff;}body .dojoxGrid-row .searchTerm,body .displayMessage .searchTerm {background-color: %{Gen_searchResult};}body .appStack .currAppTitle,body .appTodo .appTitleAddTaskSel,body #eventApp .appTitleAddEvSel,body .appPpl .appTitleSearchSel,body .appAim .appTitleSearchSel,body .imWidget .imBlock .itsme,body .searchInfo{background-color: %{Gen_base};}body .appFolders .currFolderItem, body .appFolders .appFoldersNode .currFolderItem:hover {background-color: %{Gen_accent};}body .displayMessage .itemSelected{background-color:%{Gen_base};}.dj_ie7 body .WSNavigation .hasUnseen.navItemCurrent .text .unseen,.dj_ie8 body .WSNavigation .hasUnseen.navItemCurrent .text .unseen {background-color:%{Gen_accentDark};}body .btn, body .btnHover, body .btnDisabled, body .btnSmall, body .btnLarge {background-color: %{Gen_accent}; border: 1px solid %{Gen_accentDark};}body .btnHover, body .btnSmallHover, body .btnLargeHover {background-color: %{Gen_accent};}body .WSHat .searchButtonContainer .btnDisabled,body .WSHat .searchButtonContainer .btnSmall,body .WSHat .searchButtonContainer .btnLarge {background-color: %{Gen_search};}body .wsToolbarControls .btn, body .navCollapser {background-color: %{Gen_base}; border-left: 1px solid %{Gen_medium}; border-right: 1px solid %{Gen_dark};}body .wsToolbarControls .rightNode .btn {border-right: 1px solid %{Gen_dark}; border-left: 1px solid %{Gen_medium};}body .wsToolbarControls .rightNode .btnClick {border-left: 1px solid %{Gen_dark};}body .wsToolbar,body .displayMessage_slideShowToolbar {background-color: %{Gen_base};}body .wsToolbarControls .btn:hover, body .navCollapser:hover {background-color: %{Gen_dark};}body .wsToolbar, body .navCollapser {border-bottom: 1px solid %{Gen_dark}; border-top: 1px solid %{Gen_medium};}body .wsToolbarControls .btnClick,body .wsToolbarControls .ButtonHighlight{background-color: %{Gen_dark} !important; border-left: 1px solid %{Gen_dark};}body .WSNavigation .controlsPane ul li {background-color: %{Gen_base}}body .WSNavigation .controlsPane ul li.cpBtnHover,body .WSNavigation .controlsPane ul li.cpBtnClick ,body .WSNavigation .controlsPane ul li.cpBtnHover div.icon,body .WSNavigation .controlsPane ul li.cpBtnClick div.icon{background-color: %{Gen_dark};}body .WSNavigation .controlsPane ul li div.icon {background-color: %{Gen_base};}body .imPanel .AIMbtnSel{background-color: %{Gen_base} !important;}body .btn .btnSplitArrow {border-left: 1px solid %{Gen_accentDark};}body .btnClick .btnSplitArrow {border-left: 1px solid %{Gen_accentDark} !important;}body .WSNavigation .presence, body .WSNavigation .presence:hover {border:none; background: none repeat scroll 0 0 transparent;}body .WSHat {background-image:url(\"%{themeDir}/hat_bg1.png?v=%{themeVer}\");}body .WSHat .leftHat,body .WSHat .affinityLeftHat {background-repeat:no-repeat; background-image:url(\"%{themeDir}/hat_bg2.png?v=%{themeVer}\");}body .WSNavigation,body .SidePanel,body .settings .pageList {background-color: %{Gen_toneRGBA};}.dj_ie7 body .WSNavigation,.dj_ie8 body .WSNavigation,.dj_ie7 body .SidePanel,.dj_ie8 body .SidePanel,.dj_ie7 body .settings .pageList,.dj_ie8 body .settings .pageList{background-color: %{Gen_tone};}.dj_ie7 body .appFolders .currFolderItem .unseen,.dj_ie8 body .appFolders .currFolderItem .unseen {background-color:%{Gen_accentDark};}body .cp-refresh.cpBtnClick .icon,body .cp-compose.cpBtnClick .icon,body .cp-chat.cpBtnClick .icon,body .cp-sms.cpBtnClick .iconbody .btnLabelsOn2 .cp-refresh.cpBtnClick .icon,body .btnLabelsOn2 .cp-compose.cpBtnClick .icon,body .btnLabelsOn2 .cp-chat.cpBtnClick .icon,body .btnLabelsOn2 .cp-sms.cpBtnClick .icon{background-color:%{Gen_accentDark};}body .appsToolbar .apBtn:hover {background-color:%{Gen_dark};}body .appsToolbar .apBtn,body .appTitleBar,body .appTodo .appTitleAddTaskSel {background-color:%{Gen_base};}body .wsToolbarControls .btnDisabled .btnLabel {color:%{Gen_medium};}body .dijitSplitContainerSizerV,body .dijitSplitterShadow,body .dijitSplitContainerVirtualSizerH,body .dijitSplitContainerVirtualSizerV {background-color:%{Gen_base};}body .emptyFolderAdDiv {background: #ffffff; background: -moz-linear-gradient(-45deg, #ffffff 0%, %{Gen_medium} 100%); background: -webkit-gradient(linear, left top, right bottom, color-stop(0%,#ffffff), color-stop(100%,%{Gen_medium})); background: -webkit-linear-gradient(-45deg, #ffffff 0%,%{Gen_medium} 100%); background: -ms-linear-gradient(-45deg, #ffffff 0%,%{Gen_medium} 100%); background: linear-gradient(135deg, #ffffff 0%,%{Gen_medium} 100%); filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='%{Gen_medium}',GradientType=1 );}body .WSNavigation .wsToolbarBare,body .WSCNavigation .wsToolbarBare {background-color:transparent; border-bottom:none;}body .settings .pageList.wsToolbar.wsToolbarBare {background-color:transparent !important;}body .WSModalPane .wsToolbar,body .imWidget .wsToolbar {background-color:transparent;}body .sendConfirmation .wsToolbar {background-color:transparent;}body .wsToolbarBare {background-color: transparent;}body .picturePicker .dojoxGrid-row-over .dojoxGrid-cell {background-color:transparent;}body .dojoxGrid-row,body .dojoxGrid-row, td {outline: none;}body .dojoxGrid-scrollbox, body .dojoxGrid-row {background-color: Transparent;}body .btnSmallBare,body .btnBare,body .btnLargeBare {background-image: none; background: none; border: none; color: #666;}body .appsToolbar ul .appCurr:hover,body .appsToolbar ul .appCurr {border-bottom: none; background-color: #fff; background-image: none;}body div.btnSmallDisabled,body div.btnDisabled,body div.btnLargeDisabled,body div.btnDisabled.btnSmallHover,body div.btnDisabled.btnHover, body div.btnDisabled.btnLargeHover {cursor: default; background-color: #cdcdcb; border: 1px solid #9f9f9f;}body .wsToolbarControls div.btnSmallDisabled,body .wsToolbarControls div.btnDisabled,body .wsToolbarControls div.btnLargeDisabled,body .wsToolbarControls div.btnDisabled.btnSmallHover,body .wsToolbarControls div.btnDisabled.btnHover, body .wsToolbarControls div.btnDisabled.btnLargeHover {cursor: default; border-left: 1px solid %{Gen_medium}; border-right: 1px solid %{Gen_dark}; background-color: Transparent; background-image: none;}",
"dijit/registry":function(){define("dijit/registry",["dojo/_base/array","dojo/sniff","dojo/_base/unload","dojo/_base/window","./main"],function(g,j,f,a,b){var e={},h={},k={length:0,add:function(a){if(h[a.id])throw Error("Tried to register widget with id=="+a.id+" but that id is already registered");h[a.id]=a;this.length++},remove:function(a){h[a]&&(delete h[a],this.length--)},byId:function(a){return"string"==typeof a?h[a]:a},byNode:function(a){return h[a.getAttribute("widgetId")]},toArray:function(){var a=
[],b;for(b in h)a.push(h[b]);return a},getUniqueId:function(a){var f;do f=a+"_"+(a in e?++e[a]:e[a]=0);while(h[f]);return"dijit"==b._scopeName?f:b._scopeName+"_"+f},findWidgets:function(a,b){function e(a){for(a=a.firstChild;a;a=a.nextSibling)if(1==a.nodeType){var g=a.getAttribute("widgetId");g?(g=h[g])&&f.push(g):a!==b&&e(a)}}var f=[];e(a);return f},_destroyAll:function(){b._curFocus=null;b._prevFocus=null;b._activeStack=[];g.forEach(k.findWidgets(a.body()),function(a){a._destroyed||(a.destroyRecursive?
a.destroyRecursive():a.destroy&&a.destroy())})},getEnclosingWidget:function(a){for(;a;){var b=1==a.nodeType&&a.getAttribute("widgetId");if(b)return h[b];a=a.parentNode}return null},_hash:h};return b.registry=k})},"dojo/io-query":function(){define(["./_base/lang"],function(g){var j={};return{objectToQuery:function(f){var a=encodeURIComponent,b=[],e;for(e in f){var h=f[e];if(h!=j[e]){var k=a(e)+"=";if(g.isArray(h))for(var l=0,n=h.length;l<n;++l)b.push(k+a(h[l]));else b.push(k+a(h))}}return b.join("&")},
queryToObject:function(f){for(var a=decodeURIComponent,f=f.split("&"),b={},e,h,k=0,j=f.length;k<j;++k)if(h=f[k],h.length){var n=h.indexOf("=");0>n?(e=a(h),h=""):(e=a(h.slice(0,n)),h=a(h.slice(n+1)));"string"==typeof b[e]&&(b[e]=[b[e]]);g.isArray(b[e])?b[e].push(h):b[e]=h}return b}}})},"url:ws/calendar/CNavigation.css":"","dojo/io/script":function(){define("../_base/connect,../_base/kernel,../_base/lang,../sniff,../_base/window,../_base/xhr,../dom,../dom-construct,../request/script,../aspect".split(","),
function(g,j,f,a,b,e,h,k,l,n){j.deprecated("dojo/io/script","Use dojo/request/script.","2.0");var m={get:function(a){var b,f=this._makeScriptDeferred(a,function(){b&&b.cancel()}),g=f.ioArgs;e._ioAddQueryToUrl(g);e._ioNotifyStart(f);b=l.get(g.url,{timeout:a.timeout,jsonp:g.jsonp,checkString:a.checkString,ioArgs:g,frameDoc:a.frameDoc,canAttach:function(a){g.requestId=a.id;g.scriptId=a.scriptId;g.canDelete=a.canDelete;return m._canAttach(g)}},!0);n.around(b,"isValid",function(a){return function(b){m._validCheck(f);
return a.call(this,b)}});b.then(function(){f.resolve(f)}).otherwise(function(a){f.ioArgs.error=a;f.reject(a)});return f},attach:l._attach,remove:l._remove,_makeScriptDeferred:function(a,b){var f=e._ioSetArgs(a,b||this._deferredCancel,this._deferredOk,this._deferredError),g=f.ioArgs;g.id=j._scopeName+"IoScript"+this._counter++;g.canDelete=!1;g.jsonp=a.callbackParamName||a.jsonp;if(g.jsonp)g.query=g.query||"",0<g.query.length&&(g.query+="&"),g.query+=g.jsonp+"="+(a.frameDoc?"parent.":"")+j._scopeName+
".io.script.jsonp_"+g.id+"._jsonpCallback",g.frameDoc=a.frameDoc,g.canDelete=!0,f._jsonpCallback=this._jsonpCallback,this["jsonp_"+g.id]=f;f.addBoth(function(a){if(g.canDelete)a instanceof Error?m["jsonp_"+g.id]._jsonpCallback=function(){delete m["jsonp_"+g.id];if(g.requestId)j.global[l._callbacksProperty][g.requestId]()}:m._addDeadScript(g)});return f},_deferredCancel:function(a){a.canceled=!0},_deferredOk:function(a){a=a.ioArgs;return a.json||a.scriptLoaded||a},_deferredError:function(a){return a},
_deadScripts:[],_counter:1,_addDeadScript:function(a){m._deadScripts.push({id:a.id,frameDoc:a.frameDoc});a.frameDoc=null},_validCheck:function(){var a=m._deadScripts;if(a&&0<a.length){for(var b=0;b<a.length;b++)m.remove(a[b].id,a[b].frameDoc),delete m["jsonp_"+a[b].id],a[b].frameDoc=null;m._deadScripts=[]}return!0},_ioCheck:function(a){a=a.ioArgs;return a.json||a.scriptLoaded&&!a.args.checkString?!0:(a=a.args.checkString)&&eval("typeof("+a+") != 'undefined'")},_resHandle:function(a){m._ioCheck(a)?
a.callback(a):a.errback(Error("inconceivable dojo.io.script._resHandle error"))},_canAttach:function(){return!0},_jsonpCallback:function(a){this.ioArgs.json=a;if(this.ioArgs.requestId)j.global[l._callbacksProperty][this.ioArgs.requestId](a)}};f.setObject("dojo.io.script",m);return m})},"dojo/_base/loader":function(){define("./kernel,../has,require,module,./json,./lang,./array".split(","),function(g,j,f,a,b,e,h){var k=function(a){return a.replace(/\./g,"/")},l=/\/\/>>built/,n=[],m=[],q=function(a,
b,e){n.push(e);h.forEach(a.split(","),function(a){a=V(a,b.module);m.push(a);$(a)});s()},s=function(){var a,b;for(b in U){a=U[b];if(void 0===a.noReqPluginCheck)a.noReqPluginCheck=/loadInit\!/.test(b)||/require\!/.test(b)?1:0;if(!a.executed&&!a.noReqPluginCheck&&a.injected==A)return}M(function(){var a=n;n=[];h.forEach(a,function(a){a(1)})})},o=function(a,b,e){var f=/\(|\)/g,h=1;for(f.lastIndex=b;(b=f.exec(a))&&!(h=")"==b[0]?h-1:h+1,0==h););if(0!=h)throw"unmatched paren around character "+f.lastIndex+
" in: "+a;return[g.trim(a.substring(e,f.lastIndex))+";\n",f.lastIndex]},u=/(\/\*([\s\S]*?)\*\/|\/\/(.*)$)/mg,p=/(^|\s)dojo\.(loadInit|require|provide|requireLocalization|requireIf|requireAfterIf|platformRequire)\s*\(/mg,v=/(^|\s)(require|define)\s*\(/m,w=function(a,b){var e,f,g,h=[],k=[];e=[];for(b=b||a.replace(u,function(a){p.lastIndex=v.lastIndex=0;return p.test(a)||v.test(a)?"":a});e=p.exec(b);)f=p.lastIndex,g=f-e[0].length,f=o(b,f,g),"loadInit"==e[2]?h.push(f[0]):k.push(f[0]),p.lastIndex=f[1];
e=h.concat(k);return e.length||!v.test(b)?[a.replace(/(^|\s)dojo\.loadInit\s*\(/g,"\n0 && dojo.loadInit("),e.join(""),e]:0},z=f.initSyncLoader(q,s,function(a,b){var e,f,h=[],k=[];if(l.test(b)||!(e=w(b)))return 0;f=a.mid+"-*loadInit";for(var j in V("dojo",a).result.scopeMap)h.push(j),k.push('"'+j+'"');return"// xdomain rewrite of "+a.mid+"\ndefine('"+f+"',{\n\tnames:"+g.toJson(h)+",\n\tdef:function("+h.join(",")+"){"+e[1]+"}});\n\ndefine("+g.toJson(h.concat(["dojo/loadInit!"+f]))+", function("+h.join(",")+
"){\n"+e[0]+"});"}),x=z.sync,A=z.requested,B=z.arrived,C=z.nonmodule,I=z.executing,J=z.executed,L=z.syncExecStack,U=z.modules,O=z.execQ,V=z.getModule,$=z.injectModule,G=z.setArrived,F=z.signal,D=z.finishExec,H=z.execModule,N=z.getLegacyMode,M=z.guardCheckComplete,q=z.dojoRequirePlugin;g.provide=function(a){var b=L[0],g=e.mixin(V(k(a),f.module),{executed:I,result:e.getObject(a,!0)});G(g);if(b)(b.provides||(b.provides=[])).push(function(){g.result=e.getObject(a);delete g.provides;g.executed!==J&&D(g)});
return g.result};j.add("config-publishRequireResult",1,0,0);g.require=function(a,b){var g=function(a,b){var e=V(k(a),f.module);if(L.length&&L[0].finish)L[0].finish.push(a);else{if(e.executed)return e.result;b&&(e.result=C);var g=N();$(e);g=N();e.executed!==J&&e.injected===B&&z.guardCheckComplete(function(){H(e)});if(e.executed)return e.result;g==x?e.cjs?O.unshift(e):L.length&&(L[0].finish=[a]):O.push(e)}}(a,b);j("config-publishRequireResult")&&!e.exists(a)&&void 0!==g&&e.setObject(a,g);return g};
g.loadInit=function(a){a()};g.registerModulePath=function(a,b){var e={};e[a.replace(/\./g,"/")]=b;f({paths:e})};g.platformRequire=function(a){for(var a=(a.common||[]).concat(a[g._name]||a["default"]||[]),b;a.length;)e.isArray(b=a.shift())?g.require.apply(g,b):g.require(b)};g.requireIf=g.requireAfterIf=function(a,b,e){a&&g.require(b,e)};g.requireLocalization=function(a,b,e){f(["../i18n"],function(f){f.getLocalization(a,b,e)})};return{extractLegacyApiApplications:w,require:q,loadInit:function(b,e,f){e([b],
function(b){e(b.names,function(){for(var h="",j=[],l=0;l<arguments.length;l++)h+="var "+b.names[l]+"= arguments["+l+"]; ",j.push(arguments[l]);eval(h);var m=e.module,s=[],n,h={provide:function(a){a=k(a);a=V(a,m);a!==m&&G(a)},require:function(a,b){a=k(a);b&&(V(a,m).result=C);s.push(a)},requireLocalization:function(a,b,e){n||(n=["dojo/i18n"]);e=(e||g.locale).toLowerCase();a=k(a)+"/nls/"+(/root/i.test(e)?"":e+"/")+k(b);V(a,m).isXd&&n.push("dojo/i18n!"+a)},loadInit:function(a){a()}},l={},o;try{for(o in h)l[o]=
g[o],g[o]=h[o];b.def.apply(null,j)}catch(p){F("error",[{src:a.id,id:"failedDojoLoadInit"},p])}finally{for(o in h)g[o]=l[o]}n&&(s=s.concat(n));s.length?q(s.join(","),e,f):f()})})}}})},"ws/widget/WSSplitContainer":function(){define("ws/widget/WSSplitContainer","dojo/_base/declare,dojo,dojo/_base/event,dojo/_base/array,dijit/layout/SplitContainer,ws/widget/popup,ws/html".split(","),function(g,j,f,a,b){return g([b],{startup:function(){this.inherited(arguments);j.marginBox(this.virtualSizer,this.isHorizontal?
{w:this.sizerWidth,h:this.paneHeight}:{w:this.paneWidth,h:this.sizerWidth})},addSizerFunc:function(a){this.sizerFunc=a},addClickFunc:function(a){this.clickFunc=a},_checkSizes:function(){var b=0,f=0,g=this.getChildren();a.forEach(g,function(a){f+=a.sizeActual;b+=a.sizeMin});if(b<=f){var j=0,n=this._forceGrow;a.forEach(g,function(a){if(a.sizeActual<a.sizeMin&&(n||!n&&a.sizeActual>a.sizeMin/2))j+=a.sizeMin-a.sizeActual,a.sizeActual=a.sizeMin});0<j&&(g=this.isDraggingLeft?g.reverse():g,a.forEach(g,function(a){j=
this._growPane(j,a)},this))}else a.forEach(g,function(a){a.sizeActual=Math.round(f*(a.sizeMin/b))})},legaliseSplitPoint:function(a){a+=this.sizingSplitter.position;this.isDraggingLeft=!!(0<a);if(!this.activeSizing){var b=this.paneBefore.position+this.paneBefore.sizeMin;this.paneBefore.collapsable?a<b&&(a=a<b-this.paneBefore.sizeMin/2?b-this.paneBefore.sizeMin:b):a<b&&(a=b);b=this.paneAfter.position+(this.paneAfter.sizeActual-(this.sizerWidth+this.paneAfter.sizeMin));this.paneAfter.collapsable?a>b&&
(a=a>b+this.paneAfter.sizeMin/2?b+this.paneAfter.sizeMin:b):a>b&&(a=b)}this.sizerFunc&&(a=this.sizerFunc(this,a));a-=this.sizingSplitter.position;this._checkSizes();return a},isClick:function(){var a=this.lastTime-this.startTime;return 4>Math.abs(this.startPoint-this.lastPoint)&&1E3>a},endSizing:function(){if(this.isSizing){if(this.cover)this.cover.style.zIndex=-1;this.activeSizing||this._hideSizingLine();this._updateSize(this.legaliseSplitPoint(this.lastPoint-this.startPoint));this.isSizing=!1;this.persist&&
this._saveState(this);for(var a;a=this._ownconnects.pop();)a.remove();j.publish("SplitContainer/EndSizing");this.lastTime=+new Date;this.isClick()&&this.clickFunc&&this.clickFunc()}},beginSizing:function(a,b){ws.html.clearSelection();this.inherited(arguments);this.startTime=+new Date;j.publish("SplitContainer/BeginSizing")},changeSizing:function(a,b,g){if(this.isSizing){if(a&&b&&g)a.pageX=b,a.pageY=g;this.lastPoint=this.isHorizontal?a.pageX:a.pageY;b=this.legaliseSplitPoint(this.lastPoint-this.startPoint);
this.activeSizing?this._updateSize(b):this._moveSizingLine(b);f.stop(a)}},_onSizerMouseDown:function(a){ws.widget.popup.closeAllPopups();var b=a.target;if(j.hasClass(b,"thumb"))b=b.parentNode;if(b.id){for(var f=0;f<this.sizers.length&&!(this.sizers[f].id==b.id);f++);f<this.sizers.length&&this.beginSizing(a,f)}}})})},"ws/suite/InforOfferDialog":function(){define("ws/suite/InforOfferDialog","dojo/_base/declare,dojo/text!ws/suite/InforOfferDialog.html,dojo/text!ws/suite/InforOfferDialog.css,dojo,dijit,dijit/_Widget,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,ws/widget/WSModalPane,ws/reporting,ws/html".split(","),
function(g,j,f,a,b,e,h,k,l){return g([l,h,k],{templateString:j,css:{templateString:f},_earlyTemplatedStartup:!0,accessToken:null,offerName:null,startup:function(){this.inherited(arguments)},setContent:function(a){ws.reporting.reportDLAction("Mail-Lightbox-InforImpression");this.content.innerHTML=a;this.resize();this.show()},contentAction:function(a,b){ws.io.openWindow(a);ws.reporting.reportDLAction("Mail-Lightbox-InforClicked");this.reportDisposition(b);this._hideDlg()},reportDisposition:function(b){this.accessToken&&
(b=ws.string.substituteParams(Config.InforOfferDispositionURL,escape(this.offerName),escape(b),escape(this.accessToken)),a.io.script.get({callbackParamName:"_callback",timeout:15E3,url:b,load:a.hitch(this,function(){}),error:function(){}}))},hideDlg:function(){this.reportDisposition("Declined");ws.reporting.reportDLAction("Mail-Lightbox-InforCancelled");this._hideDlg()},_hideDlg:function(){this.hide()}})})},"dijit/_base/wai":function(){define("dijit/_base/wai",["dojo/dom-attr","dojo/_base/lang","../main",
"../hccss"],function(g,j,f){j.mixin(f,{hasWaiRole:function(a,b){var e=this.getWaiRole(a);return b?-1<e.indexOf(b):0<e.length},getWaiRole:function(a){return j.trim((g.get(a,"role")||"").replace("wairole:",""))},setWaiRole:function(a,b){g.set(a,"role",b)},removeWaiRole:function(a,b){var e=g.get(a,"role");e&&(b?(e=j.trim((" "+e+" ").replace(" "+b+" "," ")),g.set(a,"role",e)):a.removeAttribute("role"))},hasWaiState:function(a,b){return a.hasAttribute?a.hasAttribute("aria-"+b):!!a.getAttribute("aria-"+
b)},getWaiState:function(a,b){return a.getAttribute("aria-"+b)||""},setWaiState:function(a,b,e){a.setAttribute("aria-"+b,e)},removeWaiState:function(a,b){a.removeAttribute("aria-"+b)}});return f})},"dojox/grid/data/Field":function(){define("dojox/grid/data/Field",["dojo/_base/declare","dojo"],function(g){return g("dojox.grid.data.Field",null,{constructor:function(g){this.name=g;this.compare=dojox.grid.data.compare},na:dojox.grid.na})})},"ws/calendar/TodoApp":function(){define("ws/calendar/TodoApp",
"dojo/_base/declare,dojo/text!ws/calendar/TodoApp.html,dojo/text!ws/calendar/TodoApp.css,dojo,dijit,dijit/_Widget,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,ws/Spinner,ws/calendar/CalendarViewModel,ws/date".split(","),function(g,j,f,a,b,e,h,k,l,n){return g([e,h,k],{templateString:j,css:{templateString:f},_earlyTemplatedStartup:!0,sortBy:"DueTime",sortDir:"Decending",dateFormat:Config.Strings.Cal_TodoPanel_DueDateFormat,numHoursShowCompleted:24,showCompleted:!1,taskList:[],quickAddMode:!1,
_inited:!1,_started:!1,startup:function(){if(!this._started)this.model=new n({modelType:"todo"}),this.model.isAnonymous=this.isAnonymous,this.newTaskBox._onKeyUp=a.hitch(this,"addTaskKeyUp"),this._started=!0},onMouseOut:function(){a.addClass(this.appTitleAddTask,"appTitleAddTask");this.quickAddMode||a.removeClass(this.appTitleAddTask,"appTitleAddTaskSel")},onMouseOver:function(){a.addClass(this.appTitleAddTask,"appTitleAddTaskSel")},restoreApp:function(b){a.stopEvent(b);ws.WebSuite.Navigation.restoreApp()},
init:function(){if(!this._inited){if(!this.spinner)this.spinner=new l("AimSignIn",this.todoSpinner);this.spinner.spin();this.contentNode.hide();this.todoLoading.show();this.sessionStart=(new Date).getTime();this.connect(this.model,"requestUpdate","loadData");this.connect(this.model,"modelUpdated","modelUpdated");if(Settings.ToDo_LastClearedCompleted_Timestamp)this.lastClearedTime=(new Date(parseFloat(Settings.ToDo_LastClearedCompleted_Timestamp))).getTime();this.loadData();this._inited=!0}},loadData:function(){var a=
this.model.getDefaultTaskArgs();a.sortBy=this.sortBy;a.sortDir=this.sortDir;this.model.getData(a)},onResized:function(){this.inherited(arguments);var b=a._getMarginSize(this.domNode).w;150<b&&a.query(".newItemBox .wsInput",this.domNode).style({width:b-30+"px"})},createAppMenu:function(){var b=[{caption:Config.Strings.TodoAppNew,onClick:a.hitch(this,function(){this._quickAdd();ws.reporting.reportDLAction("Mail-LeftNav-ToDo-QuickAddNewToDo")})},{separator:!0},{caption:Config.Strings.TodoAppShowAll,
isCheckable:!0,checked:!1,onClick:a.hitch(this,function(){this.showCompleted=!this.showCompleted;this.modelUpdated();ws.reporting.reportDLAction("Mail-LeftNav-ToDo-QuickShowCompletedTasks")})}];this.appTitleMenu=ws.widget.createMenu(b)},updateAppMenu:function(){this.appTitleMenu.getChildren()[2].setChecked(this.showCompleted)},appMenu:function(b){a.stopEvent(b);this.appTitleMenu||this.createAppMenu();this.updateAppMenu();this.appTitleMenu.open(this.appTitleLink)},modelUpdated:function(){var b=this.model.index,
e=this.model.components,f=this.model.componentEnum,g=null,g=null,h=!1,k=!1;if(b){this.taskList=[];for(var j=0;j<b.length;j++)g=b[j],componentName=g[0],g=e[componentName],h=!1,(h=ws.lang.undefinedOrNull(g[f.completed])?!0:this.showCompleted?this.lastClearedTime?g[f.completed]>=this.sessionStart&&g[f.completed].getTime()>this.lastClearedTime:!0:g[f.completed]>=this.sessionStart)&&!k&&(k=!!g[f.completed]),48<g[f.summary].length&&ws.string.summary(g[f.summary],47),h&&this.taskList.push({calId:g[f.calid],
uid:g[f.id],name:g[f.summary],start:g[f.start],due:g[f.end],completed:g[f.completed],status:g[f.status],reminder:g[f.reminderEnabled]});this.orderTaskList();this.buildDom();this.todoLoading.hide();this.contentNode.show();a.style(a.body(),"position","absolute");setTimeout(function(){a.style(a.body(),"position","")},100)}},isToday:function(a){var b=new Date;return b.getYear()==a.getYear()&&b.getMonth()==a.getMonth()&&b.getDate()==a.getDate()},buildDom:function(){this.todoNode.innerHTML="";this.newItem=
null;if(0==this.taskList.length)this.todoNode.style.display="none",this.appTodoEmpty.domNode.style.display="block";else{this.todoNode.style.display="block";this.appTodoEmpty.domNode.style.display="none";for(var b=0;b<this.taskList.length;b++){var e=this.taskList[b],f=a.create("div",{className:"taskItem",_row:""+b},this.todoNode);if(-1!=a.indexOf(this.model.newComponents,e.uid))this.newItem=f;e.completed&&a.addClass(f,"taskComp");a.create("div",{className:"mainSprite taskCk "+(e.completed?"ckOn":"ckOff")},
f);a.create("div",{className:"taskName",innerHTML:e.name},f);if(e.due){var g=a.create("div",{className:"taskDateDiv"},f);e.reminder&&a.create("div",{className:"mainSprite taskRemind"},g);e=this.isToday(e.due)?Config.Strings.Panel_EventPanel_Today:ws.date.formatDateTime(e.due,this.dateFormat);a.create("span",{className:"taskDue",innerHTML:e},g)}a.create("div",{className:"mainSprite taskDelete"},f)}this.newItem&&setTimeout(a.hitch(this,function(){this.newItem.scrollIntoView();a.body().scrollTop=a.body().scrollLeft=
0}),100)}},orderTaskList:function(){this.taskList.sort(function(a,b){if(a.completed&&!b.completed)return 1;if(!a.completed&&b.completed||a.due&&!b.due)return-1;if(b.due&&!a.due)return 1;if(b.due&&a.due){if(a.due<b.due)return-1;if(b.due<a.due)return 1}return a.start<b.start?-1:b.start<a.start?1:0})},onClearCompleted:function(){ws.widget.Dialogs.ok(Config.Strings.ClearCompletedDialog,a.hitch(this,function(a){if(a)this.lastClearedTime=(new Date).getTime(),ws.settings.saveNow({ToDo_LastClearedCompleted_Timestamp:this.lastClearedTime.toString()}),
this.modelUpdated()}),!0)},onItemClick:function(b){a.stopEvent(b);var e=ws.widget.getEventTarget(b,"taskDelete","todoNode"),f=ws.widget.getEventTarget(b,"taskCk","todoNode");if(b=ws.widget.getEventTarget(b,"taskItem","todoNode")){var g=this.taskList[+a.attr(b,"_row")];e?(e=this.model.getDefaultTaskArgs(),e.sortBy=this._sortBy,e.sortDir=this._sortDir,e.calid=g.calId,e.id=g.uid,e.loadCallback=a.hitch(this,function(){a.publish("WSFeedbackStart",[Config.Strings.ToDoDeleted,!0])}),this.model.deleteEvents(e)):
f?this.markItem(b,g,!g.completed):require(["ws/calendar/TodoEditDialog"],a.hitch(this,function(a){if(!this.editDetailDlg)this.editDetailDlg=new a({model:this.model,destroyOnClose:!1}),this.editDetailDlg.startup();this.editDetailDlg.addNote();this.editDetailDlg.addReminder();this.editDetailDlg.openPopUp(g.uid)}))}},markItem:function(b,e,f){var g=ws.date.formatISO8601(new Date),h=this.model.componentEnum,k=this.model.components[e.uid];e.completed=f?g:null;e.status=f?2:5;var j=this.model.getComponentArgsForTask(k);
j.id=e.uid;j.calId=k[h.calid];j.completed=g;j.status=f?"Completed":"In_Progress";j.percentComplete=f?100:0;j.sortBy=this._sortBy;j.sortDir=this._sortDir;if(e.due)j.end=ws.date.formatISO8601(k[h.end]);if(e.reminder)j.reminderEnabled=!0,j.reminderLeadTime=k[h.reminderLeadTime],j.reminderDeliveryOptions=k[h.reminderDeliveryOptions];e=a.query(".taskCk",b)[0];f?(a.addClass(b,"taskComp"),a.removeClass(e,"ckOff"),a.addClass(e,"ckOn")):(a.removeClass(b,"taskComp"),a.removeClass(e,"ckOn"),a.addClass(e,"ckOff"));
j.loadCallback=a.hitch(this,function(){a.publish("WSFeedbackStart",[f?Config.Strings.ToDoMarkedCompleted:Config.Strings.ToDoMarkedIncomplete,!0])});this.model.saveComponent(j);this.orderTaskList();this.buildDom()},quickAdd:function(a){this._quickAdd(a);ws.reporting.reportDLAction("Mail-LeftNav-ToDo-QuickPlusNewToDo")},_quickAdd:function(b){b&&a.stopEvent(b);this.quickAddMode?(a.query(".newItemBox",this.domNode).style("display","none"),a.addClass(this.appTitleAddTask,"appTitleAddTask"),a.removeClass(this.appTitleAddTask,
"appTitleAddTaskSel")):(a.query(".newItemBox",this.domNode).style("display","block"),a.addClass(this.appTitleAddTask,"appTitleAddTaskSel"),a.removeClass(this.appTitleAddTask,"appTitleAddTask"),this.newTaskBox.textbox.focus());this.layoutWidget.layout();this.quickAddMode=!this.quickAddMode},updateTask:function(){this._updateTask(ws.string.sanitize(this.newTaskBox.getValue()));this.newTaskBox.setValue("")},_updateTask:function(b){if(b&&0!=b.length&&(b=a.trim(b),""!=b)){var e=this.model.getDefaultTaskArgs();
e.sortBy=this._sortBy;e.sortDir=this._sortDir;e.start=ws.date.formatISO8601(new Date);e.summary=b;e.end=null;e.reminderEnabled=!1;e.reminderLeadTime=0;e.start=ws.date.formatISO8601(new Date);e.loadCallback=a.hitch(this,function(){a.publish("WSFeedbackStart",[Config.Strings.ToDoCreated,!0])});this.model.saveComponent(e)}},addTaskKeyUp:function(b){b.keyCode==a.keys.ENTER?(this.updateTask(),this.newTaskBox.textbox.blur()):b.keyCode==a.keys.ESCAPE&&(this.newTaskBox.setValue(""),this.newTaskBox.textbox.blur())}})})},
"dojox/grid/headerBuilder":function(){define("dojox/grid/headerBuilder",["dojo/_base/declare","dojo","dojox/grid/Builder","dojox/grid/tableMap"],function(g,j,f){return g("dojox.grid.headerBuilder",f,{bogusClickTime:0,overResizeWidth:4,minColWidth:1,_table:'<table class="dojoxGrid-row-table" border="0" cellspacing="0" cellpadding="0"',update:function(){this.tableMap=new dojox.grid.tableMap(this.view.structure.rows)},generateHtml:function(a,b){var e=[this._table],f=this.view.structure.rows;this.view.viewWidth&&
e.push([' style="width:',this.view.viewWidth,';"'].join(""));e.push(">");dojox.grid.fire(this.view,"onBeforeRow",[-1,f]);for(var g=0,j;j=f[g];g++)if(!j.hidden){e.push(!j.invisible?"<tr>":'<tr class="dojoxGrid-invisible">');for(var n=0,m,q;m=j[n];n++)m.customClasses=[],m.customStyles=[],q=this.generateCellMarkup(m,m.headerStyles,m.headerClasses,!0),q[5]=void 0!=b?b:a(m),q[3]=m.customStyles.join(";"),q[1]=m.customClasses.join(" "),e.push(q.join(""));e.push("</tr>")}e.push("</table>");return e.join("")},
getCellX:function(a){var b=a.layerX;if(j.isMoz)var e=dojox.grid.ascendDom(a.target,dojox.grid.makeNotTagName("th")),b=b-(e&&e.offsetLeft||0);e=dojox.grid.ascendDom(a.target,function(){if(!e||e==a.cellNode)return!1;b+=0>e.offsetLeft?0:e.offsetLeft;return!0});return b},decorateEvent:function(a){this.baseDecorateEvent(a);a.rowIndex=-1;a.cellX=this.getCellX(a);return!0},prepareLeftResize:function(a){var b=dojox.grid.getTdIndex(a.cellNode);a.cellNode=b?a.cellNode.parentNode.cells[b-1]:null;a.cellIndex=
a.cellNode?this.getCellNodeIndex(a.cellNode):-1;return Boolean(a.cellNode)},canResize:function(a){if(!a.cellNode||1<a.cellNode.colSpan)return!1;a=this.grid.getCell(a.cellIndex);return!a.noresize&&!a.isFlex()},overLeftResizeArea:function(a){return 0<a.cellIndex&&a.cellX<this.overResizeWidth&&this.prepareLeftResize(a)},overRightResizeArea:function(a){return a.cellNode&&a.cellX>=a.cellNode.offsetWidth-this.overResizeWidth},domousemove:function(a){var b=this.overRightResizeArea(a)?"e-resize":this.overLeftResizeArea(a)?
"w-resize":"";b&&!this.canResize(a)&&(b="not-allowed");a.sourceView.headerNode.style.cursor=b||""},domousedown:function(a){dojox.grid.drag.dragging||(this.overRightResizeArea(a)||this.overLeftResizeArea(a))&&this.canResize(a)&&this.beginColumnResize(a)},doclick:function(a){if((new Date).getTime()<this.bogusClickTime)return j.stopEvent(a),!0},beginColumnResize:function(a){j.stopEvent(a);for(var b=[],e=this.tableMap.findOverlappingNodes(a.cellNode),f=0,g;g=e[f];f++)b.push({node:g,index:this.getCellNodeIndex(g),
width:g.offsetWidth});b={view:a.sourceView,node:a.cellNode,index:a.cellIndex,w:a.cellNode.clientWidth,spanners:b};dojox.grid.drag.start(a.cellNode,j.hitch(this,"doResizeColumn",b),j.hitch(this,"endResizeColumn",b),a)},doResizeColumn:function(a,b){var e=a.w+b.deltaX;if(e>=this.minColWidth){for(var f=0,g,j;g=a.spanners[f];f++)j=g.width+b.deltaX,g.node.style.width=j+"px",a.view.setColWidth(g.index,j);a.node.style.width=e+"px";a.view.setColWidth(a.index,e)}if(a.view.flexCells&&!a.view.testFlexCells())(e=
dojox.grid.findTable(a.node))&&(e.style.width="")},endResizeColumn:function(a){this.bogusClickTime=(new Date).getTime()+30;setTimeout(j.hitch(a.view,"update"),50)}})})},"ws/widget/DropDownBase":function(){define("ws/widget/DropDownBase",["dojo/_base/declare","dojo","dijit","ws/html"],function(g,j,f){return g(null,{menuId:"",menu:null,menuDefinition:null,menuClassName:"",anchorPosition:null,onClick:function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;this.toggleMenu()},onKeyPress:function(a){a.keyCode==
j.keys.ENTER&&setTimeout(j.hitch(this,"toggleMenu"),0)},toggleMenu:function(){ws.lang.ensureLayersLoaded(j.hitch(this,function(){this.menu||this.getMenu();this.menu.isShowing()?(this.setHighlight&&this.setHighlight(!1),this.menu.close()):(this.updateMenu(this.menu),this.menu.open(this.anchorPosition||this.domNode),this.setHighlight&&this.setHighlight(!0),this.tip&&ws.widget.hideInstatip(this.domNode))}))},getMenu:function(){this.menuId?this.menu=f.byId(this.menuId):this.createMenu()},createMenu:function(){this.menu=
ws.widget.createMenu(this.menuDefinition);""!=this.menuClassName&&j.addClass(this.menu.domNode,this.menuClassName);this.setHighlight&&this.menu.connect(this.menu,"onClose",j.hitch(this,function(){this.setHighlight(!1)}))},setMenuDefinition:function(a){if(this.menu)this.menu.isShowing()&&this.menu.close(),this.menu.destroyRecursive(),this.menu=null;this.menuDefinition=a},updateMenu:function(){}})})},"dojox/grid/Grid":function(){require({cache:{"url:dojox/grid/_grid/Grid.css":".dojoxGrid {position: relative; background-color: #EBEADB; -moz-outline-style: none; outline: none;}.dojoxGrid table {padding: 0;}.dojoxGrid td {-moz-outline: none;}.dojoxGrid-master-header {position: relative;}.dojoxGrid-master-view {position: relative;}.dojoxGrid-view {position: absolute; overflow: hidden;}.dojoxGrid-header {position: absolute; overflow: hidden;}.dojoxGrid-header {background-color: #E8E1CF;}.dojoxGrid-header table {text-align: center;}.dojoxGrid-header .dojoxGrid-cell-content {text-align: center;}.dojoxGrid-header .dojoxGrid-cell {border: 1px solid; border-color: #F6F4EB #ACA899 #ACA899 #F6F4EB; padding-bottom: 2px;}.dojoxGrid-header .dojoxGrid-cell-over {background-image: none; background-color: white; border-bottom-color: #FEBE47; margin-bottom: 0; padding-bottom: 0; border-bottom-width: 3px;}.dojoxGrid-sort-down {padding-left:16px; margin-left:4px;}.dojoxGrid-sort-up {padding-left:16px; margin-left:4px;}.dojoxGrid-scrollbox {position: relative; overflow: scroll; background-color: white; width: 100%;}.dojoxGrid-content {position: relative; overflow: hidden; -moz-outline-style: none; outline: none;}.dojoxGrid-rowbar {border: 1px solid; border-color: #F6F4EB #ACA899 #ACA899 #F6F4EB; border-top: none;}.dojoxGrid-rowbar-inner {border-top: 1px solid #F6F4EB;}.dojoxGrid-rowbar-over {background-image: none; background-color: white; border-top-color: #FEBE47; border-bottom-color: #FEBE47;}.dojoxGrid-rowbar-selected {background-color: #D9E8F9; background-image: none; background-position: center; background-repeat: no-repeat;}.dojoxGrid-row {position: relative; width: 9000em;}.dojoxGrid-row {border: 1px solid #E8E4D8; border-color: #F8F7F1; border-left: none; border-right: none; background-color: white; border-top: none;}.dojoxGrid-row-over {border-top-color: #FEBE47; border-bottom-color: #FEBE47;}.dojoxGrid-row-odd {background-color: #FFFDF3;}.dojoxGrid-row-selected {background-color: #D9E8F9;}.dojoxGrid-row-table {table-layout: fixed; width: 0;}.dojoxGrid-invisible {visibility: hidden;} .Xdojo-ie .dojoxGrid-invisible {display: none;} .dojoxGrid-invisible td, .dojoxGrid-header .dojoxGrid-invisible td {border-top-width: 0; border-bottom-width: 0; padding-top: 0; padding-bottom: 0; height: 0; overflow: hidden;}.dojoxGrid-cell {border: 1px solid; border-color: #EBEADB; border-right-color: #D5CDB5; padding: 3px 3px 3px 3px; text-align: left; overflow: hidden;}.dojoxGrid-cell-focus {border: 1px dashed blue;}.dojoxGrid-cell-over {border: 1px dotted #FEBE47;}.dojoxGrid-cell-focus.dojoxGrid-cell-over {border: 1px dotted green;}.dojoxGrid-cell-clip {width: 100%; overflow: hidden; white-space:nowrap; text-overflow: ellipsis;}.dojoxGrid-row-editing td {background-color: #F4FFF4;}.dojoxGrid-row-inserting td {background-color: #F4FFF4;}.dojoxGrid-row-inflight td {background-color: #F2F7B7;}.dojoxGrid-row-error td {background-color: #F8B8B6;}.dojoxGrid-input, .dojoxGrid-select, .dojoxGrid-textarea {margin: 0; padding: 0; border-style: none; width: 100%; font-size: 100%; font-family: inherit;}.dojoxGrid-hidden-focus {position: absolute; left: -1000px; top: -1000px; height: 0px; width: 0px;}"}});
define("dojox/grid/Grid",["dojo/_base/declare","dojox/grid/VirtualGrid","dojo/text!dojox/grid/_grid/Grid.css","dojo","dojox/grid/data/Dynamic"],function(g,j,f,a){return g("dojox.grid.Grid",[j],{css:{templateString:f},model:"dojox.grid.data.Dynamic",postCreate:function(){if(this.model){var b=this.model;a.isString(b)&&(b=a.getObject(b));this.model=a.isFunction(b)?new b:b;this._setModel(this.model)}this.inherited(arguments)},destroy:function(){this.setModel(null);this.inherited(arguments)},_structureChanged:function(){this.indexCellFields();
this.inherited(arguments)},_setModel:function(a){if(this.model=a)this.model.observer(this),this.model.measure(),this.indexCellFields()},setModel:function(a){this.model&&this.model.notObserver(this);this._setModel(a)},get:function(a){return this.grid?this.grid.model.getDatum(a,this.fieldIndex):this.model.getDatum(a,this.fieldIndex)},modelAllChange:function(){this.rowCount=this.model?this.model.getRowCount():0;this.updateRowCount(this.rowCount)},modelRowChange:function(a,e){this.updateRow(e)},modelDatumChange:function(a,
e){this.updateRow(e)},modelFieldsChange:function(){this.indexCellFields();this.render()},modelInsertion:function(){this.updateRowCount(this.model.getRowCount())},modelRemoval:function(){this.updateRowCount(this.model.getRowCount())},getCellName:function(a){var e=this.model.fields.values,f=a.fieldIndex;return 0<=f&&f<e.length&&e[f].name||this.inherited(arguments)},indexCellFields:function(){for(var b=this.layout.cells,e=0,f;b&&(f=b[e]);e++)if(a.isString(f.field))f.fieldIndex=this.model.fields.indexOf(f.field)},
refresh:function(){this.edit.cancel();this.model.measure()},canSort:function(a){return(a=this.getSortField(a))&&this.model.canSort(a)},getSortField:function(a){return(this.getCell(this.getSortIndex(a)).fieldIndex+1)*(0<this.sortInfo?1:-1)},sort:function(){this.edit.apply();this.model.sort(this.getSortField())},addRow:function(a,e){this.edit.apply();var f=e||-1;0>f&&(f=this.selection.getFirstSelected()||0);0>f&&(f=0);this.model.insert(a,f);this.model.beginModifyRow(f);for(var g=0,j;(j=this.getCell(g))&&
!j.editor;g++);j&&j.editor&&this.edit.setEditCell(j,f)},removeSelectedRows:function(){this.edit.apply();var a=this.selection.getSelected();a.length&&(this.model.remove(a),this.selection.clear())},canEdit:function(a,e){return this.model.canModify?this.model.canModify(e):!0},doStartEdit:function(a,e){var f=this.canEdit(a,e);f&&(this.model.beginModifyRow(e),this.onStartEdit(a,e));return f},doApplyCellEdit:function(a,e,f){this.model.setDatum(a,e,f);this.onApplyCellEdit(a,e,f)},doCancelEdit:function(a){this.model.cancelModifyRow(a);
this.onCancelEdit.apply(this,arguments)},doApplyEdit:function(a){this.model.endModifyRow(a);this.onApplyEdit(a)},styleRowState:function(a){if(this.model.getState){for(var e=this.model.getState(a.index),f="",g=0,j=["inflight","error","inserting"],n;n=j[g];g++)if(e[n]){f=" dojoxGrid-row-"+n;break}a.customClasses+=f}},onStyleRow:function(a){this.styleRowState(a);this.inherited(arguments)},junk:0})})},"dojo/_base/json":function(){define(["./kernel","../json"],function(g,j){g.fromJson=function(f){return eval("("+
f+")")};g._escapeString=j.stringify;g.toJsonIndentStr="\t";g.toJson=function(f,a){return j.stringify(f,function(a,e){if(e){var f=e.__json__||e.json;if("function"==typeof f)return f.call(e)}return e},a&&g.toJsonIndentStr)};return g})},"ws/suite/SidePanel":function(){define("ws/suite/SidePanel","dojo/_base/declare,dojo/text!ws/suite/SidePanel.html,dojo/text!ws/suite/SidePanel.css,dojo,dijit,dojo/window,dijit/_Widget,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,ws/widget/Advertisement,ws/widget/ContainerPane,dijit/_Container,ws/widget/Pane".split(","),
function(g,j,f,a,b,e,h,k,l,n){return g([h,k,l],{templateString:j,css:{templateString:f},adWidget:null,stationeryWidget:null,hasAdConfig:!0,scrollMods:{},isCompactWidth:!1,checkScreenResolutionTimer:null,initialScreenResolutionWidth:-1,todayPageShowing:!1,widthClasses:["spSmall","spSmall","spMedium","spLarge","spDoubleWide"],startup:function(){this.copyrightDIV.domNode.innerHTML=ws.string.substituteParams(Config.Strings.Copyright,(new Date).getFullYear());this.adWidget=new n({adtype:"sidepanel",checkForHiddenB4Rotate:!0});
this.adWidget.startup();if(this.adWidget.adConfig)this.adWidget.layoutAlign=this.adWidget.adConfig.location,this.towerAd.addChild(this.adWidget),this.panelStack.selectChild(this.towerAd);this.subscribe("ws_view-selectChild","handleMainStackSelect");this.connect(ws.WebSuite.theMailModel,"modelUpdated","resetAdScroll");this.lastScrollTime=(new Date).getTime()},updateWidth:function(){var f=!1,g=ws.WebSuite.getCurrentViewId();this.hasAdConfig=this.adWidget.adConfig&&1<ws.WebSuite.widthMode?!0:!1;1==ws.WebSuite.widthMode&&
this.hide();var h=ws.WebSuite.widthMode,k=ws.WebSuite.widthMode;if(this.hasAdConfig&&this.adWidget.adConfig&&Config.AdInfo.sidepanelDouble_large&&Settings.UserHash>=Config.DoubleWideAdThresholdLow&&Settings.UserHash<=Config.DoubleWideAdThresholdHigh){var j="composeMessage"==g;e.getBox().w>=Config.DoubleWideAdPixelExtent&&(h=5);this.lastWidthMode==h&&5==h&&(k=h);if(j)k=ws.WebSuite.widthMode;var l=a.hitch(this,function(){"sidepanel"!=this.adWidget.adtype&&(this.adWidget.resetAdConfig(),this.adWidget.setAdConfig(!1,
"sidepanel",!1,!0))});if(this.lastViewId!=g&&j&&Config.AdInfo.sidepanelCompose_large&&"sidepanelCompose"!=this.adWidget.adtype)this.adWidget.resetAdConfig(),this.adWidget.setAdConfig(!1,"sidepanelCompose",!1,!0),this.adWidget.adConfig||l();else if((this.lastWidthMode!=h||this.lastViewId!=g)&&!j)5==h?(k=5,"sidepanelDouble"!=this.adWidget.adtype&&(this.adWidget.resetAdConfig(),this.adWidget.setAdConfig(!1,"sidepanelDouble",!1,!0),this.adWidget.adConfig||(k=4,l()))):l()}this.hasAdConfig&&this.isClosed()&&
(j="messageList"==g&&b.byId("messageList").isShowingEmptyFolderAd,"composeMessage"==g?b.byId("composeMessage").isSendConfirmationOnShow()||this.show():"todayPage"!=g&&!j&&this.show(!1,"messageList"==g?1E3:null));this.lastViewId!=g&&(f=!0);this.domNode.className="SidePanel navTile24 "+this.widthClasses[k-1];this.lastWidthMode=h;this.lastViewId=g;return f},setupAdScroll:function(b,e){if(e&&this.scrollMods[e]){var f=this.scrollMods[e];a.disconnect(f.a);a.disconnect(f.b)}f={};f.a=a.connect(b,"onscroll",
null,this.handleScroll);f.b=a.connect(b,a.isFF?"DOMMouseScroll":"onmousewheel",null,this.handleWheel);e&&(this.scrollMods[e]=f)},handleScroll:function(b){var b=b.currentTarget?b.currentTarget:this,e=ws.WebSuite.SidePanel;a.hitch(e,e.isSelectedPanel)(e.towerAd)&&((new Date).getTime(),(new a.Animation({node:e.towerAd.domNode,duration:200,properties:{scrollTop:{start:e.towerAd.domNode.scrollTop,end:b.scrollTop}},curve:[e.towerAd.domNode.scrollTop,b.scrollTop],onAnimate:function(a){this.node.scrollTop=
a}})).play());ws.WebSuite.SidePanel.lastScrollTime=(new Date).getTime()},handleWheel:function(b,e,f){if(!(200>(new Date).getTime()-ws.WebSuite.SidePanel.lastScrollTime)){if(!b)b=window.event;e=b.currentTarget?b.currentTarget:this;f&&(e=f);f=ws.WebSuite.SidePanel;a.hitch(f,f.isSelectedPanel)(f.towerAd)&&0==e.scrollTop&&(a.isFF?b.axis==b.VERTICAL_AXIS&&(f.towerAd.domNode.scrollTop+=20*(b.detail/3)):f.towerAd.domNode.scrollTop+=-20*(b.wheelDelta/120))}},resetAdScroll:function(){ws.WebSuite.SidePanel.towerAd.domNode.scrollTop=
0},handleMainStackSelect:function(){var a=ws.WebSuite.getCurrentViewId();this.hasAdConfig?"todayPage"==a?this.hide():"messageList"==a&&b.byId("messageList").isShowingEmptyFolderAd?this.hide():"composeMessage"==a&&b.byId("composeMessage").isSendConfirmationOnShow()?this.hide():(this.show(!1,"messageList"==a?1E3:null),this.panelStack.selectChild(this.towerAd),this.adWidget&&this.adWidget.block(!1),this.updateWidth()&&ws.WebSuite.resize()):this.hide();this.resetAdScroll()},showStationery:function(b){require(["ws/mail/Stationery"],
a.hitch(this,function(a){var e=!1;if(!this.stationeryWidget)this.stationeryWidget=new a,this.stationeryWidget.startup(),this.stationery.addChild(this.stationeryWidget),e=!0;if(e||b||!this.isSelectedPanel(this.stationery))return this.panelStack.selectChild(this.stationery),this.adWidget&&this.adWidget.block(!0),this.updateWidth(!0),this.stationeryWidget.resize(),this.show(!0),ws.reporting.reportDLAction("Mail-Compose-StationeryOpen"),!0;this.handleMainStackSelect();return!1}))},resetStationery:function(){this.stationeryWidget&&
this.stationeryWidget.reset()},show:function(b,e){if(!(!this.hasAdConfig&&!b||""==this.domNode.style.display)){this.inherited(arguments);this.domNode.style.display="";if(this.adWidget){var f=e||100;this.pendingSidePanelAdShow&&clearTimeout(this.pendingSidePanelAdShow);this.pendingSidePanelAdShow=setTimeout(a.hitch(this,function(){this.adWidget.block(!1)}),f)}ws.WebSuite.resize()}},hide:function(){this.inherited(arguments);var a="none"==this.domNode.style.display;this.domNode.style.display="none";
this.panelStack.selectChild(this.towerAd);if(this.adWidget)this.pendingSidePanelAdShow&&clearTimeout(this.pendingSidePanelAdShow),this.pendingSidePanelAdShow=null,this.adWidget.block(!0);ws.WebSuite.resize(a)},resize:function(){this.inherited(arguments);this.updateWidth();if(this.isSelectedPanel(this.stationery))this.stationeryWidget.resize();else if(this.isSelectedPanel(this.towerAd)){var b=a.marginBox(this.domNode).h;a.style(this.towerAd.domNode,"height",b+"px")}},isSelectedPanel:function(a){return!this.isClosed()&&
this.panelStack.selectedChildWidget==a?!0:!1},isClosed:function(){return"none"==this.domNode.style.display}})})},"ws/widget/popup":function(){define("ws/widget/popup","dojo,dijit,dojo/window,dojo/_base/lang,dijit/BackgroundIframe,dijit/_base/place,ws/html".split(","),function(g,j,f,a,b,e){a.setObject("ws.widget.popup",function(a){var k=null;if(g.isSafari&&a.around)for(var j=a.around;j.parentNode;)if(j=j.parentNode,g.hasClass(j,"dojoxGrid-scrollbox")){k=j;break}j=a.orient||{BL:"TL",TL:"BL"};k&&(j=
a.orient||{BL:"TL"});var n=a.popup,m=j,q=a.manual,s=a.padding||[0,0],o=a.around,j=g.doc.createElement("div");j.id="wsPopup"+Math.round(1E4*Math.random());j.className="dijitPopup";j.style.zIndex=(a.preferZ?a.preferZ:ws.widget.popup.beginZIndex)+ws.widget.popup.stack.length;j.style.left="-999px";if(a.parent)j.dijitPopupParent=a.parent.id;g.body().appendChild(j);n.domNode.style.display="";j.appendChild(n.domNode);var u=new b(j),p=y=0,v=g._getMarginSize(j);!isNaN(a.x)&&!isNaN(a.y)?(p=a.x+s[0],y=a.y+s[1]):
(m=o?e.placeOnScreenAroundElement(j,o,m,null):e.placeOnScreen(j,a,"R"==m?["TR","BR","TL","BL"]:["TL","BL","TR","BR"]),p=m.x+s[0]*("L"==m.corner.charAt(1)?1:-1),y=m.y+s[1]*("T"==m.corner.charAt(0)?1:-1),k&&(y=Math.max(0,y-k.scrollTop)));k=f.getBox();p+v.w>k.w&&(p=Math.max(0,k.w-v.w));y+v.h>k.h&&(y=Math.max(0,k.h-v.h));0>p&&(p=0);0>y&&(y=0);j.style.top=y+"px";j.style.left=p+"px";n.popupNode=j;k=g.connect(g.isIE||g.isWebKit?g.body():g.doc,"onkeypress",function(a){a.keyCode==g.keys.ESCAPE&&!q&&!ws.WebSuite.isModalOpen&&
ws.widget.popup.close(n)});ws.widget.popup.stack.push({wrapper:j,iframe:u,widget:n,parent:a.parent,handler:k,manual:a.manual});if(n.onOpen)n.onOpen()});g.mixin(ws.widget.popup,{beginZIndex:2E3,stack:[],isInputType:function(a){return a&&a.tagName&&(a=a.tagName.toLowerCase(),"input"==a||"textarea"==a)?!0:!1},isFocusInInputInDialog:function(a){if(a&&a.tagName&&this.isInputType(a))for(;a&&!("body"==a.tagName.toLowerCase());){if(g.hasClass(a,"dijitPopup"))return!0;a=a.parentNode}return!1},close:function(a){for(;g.some(this.stack,
function(b){return b.widget==a});){if(g.isIE){var b=document.activeElement;b&&(this.isFocusInInputInDialog(b)||!this.isInputType(b))&&window.focus()}var b=this.stack.pop(),e=b.wrapper,f=b.iframe,j=b.widget;g.disconnect(b.handler);j.domNode.style.display="none";g.body().appendChild(j.domNode);f.destroy();g.destroy(e);if(j.onClose)j.onClose()}},setProp:function(a,b,e){for(var f=0;f<this.stack.length;f++)this.stack[f].widget==a&&(this.stack[f].widget[b]=e)},isPopupOpen:function(a){for(var b=0;b<this.stack.length;b++)if(this.stack[b].widget==
a)return!0;return!1},onDocumentMouseDown:function(a){if(!this._ignoringClicks)for(var b=this.stack.length-1;0<=b;b--)if(!(b+1>this.stack.length)){if(ws.html.overElement(this.stack[b].wrapper,a))break;this.stack[b]&&!this.stack[b].manual&&this.close(this.stack[b].widget)}},onDocumentKeyPress:function(a){this.stack[0]&&this.stack[0].widget.processKey&&this.stack[0].widget.processKey(a)},registerWin:function(a){if(a){var b=g.isIE?a.document.body:a.document;if(b)a.popupHandles&&this.unregisterWin(a),
a.popupHandles=[g.connect(b,"onmousedown",this,"onDocumentMouseDown"),g.connect(b,"onkeypress",this,"onDocumentKeyPress")];this.windows.push(a)}},unregisterWin:function(a){if(a){if(a.popupHandles){for(var b=0;b<a.popupHandles.length;b++)if(a.popupHandles[b])try{g.disconnect(a.popupHandles[b])}catch(e){}a.popupHandles=null}for(var f=[],b=0;b<this.windows.length;b++)try{this.windows[b]!=a&&f.push(this.windows[b])}catch(j){}this.windows=f}},windows:[],ignoreClicks:function(a){this._ignoringClicks=a},
isAnyPopupOpen:function(){return 0<this.stack.length},closeAllPopups:function(){for(var a=this.stack.length-1;0<=a;a--)this.stack[a].manual||this.close(this.stack[a].widget)}});g.addOnLoad(g.hitch(ws.widget.popup,"registerWin",window))})},"ws/widget/Pane":function(){define("ws/widget/Pane",["dojo/_base/declare","dijit/_Widget"],function(g,j){return g(j,{})})},"dojox/grid/_grid/GridRowView":function(){define("dojox/grid/_grid/GridRowView",["dojo/_base/declare","dojo","dojox/grid/_grid/GridView"],function(g,
j,f){return g("dojox.grid._grid.GridRowView",[f],{defaultWidth:"3em",noscroll:!0,padBorderWidth:2,buildRendering:function(){this.inherited("buildRendering",arguments);this.scrollboxNode.style.overflow="hidden";this.headerNode.style.visibility="hidden"},getWidth:function(){return this.viewWidth||this.defaultWidth},buildRowContent:function(a,b){b.innerHTML='<table style="width:'+(this.contentNode.offsetWidth-this.padBorderWidth)+'px;" ><tr><td class="dojoxGrid-rowbar-inner"></td></tr></table>'},renderHeader:function(){},
resize:function(){this.resizeHeight()},doStyleRowNode:function(a,b){var e=["dojoxGrid-rowbar"];this.grid.rows.isOver(a)&&e.push("dojoxGrid-rowbar-over");this.grid.selection.isSelected(a)&&e.push("dojoxGrid-rowbar-selected");b.className=e.join(" ")},domouseover:function(a){this.grid.onMouseOverRow(a)},domouseout:function(a){if(!this.isIntraRowEvent(a))this.grid.onMouseOutRow(a)}})})},"ws/themes/ThemeConfig":function(){define("ws/themes/ThemeConfig",["dojo","ws/string","ws/reporting","ws/settings"],
function(g){g.setObject("ws.themes.ThemeConfig",{prefs:null,initialThemeLoaded:!1,themeData:null,currentThemeId:null,currentThemeData:null,active:{},randomThemeList:null,randomThemeEnabled:!1,restoreToThemeId:null,forceOrOptoutThemeId:null,optOut:!1,optinThemeId:null,themeChangeCallbacks:{},needsHideLoadingCurtain:!1,init:function(){if(Config.EnableThemes){window.g_ThemeAtom_WS=g.hitch(this,this._g_ThemeAtom_WS);this.prefs=null;if("string"==typeof Settings.ThemePrefs){if(Settings.ThemePrefs)this.prefs=
g.fromJson(Settings.ThemePrefs)}else this.prefs=Settings.ThemePrefs;if(!this.prefs)this.prefs={SelectedTheme:"theme-"+Config.ThemeDefault,restoreToTheme:Config.ThemeDefault,randomThemeEnabled:!1};this.currentThemeId=this.prefs.SelectedTheme.substr(6);this.restoreToThemeId=this.prefs.restoreToTheme;this.randomThemeEnabled=this.prefs.randomThemeEnabled?!0:!1;if(""==this.currentThemeId)this.currentThemeId=Config.ThemeDefault;this.currentThemeId=this.currentThemeId.toUpperCase();this.map={Hdr_grtingText:["Header",
"grtingTxt"],Hdr_link:["Header","lnk"],Gen_accent:["GeneralApp","accent"],Gen_accentDark:["GeneralApp","accentDark"],Gen_base:["GeneralApp","base"],Gen_dark:["GeneralApp","dark"],Gen_medium:["GeneralApp","medium"],Gen_light:["GeneralApp","light"],Gen_tone:["GeneralApp","tone"],Gen_search:["GeneralApp","search"],Gen_searchDark:["GeneralApp","searchDark"],Gen_searchResult:["GeneralApp","searchResult"],Gen_toneRGBA:["GeneralApp","toneRGBA"]};this.parseThemeData();this.updtStpdCoreTheme();if(Config.AllowRandomThemes&&
this.randomThemeEnabled)try{this.currentThemeId=_ws_isOpenerWS()&&opener._ws_theme&&"undefined"!=typeof opener._ws_theme.currentThemeId?opener._ws_theme.currentThemeId:this.getRandomTheme()}catch(j){}this.wasTakeover=!1;var f=this.prefs.optOutForcedThemeId?this.prefs.optOutForcedThemeId:"";if(Settings.EnablePromoThemes&&this.forceOrOptoutThemeId&&this.forceOrOptoutThemeId!=f)this.currentThemeId=this.forceOrOptoutThemeId,this.wasTakeover=!0;this.currentThemeId==Config.ThemeDefault?this.startUpThemeLoaded():
this.loadTheme(this.currentThemeId,g.hitch(this,this.startUpThemeLoaded),g.hitch(this,function(){this.currentThemeId=Config.ThemeDefault;this.startUpThemeLoaded();this.hideLoadingCurtain()}))}},updtStpdCoreTheme:function(){var g=!1;if(this.optinThemeId&&"SIMPLE"==this.optinThemeId)if(Settings.UserHash>Config.StpdCoreThemeThreshold&&"SIMPLE"!=this.currentThemeId){isNaN(parseInt(Settings.AOLCreateDate))||parseInt(Settings.AOLCreateDate)>=Config.StpdCoreThemeCreateDate&&(g=!0);if(Settings.FirstLogin)this.currentThemeId=
"SIMPLE",this.wasStpdCoreForce=!0;else if(this.currentThemeId==Config.ThemeDefault)this.forceOrOptoutThemeId=this.optinThemeId,this.optOut=!0,this.optinThemeId=null;if(0>Config.StpdCoreThemeThreshold){var f=Math.abs(Config.StpdCoreThemeThreshold);Settings.UserHash<f&&(g=!0)}if(g||Config.StpdCoreThemePremoteLocales&&-1==Config.StpdCoreThemePremoteLocales.indexOf(Settings.Locale.toLowerCase()))this.forceOrOptoutThemeId=this.optinThemeId=null,this.optOut=!1}else this.optinThemeId=null},hideLoadingCurtain:function(){!Config.EnableThemes||
this.initialThemeLoaded?ws.WebSuite.hideLoadingCurtain():this.needsHideLoadingCurtain=!0},startUpThemeLoaded:function(){if(this.themeData[this.currentThemeId])this.currentThemeData=this.themeData[this.currentThemeId];if(this.needsHideLoadingCurtain)ws.WebSuite.hideLoadingCurtain(),this.needsHideLoadingCurtain=!1;this.initialThemeLoaded=!0;if(this.todayPageCallbackFunc)this.todayPageCallbackFunc(),this.todayPageCallbackFunc=null;this.themePicker&&!this.startUpThemeChangeDone&&this.themePicker.startUpThemeLoaded()},
getThemeColor:function(g,f){if(!this.themeData)return null;var a=null;if(this.themeData[this.currentThemeId])this.currentThemeData=this.themeData[this.currentThemeId];if("DEFAULT"==this.currentThemeData.id){var b=f?"":"#";switch(g){case "Gen_base":return b+"39a4d1";case "Gen_accent":return b+"7cb311";case "Gen_accentDark":return b+"588428";case "Gen_light":return b+"D6F2FE";case "Gen_medium":return b+"99deec";case "Gen_dark":return b+"116F96";default:return null}}b=this.currentThemeData.styleInfo;
this.themePicker&&this.themePicker.isHighContrastTheme&&(b={Header:{grtingTxt:"#000",lnk:"#000"},GeneralApp:{accent:"#006db0",accentDark:"#02182e",base:"#191919",dark:"#000000",medium:"#c9c9c9",light:"#f2f2f2",tone:"#f3f3f3",search:"#006db0",searchDark:"#02182e",searchResult:"#c6c8c9",toneRGBA:"rgba (81,15,59,0.05)"}});this.map&&this.currentThemeData&&b&&(a=this.map[g],a=b[a[0]][a[1]]);f&&a&&"#"==a.substr(0,1)&&(a=a.substr(1));return a},getThemeColorQueryString:function(){var g=null;if(!Config.EnableThemes)return null;
this.themePicker&&this.themePicker.isHighContrastTheme?(tca="006db0",tcb="333333",tcad="02182e"):(tcb=this.getThemeColor("Gen_base",!0),tca=this.getThemeColor("Gen_accent",!0),tcad=this.getThemeColor("Gen_accentDark",!0));return"tcb="+tcb+"&tcad="+tcad+"&tca="+tca},getRandomTheme:function(){return this.randomThemeList[Math.floor(Math.random()*this.randomThemeList.length)]},parseThemeData:function(){this.forceOrOptoutThemeId=null;this.optOut=!1;this.optinThemeId=null;this.themeData=ws.lang.shallowCopy(Config.WebSuiteThemes);
var j=[];"undefined"!=typeof Subset_Themes&&(j=ws.lang.shallowCopy(Subset_Themes.IDList));var f=[];this.active={};this.active[Config.ThemeDefault]=!0;for(var a=0;a<j.length;a++){var b=j[a];if(Subset_Themes[b]){var e=Subset_Themes[b];if(e.PromoAttribute){var h=e.PromoAttribute;if(null==this.forceOrOptoutThemeId&&this.isThemeInDateRange(h,"force")&&this.isTargetUserMatch(e))this.forceOrOptoutThemeId=b,this.active[b]=!0;else if(null==this.forceOrOptoutThemeId&&this.isThemeInDateRange(h,"optout")&&this.isTargetUserMatch(e))this.forceOrOptoutThemeId=
b,this.optOut=!0,this.active[b]=!0;else if(null==this.optinThemeId&&this.isThemeInDateRange(h,"optin")&&this.isTargetUserMatch(e))this.optinThemeId=b,this.active[b]=!0;this.isThemeInDateRange(h,"gallery")&&(this.active[b]=!0)}else this.active[b]=!0,f.push(b)}else this.active[b]=!0,f.push(b)}j=ws.lang.shallowCopy(Config.WebSuiteThemes.IDList).splice(0,1);this.randomThemeList=ws.lang.shallowCopy(j.concat(f));f=g.indexOf(this.randomThemeList,"HIGHCONTRAST");-1!=f&&this.randomThemeList.splice(f,1)},unspecified:function(g){return"undefined"==
typeof g||null==g||""==g?!0:!1},isActive:function(g){return g&&this.active&&this.active[g]?!0:!1},isTargetUserMatch:function(j){function f(a){var b=!1;e.gender&&(g.isString(e.gender)&&e.gender.length?e.gender.substr(0,1).toLowerCase()==a.substr(0,1).toLowerCase()&&(b=!0):window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.ProgErr,"themeConfig.js error: targeted theme has invalid MatchAtribute.gender  file:ThemeConfig.js"));return b}function a(a){var b=!1;e.age&&(g.isArray(e.age)&&2==e.age.length?a>=
e.age[0]&&(b=!0,e.age[1]>=e.age[0]&&a>e.age[1]&&(b=!1)):window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.ProgErr,"themeConfig.js error: targeted theme has invalid MatchAtribute.age  file:ThemeConfig.js"));return b}function b(a){var b=!1;e.zip&&(g.isArray(e.zip)&&e.zip.length?-1!=g.indexOf(e.zip,a)&&(b=!0):window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.ProgErr,"themeConfig.js error: targeted theme has invalid MatchAtribute.zip  file:ThemeConfig.js"));return b}if(!j||!j.MatchAtribute)return!0;
var e=j.MatchAtribute,j=!1,h=ws.UserContext.UserGender;h&&g.isString(h)&&h.length&&(j=f(h));var h=!1,k=ws.UserContext.Age;k&&"number"==typeof k&&(h=a(k));var k=!1,l=ws.UserContext.Zip;l&&g.isString(l)&&l.length&&(k=b(l));l="false";if(e.match&&g.isString(e.match)&&e.match.length)try{l=ws.string.substituteParams(e.match,{gender:j,age:h,zip:k})}catch(n){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.ProgErr,"themeConfig.js error: targeted theme has MatchAtribute.match with unknown token, valid are: %{age}, %{gender} or %{zip} file:ThemeConfig.js")}j=
!1;try{j=eval(l)}catch(m){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.ProgErr,"themeConfig.js error: targeted theme has invalid MatchAtribute.match  file:ThemeConfig.js")}return j},isThemeInDateRange:function(j,f,a){var b=j[f+"Start"],e=j[f+"End"];if(this.unspecified(b)&&this.unspecified(e))return!1;j=new Date;f=!0;!a&&!this.unspecified(b)&&(a=g.date.stamp.fromISOString(b))&&j<a&&(f=!1);a=!0;this.unspecified(e)||(b=g.date.stamp.fromISOString(e))&&j>b&&(a=!1);return f&&a?!0:!1},getExternalThemeResourcePath:function(g){var f=
"",f="";if(g.version&&0<g.version.length)f=g.version;return f=Config.ThemeConfigResourcePath+f+"/"+g.id.toLowerCase()},loadTheme:function(j,f,a){if(f){var b=j;if(!this.isActive(b))this.currentThemeId=b=this.prefs&&this.prefs.restoreToThemeId&&!this.isActive(this.prefs.restoreToThemeId)?this.prefs.restoreToThemeId:Config.ThemeDefault;this.themeData[j]||b==Config.ThemeDefault?f(b):(this.themeChangeCallbacks[b]||(this.themeChangeCallbacks[b]=[]),this.themeChangeCallbacks[b].push(f),_ws.loadScript({src:Config.ThemeConfigURL+
b.toLowerCase()+".js",load:g.hitch(this,function(){if(8>=g.isIE&&this.needsHideLoadingCurtain)ws.WebSuite.hideLoadingCurtain(),this.needsHideLoadingCurtain=!1}),error:g.hitch(this,this.themeLoadError,b,a)}))}},themeLoadError:function(g,f){f&&f();window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.ExternalErr," file:ThemeConfig.js - themeConfig error: Unable to load theme",g)},_g_ThemeAtom_WS:function(g){if(g&&g.id){var f=g.id;g.resourcePath=this.getExternalThemeResourcePath(g);this.themeData[f]=g;
if(this.themeChangeCallbacks[f])for(g=this.themeChangeCallbacks[f];g.length;)g.shift()(f)}else this.themeLoadError("No theme param")},reset:function(){this.prefs.SelectedTheme="";this.prefs.restoreToTheme="";this.prefs.optOutForcedThemeId="";ws.settings.saveNow({ThemePrefs:this.prefs});ws.settings.saveNow({LastSeenPromoTipBubble:""});Settings.ThemePrefs=this.prefs;Settings.LastSeenPromoTipBubble=""},disp:function(){alert("string"==typeof Settings.ThemePrefs?"LastSeenPromoTipBubble: "+Settings.LastSeenPromoTipBubble+
" "+Settings.ThemePrefs:"LastSeenPromoTipBubble: "+Settings.LastSeenPromoTipBubble+" SelectedTheme: "+Settings.ThemePrefs.SelectedTheme+" restoreToTheme: "+Settings.ThemePrefs.restoreToTheme+" optOutForcedThemeId: "+Settings.ThemePrefs.optOutForcedThemeId)}});window._ws_theme=ws.themes.ThemeConfig})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(g,j,f,a){var b=g.Color=function(a){a&&this.setColor(a)};b.named={black:[0,0,0],silver:[192,192,192],gray:[128,
128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:a.transparentColor||[0,0,0,0]};j.extend(b,{r:255,g:255,b:255,a:1,_set:function(a,b,f,g){this.r=a;this.g=b;this.b=f;this.a=g},setColor:function(a){j.isString(a)?b.fromString(a,this):j.isArray(a)?b.fromArray(a,this):(this._set(a.r,a.g,a.b,a.a),a instanceof b||
this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+f.map(["r","g","b"],function(a){a=this[a].toString(16);return 2>a.length?"0"+a:a},this).join("")},toCss:function(a){var b=this.r+", "+this.g+", "+this.b;return(a?"rgba("+b+", "+this.a:"rgb("+b)+")"},toString:function(){return this.toCss(!0)}});b.blendColors=g.blendColors=function(a,g,k,j){var n=j||new b;f.forEach(["r",
"g","b","a"],function(b){n[b]=a[b]+(g[b]-a[b])*k;"a"!=b&&(n[b]=Math.round(n[b]))});return n.sanitize()};b.fromRgb=g.colorFromRgb=function(a,f){var g=a.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return g&&b.fromArray(g[1].split(/\s*,\s*/),f)};b.fromHex=g.colorFromHex=function(a,g){var k=g||new b,j=4==a.length?4:8,n=(1<<j)-1,a=Number("0x"+a.substr(1));if(isNaN(a))return null;f.forEach(["b","g","r"],function(b){var f=a&n;a>>=j;k[b]=4==j?17*f:f});k.a=1;return k};b.fromArray=g.colorFromArray=function(a,
f){var g=f||new b;g._set(Number(a[0]),Number(a[1]),Number(a[2]),Number(a[3]));if(isNaN(g.a))g.a=1;return g.sanitize()};b.fromString=g.colorFromString=function(a,f){var g=b.named[a];return g&&b.fromArray(g,f)||b.fromRgb(a,f)||b.fromHex(a,f)};return b})},"url:ws/themes/widget/ThemeStylesHighContrast.css":'html, body{color: #000;}body a, body .wsLink, body .wsLink:visited, body .wsSelect .option, body .buddyList .groupEdit{color: #006db0;}body .wsLink:hover, body .wsLink:focus{color: #006db0;}body .WSHat .searchArea input.SearchABTest17.gen_baseBC {border-color: #333!important;}body .footer_container .feedback .undoLink,body .feedbackBox .wsLink,body .feedbackBox a,body .feedbackBox a:visited,body .feedbackBox .wsLink:hover,body .feedbackBox .wsLink:focus{color: #f2f2f2;}body .WSHat .signOutLink a,body .WSHat .signOutLink a:visited,body .WSHat .adminLinks .link,body .WSHat .adminLinks .pipe,body .WSHat .adminLinks span a,body .WSHat .adminLinks span a:visited {color: #000;}body .WSHat .salutation {color: #000;}body .fdbkBadge .fdbkBadgeIcon,body .fdbkPaneEntry ul li:hover .feedbackSprite,body .fdbkPaneEntry ul li.fdbkOptionHover .feedbackSprite,body .WSNavigation .navItemCurrent,body .WSNavigation .shNavItemCurrent,body .settings .pageList .pageItem.current,body .WSNavigation .hasUnseen .text .unseen,body .appFolders .unseen,body .navToolbar .mnUnseen{background-color: #006db0;}body .WSNavigation .shNavItemCurrent {background-color: #333;}body .navToolbar .cpNavItem .icon,body .navToolbar .cpNavItem{background-color: #333;}body .navToolbar .cpNavItem.navItemHover,body .navToolbar .cpNavItem.navItemHover .icon {background-color: #000;}.dj_ie7 body .navToolbar .navItemCurrent .mnUnseen,.dj_ie8 body .navToolbar .navItemCurrent .mnUnseen{background-color: #02182e;}body .peoplePicker .showHighlight .row-highlight .dojoxGrid-cell,body .editCalendar .screenNameRowHover,body .messageListView .dojoxGrid-header-sort-up,body .messageListView .dojoxGrid-header-sort-down,body .buddyList h2.groupItemHover,body .buddyList .buddy h3:hover,body .wsMenuItemHover,body .listView .dojoxGrid-row-over,body .filterRow:hover,body .filterRow:hover td,body .appPplNode .appPplItem:hover,body .appTodo .taskItem:hover,.test {background-color: #f2f2f2 !important;}body .displayMessage .wsItemHover,body .displayMessage .wsItem:hover {background-color: #f2f2f2 !important; color: #202020 !important;}body #eventApp .eventRow:hover {background-color:#f2f2f2;}body .taskPanel .taskCloseBtnCntr {background-color: #f2f2f2 !important;}.dj_ie8 body .WSUntimedView .bodyCellToday,.dj_ie8 body .WSGridView .bodyCellToday,.dj_ie8 body .peoplePicker .showHighlight .row-highlight .dojoxGrid-cell,.dj_ie8 body .editCalendar .screenNameRowHover,.dj_ie8 body .messageListView .dojoxGrid-header-sort-up,.dj_ie8 body .messageListView .dojoxGrid-header-sort-down,.dj_ie8 body .buddyList h2.groupItemHover,.dj_ie8 body .buddyList .buddy h3:hover,.dj_ie8 body .wsMenuItemHover,.dj_ie8 body .listView .dojoxGrid-row-over,.dj_ie8 .test {background-color: #f2f2f2 !important;}body .searchInfo, body .sendConfirmation .linkButton, body .searchInfo .DropDownButton .btnLabel{color: #fff;}body .dojoxGrid-row .searchTerm,body .displayMessage .searchTerm {background-color: #c6c8c9;}body .appStack .currAppTitle,body .appTodo .appTitleAddTaskSel,body #eventApp .appTitleAddEvSel,body .appPpl .appTitleSearchSel,body .appAim .appTitleSearchSel,body .imWidget .imBlock .itsme,body .searchInfo{background-color: #333;}body .appFolders .currFolderItem, body .appFolders .appFoldersNode .currFolderItem:hover {background-color: #006db0;}body .displayMessage .itemSelected{background-color:#333;}.dj_ie7 body .WSNavigation .hasUnseen.navItemCurrent .text .unseen,.dj_ie8 body .WSNavigation .hasUnseen.navItemCurrent .text .unseen {background-color:#02182e;}body .btn, body .btnHover, body .btnDisabled, body .btnSmall, body .btnLarge {background-color: #006db0; border: 1px solid #02182e;}body .btnHover, body .btnSmallHover, body .btnLargeHover {background-color: #006db0;}body .WSHat .searchButtonContainer .btnDisabled,body .WSHat .searchButtonContainer .btnSmall,body .WSHat .searchButtonContainer .btnLarge {background-color: #006db0;}body .wsToolbarControls .btn, body .navCollapser {background-color: #333; border-left: 1px solid #c9c9c9; border-right: 1px solid #000;}body .wsToolbarControls .rightNode .btn {border-right: 1px solid #000; border-left: 1px solid #c9c9c9;}body .wsToolbarControls .rightNode .btnClick {border-left: 1px solid #000;}body .wsToolbar,body .displayMessage_slideShowToolbar {background-color: #333;}body .wsToolbarControls .btn:hover, body .navCollapser:hover {background-color: #000;}body .wsToolbar, body .navCollapser {border-bottom: 1px solid #000; border-top: 1px solid #c9c9c9;}body .wsToolbarControls .btnClick,body .wsToolbarControls .ButtonHighlight{background-color: #000 !important; border-left: 1px solid #000;}body .WSNavigation .controlsPane ul li {background-color: #333;}body .WSNavigation .controlsPane ul li.cpBtnHover,body .WSNavigation .controlsPane ul li.cpBtnClick ,body .WSNavigation .controlsPane ul li.cpBtnHover div.icon,body .WSNavigation .controlsPane ul li.cpBtnClick div.icon{background-color: #000;}body .WSNavigation .controlsPane ul li div.icon {background-color: #333;}body .imPanel .AIMbtnSel{background-color:#333 !important;}body .btn .btnSplitArrow {border-left: 1px solid #02182e;}body .btnClick .btnSplitArrow {border-left: 1px solid #02182e !important;}body .WSNavigation .presence, body .WSNavigation .presence:hover {border:none; background: none repeat scroll 0 0 transparent;}body .WSHat {background-image:url("%{themeDir}/hat_bg1.png");}body .WSHat .leftHat,body .WSHat .affinityLeftHat {background-repeat:no-repeat; background-image:url("%{themeDir}/hat_bg2.png");}body .WSNavigation,body .SidePanel,body .settings .pageList {background-color: transparent;}.dj_ie7 body .WSNavigation,.dj_ie8 body .WSNavigation,.dj_ie7 body .SidePanel,.dj_ie8 body .SidePanel,.dj_ie7 body .settings .pageList,.dj_ie8 body .settings .pageList{background-color: transparent;}.dj_ie7 body .appFolders .currFolderItem .unseen,.dj_ie8 body .appFolders .currFolderItem .unseen {background-color:#02182e;}body .cp-refresh.cpBtnClick .icon,body .cp-compose.cpBtnClick .icon,body .cp-chat.cpBtnClick .icon,body .cp-sms.cpBtnClick .iconbody .btnLabelsOn2 .cp-refresh.cpBtnClick .icon,body .btnLabelsOn2 .cp-compose.cpBtnClick .icon,body .btnLabelsOn2 .cp-chat.cpBtnClick .icon,body .btnLabelsOn2 .cp-sms.cpBtnClick .icon{background-color:#02182e;}body .appsToolbar .apBtn:hover {background-color:#000;}body .appsToolbar .apBtn,body .appTitleBar,body .appTodo .appTitleAddTaskSel {background-color:#333;}body .wsToolbarControls .btnDisabled .btnLabel {color:#c9c9c9;}body .dijitSplitContainerSizerV,body .dijitSplitterShadow,body .dijitSplitContainerVirtualSizerH,body .dijitSplitContainerVirtualSizerV {background-color:#333;}body .navTile24, body .navItem .navTile24 .navItemHover {background-image: none;}body .WSNavigation .wsToolbarBare,body .WSCNavigation .wsToolbarBare {background-color:transparent; border-bottom:none;}body .settings .pageList.wsToolbar.wsToolbarBare {background-color:transparent !important;}body .WSModalPane .wsToolbar,body .imWidget .wsToolbar {background-color:transparent;}body .sendConfirmation .wsToolbar {background-color:transparent;}body .wsToolbarBare {background-color: transparent;}body .picturePicker .dojoxGrid-row-over .dojoxGrid-cell {background-color:transparent;}body .dojoxGrid-row,body .dojoxGrid-row, td {outline: none;}body .dojoxGrid-scrollbox, body .dojoxGrid-row {background-color: Transparent;}body .btnSmallBare,body .btnBare,body .btnLargeBare {background-image: none; background: none; border: none; color: #666;}body .appsToolbar ul .appCurr:hover,body .appsToolbar ul .appCurr {border-bottom: none; background-color: #fff; background-image: none;}body div.btnSmallDisabled,body div.btnDisabled,body div.btnLargeDisabled,body div.btnDisabled.btnSmallHover,body div.btnDisabled.btnHover, body div.btnDisabled.btnLargeHover {cursor: default; background-color: #cdcdcb; border: 1px solid #9f9f9f;}body .wsToolbarControls div.btnSmallDisabled,body .wsToolbarControls div.btnDisabled,body .wsToolbarControls div.btnLargeDisabled,body .wsToolbarControls div.btnDisabled.btnSmallHover,body .wsToolbarControls div.btnDisabled.btnHover, body .wsToolbarControls div.btnDisabled.btnLargeHover {cursor: default; background-color: Transparent; background-image: none; border-left: 1px solid #c9c9c9; border-right: 1px solid #000;}',
"dojo/errors/RequestError":function(){define(["./create"],function(g){return g("RequestError",function(g,f){this.response=f})})},"ws/widget/BuddyIcon":function(){define("ws/widget/BuddyIcon","dojo/_base/declare,dojo,dijit,dijit/_Widget,dijit/_TemplatedMixin,ws/presence".split(","),function(g,j,f,a,b){return g([a,b],{contact:null,size:48,showBuddyShadow:!0,templateString:'<div class="buddyIcon" style="height:${size}px;width:${size}px;">\t<img src="${spacer}" data-dojo-attach-point="defaultIcon" style="height: ${size}px; width: ${size}px; position: absolute; background: url(\'${baseimages}prime/mainLargeIcon8.png\') -65px -105px;">\t<img src="${spacer}" data-dojo-attach-point="icon" data-dojo-attach-event="onload: onLoad, onclick: onClick, onerror: onError" style="display: none; background-color: #fff; width: ${size}px; height: ${size}px; position: absolute;">\t<img src="${spacer}" data-dojo-attach-point="icon2" style="position: absolute; left: -9999px; top: -9999px; width: 1px; height: 1px">   <div data-dojo-attach-point="buddyShadow" class="buddyShadow" style="position:absolute;height:${size}px;width:${size}px;"></div></div>',
postCreate:function(){this.defaultIcon.style.backgroundPosition={32:"-67px -107px",48:"-57px -140px",64:"-57px -140px"}[this.size];this.showBuddyShadow?9>j.isIE&&j.style(this.buddyShadow,{width:this.size-1+"px",height:this.size-1+"px"}):this.buddyShadow.style.display="none"},show:function(a){this.contact=a;this.icon.style.display="none";var b=ws.presence.getBuddyIconUrl(a);this.showIcon=null!=b;if(b)j.isSafari&&4>j.isSafari?(this.icon2.src=b,setTimeout(j.hitch(this,function(){this.icon.src=b}),0)):
this.icon.src=b},onLoad:function(){if(this.showIcon)this.icon.style.display=""},onClick:function(){var a=ws.presence.getScreenNameForContact(this.contact);a&&ws.presence.launchIM(a)},onError:function(){this.icon.style.display="";setTimeout(j.hitch(this,function(){this.icon.style.display="none"}),0)}})})},"ws/widget/SplitDropDownButton":function(){define("ws/widget/SplitDropDownButton",["dojo/_base/declare","dojo","dijit","ws/widget/DropDownButton","ws/html"],function(g,j,f,a){return g([a],{startup:function(){j.addClass(this.domNode,
"SplitDropDownButton"+this.size);ws.html.addHoverClass(this.arrowNode,"btnSplitArrowHover");if(this.arrowTitle)this.arrowNode.title=this.arrowTitle;this.inherited(arguments)},showArrowBorder:!0,onClick:function(){},onArrowClick:function(a){this.disabled||(this.toggleMenu(),a.stopPropagation())}})})},"dojox/io/scriptFrame":function(){define("dojox/io/scriptFrame",["dojo/main","dojo/io/script","dojo/io/iframe"],function(g,j,f){g.deprecated("dojox.io.scriptFrame","dojo.io.script now supports parallel requests without dojox.io.scriptFrame",
"2.0");g.getObject("io.scriptFrame",!0,dojox);dojox.io.scriptFrame={_waiters:{},_loadedIds:{},_getWaiters:function(a){return this._waiters[a]||(this._waiters[a]=[])},_fixAttachUrl:function(){},_loaded:function(a){var b=this._getWaiters(a);this._loadedIds[a]=!0;this._waiters[a]=null;for(var k=0;k<b.length;k++){var l=b[k];l.frameDoc=f.doc(g.byId(a));j.attach(l.id,l.url,l.frameDoc)}}};var a=j._canAttach,b=dojox.io.scriptFrame;j._canAttach=function(e){var h=e.args.frameDoc;if(h&&g.isString(h)){var k=
g.byId(h),j=b._getWaiters(h);k?b._loadedIds[h]?(e.frameDoc=f.doc(k),this.attach(e.id,e.url,e.frameDoc)):j.push(e):(j.push(e),f.create(h,dojox._scopeName+".io.scriptFrame._loaded('"+h+"');"));return!1}return a.apply(this,arguments)};return dojox.io.scriptFrame})},"dijit/Viewport":function(){define("dijit/Viewport","dojo/Evented,dojo/on,dojo/ready,dojo/sniff,dojo/_base/window,dojo/window".split(","),function(g,j,f,a,b,e){var h=new g;f(200,function(){var f=e.getBox();h._rlh=j(b.global,"resize",function(){var a=
e.getBox();f.h==a.h&&f.w==a.w||(f=a,h.emit("resize"))});if(8==a("ie")){var g=screen.deviceXDPI;setInterval(function(){if(screen.deviceXDPI!=g)g=screen.deviceXDPI,h.emit("resize")},500)}});return h})},"url:ws/calendar/ColorPicker.css":"","url:ws/suite/Footer.css":"","ws/Spinner":function(){define("ws/Spinner",["dojo/_base/declare","dojo"],function(g,j){(new Image).src=Config.BaseImagesURL+"common/spinnerFeedback.gif";return g(null,{constructor:function(f,a,b){var e=null,g=null;switch(f){case "Feedback":e=
"common/spinnerFeedback.gif";g="20px";break;case "SlideShow":e="common/spinnerSlideShow.gif";g="50px";break;case "AimSignIn":e="common/spinnerAimSignIn.gif";g="18px";break;default:e="common/spinnerAutoSave.gif",g="18px"}if(a)f={width:g,height:g,display:"none"},this.spinGif=document.createElement("img"),j.mixin(f,b||{}),j.style(this.spinGif,f),this.spinGif.src=Config.BaseImagesURL+e,a.innerHTML="",a.appendChild(this.spinGif)},spin:function(){this.spinGif.style.display=""},stop:function(){this.spinGif.style.display=
"none"}})})},"ws/widget/WSMenuSeparator":function(){define("ws/widget/WSMenuSeparator",["dojo/_base/declare","dojo","dijit","ws/widget/WSMenuItem"],function(g,j,f,a){return g([a],{templateString:'<tr class="wsMenuSeparator2">\t<td colspan=3>\t\t<div data-dojo-attach-point="top" class="wsMenuSeparator wsMenuSeparatorTop"></div>\t\t<div class="wsMenuSeparatorBottom"></div>\t</td></tr>',isCheckable:!1,isSeparator:!0,startup:function(){if(this.hideLine)this.top.style.display="none"}})})},"dojo/io/iframe":function(){define("dojo/io/iframe",
"../_base/config,../_base/json,../_base/kernel,../_base/lang,../_base/xhr,../sniff,../_base/window,../dom,../dom-construct,../query,require,../aspect,../request/iframe".split(","),function(g,j,f,a,b,e,h,k,l,n,m,q,s){f.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");var e=s._iframeName,e=e.substring(0,e.lastIndexOf("_")),o=a.delegate(s,{create:function(){return o._frame=s.create.apply(s,arguments)},get:null,post:null,send:function(a){var e,h=b._ioSetArgs(a,function(){e&&e.cancel()},function(a){var b=
null,a=a.ioArgs;try{var g=a.handleAs;"xml"===g||"html"===g?b=e.response.data:(b=e.response.text,"json"===g?b=j.fromJson(b):"javascript"===g&&(b=f.eval(b)))}catch(h){b=h}return b},function(a,b){b.ioArgs._hasError=!0;return a}),l=h.ioArgs,m="GET",n=k.byId(a.form);a.method&&"POST"===a.method.toUpperCase()&&n&&(m="POST");a={method:m,handleAs:"json"===a.handleAs||"javascript"===a.handleAs?"text":a.handleAs,form:a.form,query:n?null:a.content,data:n?a.content:null,timeout:a.timeout,ioArgs:l};if(a.method)a.method=
a.method.toUpperCase();if(g.ioPublish&&f.publish&&!1!==l.args.ioPublish)var o=q.after(s,"_notifyStart",function(a){a.options.ioArgs===l&&(o.remove(),b._ioNotifyStart(h))},!0);e=s(l.url,a,!0);l._callNext=e._callNext;e.then(function(){h.resolve(h)}).otherwise(function(a){h.ioArgs.error=a;h.reject(a)});return h},_iframeOnload:h.global[e+"_onload"]});a.setObject("dojo.io.iframe",o);return o})},"url:ws/widget/WSMenu.css":"","dojox/grid/layout":function(){define("dojox/grid/layout",["dojo/_base/declare",
"dojo","dojox/grid/cell"],function(g,j,f){return g("dojox.grid.layout",null,{constructor:function(a){this.grid=a},cells:null,structure:null,defaultWidth:"6em",setStructure:function(a){this.fieldIndex=0;this.cells=[];for(var b=this.structure=[],e=0,f;f=a[e];e++)b.push(this.addViewDef(f));this.cellCount=this.cells.length},addViewDef:function(a){this._defaultCellProps=a.defaultCell||{};return j.mixin({},a,{rows:this.addRowsDef(a.rows||a.cells)})},addRowsDef:function(a){for(var b=[],e=0,f;a&&(f=a[e]);e++)b.push(this.addRowDef(e,
f));return b},addRowDef:function(a,b){for(var e=[],f=0,g;g=b[f];f++)g=this.addCellDef(a,f,g),e.push(g),this.cells.push(g);return e},addCellDef:function(a,b,e){var g=0,g=1<e.colSpan?0:isNaN(e.width)?e.width||this.defaultWidth:e.width+"em",k=void 0!=e.field?e.field:e.get?-1:this.fieldIndex;if(void 0!=e.field||!e.get)this.fieldIndex=(-1<e.field?e.field:this.fieldIndex)+1;return new f(j.mixin({},this._defaultCellProps,e,{grid:this.grid,subrow:a,layoutIndex:b,index:this.cells.length,fieldIndex:k,unitWidth:g}))}})})},
"ws/address/record":function(){define("ws/address/record",["dojo/_base/declare","dojo","ws/address/AddressBookUtil","ws/settings"],function(g){return g("ws.address.record",null,{constructor:function(g,f){var a=!1,b=f.split(g.DELIMITER_FIELD);this.uid=b[0];this.addressMap=0;this.bType="c";for(var e,h,k=1;k<b.length;k+=2)switch(e=b[k],h=b[k+1],e){case g.CONTACT_FNAME:this.firstName=h;break;case g.CONTACT_LNAME:this.lastName=h;break;case g.CONTACT_NNAME:this.nickName=h;break;case g.CONTACT_SNAME:this.screenName=
h;this.hasEmail=!0;break;case g.CONTACT_DNAME:this.displayName=h;this.hasEmail=!0;break;case g.CONTACT_EMAIL1:this.email1=h;this.hasEmail=!0;break;case g.CONTACT_EMAIL2:this.email2=h;this.hasEmail=!0;break;case g.CONTACT_PHONE1:this.phone1=h;break;case g.CONTACT_PHONE2:this.phone2=h;break;case g.CONTACT_PHONE3:this.phone3=h;break;case g.CONTACT_PHONE4:this.phone4=h;break;case g.CONTACT_PHONE5:this.phone5=h;break;case g.CONTACT_PHONE1TYPE:this.phone1Type=h;break;case g.CONTACT_PHONE2TYPE:this.phone2Type=
h;break;case g.CONTACT_PHONE3TYPE:this.phone3Type=h;break;case g.CONTACT_PHONE4TYPE:this.phone4Type=h;break;case g.CONTACT_PHONE5TYPE:this.phone5Type=h;break;case g.CONTACT_CATEGORY:this.category=parseInt(h);break;case g.DISTROLIST_NAME:this.name=h;this.bType="d";break;case g.DISTROLIST_COUNT:this.count=h;this.bType="d";break;case g.DISTROLIST_ENTRY:this.composeValue=h;this.hasEmail=!0;this.bType="d";break;case g.DISTROLIST_CONTACT_UIDS:this.contactUids=h;this.bType="d";break;case g.DISTROLIST_DISTROLISTTYPE:this.distributionListType=
h;this.bType="d";break;case g.SHAREDGROUP_NAME:this.name=h;this.bType="d";a=!0;break;case g.SHAREDGROUP_ENTRY:this.composeValue=h;this.hasEmail=!0;this.bType="d";a=!0;break;case g.CONTACT_ADDR_BITMAP:this.addressMap=parseInt(h);break;case g.CONTACT_CONTACTTYPE:this.contactType=h;break;case g.CONTACT_COMPANY:this.company=h;break;case g.DISPLAY_CONTACT:this.columnDisplayName=h}if("d"==this.bType&&a)this.bType="s";if(!this.name)this.name=ws.address.AddressBookUtil.getNameInfoHTML(this,Settings.AddressNameDisplayFormat,
!0)}})})},"dojo/topic":function(){define("dojo/topic",["./Evented"],function(g){var j=new g;return{publish:function(f,a){return j.emit.apply(j,arguments)},subscribe:function(f,a){return j.on.apply(j,arguments)}}})},"dijit/_base/place":function(){define("dijit/_base/place",["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],function(g,j,f,a,b){var e={getViewport:function(){return f.getBox()}};e.placeOnScreen=a.at;e.placeOnScreenAroundElement=function(b,e,f,g){var m;if(j.isArray(f))m=
f;else{m=[];for(var q in f)m.push({aroundCorner:q,corner:f[q]})}return a.around(b,e,m,!0,g)};e.placeOnScreenAroundNode=e.placeOnScreenAroundElement;e.placeOnScreenAroundRectangle=e.placeOnScreenAroundElement;e.getPopupAroundAlignment=function(a,b){var e={};g.forEach(a,function(a){var f=b;switch(a){case "after":e[b?"BR":"BL"]=b?"BL":"BR";break;case "before":e[b?"BL":"BR"]=b?"BR":"BL";break;case "below-alt":f=!f;case "below":e[f?"BL":"BR"]=f?"TL":"TR";e[f?"BR":"BL"]=f?"TR":"TL";break;case "above-alt":f=
!f;default:e[f?"TL":"TR"]=f?"BL":"BR",e[f?"TR":"TL"]=f?"BR":"BL"}});return e};j.mixin(b,e);return b})},"dojox/grid/drag":function(){define("dojox/grid/drag",["dojo"],function(g){var j=dojox.grid.drag={};j.dragging=!1;j.hysteresis=2;j.capture=function(f){f.setCapture?f.setCapture():(document.addEventListener("mousemove",f.onmousemove,!0),document.addEventListener("mouseup",f.onmouseup,!0),document.addEventListener("click",f.onclick,!0))};j.release=function(f){f.releaseCapture?f.releaseCapture():(document.removeEventListener("click",
f.onclick,!0),document.removeEventListener("mouseup",f.onmouseup,!0),document.removeEventListener("mousemove",f.onmousemove,!0))};j.start=function(f,a,b,e,g){if(f&&!j.dragging)j.dragging=!0,j.elt=f,j.events={drag:a||dojox.grid.nop,end:b||dojox.grid.nop,start:g||dojox.grid.nop,oldmove:f.onmousemove,oldup:f.onmouseup,oldclick:f.onclick},j.positionX=e&&"screenX"in e?e.screenX:!1,j.positionY=e&&"screenY"in e?e.screenY:!1,j.started=!1===j.position,f.onmousemove=j.mousemove,f.onmouseup=j.mouseup,f.onclick=
j.click,j.capture(j.elt)};j.end=function(){j.release(j.elt);j.elt.onmousemove=j.events.oldmove;j.elt.onmouseup=j.events.oldup;j.elt.onclick=j.events.oldclick;j.elt=null;try{j.started&&j.events.end()}finally{j.dragging=!1}};j.calcDelta=function(f){f.deltaX=f.screenX-j.positionX;f.deltaY=f.screenY-j.positionY};j.hasMoved=function(f){return Math.abs(f.deltaX)+Math.abs(f.deltaY)>j.hysteresis};j.mousemove=function(f){f=g.fixEvent(f);g.stopEvent(f);j.calcDelta(f);if(!j.started&&j.hasMoved(f))j.events.start(f),
j.started=!0;j.started&&j.events.drag(f)};j.mouseup=function(f){g.stopEvent(g.fixEvent(f));j.end()};j.click=function(f){g.stopEvent(g.fixEvent(f))}})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(g,j,f){function a(a,b){throw Error("declare"+(b?" "+b:"")+": "+a);}function b(b,e,f){var g,h,k,j,l,m,n,s=this._inherited=this._inherited||{};"string"==typeof b&&(g=b,b=e,e=f);f=0;j=b.callee;(g=g||j.nom)||a("can't deduce a name to call inherited()",this.declaredClass);l=this.constructor._meta;
k=l.bases;n=s.p;if(g!=I){if(s.c!==j&&(n=0,m=k[0],l=m._meta,l.hidden[g]!==j)){(h=l.chains)&&"string"==typeof h[g]&&a("calling chained method with inherited: "+g,this.declaredClass);do if(l=m._meta,h=m.prototype,l&&(h[g]===j&&h.hasOwnProperty(g)||l.hidden[g]===j))break;while(m=k[++n]);n=m?n:-1}if(m=k[++n])if(h=m.prototype,m._meta&&h.hasOwnProperty(g))f=h[g];else{j=x[g];do if(h=m.prototype,(f=h[g])&&(m._meta?h.hasOwnProperty(g):f!==j))break;while(m=k[++n])}f=m&&f||x[g]}else{if(s.c!==j&&(n=0,(l=k[0]._meta)&&
l.ctor!==j)){h=l.chains;for((!h||"manual"!==h.constructor)&&a("calling chained constructor with inherited",this.declaredClass);(m=k[++n])&&!((l=m._meta)&&l.ctor===j););n=m?n:-1}for(;(m=k[++n])&&!(f=(l=m._meta)?l.ctor:m););f=m&&f}s.c=f;s.p=n;if(f)return!0===e?f:f.apply(this,e||b)}function e(a,b){return"string"==typeof a?this.__inherited(a,b,!0):this.__inherited(a,!0)}function h(a,b,e){var f=this.getInherited(a,b);if(f)return f.apply(this,e||b||a)}function k(a){for(var b=this.constructor._meta.bases,
e=0,f=b.length;e<f;++e)if(b[e]===a)return!0;return this instanceof a}function l(a,b){for(var e in b)e!=I&&b.hasOwnProperty(e)&&(a[e]=b[e]);if(j("bug-for-in-skips-shadowed"))for(var g=f._extraNames,h=g.length;h;)e=g[--h],e!=I&&b.hasOwnProperty(e)&&(a[e]=b[e])}function n(a){w.safeMixin(this.prototype,a);return this}function m(a){return w([this].concat(a))}function q(a,b){return function(){var D;var e=arguments,f=e,g=e[0],h,k;k=a.length;var j;if(!(this instanceof e.callee))return v(e);if(b&&(g&&g.preamble||
this.preamble)){j=Array(a.length);j[0]=e;for(h=0;;){if(g=e[0])(g=g.preamble)&&(e=g.apply(this,e)||e);g=a[h].prototype;(g=g.hasOwnProperty("preamble")&&g.preamble)&&(e=g.apply(this,e)||e);if(++h==k)break;j[h]=e}}for(h=k-1;0<=h;--h)g=a[h],(D=(k=g._meta)?k.ctor:g,g=D)&&g.apply(this,j?j[h]:e);(g=this.postscript)&&g.apply(this,f)}}function s(a,b){return function(){var e=arguments,f=e,g=e[0];if(!(this instanceof e.callee))return v(e);if(b){if(g)(g=g.preamble)&&(f=g.apply(this,f)||f);(g=this.preamble)&&
g.apply(this,f)}a&&a.apply(this,e);(g=this.postscript)&&g.apply(this,e)}}function o(a){return function(){var D;var b=arguments,e=0,f,g;if(!(this instanceof b.callee))return v(b);for(;f=a[e];++e)if(D=(g=f._meta)?g.ctor:f,f=D){f.apply(this,b);break}(f=this.postscript)&&f.apply(this,b)}}function u(a,b,e){return function(){var f,g,h=0,k=1;e&&(h=b.length-1,k=-1);for(;f=b[h];h+=k)g=f._meta,(f=(g?g.hidden:f.prototype)[a])&&f.apply(this,arguments)}}function p(a){B.prototype=a.prototype;a=new B;B.prototype=
null;return a}function v(a){var b=a.callee,e=p(b);b.apply(e,a);return e}function w(g,h,j){"string"!=typeof g&&(j=h,h=g,g="");var j=j||{},v,B,G,F,D,H,N,M=1,E=h;if("[object Array]"==A.call(h)){M=g;G=[];F=[{cls:0,refs:[]}];H={};for(var K=1,S=h.length,P=0,R,W,T,Q;P<S;++P){(R=h[P])?"[object Function]"!=A.call(R)&&a("mixin #"+P+" is not a callable constructor.",M):a("mixin #"+P+" is unknown. Did you use dojo.require to pull it in?",M);W=R._meta?R._meta.bases:[R];T=0;for(R=W.length-1;0<=R;--R){Q=W[R].prototype;
if(!Q.hasOwnProperty("declaredClass"))Q.declaredClass="uniqName_"+C++;Q=Q.declaredClass;H.hasOwnProperty(Q)||(H[Q]={count:0,refs:[],cls:W[R]},++K);Q=H[Q];T&&T!==Q&&(Q.refs.push(T),++T.count);T=Q}++T.count;F[0].refs.push(T)}for(;F.length;){T=F.pop();G.push(T.cls);for(--K;B=T.refs,1==B.length;){T=B[0];if(!T||--T.count){T=0;break}G.push(T.cls);--K}if(T)for(P=0,S=B.length;P<S;++P)T=B[P],--T.count||F.push(T)}K&&a("can't build consistent linearization",M);R=h[0];G[0]=R?R._meta&&R===G[G.length-R._meta.bases.length]?
R._meta.bases.length:1:0;H=G;G=H[0];M=H.length-G;h=H[M]}else H=[0],h?"[object Function]"==A.call(h)?(G=h._meta,H=H.concat(G?G.bases:h)):a("base class is not a callable constructor.",g):null!==h&&a("unknown base class. Did you use dojo.require to pull it in?",g);if(h)for(B=M-1;;--B){v=p(h);if(!B)break;G=H[B];(G._meta?l:z)(v,G.prototype);F=new Function;F.superclass=h;F.prototype=v;h=v.constructor=F}else v={};w.safeMixin(v,j);G=j.constructor;if(G!==x.constructor)G.nom=I,v.constructor=G;for(B=M-1;B;--B)(G=
H[B]._meta)&&G.chains&&(N=z(N||{},G.chains));v["-chains-"]&&(N=z(N||{},v["-chains-"]));G=!N||!N.hasOwnProperty(I);H[0]=F=N&&"manual"===N.constructor?o(H):1==H.length?s(j.constructor,G):q(H,G);F._meta={bases:H,hidden:j,chains:N,parents:E,ctor:j.constructor};F.superclass=h&&h.prototype;F.extend=n;F.createSubclass=m;F.prototype=v;v.constructor=F;v.getInherited=e;v.isInstanceOf=k;v.inherited=J;v.__inherited=b;if(g)v.declaredClass=g,f.setObject(g,F);if(N)for(D in N)if(v[D]&&"string"==typeof N[D]&&D!=I)G=
v[D]=u(D,H,"after"===N[D]),G.nom=D;return F}var z=f.mixin,x=Object.prototype,A=x.toString,B=new Function,C=0,I="constructor",J=g.config.isDebug?h:b;g.safeMixin=w.safeMixin=function(a,b){var e,g;for(e in b)if(g=b[e],(g!==x[e]||!(e in x))&&e!=I){if("[object Function]"==A.call(g))g.nom=e;a[e]=g}if(j("bug-for-in-skips-shadowed"))for(var h=f._extraNames,k=h.length;k;)if(e=h[--k],g=b[e],(g!==x[e]||!(e in x))&&e!=I){if("[object Function]"==A.call(g))g.nom=e;a[e]=g}return a};return g.declare=w})},"url:ws/suite/InforOfferDialog.css":"",
"dojo/request/registry":function(){define(["require","../_base/array","./default!platform","./util"],function(g,j,f,a){function b(a,b){for(var e=h.slice(0),g=0,j;j=e[g++];)if(j(a,b))return j.request.call(null,a,b);return f.apply(null,arguments)}function e(a,b){var e;b?(e=a.test?function(b){return a.test(b)}:a.apply&&a.call?function(){return a.apply(null,arguments)}:function(b){return b===a},e.request=b):(e=function(){return!0},e.request=a);return e}var h=[];b.register=function(a,b,f){var g=e(a,b);
h[f?"unshift":"push"](g);return{remove:function(){var a;~(a=j.indexOf(h,g))&&h.splice(a,1)}}};b.load=function(a,e,h){a?g([a],function(a){f=a;h(b)}):h(b)};a.addCommonMethods(b);return b})},"ws/html":function(){define("ws/html","dojo,dojo/_base/lang,dojo/request/iframe,dojo/dom-attr,ws/browser,ws/string".split(","),function(g,j,f){j.setObject("ws.html",{_rewriteIframeContent:{},getBorderBox:function(a,b){var e=b||g.getComputedStyle(a),f=g.getPadExtents(a,e),e=g.getContentBox(a,e);return{l:e.l-f.l,t:e.t-
f.t,w:e.w+f.w,h:e.h+f.h}},setInnerText:function(a,b){b=(b||"")+"";g.isIE||g.isWebKit?a.innerText=b:g.isMoz?a.textContent=b:a.innerHTML=ws.string.escapeXml(b)},setShowing:function(a,b){if(a)a.style.display=b?"":"none"},setVisibility:function(a,b){a.style.visibility=b?"visible":"hidden"},asciiSeparator:"------------------------------------------------------------",getText:function(a){a=g.create("div",{innerHTML:a});return ws.html.renderedTextContent(a,null,!0)},renderedTextContent:function(a,b,e){return this._renderedTextContent(a,
b,e).replace(/__aolwebsuiteblk____aolwebsuiteblk__/g,"\n").replace(/__aolwebsuiteblk__/g,"\n")},_renderedTextContent:function(a,b,e,f){var a=g.byId(a),k="";if(null==a)return k;if(a.tagName&&"style"==a.tagName.toLowerCase())return"";for(var j=0;j<a.childNodes.length;j++)switch(a.childNodes[j].nodeType){case 1:case 5:var n="unknown";try{n=g.style(a.childNodes[j],"display")}catch(m){}var q=a.childNodes[j].nodeName.toLowerCase();g.isWebKit&&-1!=g.indexOf(["p","div","li"],q)&&(n="block");e&&"hr"==q&&(n=
"block");switch(n){case "block":case "list-item":case "run-in":case "table":case "table-row-group":case "table-header-group":case "table-footer-group":case "table-row":case "table-column-group":case "table-column":case "table-cell":case "table-caption":k+="__aolwebsuiteblk__";k=e&&a.childNodes[j].tagName&&"hr"==a.childNodes[j].tagName.toLowerCase()?k+this.asciiSeparator:k+ws.html._renderedTextContent(a.childNodes[j],b,e,f||"pre"==q);k+="__aolwebsuiteblk__";break;case "none":break;default:k=a.childNodes[j].tagName&&
"br"==a.childNodes[j].tagName.toLowerCase()?k+"\n":k+ws.html._renderedTextContent(a.childNodes[j],b,e,f)}break;case 3:case 2:case 4:n=a.childNodes[j].nodeValue;q="unknown";try{q=g.style(a,"text-transform")}catch(s){}switch(q){case "capitalize":n=n.split(" ");for(q=0;q<n.length;q++)n[q]=n[q].charAt(0).toUpperCase()+n[q].substring(1);n=n.join(" ");break;case "uppercase":n=n.toUpperCase();break;case "lowercase":n=n.toLowerCase();break;case "nowrap":case "pre-wrap":case "pre-line":case "pre":break;default:b&&
(n=n.replace(/\s+/,""))}k=f?k+n.replace(/&nbsp;/gi," "):k+n.replace(/[\r\n]/g,"").replace(/&nbsp;/gi," ")}return k},addHoverClass:function(a,b,e){if(7>=g.isIE||e)b||(b="hover"),g.connect(a,"onmouseenter",function(){g.addClass(a,b)}),g.connect(a,"onmouseleave",function(){g.removeClass(a,b)})},hideSoon:function(a){a.wsHtmlTimeoutId&&window.clearTimeout(a.wsHtmlTimeoutId);a.wsHtmlTimeoutId=setTimeout(function(){a.style.display="none"},100)},showSoon:function(a){a.wsHtmlTimeoutId&&window.clearTimeout(a.wsHtmlTimeoutId);
a.wsHtmlTimeoutId=setTimeout(function(){a.style.display=""},100)},setAbsolutePosition:function(a,b){var e=a.offsetParent||g.body(),e=g.position(e);a.style.left=b.x-e.x+"px";a.style.top=b.y-e.y+"px"},recreateIframe:function(a,b){var e=a.innerHTML,g=/( src=["'][^"']*["'])/i.exec(e),e=g?e.replace(g[0],' src="about:blank"'):e.replace(/<iframe/i,'<iframe src="about:blank"');a.innerHTML="";a.innerHTML=e;e=a.getElementsByTagName("iframe")[0];if(b)e.style.display="none",f.setSrc(e,b,!0),e.style.display="";
return e},rewriteIframe:function(a,b,e){if(10>g.isIE||g.isMoz)return e=e||"defaultId",ws.html._rewriteIframeContent[e]=b,6>=g.isIE?ws.html.recreateIframe(a.parentNode,"javascript:setTimeout(function(){document.write(parent.ws.html._rewriteIframeContent['"+e+"']);document.close();},5),void 1"):ws.html.recreateIframe(a.parentNode,"javascript:document.write(parent.ws.html._rewriteIframeContent['"+e+"']);document.close()");e=f.doc(a);e.open();e.write(b);e.close();return a},targetLinksToNewWindow:function(a){g.forEach(a.getElementsByTagName("a"),
function(a){a.target="_blank"})},scaleImage:function(a,b){var e=a.offsetWidth,f=a.offsetHeight;if(e>b)a.width=b,a.height=Math.round(b/e*f)},fixKeyForMac:function(a){if(g.isMac&&a.keyChar&&"\u2211"==a.keyChar.toLowerCase())a.keyChar="w";return a},fixKeyCodeForMac:function(a){return g.isMac&&g.isMoz&&a.ctrlKey&&(77==a.keyCode||"M"==a.keyChar)?g.keys.ENTER:a.keyCode},isTargetAnInputElement:function(a){var b=!1;a&&a.target&&a.target.nodeName&&(a=a.target.nodeName.toLowerCase(),b="input"==a||"textarea"==
a);return b},isTargetALinkElement:function(a){var b=!1;a&&a.target&&a.target.nodeName&&(b="a"==a.target.nodeName.toLowerCase());return b},overElement:function(a,b){if("undefined"==typeof g)return!1;var a=g.byId(a),e=b.pageX,f=b.pageY,k=ws.html.getBorderBox(a),j=g.position(a,!0),n=j.x,m=j.y;return e>=n&&e<=n+k.w&&f>=j.y&&f<=m+k.h},selectInputText:function(a){var b=g.global,e=g.doc,a=g.byId(a);try{if(e.selection&&g.body().createTextRange){if(a.createTextRange){var f=a.createTextRange();f.moveStart("character",
0);f.moveEnd("character",a.value.length);f.select()}}else b.getSelection&&a.setSelectionRange&&a.setSelectionRange(0,a.value.length);a.focus()}catch(k){}},getScrollbar:function(){var a=g.create("div",{style:{width:"100px",height:"100px",overflow:"scroll",position:"absolute",top:"-300px",left:"0px"}}),b=g.create("div",{style:{width:"400px",height:"400px"}},a);g.body().appendChild(a);var e=a.offsetWidth-a.clientWidth;g.body().removeChild(a);a.removeChild(b);return{w:e}},getScrollbarWidth:function(){if(!this._scrollbarWidth)this._scrollbarWidth=
this.getScrollbar().w;return this._scrollbarWidth},clearSelection:function(){try{return window.getSelection?g.isSafari?window.getSelection().collapse():window.getSelection().removeAllRanges():document.selection&&(document.selection.empty?document.selection.empty():document.selection.clear&&document.selection.clear()),!0}catch(a){return!1}},ellipsis:function(a){ellipsisHtml='<span class="ellipsis">&hellip;</span>';g.isString(a)&&(a=g.byId(a));if("hidden"==g.style(a,"overflow")){var b=g.position(a).h,
e=a.cloneNode(!0),f=0,k;g.style(e,{display:"",overflow:"visible",height:"auto","max-height":"none"});g.place(e,a,"after");for(var j=function(){return Math.round(g.style(e,"height"))>b},n=0,m=function(a,b){var e,f;if(3===a.nodeType){for(;a.nodeValue.length&&b();){e=a.nodeValue;f=e.search(/\b\w*?$/);if(-1==f)f=e.length;a.nodeValue=e.substr(0,f-1)}a.nodeValue.length||a.parentNode.removeChild(a)}else a.parentNode.removeChild(a)};e.innerHTML.length&&j();)0===n&&(k=g._toDom(ellipsisHtml),g.place(k,e,e.childNodes.length-
f),f+=11===k.nodeType?k.childNodes.length:1,n++),k=e.childNodes[e.childNodes.length-(1+f)],m(k,j);a.innerHTML=e.innerHTML;e.parentNode.removeChild(e)}},setFloat:function(a,b){a.style[ws.html.floatAttr]=b},getFloat:function(a){return a.style[ws.html.floatAttr]},floatAttr:g.isIE?"styleFloat":"cssFloat"})})},"dojo/query":function(){define("./_base/kernel,./has,./dom,./on,./_base/array,./_base/lang,./selector/_loader,./selector/_loader!default".split(","),function(g,j,f,a,b,e,h,k){function l(a,e){var g=
function(b,g){if("string"==typeof g&&(g=f.byId(g),!g))return new e([]);var h="string"==typeof b?a(b,g):b?b.orphan?b:[b]:[];return h.orphan?h:new e(h)};g.matches=a.match||function(a,b,e){return 0<g.filter([a],b,e).length};g.filter=a.filter||function(a,e,f){return g(e,f).filter(function(e){return-1<b.indexOf(a,e)})};if("function"!=typeof a)var h=a.search,a=function(a,b){return h(b||document,a)};return g}j.add("array-extensible",function(){return 1==e.delegate([],{length:1}).length&&!j("bug-for-in-skips-shadowed")});
var n=Array.prototype,m=n.slice,q=n.concat,s=b.forEach,o=function(a,b,e){b=[0].concat(m.call(b,0));e=e||g.global;return function(f){b[0]=f;return a.apply(e,b)}},u=function(a){var b=this instanceof p&&j("array-extensible");"number"==typeof a&&(a=Array(a));var f=a&&"length"in a?a:arguments;if(b||!f.sort){for(var g=b?this:[],h=g.length=f.length,k=0;k<h;k++)g[k]=f[k];if(b)return g;f=g}e._mixin(f,v);f._NodeListCtor=function(a){return p(a)};return f},p=u,v=p.prototype=j("array-extensible")?[]:{};p._wrap=
v._wrap=function(a,b,e){a=new (e||this._NodeListCtor||p)(a);return b?a._stash(b):a};p._adaptAsMap=function(a,b){return function(){return this.map(o(a,arguments,b))}};p._adaptAsForEach=function(a,b){return function(){this.forEach(o(a,arguments,b));return this}};p._adaptAsFilter=function(a,b){return function(){return this.filter(o(a,arguments,b))}};p._adaptWithCondition=function(a,b,e){return function(){var f=arguments,h=o(a,f,e);if(b.call(e||g.global,f))return this.map(h);this.forEach(h);return this}};
s(["slice","splice"],function(a){var b=n[a];v[a]=function(){return this._wrap(b.apply(this,arguments),"slice"==a?this:null)}});s(["indexOf","lastIndexOf","every","some"],function(a){var e=b[a];v[a]=function(){return e.apply(g,[this].concat(m.call(arguments,0)))}});e.extend(u,{constructor:p,_NodeListCtor:p,toString:function(){return this.join(",")},_stash:function(a){this._parent=a;return this},on:function(b,e){var f=this.map(function(f){return a(f,b,e)});f.remove=function(){for(var a=0;a<f.length;a++)f[a].remove()};
return f},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(a){var e=m.call(this,0),f=b.map(arguments,function(a){return m.call(a,0)});return this._wrap(q.apply(e,f),this)},map:function(a,e){return this._wrap(b.map(this,a,e),this)},forEach:function(a,b){s(this,a,b);return this},filter:function(a){var e=arguments,f=this,g=0;if("string"==typeof a){f=w._filterResult(this,e[0]);if(1==e.length)return f._stash(this);g=1}return this._wrap(b.filter(f,e[g],e[g+1]),
this)},instantiate:function(a,b){var f=e.isFunction(a)?a:e.getObject(a),b=b||{};return this.forEach(function(a){new f(b,a)})},at:function(){var a=new this._NodeListCtor(0);s(arguments,function(b){0>b&&(b=this.length+b);this[b]&&a.push(this[b])},this);return a._stash(this)}});var w=l(k,u);g.query=l(k,function(a){return u(a)});w.load=function(a,b,e){h.load(a,b,function(a){e(l(a,u))})};g._filterQueryResult=w._filterResult=function(a,b,e){return new u(w.filter(a,b,e))};g.NodeList=w.NodeList=u;return w})},
"dojox/grid/data/Mixer":function(){define("dojox/grid/data/Mixer",["dojo/_base/declare","dojo"],function(g,j){var f=g("dojox.grid.data.Mixer",null,{constructor:function(){this.defaultValue={};this.values=[]},count:function(){return this.values.length},clear:function(){this.values=[]},build:function(a){var b=j.mixin({owner:this},this.defaultValue);b.key=a;return this.values[a]=b},getDefault:function(){return this.defaultValue},setDefault:function(a){for(var b=0,e;e=arguments[b];b++)j.mixin(this.defaultValue,
e)},get:function(a){return this.values[a]||this.build(a)},_set:function(a,b){for(var e=this.get(a),f=1;f<arguments.length;f++)j.mixin(e,arguments[f]);this.values[a]=e},set:function(){if(!(1>arguments.length)){var a=arguments[0];if(j.isArray(a)){a.length&&a[0]["default"]&&this.setDefault(a.shift());for(var b=0,e=a.length;b<e;b++)this._set(b,a[b])}else this._set.apply(this,arguments)}},insert:function(a,b){a>=this.values.length?this.values[a]=b:this.values.splice(a,0,b)},remove:function(a){this.values.splice(a,
1)},swap:function(a,b){dojox.grid.arraySwap(this.values,a,b)},move:function(a,b){dojox.grid.arrayMove(this.values,a,b)}});dojox.grid.data.compare=function(a,b){return a>b?1:a==b?0:-1};return f})},"ws/calendar/EditCalendar":function(){define("ws/calendar/EditCalendar","dojo/_base/declare,dojo/text!ws/calendar/EditCalendar.html,dojo/text!ws/calendar/EditCalendar.css,dojo,dijit,dijit/_Widget,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,ws/address/AddressModel,ws/mail/MailModel,ws/widget/WSSelect,dijit/layout/BorderContainer,ws/string,ws/address/SingleAddressField,ws/calendar/calutil,ws/reporting,ws/widget/Pane,ws/widget/Dialogs,ws/widget/DefaultTextbox,ws/calendar/ColorPicker,ws/widget/Checkbox,ws/widget/Button,ws/widget/WSToolbar,ws/settings".split(","),
function(g,j,f,a,b,e,h,k,l,n,m){function q(a,b,e){this.screenName=a;this.nScreenName=b;this.hasWriteAccess=e;this.initHasWriteAccess=-1;this.deleted=!1}return g([e,h,k],{templateString:j,css:{templateString:f},_earlyTemplatedStartup:!0,calId:null,calTicket:null,lastTicket:null,reportSubdepartment:"Calendar",sendFailedList:null,last_clicked:0,removeEmailAddrDomain:!1,defaultCalColor:"#0360EB",ScreenNameRegexp:/^[a-zA-Z]{1}[a-zA-Z\d]{2,15}$/,currentScreenName:null,sharingMap:null,addressModel:null,
startup:function(){if(null!=ws.CalSolo)this.rightBlock.style.display="none",this.leftBlock.style.marginRight="0",a.addClass(this.leftBlock,"editCalLeftBlock"),this.personalCalendarHeader.innerHTML=Config.Strings.EditCalendarHeader;else if(!Config.EnableCalendarDirectoryURL||!Config.EventDirectoryURL)this.rightBlock.style.display="none",this.leftBlock.style.marginRight="0";this.currentScreenName=this.normalizedScreenName(ws.UserContext.ActiveScreenName);this.sharingMap={};this.sendFailedList={};this.addressModel=
new l;this.mailModel=new n;if(null!=ws.CalSolo)ws.CalSolo.setMailModel(this.mailModel),this.reportSubdepartment="Standalone Calendar";this.calTypeOffButton.checked=!0;this.hideAddressArea();a.subscribe("AddressFieldFocusChange",this,"onScreenNameFocus");a.subscribe("AddressFieldBlurChange",this,"onScreenNameBlur");a.subscribe("AddressFieldKeyPressHandle",this,"onScreenNameKeyPress");a.addClass(this.screenName.domNode,"screenNameInput");a.addClass(this.screenName.domNode,"defaultInputColor");this.screenName.domNode.style.width=
"310px";this.screenName.domNode.value=Config.Strings.EnterEmailAddress;this.connect(this.colorPicker,"onColorSelected","changeButtonState")},setCalId:function(a){this.calId=a},getCalId:function(){return this.calId},initEditCalendar:function(){this.reset();var a=this.model.calendarEnum,b=this.model.calendars;if(b&&a){var e=b[this.calId];this.calendarName.setValue(e[a.displayName]);this.readOnlyCalendarName.innerHTML=this.calendarName.getValue();this.calendarName.setOrigValue(this.calendarName.getValue());
this.colorPicker.setSelectedColor(e[a.color],!0);var b=e[a.calType],f=e[a.writable];e[a.worldReadable]?(this.lastTicket=this.calTicket=e[a.ticket],null!=this.calTicket&&0<this.calTicket.length?(this.calTypePrivateButton.checked=!0,this.privateOptionSelected(null,!0)):(this.calTypePublicButton.checked=!0,this.publicOptionSelected(null,!0))):(this.calTypeOffButton.checked=!0,this.offOptionSelected(null,!0));0==b?this.deleteCalendar.hide():this.deleteCalendar.show();this.accessLevel.style.display="";
ws.html.setInnerText(this.accessLevelValue,f?Config.Strings.Cal_EditCalendar_AccessLevel_ReadWrite:Config.Strings.Cal_EditCalendar_AccessLevel_ReadOnly);this.shareCalSeparator1.style.display="none";this.publishRow.style.display="none";this.shareCalSeparator2.style.display="none";this.shareCalendarRow.style.display="none";this.screenNameRow.style.display="none";this.readOnlyCalendarName.style.display="none";this.calendarName.domNode.style.display="none";if(2==b||!f)this.readOnlyCalendarName.style.display=
"";else{this.calendarName.domNode.style.display="";this.calendarName.domNode.disabled=!1;this.calendarName.select();if(Config.EnableCalendarPublishTab)this.shareCalSeparator1.style.display="",this.publishRow.style.display="";if(Config.EnableCalendarSharingTab){this.shareCalSeparator2.style.display="";this.shareCalendarRow.style.display="";this.screenNameRow.style.display="";var f=e[a.readOnlyList],g=null,b={};if(f){g=f.split(",");for(f=0;f<g.length;f++){var h=g[f];if(h){var k=this.normalizedScreenName(h),
h=new q(h,k,!1);h.initHasWriteAccess=h.hasWriteAccess;b[k]=h}}}e=e[a.readWriteList];a=null;if(e){a=e.split(",");for(f=0;f<a.length;f++)if(h=a[f])k=this.normalizedScreenName(h),h=new q(h,k,!0),h.initHasWriteAccess=h.hasWriteAccess,b[k]=h}var a=[],j;for(j in b)a[a.length]=j;a.sort();for(f=0;f<a.length;f++)h=b[a[f]],this.addScreenNameRow(h.nScreenName,h.hasWriteAccess),this.sharingMap[h.nScreenName]=h}}ws.reporting.report("Edit Calendar",this.reportSubdepartment)}},onShow:function(){this.initEditCalendar();
this.onResized()},reset:function(){this.screenName.domNode.value=Config.Strings.EnterEmailAddress;a.addClass(this.screenName.domNode,"defaultInputColor");this.changeButtonState(!1);this.deleteAllScreenNameRows();this.showErrorCalendarName(!1);this.showErrorScreenName(!1);this.calTypeOffButton.checked=!0;this.sharingMap={}},getCalendarList:function(){this.model.getData()},setModel:function(a){this.model=a;this.model.calendars||this.getCalendarList()},changeButtonState:function(a){a?this.updateCalendar.enable():
a||this.updateCalendar.disable();this.dirty=a},onResetPrivateLink:function(){ws.widget.Dialogs.ok(Config.Strings.ConfirmResetCalAddressText,a.hitch(this,function(a){a&&this.resetPrivateLink()}),!0)},resetPrivateLink:function(){this.calTicket=ws.calendar.calutil.getNewCalTicket();this.pubCalLink.innerHTML=this.calId?ws.calendar.calutil.getPublicCalendarURL(this.calId,this.calTicket):"";this.pubCalLinkData.innerHTML=this.calId?ws.calendar.calutil.getPublicCalendarData(this.calId,this.calTicket):"";
this.calTypePrivateButton.checked=!0;this.changeButtonState(!0)},hideAddressArea:function(){this.calTypeInfo.style.display="none";this.publishText.style.display="none";this.publishTextData.style.display="none";this.resetAddressButton.hide()},showAddressArea:function(a){this.calTypeInfo.style.display="";if(Config.EnableCalendarPublicHTMLURL)this.publishText.style.display="";this.publishTextData.style.display="";a?this.resetAddressButton.show():this.resetAddressButton.hide()},offOptionSelected:function(b,
e){e?this._selectOffOption(b,e):0!=this.last_clicked&&ws.widget.Dialogs.ok(Config.Strings.ConfirmAccessLossText,a.hitch(this,function(a){if(a)this._selectOffOption(b,e);else if(2==this.last_clicked)this.calTypePublicButton.checked=!0;else if(1==this.last_clicked)this.calTypePrivateButton.checked=!0}),!0)},_selectOffOption:function(a,b){b||this.changeButtonState(!0);this.hideAddressArea();this.last_clicked=0},privateOptionSelected:function(b,e){this.calTypeText.innerHTML=Config.Strings.PrivateCalSelectedText;
this.calTypeText.style.display="";e?this._selectPrivateOption(b,e):2==this.last_clicked?ws.widget.Dialogs.ok(Config.Strings.ConfirmAccessLossText,a.hitch(this,function(a){if(a)this._selectPrivateOption(b,e);else if(2==this.last_clicked)this.calTypePublicButton.checked=!0}),!0):0==this.last_clicked&&this._selectPrivateOption(b,e)},_selectPrivateOption:function(a,b){b||this.changeButtonState(!0);if(this.calId){if(null==this.calTicket)this.calTicket=ws.calendar.calutil.getNewCalTicket();this.pubCalLink.innerHTML=
this.calId?ws.calendar.calutil.getPublicCalendarURL(this.calId,this.calTicket):"";this.pubCalLinkData.innerHTML=this.calId?ws.calendar.calutil.getPublicCalendarData(this.calId,this.calTicket):""}this.showAddressArea(!0);this.last_clicked=1},publicOptionSelected:function(a,b){this.calTypeText.innerHTML=Config.Strings.PublicCalSelectedText;this.calTypeText.style.display="";b||this.changeButtonState(!0);this.pubCalLink.innerHTML=this.calId?ws.calendar.calutil.getPublicCalendarURL(this.calId,null):"";
this.pubCalLinkData.innerHTML=this.calId?ws.calendar.calutil.getPublicCalendarData(this.calId,null):"";this.showAddressArea(!1);this.last_clicked=2},openEmailWindowData:function(){if(this.dirty)this.onUpdateCalendar(!0);var b=ws.calendar.calutil.getPublicCalendarData(this.calId,this.calTypePrivateButton.checked?this.calTicket:null),e=ws.string.substituteParams(Config.Strings.PubCalEmailSubject2,this.calendarName.getValue()),f=ws.string.substituteParams("<a href='{0}'>{1}</a>",b,this.calendarName.getValue()),
g=(ws.string.substituteParams(Config.Strings.PubCalEmailBody2,f,ws.UserContext.ActiveScreenName)+"<small>"+ws.string.substituteParams(Config.Strings.PubCalEmailFooter2,b)+"</small>").replace(/\\n/g,"<br>"),b=a.hitch(this,function(a){a.reset({subject:e,body:g,dontAddSignature:!0,hideIMButton:!0})});ws.CalSolo?ws.CalSolo.popupCompose(b):ws.WebSuite.getCompose("calendar",b)},openEmailWindow:function(){if(this.dirty)this.onUpdateCalendar(!0);var b=ws.calendar.calutil.getPublicCalendarURL(this.calId,this.calTypePrivateButton.checked?
this.calTicket:null),e=ws.string.substituteParams(Config.Strings.PubCalEmailSubject,this.calendarName.getValue()),f=ws.string.substituteParams("<a href='{0}'>{1}</a>",b,this.calendarName.getValue()),g=(ws.string.substituteParams(Config.Strings.PubCalEmailBody,f,ws.UserContext.ActiveScreenName)+"<small>"+ws.string.substituteParams(Config.Strings.PubCalEmailFooter,b)+"</small>").replace(/\\n/g,"<br>"),b=a.hitch(this,function(a){a.reset({subject:e,body:g,dontAddSignature:!0,hideIMButton:!0})});ws.CalSolo?
ws.CalSolo.popupCompose(b):ws.WebSuite.getCompose("calendar",b)},onBrowserCalendars:function(){ws.io.openWindow(Config.EventDirectoryURL,"","status=yes,resizable=yes,menubar=yes,scrollbars=yes,location=yes,toolbar=yes,top=50,left=50")},grabFocus:function(b,e){(!e||a.isMoz)&&b&&b.focus()},onCalNameChange:function(){""==this.calendarName.getValue()?this.changeButtonState(!1):this.changeButtonState(!0);this.showErrorCalendarName(!1)},onScreenNameFocus:function(){if(a.hasClass(this.screenName.domNode,
"defaultInputColor"))this.screenName.domNode.value="",this.grabFocus(this.screenName.domNode,!0),a.removeClass(this.screenName.domNode,"defaultInputColor")},onScreenNameBlur:function(){if(""==a.trim(this.screenName.domNode.value))this.screenName.domNode.value=Config.Strings.EnterEmailAddress,a.addClass(this.screenName.domNode,"defaultInputColor"),a.removeClass(this.addImage,"wsLargeAdd"),a.addClass(this.addImage,"wsLargeAddDisabled")},onScreenNameKeyPress:function(b,e,f){!f&&e==a.keys.ENTER?(this.onAddScreenName(),
this.onScreenNameFocus()):(this.changeButtonState(!0),this.showErrorScreenName(!1),a.removeClass(this.addImage,"wsLargeAddDisabled"),a.addClass(this.addImage,"wsLargeAdd"))},getSelectedColor:function(){return this.selectedColor||this.defaultCalColor},normalizedScreenName:function(a){return!a?null:a.replace(/\s/g,"").toLowerCase()},showErrorCalendarName:function(a,b){a?(this.errorCalendarName.innerHTML=b,this.errorCalendarName.style.display=""):(this.errorCalendarName.innerHTML="",this.errorCalendarName.style.display=
"none")},showErrorScreenName:function(a,b){a?(this.errorScreenName.innerHTML=b,this.errorScreenName.style.display=""):(this.errorScreenName.innerHTML="",this.errorScreenName.style.display="none")},isValidScreenName:function(a,b){if(!this.ScreenNameRegexp.test(b)){var e=a.match(/(.+)@(.+)\.(.+)/);if(null==e||4!=e.length)return this.showErrorScreenName(!0,Config.Strings.InvalidScreenNameOrEmail),!1}if(null!=this.sharingMap[b]&&!this.sharingMap[b].deleted)return this.showErrorScreenName(!0,a+" "+Config.Strings.DuplicateScreenNameOrEmail),
!1;return b==this.currentScreenName?(this.showErrorScreenName(!0,Config.Strings.OwnerScreenNameOrEmail),!1):!0},getSelectOption:function(a){var b=[];b.push({value:a+":View",display:Config.Strings.ViewOnly+"&nbsp;&nbsp"});b.push({value:a+":ViewAndEdit",display:Config.Strings.ViewAndEdit+"&nbsp;&nbsp"});return b},addScreenNameRow:function(b,e){if(0==this.screenNameTableBody.getElementsByTagName("tr").length)this.screenNameTableHead.style.display="";var f=ws.calendar.calutil.getSharingTableRowNode(b,
this),g=f.childNodes[2].getElementsByTagName("div")[0];a.connect(g,"onclick",this,"onDeleteScreenName");f.delDiv=g;this.screenNameTableBody.appendChild(f);g={options:this.getSelectOption(b)};f.perSelector=new m(g);f.childNodes[3].appendChild(f.perSelector.domNode);f.perSelector.domNode.style.border="0px";f.perSelector.domNode.style.backgroundColor="transparent";e?f.perSelector.setOption(1):f.perSelector.setOption(0);f.perSelector.valueChanged=a.hitch(this,"onAccessLevelChanged",f.perSelector);(f=
this.addressModel.getRecordByScreenName(b))&&this.screenNameFound(f)},onAddScreenName:function(){if(!a.hasClass(this.addImage,"wsLargeAddDisabled")){var b=this.screenName.domNode.value,e=this.normalizedScreenName(b),f=!0;if(a.hasClass(this.screenName.domNode,"defaultInputColor"))this.showErrorScreenName(!0,Config.Strings.EMPTY_ADD_MESSAGE),f=!1;else if(this.removeEmailAddrDomain){if((f=ws.presence.parseEmailAddress(b))&&-1!=a.indexOf(Config.KnownDomains,f.domain))b=f.name,e=this.normalizedScreenName(b);
f=this.isValidScreenName(b,e)}if(f)b=new q(b,e,!1),this.sharingMap[e]=b,this.addScreenNameRow(e),this.screenName.domNode.value="",a.addClass(this.screenName.domNode,"defaultInputColor");this.screenName.domNode.focus();a.publish("WSFeedbackStart",[Config.Strings.SharedContactAdded,!0])}},onAccessLevelChanged:function(a,b){var e=a.currentValue,f=e.indexOf(":"),g=e.substring(0,f),e=e.substring(f+1);if(g=this.sharingMap[g])g.hasWriteAccess="View"==e?!1:!0;b||this.changeButtonState(!0)},onMouseOverScreenNameRow:function(b){b=
b.currentTarget;a.addClass(b,"screenNameRowHover");b.childNodes[2].getElementsByTagName("div")[0].style.display=""},onMouseOutScreenNameRow:function(b){b=b.currentTarget;a.removeClass(b,"screenNameRowHover");b.childNodes[2].getElementsByTagName("div")[0].style.display="none"},findParentRow:function(a){for(;null!=a.parentNode&&!(a=a.parentNode,"tr"==a.tagName.toLowerCase()););return a},onDeleteScreenName:function(b){this.deleteScreenNameRow(this.findParentRow(b.currentTarget));if(0==this.screenNameTableBody.getElementsByTagName("tr").length)this.screenNameTableHead.style.display=
"";this.changeButtonState(!0);a.publish("WSFeedbackStart",[Config.Strings.SharedContactDeleted,!0])},deleteAllScreenNameRows:function(){for(var a=this.screenNameTableBody.getElementsByTagName("tr"),b=a.length-1;0<=b;b--)this.deleteScreenNameRow(a[b]);this.screenNameTableHead.style.display="none"},deleteScreenNameRow:function(b){if(b){if(null!=b.perSelector)b.perSelector.destroy(),b.perSelector=null;if(null!=b.delDiv)a.connect(b.delDiv,"onclick",this,"onDeleteScreenName"),b.delDiv=null;if(null!=b.nSn)this.sharingMap[b.nSn].deleted=
!0;null!=b.rowIndex&&this.screenNameTable.deleteRow(b.rowIndex)}},backToCalendarView:function(){ws.reporting.skipBeaconReporting=!0;this.closeCB()},isValidCalendarName:function(a){return ws.string.sanitize(a).length==a.length&&-1==a.search(/[\|~\^:\/\"]/)},checkCalendarName:function(a,b){var e=!0;if(1>a.length)this.showErrorCalendarName(!0,Config.Strings.EmptyCalendarName),this.calendarName.focus(),e=!1;else if(40<a.length)this.showErrorCalendarName(!0,Config.Strings.CalNameTooLongOrInvalidChars),
this.calendarName.focus(),e=!1;else if(this.isValidCalendarName(a)){var f=this.model.calendarEnum,g=this.model.calendars;if(g&&f)for(var h in g){var k=g[h];h=k[f.id];if(h!=b){var j=k[f.displayName];if(0==k[f.compType]&&a==j&&j!=this.calendarName.getOrigValue()){this.showErrorCalendarName(!0,Config.Strings.DuplicateCalendarName);this.calendarName.focus();e=!1;break}}}}else this.showErrorCalendarName(!0,Config.Strings.CalNameTooLongOrInvalidChars),this.calendarName.focus(),e=!1;return e},resetAccessList:function(){for(var a in this.sharingMap){var b=
this.sharingMap[a];if(null!=b)b.deleted?this.sharingMap[a]=null:b.initHasWriteAccess=b.hasWriteAccess}},getAccessList:function(){var a="",b="",e="",f;for(f in this.sharingMap){var g=this.sharingMap[f];g&&(g.deleted?-1!=g.initHasWriteAccess&&(e+=g.nScreenName+","):g.hasWriteAccess?b+=g.nScreenName+",":a+=g.nScreenName+",")}return[a,b,e]},sendSharingMessage:function(a,b,e,f,g){for(var a=a.split(","),h=0;h<a.length;h++)a[h]&&!this.sendFailedList[a[h]]&&this._sendSharingMessage(a[h],b,e,f,g)},_sendSharingMessage:function(b,
e,f,g,h){g=g.replace(/\\n/g,"<br>");h||(h=g);this.mailModel.sendMessage({content:{From:ws.UserContext.UserAddress,To:b,Subject:f,RichBody:g,PlainBody:h,RichEdit:!0},error:a.hitch(this,function(f){window.ws_ErrLgr&&!f&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.show - Error Handler for mailModel.sendMessage-_sendSharingMessage file:EditCalendar.js");this.sendFailedList[b]=!0;"delete"!=e&&ws.widget.Dialogs.show(Config.Strings.CalShareMailSentError+"<br><br>"+(!f?"":f),[Config.Strings.OK],
a.hitch(this,function(){this.backToCalendarView()}))})})},notifyBuddy:function(b,e,f){var g=b[0],h=b[1],b=b[2],k="",j="",l="",m="",n="",q="",I="",J="",f=ws.calendar.calutil.encode64(f),L=ws.calendar.calutil.getSubscribeCalendarURL(f,this.calTicket),f=ws.string.substituteParams("<a href='{0}'>",L),U=ws.string.substituteParams("'{0}'",L),L=ws.string.substituteParams("{0}",L),O=a.trim(this.calendarName.getValue());if(e)m=g,n=h;else{e=g.split(",");for(g=0;g<e.length;g++)(k=this.sharingMap[e[g]])&&!k.deleted&&
(-1==k.initHasWriteAccess?m+=k.nScreenName+",":k.initHasWriteAccess!=k.hasWriteAccess&&(q+=k.nScreenName+","));e=h.split(",");for(g=0;g<e.length;g++)(k=this.sharingMap[e[g]])&&!k.deleted&&(-1==k.initHasWriteAccess?n+=k.nScreenName+",":k.initHasWriteAccess!=k.hasWriteAccess&&(I+=k.nScreenName+","))}""!=m&&(J="addView",l=ws.string.substituteParams(Config.Strings.CalShareInvitationPlainContent,Config.Strings.ViewOnly.toLowerCase(),O,U,ws.UserContext.ActiveScreenName)+"<br><br><small>"+ws.string.substituteParams(Config.Strings.CalShareInvitationFooter,
L)+"</small>",j=ws.string.substituteParams(Config.Strings.CalShareInvitationContent,"<b>"+Config.Strings.ViewOnly.toLowerCase()+"</b>",O,f,"</a>",ws.UserContext.ActiveScreenName)+"<br><br><small>"+ws.string.substituteParams(Config.Strings.CalShareInvitationFooter,L)+"</small>",k=ws.string.substituteParams(Config.Strings.CalShareInvitationSubject,O),this.sendSharingMessage(m,J,k,j,l));""!=n&&(J="addEdit",l=ws.string.substituteParams(Config.Strings.CalShareInvitationPlainContent,Config.Strings.ViewAndEdit.toLowerCase(),
O,U,ws.UserContext.ActiveScreenName)+"<br><br><small>"+ws.string.substituteParams(Config.Strings.CalShareInvitationFooter,L)+"</small>",j=ws.string.substituteParams(Config.Strings.CalShareInvitationContent,"<b>"+Config.Strings.ViewAndEdit.toLowerCase()+"</b>",O,f,"</a>",ws.UserContext.ActiveScreenName)+"<br><br><small>"+ws.string.substituteParams(Config.Strings.CalShareInvitationFooter,L)+"</small>",k=ws.string.substituteParams(Config.Strings.CalShareInvitationSubject,O),this.sendSharingMessage(n,
J,k,j,l));""!=q&&(J="updateView",j=ws.string.substituteParams(Config.Strings.CalShareUpdateContent,O,"<b>"+Config.Strings.ViewOnly.toLowerCase()+"</b>"),k=ws.string.substituteParams(Config.Strings.CalShareUpdateSubject,O),this.sendSharingMessage(q,J,k,j));""!=I&&(J="updateEdit",j=ws.string.substituteParams(Config.Strings.CalShareUpdateContent,O,"<b>"+Config.Strings.ViewAndEdit.toLowerCase()+"</b>"),k=ws.string.substituteParams(Config.Strings.CalShareUpdateSubject,O),this.sendSharingMessage(I,J,k,
j));""!=b&&(J="delete",j=ws.string.substituteParams(Config.Strings.CalShareDeletionContent,"",O),k=ws.string.substituteParams(Config.Strings.CalShareDeletionSubject,O),this.sendSharingMessage(b,J,k,j))},onDeleteCalendar:function(){var b=this.model.calendarEnum,e=this.model.calendars,f=!1;if(e&&b){var e=e[this.calId],g=e[b.calType],f=null!=e?e[b.worldReadable]:!1;!f&&2!=g&&(f=e[b.readWriteList],f=e[b.readOnlyList]||f)}ws.widget.Dialogs.ok(f?Config.Strings.ConfirmCalDeleteShared:Config.Strings.ConfirmCalDelete,
a.hitch(this,function(a){a&&this.executeDeleteCalendar()}),!0)},executeDeleteCalendar:function(){var b=this.calendarName.getValue(),e={};e.calid=this.calId;e.displayName=b;e.components=!1;e.index=!1;e.enums=!1;e.dayBucketIndex=!1;e.loadCallback=function(){a.publish("WSFeedbackStart",[ws.string.substituteParams(Config.Strings.CalendarDeleted,b),!0])};e.errorCallback=function(){a.publish("WSFeedbackEnd",[Config.Strings.Loading])};this.model.deleteCalendar(e);a.publish("EditCalendar/Delete");this.dirty=
!1;this.backToCalendarView()},onUpdateCalendar:function(b){var e=a.trim(this.calendarName.getValue());if(this.checkCalendarName(e,this.calId)){var f={};f.calid=this.calId;f.color=this.colorPicker.getSelectedColor();f.displayName=e;f.selected=!0;var g=this.getAccessList();f.readOnlyList=g[0];f.readWriteList=g[1];f.dtstart=this.model.dtstart?ws.date.formatISO8601(this.model.dtstart):null;f.dtend=this.model.dtend?ws.date.formatISO8601(this.model.dtend):null;f.worldReadable=!this.calTypeOffButton.checked;
if(this.calTypePrivateButton.checked&&null!=this.calTicket)f.ticket=this.calTicket;if(this.calTypePublicButton.checked&&null!=this.lastTicket)f.ticket="";f.loadCallback=a.hitch(this,function(){this.resetAccessList();a.publish("WSFeedbackStart",[ws.string.substituteParams(Config.Strings.CalendarUpdated,e),!0])});this.model.saveCalendar(f);this.dirty=!1;b&&this.backToCalendarView()}},confirmClose:function(a){this.dirty?ws.widget.Dialogs.ok(Config.Strings.ConfirmSaveCalendarSetting,function(b){b&&a&&
a()},!0):a&&a()},confirmSwitchEditCalendar:function(a){var b=function(a,b){a.setCalId(b);a.initEditCalendar()},e=this,f=Config.Strings.ConfirmSaveSettings,f=f.replace(/\\n/g,"\n");this.dirty?ws.widget.Dialogs.ok(f,function(f){if(f)e.onUpdateCalendar(!1);b(e,a)},!0):b(e,a)},screenNameFound:function(a){if(this.isShowing()&&a.name)for(var b=this.screenNameTableBody.getElementsByTagName("tr"),e=0;e<b.length;e++)if(b[e].nSn.toLowerCase()==a.screenName.toLowerCase()){b[e].childNodes[1].childNodes[0].innerHTML=
a.firstName&&a.lastName?a.firstName+" "+a.lastName:a.firstName?a.firstName:a.lastName?a.lastName:a.nickName?a.nickName:a.screenName;break}}})})},"url:ws/calendar/EditCalendar.html":'<div>\n\t<div class="editCalendar" data-dojo-type="dijit/layout/BorderContainer" data-dojo-attach-point="layoutWidget" style="height: 100%; width: 100%;">\n        <div data-dojo-type="ws/widget/WSToolbar" data-dojo-attach-point="toolbar" data-dojo-props="region:\'top\'" vizType="Controls">\n            <div data-dojo-type="ws/widget/Button" data-dojo-attach-event="onClick:backToCalendarView" title="${Cancel}" iconClassName="cancelIcon" data-dojo-props="toolbarPosition: \'right\'"></div>\n        </div>\n\t\t<div data-dojo-type="ws/widget/Pane" data-dojo-props="region:\'center\'" class="editCalendarDiv" data-dojo-attach-point="editCalendarContent">\n            <div style="position:relative;" data-dojo-attach-point="editCalendarTable">\n                <div data-dojo-attach-point="leftBlock" class="editCalLeftBlock">\n                    <div class="inputData">\n                        <h3 data-dojo-attach-point="personalCalendarHeader" class="title">${EditCalendarHeader}</h3>\n                        <table border="0" cellpadding="1" cellspacing="5">\n                            <tr>\n                                <td colspan="1">\n                                   <div data-dojo-attach-point="errorCalendarName" class="error"></div>\n                                    <div data-dojo-type="ws/widget/DefaultTextbox" data-dojo-attach-point="calendarName" data-dojo-attach-event="onChange: onCalNameChange" maxlength="255" defaultValue="${EnterCalendarName}"></div>\n                                   <div class="calendarName" style="display:none" data-dojo-attach-point="readOnlyCalendarName"></div>\n                                </td>\n                                <td colspan="1" width="100%" style="padding-left:0px;">\n                                    <div data-dojo-type="ws/calendar/ColorPicker" data-dojo-attach-point="colorPicker"></div>\n                                </td>\n                            </tr>\n                            <tr height="12" data-dojo-attach-point="accessLevelSeparator1">\n                               <td colspan="2">\n                                  <div class="wsSeparator"></div>\n                               </td>\n                            </tr>\n                            <tr>\n                                <td colspan="2">\n                                <div style="display:none; white-space:nowrap;" data-dojo-attach-point="accessLevel">\n                                    <div class="labelHeading">${Cal_EditCalendar_AccessLevel}:</div>\n                                    <span class="accessLevelValue" data-dojo-attach-point="accessLevelValue"></span>\n                                </div>\n                                </td>\n                            </tr>\n                            <tr height="25" data-dojo-attach-point="shareCalSeparator1">\n                               <td colspan="2">\n                                  <div class="wsSeparator"></div>\n                               </td>\n                            </tr>\n                            <\!-- publish row ---\>\n                            <tr data-dojo-attach-point="publishRow">\n                                <td colspan="2">\n                                    <div class="webIcalAccess labelHeading">${CalAddressLabelHeading}</div>\n                                    <div class="calLinkOptions">\n                                       <div>${CalAddressOptionLabel}</div>\n                                       <input name="calTypeSelect" type="radio" data-dojo-attach-event="onclick: offOptionSelected" data-dojo-attach-point="calTypeOffButton"/>${CalAddressOptionOff}&nbsp;&nbsp;&nbsp;\n                                       <input name="calTypeSelect" type="radio" data-dojo-attach-event="onclick: privateOptionSelected" data-dojo-attach-point="calTypePrivateButton"/>${CalAddressOptionPrivate}&nbsp;&nbsp;\n                                       <input name="calTypeSelect" type="radio" data-dojo-attach-event="onclick: publicOptionSelected" data-dojo-attach-point="calTypePublicButton"/>${CalAddressOptionPublic}\n                                    </div>\n                                    <div class="calTypeMessage" data-dojo-attach-point="calTypeInfo">\n                                       <span data-dojo-attach-point="calTypeText"></span>\n                                    </div>\n                                    <div class="calLinkBlock" data-dojo-attach-point="publishText">\n                                        <div class="labelHeading">HTML:&nbsp;<span class="normalText">${AccessUrlText}</span></div>\n                                        <div class="pubCalLinkText" data-dojo-attach-point="pubCalLink"></div>\n                                        <div data-dojo-attach-point="mailHtmlLink" class="navItem" data-dojo-attach-event="onclick: openEmailWindow">\n                                           <div class="text">${EmailThisText}</div>\n                                        </div>\n                                    </div>\n                                    <div class="calLinkBlock" data-dojo-attach-point="publishTextData">\n                                        <div class="labelHeading">ICAL:&nbsp;<span class="normalText">${DownloadCalText}</span></div>\n                                        <div class="pubCalLinkText" data-dojo-attach-point="pubCalLinkData"></div>\n                                        <div data-dojo-attach-point="mailiCalLink" class="navItem" data-dojo-attach-event="onclick: openEmailWindowData">\n                                           <div class="text">${EmailThisText}</div>\n                                        </div>\n                                    </div>\n                                    <div data-dojo-type="ws/widget/Button" data-dojo-attach-point="resetAddressButton" data-dojo-attach-event="onClick: onResetPrivateLink">${ResetAddressButtonLabel}</div>\n                                </td>\n                            </tr>\n                            <tr height="25" data-dojo-attach-point="shareCalSeparator2">\n                               <td colspan="2">\n                                 <div class="wsSeparator"></div>\n                               </td>\n                            </tr>\n                            <tr data-dojo-attach-point="shareCalendarRow">\n                                <td colspan="2">\n                                    <div class="labelHeading">${ShareMyCalenadrWith}</div>\n                                    <div data-dojo-attach-point="errorScreenName" class="error"></div>\n                                    <div class="addScreenName">\n                                        <div data-dojo-type="ws/address/SingleAddressField" data-dojo-attach-point="screenName"></div>\n                                        <div data-dojo-attach-event="onclick: onAddScreenName"><img src="${spacer}" class="wsLargeAddDisabled" data-dojo-attach-point="addImage" style="position: absolute; top: 0px"></div>\n                                    </div>\n                                </td>\n                            </tr>\n                            <tr data-dojo-attach-point="screenNameRow">\n                                <td colspan="2">\n                                    <table data-dojo-attach-point="screenNameTable" border=0 cellpadding=0 cellspacing=0>\n                                    <thead data-dojo-attach-point="screenNameTableHead" style="display:none">\n                                        <tr>\n                                        <td class="labelHeading" style="padding-left:8px" colSpan="3">${CalShareName}</td>\n                                        <td ><b style="padding-left:5px">${CalSharePermission}</b></td>\n                                        </tr>\n                                    </thead>\n                                    <tbody data-dojo-attach-point="screenNameTableBody" class="screenNameTableBody">\n                                    </tbody>\n                                    </table>\n                                </td>\n                            </tr>\n                            <tr>\n                                <td colspan="2">\n                                    <div class="buttonGroup" style="margin-top:20px;">\n                                        <div data-dojo-type="ws/widget/Button" data-dojo-attach-event="onClick: onUpdateCalendar" data-dojo-attach-point="updateCalendar">${Save}</div>\n                                        <div data-dojo-type="ws/widget/Button" data-dojo-attach-event="onClick: onDeleteCalendar" data-dojo-attach-point="deleteCalendar">Delete Calendar</div>\n                                        <div data-dojo-type="ws/widget/Button" data-dojo-attach-event="onClick: backToCalendarView" data-dojo-attach-point="cancel" type="Bare">${Cancel}</div>\n                                    </div>\n                                </td>\n                            </tr>\n                        </table>\n                    </div>\n                </div>\n                <div data-dojo-attach-point="rightBlock" class="rightBlock">\n                    <h3 class="title">${PublishedCalendarHeader}</h3>\n                    ${PublishedCalendarText}<br />\n                    <ul>\n                        <li>${PublishedCalendarItem1}</li>\n                        <li>${PublishedCalendarItem2}</li>\n                        <li>${PublishedCalendarItem3}</li>\n                        <li>${PublishedCalendarItem4}</li>\n                    </ul>\n                    <div data-dojo-type="ws/widget/Button" data-dojo-attach-event="onClick: onBrowserCalendars">${BrowseCalendars}</div>\n                </div>\n            </div>\n\n\n\t\t</div>\n\t</div>\n</div>\n',
"dijit/_base/focus":function(){define("dijit/_base/focus","dojo/_base/array,dojo/dom,dojo/_base/lang,dojo/topic,dojo/_base/window,../focus,../main".split(","),function(g,j,f,a,b,e,h){e.focus=function(a){if(a){var f="node"in a?a.node:a,g=a.bookmark,a=a.openedForWindow,j=g?g.isCollapsed:!1;if(f){var q="iframe"==f.tagName.toLowerCase()?f.contentWindow:f;if(q&&q.focus)try{q.focus()}catch(s){}e._onFocusNode(f)}if(g&&b.withGlobal(a||b.global,h.isCollapsed)&&!j){a&&a.focus();try{b.withGlobal(a||b.global,
h.moveToBookmark,null,[g])}catch(o){}}}};e.watch("curNode",function(b,e,f){h._curFocus=f;h._prevFocus=e;f&&a.publish("focusNode",f)});e.watch("activeStack",function(a,b,e){h._activeStack=e});e.on("widget-blur",function(b,e){a.publish("widgetBlur",b,e)});e.on("widget-focus",function(b,e){a.publish("widgetFocus",b,e)});f.mixin(h,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return h.getBookmark().isCollapsed},getBookmark:function(){var a,f,g=b.doc.selection,h=e.curNode;if(b.global.getSelection){if(g=
b.global.getSelection())if(g.isCollapsed){if(a=h?h.tagName:"")if(a=a.toLowerCase(),"textarea"==a||"input"==a&&(!h.type||"text"==h.type.toLowerCase()))return g={start:h.selectionStart,end:h.selectionEnd,node:h,pRange:!0},{isCollapsed:g.end<=g.start,mark:g};a={isCollapsed:!0};if(g.rangeCount)a.mark=g.getRangeAt(0).cloneRange()}else f=g.getRangeAt(0),a={isCollapsed:!1,mark:f.cloneRange()}}else if(g){a=h?h.tagName:"";a=a.toLowerCase();if(h&&a&&("button"==a||"textarea"==a||"input"==a)){if(g.type&&"none"==
g.type.toLowerCase())return{isCollapsed:!0,mark:null};f=g.createRange();return{isCollapsed:f.text&&f.text.length?!1:!0,mark:{range:f,pRange:!0}}}a={};try{f=g.createRange(),a.isCollapsed=!("Text"==g.type?f.htmlText.length:f.length)}catch(j){return a.isCollapsed=!0,a}if("CONTROL"==g.type.toUpperCase())if(f.length){a.mark=[];g=0;for(h=f.length;g<h;)a.mark.push(f.item(g++))}else a.isCollapsed=!0,a.mark=null;else a.mark=f.getBookmark()}return a},moveToBookmark:function(a){var e=b.doc;if(a=a.mark)if(b.global.getSelection){if((e=
b.global.getSelection())&&e.removeAllRanges)a.pRange?(e=a.node,e.selectionStart=a.start,e.selectionEnd=a.end):(e.removeAllRanges(),e.addRange(a))}else if(e.selection&&a){var h;a.pRange?h=a.range:f.isArray(a)?(h=e.body.createControlRange(),g.forEach(a,function(a){h.addElement(a)})):(h=e.body.createTextRange(),h.moveToBookmark(a));h.select()}},getFocus:function(a,f){var g=!e.curNode||a&&j.isDescendant(e.curNode,a.domNode)?h._prevFocus:e.curNode;return{node:g,bookmark:g&&g==e.curNode&&b.withGlobal(f||
b.global,h.getBookmark),openedForWindow:f}},_activeStack:[],registerIframe:function(a){return e.registerIframe(a)},unregisterIframe:function(a){a&&a.remove()},registerWin:function(a,b){return e.registerWin(a,b)},unregisterWin:function(a){a&&a.remove()}});return h})},"dijit/a11y":function(){define("dijit/a11y","dojo/_base/array,dojo/_base/config,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-style,dojo/sniff,./main".split(","),function(g,j,f,a,b,e,h,k){var l=k._isElementShown=function(a){var f=
e.get(a);return"hidden"!=f.visibility&&"collapsed"!=f.visibility&&"none"!=f.display&&"hidden"!=b.get(a,"type")};k.hasDefaultTabStop=function(a){switch(a.nodeName.toLowerCase()){case "a":return b.has(a,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var e;try{var f=a.contentDocument;if("designMode"in f&&"on"==f.designMode)return!0;e=f.body}catch(g){try{e=a.contentWindow.document.body}catch(h){return!1}}return e&&("true"==e.contentEditable||
e.firstChild&&"true"==e.firstChild.contentEditable);default:return"true"==a.contentEditable}};var n=k.isTabNavigable=function(a){return b.get(a,"disabled")?!1:b.has(a,"tabIndex")?0<=b.get(a,"tabIndex"):k.hasDefaultTabStop(a)};k._getTabNavigable=function(a){function e(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&a.name&&a.name.toLowerCase()}var f,g,k,j,v,w,z={},x=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(!(1!=a.nodeType||9>=h("ie")&&"HTML"!==a.scopeName||
!l(a))){if(n(a)){var m=+b.get(a,"tabIndex");if(!b.has(a,"tabIndex")||0==m)f||(f=a),g=a;else if(0<m){if(!k||m<j)j=m,k=a;if(!v||m>=w)w=m,v=a}m=e(a);b.get(a,"checked")&&m&&(z[m]=a)}"SELECT"!=a.nodeName.toUpperCase()&&x(a)}};l(a)&&x(a);return{first:z[e(f)]||f,last:z[e(g)]||g,lowest:z[e(k)]||k,highest:z[e(v)]||v}};k.getFirstInTabbingOrder=function(b,e){var f=k._getTabNavigable(a.byId(b,e));return f.lowest?f.lowest:f.first};k.getLastInTabbingOrder=function(b,e){var f=k._getTabNavigable(a.byId(b,e));return f.last?
f.last:f.highest};return{hasDefaultTabStop:k.hasDefaultTabStop,isTabNavigable:k.isTabNavigable,_getTabNavigable:k._getTabNavigable,getFirstInTabbingOrder:k.getFirstInTabbingOrder,getLastInTabbingOrder:k.getLastInTabbingOrder}})},"url:ws/widget/SingleLineNotification.css":"","ws/dnd/NavigationDropTarget":function(){define("ws/dnd/NavigationDropTarget","dojo/_base/declare,dojo,ws/dnd/DropTarget,ws/dnd/HtmlDragManager,ws/html,ws/string".split(","),function(g,j,f){return g([f],{constructor:function(a,
b,e,f){if(0!=arguments.length)this.domNode=j.byId(a),b&&j.isString(b)&&(b=[b]),this.acceptedTypes=b||[],this.parentWidget=e,this.itemid=f,this.dragObjectClone=null,ws.dnd.dragManager.registerDropTarget(this)},onDragOver:function(a){if(!a.dragObjects||!a.dragObjects[0])return!1;if("myFolders"==this.itemid)return a.dragObjects[0].dragClone.className="gridDragObjectNormal",this.parentWidget.expandMyFolders()&&ws.dnd.dragManager.cacheTargetLocations(),!1;if(!this.accepts(a.dragObjects,!0))return a.dragObjects[0].dragClone.className=
"gridDragObjectBadDrop",this.dragObjectClone=a.dragObjects[0].dragClone,!1;j.addClass(this.domNode,"navTile24 navItemHover");a.dragObjects[0].dragClone.className="gridDragObjectGoodDrop";this.dragObjectClone=a.dragObjects[0].dragClone;return!0},onDragMove:function(){},onDragOut:function(){j.removeClass(this.domNode,"navTile24 navItemHover");if(this.dragObjectClone)this.dragObjectClone.className="gridDragObjectNormal",this.dragObjectClone=null},accepts:function(a,b){var e=this.inherited(arguments);
return!b?e&&j.every(a,function(a){return"message"==a.type}):e&&j.every(a,function(a){return"message"==a.type})&&-1!=j.indexOf(this.parentWidget.mailModel.getFoldersCanMoveTo(),this.itemid)},onDrop:function(a){var b;switch(a.dragObject.type){case 0:case 1:case 2:b=this.onDropCalendar(a);break;case "message":b=this.onDropMessage(a);break;default:b=!1}this.onDragOut(a);return b},onDropCalendar:function(a){var b=a.dragObject.dragSource.componentInstance;if(null==b)return!1;a=this.parentWidget.calendarModel;
b=a.components[b[a.indexEnum.id]];if(this.itemid==b[a.componentEnum.calid])return!1;b=a.getComponentArgs(b);b.calid=this.itemid;a.saveComponent(b);return!0},onDropMessage:function(a){var b=this.parentWidget.mailModel,a=b.getDatum(a.dragObject.dragSource.rowIndex,b.columns.UID),e=b.isAllSelected(),f=b.isSelected(a)?b.getSelectedUids():[a],g=b.getOpSize(f),a=b.getFolderByName(this.itemid).displayName,l=dijit.byId("messageList");if("Deleted"!=b.getCurrentFolder().type&&this.itemid==Config.DeletedItemsFolderName){var n=
null;a&&(n=1==g.opSize?ws.string.substituteParams(Config.Strings.MessageMoved,a):ws.string.substituteParams(Config.Strings.MessagesMoved,g.opSize,a));l.maybePreviewNextMessage(f);b.deleteMessages({uids:f,reason:"drptrsh",checkUndo:!0,isAllSel:e,load:j.hitch(this,function(a){if(n){var l=null;!Config.UseOMS&&(Config.EnableRestoreButton||Settings.ViewNewOld)?l=a.canUndo?j.hitch(this,"_restoreMessages",b,f,g):null:a.responseUIDs&&(l=a.canUndo?j.hitch(b,"undoMoveMessages",a.responseUIDs,Config.DeletedItemsFolderName):
null);j.publish("WSFeedbackStart",[n,!0,l])}e&&(b.activeCachedList.Clear({preserveSort:!0}),b.setFolder(b.getCurrentFolder().name,null,null,null,null,"descending",!0))}),error:function(a){window.ws_ErrLgr&&!a&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for model.deleteMessages-onDropMessage file:dnd/suite.js");ws.widget.Dialogs.ok(a||Config.Strings.ErrorDeleting)}})}else b.getCurrentFolder().name==Config.SpamFolderName&&this.itemid!=Config.SpamFolderName?(l.maybePreviewNextMessage(f),
this._reportSpamMessages(b,f,!1,g,!0)):this.itemid==Config.SpamFolderName?(l.maybePreviewNextMessage(f),this._reportSpamMessages(b,f,!0,g)):(l.maybePreviewNextMessage(f),this._moveMessages(b,f,a,g));return!0},_restoreMessages:function(a,b,e){a&&b&&a.restoreMessages({uids:b,folder:Config.DeletedItemsFolderName,load:j.hitch(this,function(){a.refetchFolderIndex(a.currentFolder);var b=1==e.opSize?Config.Strings.MessageRestored:ws.string.substituteParams(Config.Strings.MessagesRestored,e.opSize);j.publish("WSFeedbackStart",
[b,!0])}),error:function(a){window.ws_ErrLgr&&!a&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for model.restoreMessages-_restoreMessages file:dnd/suite.js");ws.widget.Dialogs.ok(a||Config.Strings.ErrorRestoring)}})},_reportSpamMessages:function(a,b,e,f,g){if(a&&b){var l=j.hitch(this,function(g,k,l,m,n){a.reportSpamMessages({checkUndo:e&&!l,uids:b,isSpam:e,destFolder:this.itemid,unsubscribe:l?l:null,load:j.hitch(this,function(o){var q=j.hitch(this,function(f,g){var h;
e?f._showSpamOffAlert&&!l?(h=1==g.opSize?Settings&&"Off"==Settings.PersonalAdaptiveSpamFilterLevel?l?ws.string.substituteParams(Config.Strings.UnsubConfirm,null!=n?n:m):Config.Strings.MessageMarkedSpam:Config.Strings.SD_spamfltroffMrkSpmFdbk:Settings&&"Off"==Settings.PersonalAdaptiveSpamFilterLevel?ws.string.substituteParams(Config.Strings.MessagesMarkedSpam,g.opSize):ws.string.substituteParams(Config.Strings.SD_spamfltroffMrkSpmManyFdbk,g.opSize),j.publish("WSFeedbackStart",[ws.string.unescapeXml(h),
!0,null])):(h=f.canUndo?j.hitch(a,"undoMoveMessages",f.responseUIDs,this.itemid):null,1==b.length?j.publish("WSFeedbackStart",[ws.string.unescapeXml(l?ws.string.substituteParams(Config.Strings.UnsubConfirm,null!=n?n:m):Config.Strings.MessageMarkedSpam),!0,h]):j.publish("WSFeedbackStart",[ws.string.unescapeXml(ws.string.substituteParams(Config.Strings.MessagesMarkedSpam,g.opSize)),!0,h])):(h=1==b.length?k&&"userrule"===u?Config.Strings.SD_fltrDelFdbk:k?Config.Strings.SD_stngChgdFdbk:Config.Strings.MessageMarkedNotSpam:
ws.string.substituteParams(Config.Strings.MessagesMarkedNotSpam,g.opSize),j.publish("WSFeedbackStart",[ws.string.unescapeXml(h),!0,null]))},o,f);o._showSpamOffAlert&&"nonSDdlg"===g?ws.widget.Dialogs.showSpamOffAlert(q):q()}),error:function(a){window.ws_ErrLgr&&!a&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for model.reportSpamMessages-_reportSpamMessages file:dnd/suite.js");ws.widget.Dialogs.ok((l?ws.string.substituteParams(Config.Strings.UnsubError,null!=n?n:m):
a)||Config.Strings.ReportSpamError)}})}),n=null;1===b.length&&(n=a.getUidData(b[0]));if(e&&null!=n&&Settings.EnableUnsubscribing&&n[a.columns.canUnsubscribe]){var m=n[a.columns.FromToAddress]||Config.Strings.None,g=null;Config.UseOMS&&Config.FriendlyName&&null!=n[a.columns.Description]&&""!=n[a.columns.Description]&&!0==Settings.ShowSenderDisplayName&&(g=ws.string.escapeXml(n[a.columns.Description]));ws.widget.Dialogs.showUnsubDialog(b,m,g,l)}else if(g&&Settings.UserHash>=Config.SpamDispositionThreshold){n=
{};g=!0;if(1>=b.length)for(var q=0;q<b.length;q++){var s=a.getUidData(b[q]),o=ws.WebSuite.spmGetDetailFromCode(s[a.columns.spamReason]),m=!0,u=ws.WebSuite.spamReasonUpdater(o.reason,m,s[a.columns.isSpam],a),o=o.detail;""===o&&"permitlist"===u&&""!==s[a.columns.FromToAddress]&&(o=s[a.columns.FromToAddress]);ws.WebSuite.spamReasonShouldBeShown(u,m)?n[u]?""!==o&&-1===n[u].indexOf(o)&&n[u].push(o):n[u]=""!==o?[o]:[]:g=!1}ws.lang.isEmptyObject(n)?l("nonSDdlg"):ws.widget.Dialogs.showSpamDisp(n,b,g,m,l)}else l("nonSDdlg")}},
_moveMessages:function(a,b,e,f){a&&b&&a.moveMessages({uids:b,destFolder:this.itemid,checkUndo:!0,load:j.hitch(this,function(g){e&&(g=g.canUndo?j.hitch(a,"undoMoveMessages",g.responseUIDs,this.itemid):null,1==b.length?j.publish("WSFeedbackStart",[ws.string.substituteParams(Config.Strings.MessageMoved,e),!0,g]):j.publish("WSFeedbackStart",[ws.string.substituteParams(Config.Strings.MessagesMoved,f.opSize,e),!0,g]))}),error:function(a){window.ws_ErrLgr&&!a&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,
"Dialogs.ok shown - Error Handler for model.moveMessages-_moveMessages file:dnd/suite.js");ws.widget.Dialogs.ok(a||Config.Strings.MoveMessageError)}})}})})},"dijit/_Widget":function(){define("dijit/_Widget","dojo/aspect,dojo/_base/config,dojo/_base/connect,dojo/_base/declare,dojo/has,dojo/_base/kernel,dojo/_base/lang,dojo/query,dojo/ready,./registry,./_WidgetBase,./_OnDijitClickMixin,./_FocusMixin,dojo/uacss,./hccss".split(","),function(g,j,f,a,b,e,h,k,l,n,m,q,s){function o(){}function u(a){return function(b,
e,g,k){return b&&"string"==typeof e&&b[e]==o?b.on(e.substring(2).toLowerCase(),h.hitch(g,k)):a.apply(f,arguments)}}g.around(f,"connect",u);e.connect&&g.around(e,"connect",u);g=a("dijit._Widget",[m,q,s],{onClick:o,onDblClick:o,onKeyDown:o,onKeyPress:o,onKeyUp:o,onMouseDown:o,onMouseMove:o,onMouseOut:o,onMouseOver:o,onMouseLeave:o,onMouseEnter:o,onMouseUp:o,constructor:function(a){this._toConnect={};for(var b in a)this[b]===o&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);
for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,b){return this[this._onMap(a)]===o?f.connect(this.domNode,a.toLowerCase(),this,b):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,b){e.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(a,b)},attr:function(a,b){if(j.isDebug){var f=arguments.callee._ach||(arguments.callee._ach=
{}),g=(arguments.callee.caller||"unknown caller").toString();f[g]||(e.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+g,"","2.0"),f[g]=!0)}return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){e.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?k("[widgetId]",this.containerNode).map(n.byNode):[]},_onShow:function(){this.onShow()},
onShow:function(){},onHide:function(){},onClose:function(){return!0}});b("dijit-legacy-requires")&&l(0,function(){require(["dijit/_base"])});return g})},"dojo/json":function(){define(["./has"],function(g){var j="undefined"!=typeof JSON;g.add("json-parse",j);g.add("json-stringify",j&&'{"a":1}'==JSON.stringify({a:0},function(a,b){return b||1}));if(g("json-stringify"))return JSON;var f=function(a){return('"'+a.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,
"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:g("json-parse")?JSON.parse:function(a,b){if(b&&!/^([\s\[\{]*(?:"(?:\\.|[^"])+"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(a))throw new SyntaxError("Invalid characters in JSON");return eval("("+a+")")},stringify:function(a,b,e){function g(a,j,m){b&&(a=b(m,a));var q;q=typeof a;if("number"==q)return isFinite(a)?a+"":"null";if("boolean"==q)return a+"";if(null===a)return"null";if("string"==typeof a)return f(a);
if("function"==q||"undefined"==q)return k;if("function"==typeof a.toJSON)return g(a.toJSON(m),j,m);if(a instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(b,e,f){b=a["getUTC"+e]()+(f?1:0);return 10>b?"0"+b:b});if(a.valueOf()!==a)return g(a.valueOf(),j,m);var s=e?j+e:"",o=e?" ":"",u=e?"\n":"";if(a instanceof Array){for(var o=a.length,p=[],m=0;m<o;m++)q=g(a[m],s,m),"string"!=typeof q&&(q="null"),p.push(u+s+q);return"["+p.join(",")+u+
j+"]"}p=[];for(m in a){var v;if(a.hasOwnProperty(m)){if("number"==typeof m)v='"'+m+'"';else if("string"==typeof m)v=f(m);else continue;q=g(a[m],s,m);"string"==typeof q&&p.push(u+s+v+":"+o+q)}}return"{"+p.join(",")+u+j+"}"}var k;"string"==typeof b&&(e=b,b=null);return g(a,"","")}}})},"ws/mail/MailFilters":function(){define("ws/mail/MailFilters",["dojo/_base/declare","dojo","dijit","ws/mail/MailFilterModel","ws/io"],function(g,j,f,a){return g(null,{filters:[],add:function(b,e){var f=new a;f.setFilter(b,
e);this.filters.push(f)},addAll:function(a){for(var e=0;e<a.length;e++)(Config.ShowStacksOnUI||"stack"!=a[e].filterType)&&this.add(a[e],e+1)},clear:function(){this.filters=[]},get:function(a){return this.filters[a]},size:function(){return this.filters.length},updatePriority:function(a){this.clearCache();this._filterAction("UpdatePriority",a)},setCache:function(a){window._g_ws_MailFilterCache=a},getCache:function(){return window._g_ws_MailFilterCache?window._g_ws_MailFilterCache:null},clearCache:function(){var a=
function(a){if(a._g_ws_MailFilterCache)try{delete a._g_ws_MailFilterCache}catch(b){}a._g_ws_MailFilterCache=null};a(window);window._ws_isOpenerWS()&&a(window.opener)},loadFromRpc:function(a,e){e?this.getCache()?a.load(this.getCache()):this._filterAction("GetList",{load:j.hitch(this,function(e){this.setCache(e);a.load(e)}),error:a.error}):this._filterAction("GetList",a)},getMobileNumber:function(a){this._filterAction("GetMobileNumber",a)},_filterAction:function(a,e){e.filterAction=a;ws.io.rpc({action:"FilterAction",
content:e,load:e.load,error:e.error})}})})},"dojo/touch":function(){define("dojo/touch","./_base/kernel,./aspect,./dom,./on,./has,./mouse,./domReady,./_base/window".split(","),function(g,j,f,a,b,e,h,k){function l(b,e){return n?function(f,g){var h=a(f,e,g),k=a(f,b,function(a){(!q||(new Date).getTime()>q+1E3)&&g.call(this,a)});return{remove:function(){h.remove();k.remove()}}}:function(e,f){return a(e,b,f)}}var n=b("touch"),m=!1;b("ios")&&(j=navigator.userAgent.match(/OS ([\d_]+)/)?RegExp.$1:"1",m=5>
parseFloat(j.replace(/_/,".").replace(/_/g,"")));var q,s,o;n&&(h(function(){o=k.body();k.doc.addEventListener("touchstart",function(b){q=(new Date).getTime();var e=o;o=b.target;a.emit(e,"dojotouchout",{target:e,relatedTarget:o,bubbles:!0});a.emit(o,"dojotouchover",{target:o,relatedTarget:e,bubbles:!0})},!0);a(k.doc,"touchmove",function(b){q=(new Date).getTime();if((b=k.doc.elementFromPoint(b.pageX-(m?0:k.global.pageXOffset),b.pageY-(m?0:k.global.pageYOffset)))&&o!==b)a.emit(o,"dojotouchout",{target:o,
relatedTarget:b,bubbles:!0}),a.emit(b,"dojotouchover",{target:b,relatedTarget:o,bubbles:!0}),o=b})}),s=function(b,e){return a(k.doc,"touchmove",function(a){if(b===k.doc||f.isDescendant(o,b))a.target=o,e.call(this,a)})});e={press:l("mousedown","touchstart"),move:l("mousemove",s),release:l("mouseup","touchend"),cancel:l(e.leave,"touchcancel"),over:l("mouseover","dojotouchover"),out:l("mouseout","dojotouchout"),enter:e._eventHandler(l("mouseover","dojotouchover")),leave:e._eventHandler(l("mouseout",
"dojotouchout"))};return g.touch=e})},"ws/widget/SearchAutoComplete":function(){define("ws/widget/SearchAutoComplete","dojo/_base/declare,dojo/text!ws/widget/SearchAutoComplete.html,dojo/text!ws/widget/SearchAutoComplete.css,dojo,dijit,dijit/_Widget,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,ws/widget/popup".split(","),function(g,j,f,a,b,e,h,k){return g([e,h,k],{templateString:j,css:{templateString:f},className:"",invocationType:null,SELECTED_CLASS:"selected",textbox:null,isOpen:!1,actionCB:null,
getWidthCB:null,isAutoCompleteEntry:!1,lastAutoComplete:null,postCreate:function(){if(Config.EnableHatRevenueSearchBar)this.invocationType=Config.HatRevenueSearchInvocationType;else{var a=Config.WebSearchUrl.match(/s_it=.+&/i);if(a&&a[0])this.invocationType=a[0].substring(5,a[0].length-1);else if((a=Config.WebSearchUrl.match(/invocationType=.+&/i))&&a[0])this.invocationType=a[0].substring(15,a[0].length-1)}this.invocationType&&(this.connect(document,"onclick","documentOnClick"),this.connect(this.textbox,
"onkeypress","textboxOnKeyPress"),this.connect(this.textbox,"onkeydown","textboxOnKeyDown"),this.connect(this.textbox,"onkeyup","textboxOnKeyUp"))},textboxOnKeyPress:function(a){if(13==a.keyCode&&"none"!=this.choices.style.display)this.choices.style.display="none",a.preventDefault()},documentOnClick:function(){this.choices.style.display="none"},textboxOnKeyDown:function(a){if("none"!=this.choices.style.display&&9==a.keyCode)this.choices.style.display="none"},isKey:function(){if(2>arguments.length)return!1;
for(var a=1;a<arguments.length;a++)if(arguments[0]==arguments[a])return!0;return!1},textboxOnKeyUp:function(b){b.stopPropagation();if(this.isKey(b.keyCode,38,40))this.checkUpDownArrows(b.keyCode);else{if(this.textbox.value!=this.lastAutoComplete)this.lastAutoComplete=null,this.isAutoCompleteEntry=!1;this.keypressTimeout&&clearTimeout(this.keypressTimeout);this.keypressTimeout=setTimeout(a.hitch(this,"_textboxOnKeyUp"),250)}},_textboxOnKeyUp:function(){""!=a.trim(this.textbox.value)?a.xhrGet({url:"/webmail/proxy/searchAutoComplete",
content:{q:this.textbox.value,it:this.invocationType,count:"8",output:"json"},timeout:5E3,handleAs:"json",preventCache:!0,load:a.hitch(this,"populateChoices"),error:a.hitch(this,"removeChoices",!0)}):this.removeChoices(!0)},checkUpDownArrows:function(a){if("none"!=this.choices.style.display){var b=this.getSelected(),e=this.choices.childNodes;-1==b?38==a?this.setSelected(0,e.length-1):40==a&&this.setSelected(0,0):38==a?0<=b-1?this.setSelected(b,b-1):0<e.length&&this.setSelected(b,e.length-1):40==a&&
(b+1<e.length?this.setSelected(b,b+1):this.setSelected(b,0))}},setSelected:function(b,e){var f=this.choices.childNodes;if(f&&f[e])f[b]&&a.removeClass(f[b],this.SELECTED_CLASS),a.addClass(f[e],this.SELECTED_CLASS),this.textbox.value=f[e].getAttribute("_wsACval")?f[e].getAttribute("_wsACval"):"",this.lastAutoComplete=this.textbox.value,this.isAutoCompleteEntry=!0},getSelected:function(){for(var b=null==this.choices.childNodes?0:this.choices.childNodes.length,e=0;e<b;e++)if(a.hasClass(this.choices.childNodes[e],
this.SELECTED_CLASS))return e;return-1},addItem:function(b){var e=this.textbox.value.toLowerCase(),f=b.toLowerCase().indexOf(e),g=b;0<=f&&f<b.length&&(f+=e.length,g=[b.slice(0,f),"<b>",b.slice(f),"</b>"].join(""));e=a.create("div",{innerHTML:g},this.choices);e.setAttribute("_wsACval",b);this.connect(e,"onmouseover","itemOnMouseOver");this.connect(e,"onclick","itemOnClick")},onOpen:function(){this.domNode&&this.domNode.parentNode&&a.addClass(this.domNode.parentNode,"SearchAutoCompleteDomNode");this.isOpen=
!0;if(this.getWidthCB&&this.choices)this.choices.style.width=this.getWidthCB()+"px"},onClose:function(){this.isOpen=!1},populateChoices:function(a,b){if(b&&b.xhr&&b.xhr.status&&200==b.xhr.status&&a&&a[1]){this.removeChoices();var e=a[1];if(0<e.length){for(var f=0;f<e.length;f++)this.addItem(e[f]);this.choices.style.display=0<this.choices.childNodes.length?"block":"none";this.isOpen||ws.widget.popup({popup:this,parent:null,around:this.textbox,orient:{BL:"TL"},padding:[0,0]})}else this.removeChoices(!0)}},
removeChoices:function(a){this.choices.innerHTML="";if(a)ws.widget.popup.close(this),this.isOpen=!1},itemOnMouseOver:function(b){var e=this.getSelected();-1!=e&&a.removeClass(this.choices.childNodes[e],this.SELECTED_CLASS);a.addClass(b.currentTarget,this.SELECTED_CLASS)},itemOnClick:function(a){this.textbox.focus();if(a&&a.currentTarget&&a.currentTarget.getAttribute("_wsACval")&&(this.textbox.value=a.currentTarget.getAttribute("_wsACval"),this.actionCB))this.isAutoCompleteEntry=!0,this.actionCB();
this.choices.style.display="none"}})})},"ws/browser":function(){define("ws/browser",["dojo","dojo/_base/lang"],function(g,j){j.setObject("ws.browser",{addOnBeforeUnload:function(f,a){if(!ws.browser._onBeforeUnloadAttached)ws.browser._onBeforeUnloadAttached=!0,ws.browser._oldOnBeforeUnloadHandler=window.onbeforeunload||function(){},ws.browser._onBeforeUnloadHandlers=[],window.onbeforeunload=ws.browser._onBeforeUnload;var b=1==arguments.length?f:g.hitch(f,a);ws.browser._onBeforeUnloadHandlers.push(b)},
_onBeforeUnload:function(){ws.browser._oldOnBeforeUnloadHandler();window.onbeforeunload=null;setTimeout(function(){window.onbeforeunload=ws.browser._onBeforeUnload},0);if(!ws.io.closeWindowInProgress)for(var f=0;f<ws.browser._onBeforeUnloadHandlers.length;f++){var a=ws.browser._onBeforeUnloadHandlers[f]();if(a)return a}},addDocumentOnClick:function(f,a){if(this._getDocClickHandlerObj())return g.connect(this._getDocClickHandlerObj(),"onclick",f,a)},_getDocClickHandlerObj:function(){if(!this._docClickHandlerInited){this._docClickHandlerInited=
!0;for(var f=[document,document.body,document.documentElement],a=function(){},b=0;b<f.length;b++)try{var e=g.connect(f[b],"onclick",a);g.disconnect(e);this._docClickHandlerObj=f[b];break}catch(h){}}return this._docClickHandlerObj},ns7:-1!=navigator.userAgent.indexOf("Netscape/7"),ns8:-1!=navigator.userAgent.indexOf("Netscape/8"),win98:-1!=navigator.userAgent.indexOf("Windows 98")||-1!=navigator.userAgent.indexOf("Win98"),win2k:-1!=navigator.userAgent.indexOf("Windows NT 5.0"),win:-1!=navigator.appVersion.indexOf("Windows"),
ipad:-1!=navigator.appVersion.indexOf("iPad"),isWindowFocused:!0,_trackWindowFocus:function(){g.isIE?(g.connect(g.body(),"onfocusin",this,"_onfocus"),g.connect(g.body(),"onfocusout",this,"_onblur")):(g.connect(window,"onfocus",this,"_onfocus"),g.connect(window,"onblur",this,"_onblur"))},_onfocus:function(){this.isWindowFocused=!0;this._clearFlashingWindowTitle()},_onblur:function(){this.isWindowFocused=!1},focus:function(f){this.isWindowFocused&&setTimeout(function(){try{f.focus()}catch(a){}},0)},
setWindowTitle:function(f){if(document.title!=this._flashingTitle)document.title=f;this._normalTitle=f},setFlashingWindowTitle:function(f){if(!this.isWindowFocused)this._clearFlashingWindowTitle(),this._flashingTitle=f,this._alternateWindowTitle()},_flashingTitle:null,_normalTitle:document.title,_alternateWindowTitle:function(){document.title=document.title==this._normalTitle?this._flashingTitle:this._normalTitle;this._flashTitleTimeout=window.setTimeout(g.hitch(this,"_alternateWindowTitle"),2E3)},
_clearFlashingWindowTitle:function(){this._flashingTitle=null;document.title=this._normalTitle;this._flashTitleTimeout&&window.clearTimeout(this._flashTitleTimeout)},registerMailToHandler:function(){3<=g.isFF&&window.navigator.registerProtocolHandler("mailto",Config.MailToAppUrl+"?to=%s",Config.Strings.FullProductName)}});g.addOnLoad(ws.browser,"_trackWindowFocus")})},"dojox/grid/data/Table":function(){define("dojox/grid/data/Table",["dojo/_base/declare","dojo","dojox/grid/data/Rows"],function(g,
j,f){g=g("dojox.grid.data.Table",f,{constructor:function(){this.cache=[]},colCount:0,data:null,cache:null,measure:function(){this.count=this.getRowCount();this.colCount=this.getColCount();this.allChange()},getRowCount:function(){return this.data?this.data.length:0},getColCount:function(){return this.data&&this.data.length?this.data[0].length:this.fields.count()},badIndex:function(){},isGoodIndex:function(a,b){return 0<=a&&a<this.count&&(2>arguments.length||0<=b&&b<this.colCount)},getRow:function(a){return this.data[a]},
copyRow:function(a){return this.getRow(a).slice(0)},getDatum:function(a,b){return this.data[a][b]},get:function(){throw'Plain "get" no longer supported. Use "getRow" or "getDatum".';},setData:function(a){this.data=a||[];this.allChange()},setRow:function(a,b){this.data[b]=a;this.rowChange(a,b);this.change()},setDatum:function(a,b,e){this.data[b][e]=a;this.datumChange(a,b,e)},set:function(){throw'Plain "set" no longer supported. Use "setData", "setRow", or "setDatum".';},setRows:function(a,b){for(var e=
0,f=a.length,g=b;e<f;e++,g++)this.setRow(a[e],g)},update:function(){return!0},_insert:function(a,b){dojox.grid.arrayInsert(this.data,b,a);this.count++;return!0},_remove:function(a){for(var b=a.length-1;0<=b;b--)dojox.grid.arrayRemove(this.data,a[b]);this.count-=a.length;return!0},sort:function(){this.data.sort(this.makeComparator(arguments))},swap:function(a,b){dojox.grid.arraySwap(this.data,a,b);this.rowChange(this.getRow(a),a);this.rowChange(this.getRow(b),b);this.change()},dummy:0});dojox.grid.data.table=
dojox.grid.data.Table;return g})},"ws/bootstrap":function(){define("ws/bootstrap","dojo/_base/declare,dojo,dijit,dojo/_base/lang,ws/mail/MailModel,ws/calendar/CalendarViewModel,ws/mail/folderName,ws/dojofixes,ws/io,ws/themes/ThemeConfig".split(","),function(g,j,f,a,b,e){if(3>j.isFF&&"undefined"==typeof console)g={},g.log=g.warn=g.debug=g.error=function(){},window.console=g;a.setObject("ws.bootstrap",{connectionSpeed:0,defaultDLTimeout:6E4,MAX_LEN:512,lmdata:"",lmtime:0,timerID:null,lmsent:!1,retries:0,
sending:!1,init:function(){window._g_ws_loginStartTime=new Date;try{this.defaultDLTimeout=DL_defaultTimeout}catch(a){this.defaultDLTimeout=6E4}_ws.updateProgress(100);this.timerID&&clearTimeout(this.timerID);var f=this.getTimeout();this.timerID=setTimeout(function(){if(ws&&ws.reporting&&ws.reporting.DL&&ws.reporting.DL.createAndSendEvent&&!ws.bootstrap.lmsent)ws.bootstrap.lmsent=!0,ws.reporting.DL.createAndSendEvent("load_mail","load_mail",{opResult:"timeout",opTime:f,opData:ws.bootstrap.lmdata})},
f);if(ws&&ws.CalSolo){var g={modelType:"event"};g.isAnonymous=0<document.location.toString().toLowerCase().indexOf("/anon/")?!0:!1;this.theCalendarModel=new e(g);this.theCalendarModel.isAnonymous=g.isAnonymous}else this.theMailModel=new b,_ws.updateProgress(125),ws.themes.ThemeConfig.init(),ws.mail.folderName.init();ws.WebSuite.initialize()},sendLoadMailReport:function(a){var b="";if(!this.lmsent)this.cancelTimer(),this.sending=!0,ws&&ws.reporting&&ws.reporting.DL&&ws.reporting.DL.createAndSendEvent?
(this.lmsent=!0,b=ws.reporting.DL.createAndSendEvent("load_mail","load_mail",a)):10>this.retries?(this.retries++,setTimeout(function(){ws.bootstrap.sendLoadMailReport(a)},5E3),b="retry"):(this.sending=!1,b="abort");return b},cancelTimer:function(){if(this.timerID)clearTimeout(this.timerID),this.timerID=null},reset:function(a){if("load_mail"==a)this.lmtime=(new Date).getTime(),this.lmdata=""},add:function(a,b){var e=(new Date).getTime();"load_mail"==a&&this.lmdata.length<this.MAX_LEN&&(this.lmdata+=
b+(e-this.lmtime),this.lmdata.length>this.MAX_LEN&&(this.lmdata+=".."))},getTimeout:function(){var a="60000,50000,40000";try{a=DL_loadMailTimeout}catch(b){a="60000,50000,40000"}var e=this.getConnSpeedFromCookie(),a=a.split(","),f=0;0.128<e&&1>=e?f=1:1<e&&(f=2);return a[f]?a[f]:this.defaultDLTimeout},getConnSpeedFromCookie:function(){if(0!=this.connectionSpeed)return this.connectionSpeed;var a=ws.io._getObjectCookie("DataLayer","=");if(a)this.connectionSpeed=a.cons||0;return this.connectionSpeed},
doToday:function(){},parseAppQueryCmd:function(){var a=ws.io._getObjectCookie(Config.WSGadgetCookieName,"="),b={at:["tid",null,"promoteTheme","tlabel",null],as:["sid",null,"promoteStationery","slabel",null]},e=ws.io.getQueryParameter("cmd");e||(e="");for(var f=e.split(","),g=f.length-1;0<=g;g--){var j=!1;if(e=f[g]){var s=ws.io.getQueryParameter(b[e][0]);if(null!=s&&(b[e][1]=s,j=!0,"as"==e||"at"==e))(s=ws.io.getQueryParameter(b[e][3]))&&(b[e][4]=s)}j||f.splice(g,1)}if(a)for(e in b)if(a[b[e][0]]&&!b[e][1]&&
(b[e][1]=a[b[e][0]],f[f.length]=e),a[b[e][0]]="","as"==e||"at"==e)a[b[e][3]]&&!b[e][4]&&(b[e][4]=a[b[e][3]]),a[b[e][3]]="";return{cookie:a,cmds:f,cmdMap:b}},isAddCommandParams:function(){var a=ws.bootstrap.parseAppQueryCmd();return a.cmds&&0<a.cmds.length?!0:!1}})})},"ws/calendar/CalendarViewModel":function(){define("ws/calendar/CalendarViewModel","dojo/_base/declare,dojo,ws/widget/Dialogs,ws/calendar/calutil,ws/io,ws/date".split(","),function(g,j){return g(null,{constructor:function(f){this.today=
this.dtend=this.dtstart=null;this.totalMatchingFilter=this.totalItems=0;this.sortDir=this.sortBy=null;this.isSuccess=!1;this.searchStr=null;this.currentServerTime=new Date;this.isDummyCalendarAccount=!1;this.indexEnum=this.componentEnum=this.calendarEnum=this.dayBucketIndex=this.index=this.components=this.calendars=null;this.isAnonymous=this.loadDataInProgress=!1;this.currentTZIDForPulldown=this.anonymousInitTZIDOffsetStr=this.anonymousCalid="";this.isModelFetchedOnce=!1;j.subscribe("CalendarViewModel/modelUpdated",
this,"doModelUpdated");j.subscribe("EditCalendar/Delete",this,"requestUpdate");j.subscribe("SettingsChanged/Calendar",this,"requestUpdateFullRefresh");if(f)this.modelType=f.modelType},setDummyTZID:function(){var f=null;this.isDummyCalendarAccount&&(f=ws.calendar.calutil.ConvertTimeZoneStringToTZID());return f},getDefaultArgs:function(f,a){var b={calendars:!0,components:!0,index:!1,dayBucketIndex:!0,enums:!this.calendarEnum?!0:!1,dtstart:!this.dtstart?null:ws.date.formatISO8601(this.dtstart),dtend:!this.dtend?
null:ws.date.formatISO8601(this.dtend),sortBy:this.sortBy,sortDir:this.sortDir,selectThisOnly:!1};if(null!=f&&f)b.index=!0;if(null!=a&&a)b.enums=!0;b.dummyTZID=this.setDummyTZID();return b},getDefaultTaskArgs:function(){return{compType:"Todo",calendars:!0,components:!0,index:!0,dayBucketIndex:!1,enums:!0,dtstart:null,dtend:null,sortBy:null,sortDir:null,dummyTZID:this.setDummyTZID()}},searchUpdated:function(){},getSearchArgsHelper:function(f,a,b,e){a={calendars:!0,components:!0,index:!0,dayBucketIndex:!0,
enums:!this.calendarEnum?!0:!1,dtstart:!this.dtstart?null:ws.date.formatISO8601(this.dtstart),dtend:!this.dtend?null:ws.date.formatISO8601(this.dtend),search:f,searchIn:a,sortBy:b,sortDir:e,dummyTZID:this.setDummyTZID()};this.searchStr=f;this.searchUpdated();return a},getSearchArgs:function(f,a){return this.getSearchArgsHelper(f,a,this.sortBy,this.sortDir)},setSortData:function(f,a){f&&this.getData(this.getSearchArgsHelper(this.searchStr,null,f,a))},setSearchStr:function(f,a){if(!((null==a||!a)&&
f==this.searchStr))this.searchStr=f,this.getData(this.getSearchArgs(this.searchStr))},getSearchString:function(){return this.searchStr},refreshSearchResult:function(){this.getData(this.getSearchArgs(this.searchStr))},getDefaultCalendarArgs:function(){for(var f=this.getDefaultArgs(),a=this.getCalendarList().length;this.calendars["New Calendar"+a];)a++;f.displayName="New Calendar"+a;f.selected=!0;return f},getCalendarArgs:function(f,a){var b=this.getDefaultArgs(a),e;for(e in this.calendarEnum)switch(e){case "calType":case "compType":case "creatorType":var g=
f[this.calendarEnum[e]];g&&(b[e]=g.toString());break;case "writable":case "selected":case "syncable":case "worldReadable":case "birthdayCal":b[e]=f[this.calendarEnum[e]]?!0:!1;break;case "id":b.calid=f[this.calendarEnum[e]];break;default:b[e]=f[this.calendarEnum[e]]}return b},getDefaultComponentArgs:function(f){f=this.getDefaultArgs(f);f.start=ws.date.formatISO8601(new Date);f.allDay=!0;f.summary="Appointment";return f},getComponentArgs:function(f){var a=this.getDefaultArgs(),b;for(b in this.componentEnum)switch(b){case "allDay":case "reminderEnabled":a[b]=
f[this.componentEnum[b]]?!0:!1;break;case "start":case "recurEnd":case "end":case "completed":var e=f[this.componentEnum[b]];e&&(a[b]=ws.date.formatISO8601(e));break;case "compType":case "recurType":(e=f[this.componentEnum[b]])&&(a[b]=e.toString());break;default:a[b]=f[this.componentEnum[b]]}return a},getComponentArgsForTask:function(f){f=this.getComponentArgs(f);f.compType="Todo";f.calendars=!0;f.components=!0;f.index=!0;f.dayBucketIndex=!1;f.enums=!0;f.sortBy=null;f.sortDir=null;return f},getDataSettingsChanged:function(){this.needsRepaint=
!0;var f=!1;null!=this.retrieveIndexOnGetDataCB&&(f=this.retrieveIndexOnGetDataCB());this.getData(null,f,!0)},calRpc:function(f){f.isCalendar=!0;if(this.isAnonymous){if(f&&f.content){f.content.isAnonymous=!0;f.content.calid=this.anonymousCalid;f.content.initTZIDOffsetStr=this.anonymousInitTZIDOffsetStr;if(this.anonymousTicket)f.content.ticket=this.anonymousTicket;if(""!=this.currentTZIDForPulldown)f.content.tzidSetting=this.currentTZIDForPulldown}(!f||!(f.content&&"Todo"==f.content.compType))&&ws.io.rpcAnonymous(f)}else f.content.tg=
ws.UserContext.ActiveScreenName,ws.io.rpc(f)},getData:function(f,a,b){f||(f=this.getDefaultArgs(a,b));f.forceRefreshIfExpired=!this.isModelFetchedOnce;this.loadDataInProgress=!0;this.calRpc({action:"GetCalendarData",content:f,load:j.hitch(this,"processResponse"),error:function(a){this.loadDataInProgress=!1;window.ws_ErrLgr&&!a&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for GetCalendarData-getData file:CalendarViewModel.js");ws.widget.Dialogs.ok(Config.Strings.Cal_ServiceTemporarilyUnavailable)}})},
saveCalendar:function(f){f||(f=this.getDefaultCalendarArgs());this.loadDataInProgress=!0;this.calRpc({action:"SaveCalendar",content:f,load:j.hitch(this,function(a){this.processResponse(a,!0);f.loadCallback&&f.loadCallback()}),error:function(a){this.loadDataInProgress=!1;f.id?f.showNotification&&(window.ws_ErrLgr&&!a&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for showNotification-saveCalendar file:CalendarViewModel.js"),ws.widget.Dialogs.ok(ws.string.substituteParams(Config.Strings.CalendarUpdatedError,
f.displayName))):(window.ws_ErrLgr&&!a&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for SaveCalendar-saveCalendar file:CalendarViewModel.js"),ws.widget.Dialogs.ok(ws.string.substituteParams(Config.Strings.CalendarAddedError,f.displayName)));f.errorCallback&&f.errorCallback()}})},deleteCalendar:function(f){if(f&&f.calid)this.loadDataInProgress=!0,this.calRpc({action:"DeleteCalendar",content:f,load:j.hitch(this,function(a){this.processResponse(a,!0);f.loadCallback&&
f.loadCallback()}),error:function(a){j.publish("WSFeedbackEnd",[Config.Strings.Loading]);this.loadDataInProgress=!1;window.ws_ErrLgr&&!a&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for DeleteCalendar-deleteCalendar file:CalendarViewModel.js");ws.widget.Dialogs.ok(ws.string.substituteParams(Config.Strings.CalendarDeletedError,f.displayName));f.errorCallback&&f.errorCallback()}})},saveComponent:function(f,a){f||(f=this.getDefaultComponentArgs(a));if(a&&this.searchStr)f.search=
this.searchStr,f.searchIn=null,f.sortBy=this.sortBy,f.sortDir=this.sortDir,f.ignoreCache=!0;this.loadDataInProgress=!0;this.calRpc({action:"SaveComponent",content:f,load:j.hitch(this,function(a){this.processResponse(a,!0,f.id?"update":"create");f.loadCallback&&f.loadCallback()}),error:function(a){this.loadDataInProgress=!1;window.ws_ErrLgr&&!a&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for SaveComponent-saveComponent file:CalendarViewModel.js");ws.widget.Dialogs.ok(Config.Strings.CalServerErrorSaving)}})},
importFromFile:function(f){var a=f.formNode;delete f.formNode;this.loadDataInProgress=!0;this.calRpc({action:"CalendarImport",content:f,formNode:a,load:f.load,error:f.error});this.getData()},doModelUpdated:function(f){f!=this&&f&&f.modelType==this.modelType&&this.requestUpdate()},modelUpdated:function(){},requestUpdate:function(){},requestUpdateFullRefresh:function(){},processResponse:function(f,a,b){this.loadDataInProgress=!1;if(!1===this.isModelFetchedOnce)this.isModelFetchedOnce=!0;this.dtstart=
f.dtstart;this.dtend=f.dtend;this.today=f.today;this.totalItems=f.totalItems;this.totalMatchingFilter=f.totalMatchingFilter;this.sortBy=f.sortBy;this.sortDir=f.sortDir;this.currentServerTime=f.currentServerTime;this.newComponents=[];this.isSuccess=f.isSuccess;if(f.calendars)this.calendars=f.calendars;if(f.components)this.components=f.components;if(f.index)this.index=f.index;if(f.dayBucketIndex)this.dayBucketIndex=f.dayBucketIndex;if(f.newComponents&&f.newComponents.length)this.newComponents=f.newComponents;
if(f.calendarEnum)this.calendarEnum=f.calendarEnum;if(f.componentEnum)this.componentEnum=f.componentEnum;if(f.indexEnum)this.indexEnum=f.indexEnum;if(null!==f.isDummyCalendarAccount)!0==this.isDummyCalendarAccount&&!1==f.isDummyCalendarAccount&&j.publish("CalendarViewModel/CalendarAccountCreated"),this.isDummyCalendarAccount=f.isDummyCalendarAccount;if(f.currentTZID)this.currentTZIDForPulldown=f.currentTZID;this.anonymousInitTZIDOffsetStr="";this.modelUpdated();a&&j.publish("CalendarViewModel/modelUpdated",
[this]);f.reminderUpdateError?j.publish("WSFeedbackStart",[f.reminderUpdateError,!0]):f.calDisabledError?ws.widget.Dialogs.ok(f.calDisabledError):b&&("update"==b?j.publish("WSFeedbackStart",[Config.Strings.EventUpdated,!0]):j.publish("WSFeedbackStart",[Config.Strings.EventCreated,!0]))},toggleSelectRow:function(){},deleteEvents:function(f){if(f)this.loadDataInProgress=!0,j.publish("wsapi/postEvent",["calEventDelete",{evtId:f.id}]),this.calRpc({action:"DeleteComponent",content:f,load:j.hitch(this,
function(a){this.processResponse(a,!0);f.loadCallback&&f.loadCallback()}),error:function(a){a&&ws.widget.Dialogs.ok(a);window.ws_ErrLgr&&!a&&ws_ErrLgr.logError(ws_ErrLgr.cat.ProgErr,"Error Handler for DeleteComponent-deleteEvents file:CalendarViewModel.js");this.loadDataInProgress=!1}})},calendarComparator:function(f,a){var b=f[3],e=a[3];if(0==b&&0!=e)return-1;if(0!=b&&0==e)return 1;if(1==b&&1!=e)return-1;if(1!=b&&1==e)return 1;b=f[2].toLowerCase();e=a[2].toLowerCase();return b<=e?-1:1},isLoading:function(){return!this.isSuccess||
this.loadDataInProgress},getCalendarList:function(){var f=[],a=0;if(!this.calendars)return f;for(var b in this.calendars)f[a]=this.calendars[b],a++;f.sort(this.calendarComparator);return f}})})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(g,j,f,a){var b={fieldToObject:function(a){var b=null;if(a=j.byId(a)){var f=a.name,g=(a.type||"").toLowerCase();if(f&&g&&!a.disabled)if("radio"==g||"checkbox"==g){if(a.checked)b=a.value}else if(a.multiple){b=[];for(a=
[a.firstChild];a.length;)for(f=a.pop();f;f=f.nextSibling)if(1==f.nodeType&&"option"==f.tagName.toLowerCase())f.selected&&b.push(f.value);else{f.nextSibling&&a.push(f.nextSibling);f.firstChild&&a.push(f.firstChild);break}}else b=a.value}return b},toObject:function(a){for(var f={},a=j.byId(a).elements,k=0,l=a.length;k<l;++k){var n=a[k],m=n.name,q=(n.type||"").toLowerCase();if(m&&q&&0>"file|submit|image|reset|button".indexOf(q)&&!n.disabled){var s=f,o=m,n=b.fieldToObject(n);if(null!==n){var u=s[o];"string"==
typeof u?s[o]=[u,n]:g.isArray(u)?u.push(n):s[o]=n}if("image"==q)f[m+".x"]=f[m+".y"]=f[m].x=f[m].y=0}}return f},toQuery:function(a){return f.objectToQuery(b.toObject(a))},toJson:function(e,f){return a.stringify(b.toObject(e),null,f?4:0)}};return b})},"ws/address/SingleAddressField":function(){define("ws/address/SingleAddressField",["dojo/_base/declare","dojo","dijit","ws/address/AddressField"],function(g,j,f,a){return g([a],{templateString:"<input maxlength='${maxlength}' type='text' data-dojo-attach-point='field' data-dojo-attach-event='onkeydown: onKeyDown, onkeypress: onKeyPress' tabindex='${tabindex}' class='wsInput' style='width: ${fieldWidth};' value='${value}' />",
maxlength:Config.MaxFilterFieldLength,isSingle:!0,resizeSelf:function(){},scrollToEnd:function(){}})})},"ws/widget/CalendarColorPickerMenuItem":function(){define("ws/widget/CalendarColorPickerMenuItem",["dojo/_base/declare","dojo","dijit","ws/widget/WSMenuItem","ws/string"],function(g,j,f,a){return g("ws.widget.CalendarColorPickerMenuItem",[a],{colors:"009712,0360EB,CC0000,E76808,808000,6600FF,008080,800080,6C6C6C,0088FF,646496,FF0080".split(","),_getHoverColor:function(){return"#fff"},setCurrentColor:function(){for(var a=
"",e=0;e<this.colors.length;e++)a+=ws.string.substituteParams("{br}<img src='{spacer}' class='wsCalCB wsCalCB_{color} {checked}'>",{spacer:Config.SpacerImageURL,color:this.colors[e],checked:" checked",br:e==this.colors.length/2?"<br>":""});this.labelNode.innerHTML=a},_onClick:function(a){a.target&&j.forEach(this.colors,function(e){j.hasClass(a.target,"wsCalCB_"+e)&&(this.onClick("#"+e),this.getParent()&&this.getParent().close())},this)}})})},"ws/widget/WSToolbar":function(){define("ws/widget/WSToolbar",
"dojo/_base/declare,dojo/text!ws/widget/WSToolbar.css,dojo,dijit,dijit/_Widget,dijit/_Templated,dijit/_Container,ws/html".split(","),function(g,j,f,a,b,e,h){return g([b,e,h],{templateString:'<div class="wsToolbar">\t<div class="containerNode" data-dojo-attach-point="containerNode" style="float: left;"></div>\t<div class="centerNode" data-dojo-attach-point="centerNode" style="float: left;"></div>\t<div class="rightNode" data-dojo-attach-point="rightNode" style="float: right;"></div></div>',css:{templateString:j},
vizType:"",defaultWidth:-1,alwaysShowRightNode:!0,webKitLeftWidthMargin:0,minItemSize:10,wrapState:0,startup:function(){if(this.vizType&&(f.addClass(this.domNode,"wsToolbar"+this.vizType),"Bare"==this.vizType))this.domNode.style.backgroundColor="transparent";if("Controls"==this.vizType)ws.html.setFloat(this.rightNode,"none"),this.rightNode.style.position="absolute",this.rightNode.style.right="0px",this.rightNode.style.top="0px";f.forEach(this.getChildren(),f.hitch(this,"_processChild"));f.isIE&&(setTimeout(f.hitch(this,
"fixButtons"),10),this.connect(window,"onresize","fixButtons"));setTimeout(f.hitch(this,"layout"),0);this.subscribe("toolbarLayoutUpdate","layout")},addToolbarItem:function(a){this.addChild(a);this._processChild(a)},_processChild:function(a){var b="left";"right"==a.toolbarPosition&&(b="right");ws.html.setFloat(a.domNode,b);if(b="center"==a.toolbarPosition?this.centerNode:"right"==a.toolbarPosition?this.rightNode:null)this.containerNode.removeChild(a.domNode),b.appendChild(a.domNode)},fixButtons:function(){if(null!=
this.domNode)this.domNode.style.zoom="",this.domNode.style.zoom=1},onResized:function(){this.skipLayout?this.skipLayout=!1:this.layout()},layout:function(){this.containerNode.style.width="";this.centerNode.style.width="";this.rightNode.style.width="";var a=function(a,b,e,g){var h=0;f.forEach(a.childNodes,function(a){if(1==a.nodeType)a=f._getMarginSize(a).w,a>e&&(h+=a+(f.isIE&&0==window._g_WS_WebFont.fontMode?g:g+1)),b&&b.push(h)});return h},b=a(this.containerNode,f.isIE?[]:null,this.minItemSize,"Controls"==
this.vizType?0:5)+2;f.isWebKit&&(b+=this.webKitLeftWidthMargin);var e=a(this.rightNode,null,this.minItemSize,"Controls"==this.vizType?3:5),a=a(this.centerNode,null,this.minItemSize,5),g=this.getWidth();if(this.alwaysShowRightNode&&0<g){var h=f.isIE?20:0,j=f.hasClass(f.body(),"btnLabelsOn2")?40:30;if(g<b+h+a+e+(f.isIE?0:10)){if("Controls"==this.vizType)this.rightNode.style.top=j+2+"px",this.domNode.style.height=2*j+"px";if(1!=this.wrapState)this.wrapState=1,this._wrap()}else{if("Controls"==this.vizType)this.rightNode.style.top=
"0px",this.domNode.style.height=j+"px";if(1==this.wrapState)this.wrapState=2,this._wrap()}}this.centerNode.style.marginLeft=Math.round((g-(b+e+a))/2)+"px";f.contentBox(this.containerNode,{w:Math.min(g,b)});f.contentBox(this.rightNode,{w:Math.min(g,e)});f.contentBox(this.centerNode,{w:Math.min(g,a)});f.isIE&&setTimeout(f.hitch(this,"fixButtons"),10)},_wrap:function(){setTimeout(f.hitch(this,"wrap"),100)},wrap:function(){},getWidth:function(){var a=f.contentBox(this.domNode).w;if(0==a&&-1<this.defaultWidth)a=
this.defaultWidth;return a}})})},"url:ws/widget/WSSelect.css":""}});(function(){var g=this.require;g({cache:{}});!g.async&&g(["dojo"]);g.boot&&g.apply(null,g.boot)})();